{"version":3,"sources":["meteor://ðŸ’»app/client/main.coffee"],"names":[],"mappings":"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","file":"/client/main.coffee.js","sourcesContent":["# Helper to load javascript libraries from the BBB server\r\nloadLib = (libname) ->\r\n  successCallback = ->\r\n\r\n  retryMessageCallback = (param) ->\r\n    #Meteor.log.info \"Failed to load library\", param\r\n    console.log \"Failed to load library\", param\r\n\r\n  Meteor.Loader.loadJs(\"#{window.location.origin}/client/lib/#{libname}\", successCallback, 10000).fail(retryMessageCallback)\r\n\r\n# These settings can just be stored locally in session, created at start up\r\nMeteor.startup ->\r\n  # Load SIP libraries before the application starts\r\n  loadLib('sip.js')\r\n  loadLib('bbb_webrtc_bridge_sip.js')\r\n  loadLib('bbblogger.js')\r\n\r\n  @SessionAmplify = _.extend({}, Session,\r\n    keys: _.object(_.map(amplify.store.sessionStorage(), (value, key) ->\r\n      [\r\n        key\r\n        JSON.stringify(value)\r\n      ]\r\n    ))\r\n    set: (key, value) ->\r\n      Session.set.apply this, arguments\r\n      amplify.store.sessionStorage key, value\r\n      return\r\n  )\r\n#\r\nTemplate.header.events\r\n  \"click .chatBarIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleChatbar()\r\n\r\n  \"click .hideNavbarIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleNavbar()\r\n\r\n  \"click .leaveAudioButton\": (event) ->\r\n    exitVoiceCall event\r\n\r\n  \"click .muteIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleMic @\r\n\r\n  \"click .hideNavbarIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleNavbar()\r\n\r\n  \"click .videoFeedIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleCam @\r\n\r\n  \"click .toggleUserlistButton\": (event) ->\r\n    if isLandscape() or isLandscapeMobile()\r\n      toggleUsersList()\r\n    else\r\n      if $('.settingsMenu').hasClass('menuOut')\r\n        toggleSettingsMenu()\r\n        toggleRightHamburderIcon()\r\n      else\r\n        toggleShield()\r\n      toggleUserlistMenu()\r\n      toggleLeftHamburderIcon()\r\n\r\n  \"click .toggleMenuButton\": (event) ->\r\n    if $('.userlistMenu').hasClass('menuOut')\r\n      toggleUserlistMenu()\r\n      toggleLeftHamburderIcon()\r\n    else\r\n      toggleShield()\r\n    toggleSettingsMenu()\r\n    toggleRightHamburderIcon()\r\n\r\n  \"click .btn\": (event) ->\r\n    $(\".ui-tooltip\").hide()\r\n\r\nTemplate.menu.events\r\n  'click .slideButton': (event) ->\r\n    toggleShield()\r\n    toggleSettingsMenu()\r\n    toggleRightHamburderIcon()\r\n    $('.slideButton').blur()\r\n\r\n  'click .toggleChatButton': (event) ->\r\n    toggleChatbar()\r\n\r\nTemplate.main.rendered = ->\r\n  $(\"#dialog\").dialog(\r\n    modal: true\r\n    draggable: false\r\n    resizable: false\r\n    autoOpen: false\r\n    dialogClass: 'no-close logout-dialog'\r\n    buttons: [\r\n      {\r\n        text: 'Yes'\r\n        click: () ->\r\n          userLogout BBB.getMeetingId(), getInSession(\"userId\"), true\r\n          $(this).dialog(\"close\")\r\n        class: 'btn btn-xs btn-primary active'\r\n      }\r\n      {\r\n        text: 'No'\r\n        click: () ->\r\n          $(this).dialog(\"close\")\r\n          $(\".tooltip\").hide()\r\n        class: 'btn btn-xs btn-default'\r\n      }\r\n    ]\r\n    open: (event, ui) ->\r\n      $('.ui-widget-overlay').bind 'click', () ->\r\n        if isMobile()\r\n          $(\"#dialog\").dialog('close')\r\n    position:\r\n      my: 'right top'\r\n      at: 'right bottom'\r\n      of: '.signOutIcon'\r\n  )\r\n\r\n  # keep track of the last orientation\r\n  lastOrientationWasLandscape = isLandscape()\r\n  $(window).resize( ->\r\n    $('#dialog').dialog('close')\r\n\r\n    # when the orientation switches call the handler\r\n    if isLandscape() and not lastOrientationWasLandscape\r\n        orientationBecameLandscape()\r\n        lastOrientationWasLandscape = true\r\n    else if isPortrait() and lastOrientationWasLandscape\r\n        orientationBecamePortrait()\r\n        lastOrientationWasLandscape = false\r\n  )\r\n\r\n  $('#shield').click () ->\r\n    toggleSlidingMenu()\r\n\r\n  if Meteor.config.app.autoJoinAudio\r\n    onAudioJoinHelper()\r\n\r\nTemplate.main.events\r\n  'click .shield': (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleShield()\r\n    closeMenus()\r\n\r\n  'click .settingsIcon': (event) ->\r\n    $(\"#settingsModal\").foundation('reveal', 'open');\r\n\r\n  'click .signOutIcon': (event) ->\r\n    $('.signOutIcon').blur()\r\n    $(\"#logoutModal\").foundation('reveal', 'open');\r\n\r\nTemplate.main.gestures\r\n  'panstart #container': (event, template) ->\r\n    if isPortraitMobile() and isPanHorizontal(event)\r\n      panIsValid = getInSession('panIsValid')\r\n      initTransformValue = getInSession('initTransform')\r\n      menuPanned = getInSession('menuPanned')\r\n      screenWidth = $('#container').width()\r\n\r\n      setInSession 'panStarted', true\r\n\r\n      if panIsValid and\r\n      menuPanned is 'left' and\r\n      initTransformValue + event.deltaX >= 0 and\r\n      initTransformValue + event.deltaX <= $('.left-drawer').width()\r\n        $('.left-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n      else if panIsValid and\r\n      menuPanned is 'right' and\r\n      initTransformValue + event.deltaX >= screenWidth - $('.right-drawer').width() and\r\n      initTransformValue + event.deltaX <= screenWidth\r\n        $('.right-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n  'panend #container': (event, template) ->\r\n    if isPortraitMobile()\r\n      panIsValid = getInSession('panIsValid')\r\n      menuPanned = getInSession('menuPanned')\r\n      leftDrawerWidth = $('.left-drawer').width()\r\n      screenWidth = $('#container').width()\r\n\r\n      setInSession 'panStarted', false\r\n\r\n      if panIsValid and\r\n      menuPanned is 'left' and\r\n      $('.left-drawer').css('transform') isnt 'none'\r\n\r\n        if parseInt($('.left-drawer').css('transform').split(',')[4]) < leftDrawerWidth / 2\r\n          $('.shield').removeClass('animatedShield')\r\n          $('.shield').css('opacity', '')\r\n          $('.left-drawer').removeClass('menuOut')\r\n          $('.left-drawer').css('transform', '')\r\n          $('.toggleUserlistButton').removeClass('hamburgerToggledOn')\r\n          $('.shield').removeClass('darken') # in case it was opened by clicking a button\r\n        else\r\n          $('.left-drawer').css('transform', 'translateX(' + leftDrawerWidth + 'px)')\r\n          $('.shield').css('opacity', 0.5)\r\n          $('.left-drawer').addClass('menuOut')\r\n          $('.left-drawer').css('transform', '')\r\n          $('.toggleUserlistButton').addClass('hamburgerToggledOn')\r\n\r\n      if panIsValid and\r\n      menuPanned is 'right' and\r\n      parseInt($('.right-drawer').css('transform').split(',')[4]) isnt leftDrawerWidth\r\n\r\n        if parseInt($('.right-drawer').css('transform').split(',')[4]) > screenWidth - $('.right-drawer').width() / 2\r\n          $('.shield').removeClass('animatedShield')\r\n          $('.shield').css('opacity', '')\r\n          $('.right-drawer').css('transform', 'translateX(' + screenWidth + 'px)')\r\n          $('.right-drawer').removeClass('menuOut')\r\n          $('.right-drawer').css('transform', '')\r\n          $('.toggleMenuButton').removeClass('hamburgerToggledOn')\r\n          $('.shield').removeClass('darken') # in case it was opened by clicking a button\r\n        else\r\n          $('.shield').css('opacity', 0.5)\r\n          $('.right-drawer').css('transform', 'translateX(' + (screenWidth - $('.right-drawer').width()) + 'px)')\r\n          $('.right-drawer').addClass('menuOut')\r\n          $('.right-drawer').css('transform', '')\r\n          $('.toggleMenuButton').addClass('hamburgerToggledOn')\r\n\r\n      $('.left-drawer').addClass('userlistMenu')\r\n      $('.userlistMenu').removeClass('left-drawer')\r\n\r\n      $('.right-drawer').addClass('settingsMenu')\r\n      $('.settingsMenu').removeClass('right-drawer')\r\n\r\n  'panright #container, panleft #container': (event, template) ->\r\n    if isPortraitMobile() and isPanHorizontal(event)\r\n\r\n      # panright/panleft is always triggered once right before panstart\r\n      if !getInSession('panStarted')\r\n\r\n        # opening the left-hand menu\r\n        if event.type is 'panright' and\r\n        event.center.x <= $('#container').width() * 0.1\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'left'\r\n\r\n        # closing the left-hand menu\r\n        else if event.type is 'panleft' and\r\n        event.center.x < $('#container').width() * 0.9\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'left'\r\n\r\n        # opening the right-hand menu\r\n        else if event.type is 'panleft' and\r\n        event.center.x >= $('#container').width() * 0.9\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'right'\r\n\r\n        # closing the right-hand menu\r\n        else if event.type is 'panright' and\r\n        event.center.x > $('#container').width() * 0.1\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'right'\r\n\r\n        else\r\n          setInSession 'panIsValid', false\r\n\r\n        setInSession 'eventType', event.type\r\n\r\n        if getInSession('menuPanned') is 'left'\r\n          if $('.userlistMenu').css('transform') isnt 'none' # menu is already transformed\r\n            setInSession 'initTransform', parseInt($('.userlistMenu').css('transform').split(',')[4]) # translateX value\r\n          else if $('.userlistMenu').hasClass('menuOut')\r\n            setInSession 'initTransform', $('.userlistMenu').width()\r\n          else\r\n            setInSession 'initTransform', 0\r\n          $('.userlistMenu').addClass('left-drawer')\r\n          $('.left-drawer').removeClass('userlistMenu') # to prevent animations from Sled library\r\n\r\n        else if getInSession('menuPanned') is 'right'\r\n          if $('.settingsMenu').css('transform') isnt 'none' # menu is already transformed\r\n            setInSession 'initTransform', parseInt($('.settingsMenu').css('transform').split(',')[4]) # translateX value\r\n          else if $('.settingsMenu').hasClass('menuOut')\r\n            setInSession 'initTransform', $('.settingsMenu').width()\r\n          else\r\n            setInSession 'initTransform', 0\r\n          $('.settingsMenu').addClass('right-drawer')\r\n          $('.right-drawer').removeClass('settingsMenu') # to prevent animations from Sled library\r\n\r\n      initTransformValue = getInSession('initTransform')\r\n      panIsValid = getInSession('panIsValid')\r\n      menuPanned = getInSession('menuPanned')\r\n      leftDrawerWidth = $('.left-drawer').width()\r\n      rightDrawerWidth = $('.right-drawer').width()\r\n      screenWidth = $('#container').width()\r\n\r\n      # moving the left-hand menu\r\n      if panIsValid and\r\n      menuPanned is 'left' and\r\n      initTransformValue + event.deltaX >= 0 and\r\n      initTransformValue + event.deltaX <= leftDrawerWidth\r\n\r\n        if $('.settingsMenu').hasClass('menuOut')\r\n          toggleSettingsMenu()\r\n          toggleRightHamburderIcon()\r\n\r\n        $('.left-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n        if !getInSession('panStarted')\r\n          $('.shield').addClass('animatedShield')\r\n        $('.shield').css('opacity',\r\n          0.5 * (initTransformValue + event.deltaX) / leftDrawerWidth)\r\n\r\n      # moving the right-hand menu\r\n      else if panIsValid and\r\n      menuPanned is 'right' and\r\n      initTransformValue + event.deltaX >= screenWidth - rightDrawerWidth and\r\n      initTransformValue + event.deltaX <= screenWidth\r\n\r\n        if $('.userlistMenu').hasClass('menuOut')\r\n          toggleUserlistMenu()\r\n          toggleLeftHamburderIcon()\r\n\r\n        $('.right-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n        if !getInSession('panStarted')\r\n          $('.shield').addClass('animatedShield')\r\n        $('.shield').css('opacity',\r\n          0.5 * (screenWidth - initTransformValue - event.deltaX) / rightDrawerWidth)\r\n\r\nTemplate.makeButton.rendered = ->\r\n  $('button[rel=tooltip]').tooltip()\r\n"]}