[{"type":"js","data":"/* Imports for global scope */\n\nredis = Package['mrt:redis'].redis;\nAsync = Package['arunoda:npm'].Async;\n_ = Package.underscore._;\nRouter = Package['iron:router'].Router;\nRouteController = Package['iron:router'].RouteController;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nStatus = Package['francocatena:status'].Status;\nWinston = Package['brentjanderson:winston-client'].Winston;\nTimeSync = Package['mizzao:timesync'].TimeSync;\nRaphael = Package['agnito:raphael'].Raphael;\nHammer = Package['chriswessels:hammer'].Hammer;\nFastClick = Package.fastclick.FastClick;\nPowerQueue = Package['cfs:power-queue'].PowerQueue;\nReactiveList = Package['cfs:reactive-list'].ReactiveList;\nMicroQueue = Package['cfs:micro-queue'].MicroQueue;\nReactiveVar = Package['reactive-var'].ReactiveVar;\nIron = Package['iron:core'].Iron;\nHTML = Package.htmljs.HTML;\nTAPi18next = Package['tap:i18n'].TAPi18next;\nTAPi18n = Package['tap:i18n'].TAPi18n;\nMeteor = Package.meteor.Meteor;\nWebApp = Package.webapp.WebApp;\nLog = Package.logging.Log;\nTracker = Package.deps.Tracker;\nDeps = Package.deps.Deps;\nSession = Package.session.Session;\nDDP = Package['ddp-client'].DDP;\nMongo = Package.mongo.Mongo;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package.templating.Template;\ncheck = Package.check.check;\nMatch = Package.check.Match;\n$ = Package.jquery.$;\njQuery = Package.jquery.jQuery;\nRandom = Package.random.Random;\nEJSON = Package.ejson.EJSON;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"(function(){\nTemplate.__checkName(\"chatbar\");\nTemplate[\"chatbar\"] = new Template(\"Template.chatbar\", (function() {\n  var view = this;\n  return HTML.DIV(HTML.Attrs({\n    id: function() {\n      return Spacebars.mustache(view.lookup(\"id\"));\n    },\n    \"class\": \"component\"\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"visibility\"), view.lookup(\"name\"));\n  }), \"\\n    \", HTML.DIV({\n    \"class\": \"chatBodyContainer\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inPrivateChat\"));\n  }, function() {\n    return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"privateChatTab\")), \"\\n      \" ];\n  }), \"\\n      \", HTML.DIV({\n    id: \"chatbody\"\n  }, \"\\n        \", HTML.UL(HTML.Attrs({\n    \"class\": \"chat\"\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n  }), \"\\n          \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getCombinedMessagesForChat\"));\n  }, function() {\n    return [ \"\\n            \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"message\"));\n    }, function() {\n      return [ \"\\n              \", HTML.LI(Spacebars.include(view.lookupTemplate(\"message\"))), \"\\n            \" ];\n    }), \"\\n          \" ];\n  }), \"\\n          \", Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"userExists\"));\n  }, function() {\n    return HTML.LI(\"The user has left\");\n  }), \"\\n        \"), \"\\n      \"), \"\\n    \"), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"userExists\"));\n  }, function() {\n    return [ \"\\n      \", HTML.DIV({\n      \"class\": \"panel-footer\"\n    }, Spacebars.include(view.lookupTemplate(\"chatInput\"))), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"privateChatTab\");\nTemplate[\"privateChatTab\"] = new Template(\"Template.privateChatTab\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"privateChatTab\"\n  }, \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"close\"),\n      btn_class: Spacebars.call(\"secondary tiny toPublic \"),\n      i_class: Spacebars.call(\"ion-ios-arrow-left\"),\n      rel: Spacebars.call(\"tooltip\"),\n      data_placement: Spacebars.call(\"bottom\"),\n      title: Spacebars.call(\"Back to public\"),\n      label: Spacebars.call(\"Public\"),\n      notification: Spacebars.call(\"PUBLIC_CHAT\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n    \", HTML.DIV({\n    \"class\": \"privateChatName\"\n  }, \"\\n      \", Blaze.View(\"lookup:privateChatName\", function() {\n    return Spacebars.mustache(view.lookup(\"privateChatName\"));\n  }), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"chatInput\");\nTemplate[\"chatInput\"] = new Template(\"Template.chatInput\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: \"chatInput\",\n    \"class\": \"chat-input-wrapper\"\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inPrivateChat\"));\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"privateChatDisabled\"));\n    }, function() {\n      return [ \"\\n        \", HTML.TEXTAREA(HTML.Attrs({\n        id: \"newMessageInput\",\n        \"class\": \"disabledChat\",\n        placeholder: \"Private chat is temporarily locked (disabled)\",\n        rel: \"tooltip\",\n        \"data-placement\": \"top\",\n        title: \"Private chat is temporarily locked\",\n        disabled: \"\"\n      }, function() {\n        return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n      })), \"\\n      \" ];\n    }, function() {\n      return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"chatInputControls\")), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"publicChatDisabled\"));\n    }, function() {\n      return [ \"\\n        \", HTML.TEXTAREA(HTML.Attrs({\n        id: \"newMessageInput\",\n        \"class\": \"disabledChat\",\n        placeholder: \"Public chat is temporarily locked (disabled)\",\n        rel: \"tooltip\",\n        \"data-placement\": \"top\",\n        title: \"Public chat is temporarily locked\",\n        disabled: \"\"\n      }, function() {\n        return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n      })), \"\\n      \" ];\n    }, function() {\n      return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"chatInputControls\")), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"chatInputControls\");\nTemplate[\"chatInputControls\"] = new Template(\"Template.chatInputControls\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"button-group radius\"\n  }, \"\\n    \", HTML.TEXTAREA(HTML.Attrs({\n    id: \"newMessageInput\",\n    rel: \"tooltip\",\n    \"data-placement\": \"top\",\n    title: \"Write a new message\"\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n  })), HTML.Raw('\\n    <input type=\"submit\" id=\"sendMessageButton\" class=\"button radius\" rel=\"tooltip\" data-placement=\"top\" value=\"Send\">\\n  '));\n}));\n\nTemplate.__checkName(\"message\");\nTemplate[\"message\"] = new Template(\"Template.message\", (function() {\n  var view = this;\n  return [ HTML.SPAN({\n    style: \"float:left;\"\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"message\"), \"from_username\"));\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN({\n      \"class\": \"userNameEntry\",\n      rel: \"tooltip\",\n      \"data-placement\": \"bottom\",\n      title: function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"message\"), \"from_username\"));\n      }\n    }, \"\\n        \", Blaze.View(\"lookup:message.from_username\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"message\"), \"from_username\"));\n    }), \"\\n      \"), \"\\n    \" ];\n  }), \"\\n  \"), \"\\n  \", HTML.SPAN({\n    style: \"float:right;\"\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"message\"), \"from_time\"));\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN(HTML.Attrs(function() {\n      return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n    }), Blaze.View(\"lookup:toClockTime\", function() {\n      return Spacebars.mustache(view.lookup(\"toClockTime\"), Spacebars.dot(view.lookup(\"message\"), \"from_time\"));\n    })), \"\\n      \", HTML.SPAN(HTML.Attrs({\n      \"class\": \"glyphicon glyphicon-time\"\n    }, function() {\n      return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n    })), \"\\n    \" ];\n  }), \"\\n  \"), HTML.Raw(\"\\n  <br>\\n  \"), HTML.DIV({\n    style: function() {\n      return [ \"color:\", Spacebars.mustache(view.lookup(\"colourToHex\"), Spacebars.dot(view.lookup(\"message\"), \"from_color\")) ];\n    }\n  }, Blaze.View(\"lookup:sanitizeAndFormat\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"sanitizeAndFormat\"), Spacebars.dot(view.lookup(\"message\"), \"message\")));\n  })), \"\\n  \", Blaze.View(\"lookup:autoscroll\", function() {\n    return Spacebars.mustache(view.lookup(\"autoscroll\"));\n  }) ];\n}));\n\n}).call(this);\n","servePath":"/client/views/chat/template.chat_bar.js","sourceMap":{"version":3,"sources":["/client/views/chat/template.chat_bar.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/views/chat/template.chat_bar.js","sourcesContent":["\nTemplate.__checkName(\"chatbar\");\nTemplate[\"chatbar\"] = new Template(\"Template.chatbar\", (function() {\n  var view = this;\n  return HTML.DIV(HTML.Attrs({\n    id: function() {\n      return Spacebars.mustache(view.lookup(\"id\"));\n    },\n    \"class\": \"component\"\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"visibility\"), view.lookup(\"name\"));\n  }), \"\\n    \", HTML.DIV({\n    \"class\": \"chatBodyContainer\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inPrivateChat\"));\n  }, function() {\n    return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"privateChatTab\")), \"\\n      \" ];\n  }), \"\\n      \", HTML.DIV({\n    id: \"chatbody\"\n  }, \"\\n        \", HTML.UL(HTML.Attrs({\n    \"class\": \"chat\"\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n  }), \"\\n          \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getCombinedMessagesForChat\"));\n  }, function() {\n    return [ \"\\n            \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"message\"));\n    }, function() {\n      return [ \"\\n              \", HTML.LI(Spacebars.include(view.lookupTemplate(\"message\"))), \"\\n            \" ];\n    }), \"\\n          \" ];\n  }), \"\\n          \", Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"userExists\"));\n  }, function() {\n    return HTML.LI(\"The user has left\");\n  }), \"\\n        \"), \"\\n      \"), \"\\n    \"), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"userExists\"));\n  }, function() {\n    return [ \"\\n      \", HTML.DIV({\n      \"class\": \"panel-footer\"\n    }, Spacebars.include(view.lookupTemplate(\"chatInput\"))), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"privateChatTab\");\nTemplate[\"privateChatTab\"] = new Template(\"Template.privateChatTab\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"privateChatTab\"\n  }, \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"close\"),\n      btn_class: Spacebars.call(\"secondary tiny toPublic \"),\n      i_class: Spacebars.call(\"ion-ios-arrow-left\"),\n      rel: Spacebars.call(\"tooltip\"),\n      data_placement: Spacebars.call(\"bottom\"),\n      title: Spacebars.call(\"Back to public\"),\n      label: Spacebars.call(\"Public\"),\n      notification: Spacebars.call(\"PUBLIC_CHAT\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n    \", HTML.DIV({\n    \"class\": \"privateChatName\"\n  }, \"\\n      \", Blaze.View(\"lookup:privateChatName\", function() {\n    return Spacebars.mustache(view.lookup(\"privateChatName\"));\n  }), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"chatInput\");\nTemplate[\"chatInput\"] = new Template(\"Template.chatInput\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: \"chatInput\",\n    \"class\": \"chat-input-wrapper\"\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inPrivateChat\"));\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"privateChatDisabled\"));\n    }, function() {\n      return [ \"\\n        \", HTML.TEXTAREA(HTML.Attrs({\n        id: \"newMessageInput\",\n        \"class\": \"disabledChat\",\n        placeholder: \"Private chat is temporarily locked (disabled)\",\n        rel: \"tooltip\",\n        \"data-placement\": \"top\",\n        title: \"Private chat is temporarily locked\",\n        disabled: \"\"\n      }, function() {\n        return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n      })), \"\\n      \" ];\n    }, function() {\n      return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"chatInputControls\")), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"publicChatDisabled\"));\n    }, function() {\n      return [ \"\\n        \", HTML.TEXTAREA(HTML.Attrs({\n        id: \"newMessageInput\",\n        \"class\": \"disabledChat\",\n        placeholder: \"Public chat is temporarily locked (disabled)\",\n        rel: \"tooltip\",\n        \"data-placement\": \"top\",\n        title: \"Public chat is temporarily locked\",\n        disabled: \"\"\n      }, function() {\n        return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n      })), \"\\n      \" ];\n    }, function() {\n      return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"chatInputControls\")), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"chatInputControls\");\nTemplate[\"chatInputControls\"] = new Template(\"Template.chatInputControls\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"button-group radius\"\n  }, \"\\n    \", HTML.TEXTAREA(HTML.Attrs({\n    id: \"newMessageInput\",\n    rel: \"tooltip\",\n    \"data-placement\": \"top\",\n    title: \"Write a new message\"\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n  })), HTML.Raw('\\n    <input type=\"submit\" id=\"sendMessageButton\" class=\"button radius\" rel=\"tooltip\" data-placement=\"top\" value=\"Send\">\\n  '));\n}));\n\nTemplate.__checkName(\"message\");\nTemplate[\"message\"] = new Template(\"Template.message\", (function() {\n  var view = this;\n  return [ HTML.SPAN({\n    style: \"float:left;\"\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"message\"), \"from_username\"));\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN({\n      \"class\": \"userNameEntry\",\n      rel: \"tooltip\",\n      \"data-placement\": \"bottom\",\n      title: function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"message\"), \"from_username\"));\n      }\n    }, \"\\n        \", Blaze.View(\"lookup:message.from_username\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"message\"), \"from_username\"));\n    }), \"\\n      \"), \"\\n    \" ];\n  }), \"\\n  \"), \"\\n  \", HTML.SPAN({\n    style: \"float:right;\"\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"message\"), \"from_time\"));\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN(HTML.Attrs(function() {\n      return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n    }), Blaze.View(\"lookup:toClockTime\", function() {\n      return Spacebars.mustache(view.lookup(\"toClockTime\"), Spacebars.dot(view.lookup(\"message\"), \"from_time\"));\n    })), \"\\n      \", HTML.SPAN(HTML.Attrs({\n      \"class\": \"glyphicon glyphicon-time\"\n    }, function() {\n      return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n    })), \"\\n    \" ];\n  }), \"\\n  \"), HTML.Raw(\"\\n  <br>\\n  \"), HTML.DIV({\n    style: function() {\n      return [ \"color:\", Spacebars.mustache(view.lookup(\"colourToHex\"), Spacebars.dot(view.lookup(\"message\"), \"from_color\")) ];\n    }\n  }, Blaze.View(\"lookup:sanitizeAndFormat\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"sanitizeAndFormat\"), Spacebars.dot(view.lookup(\"message\"), \"message\")));\n  })), \"\\n  \", Blaze.View(\"lookup:autoscroll\", function() {\n    return Spacebars.mustache(view.lookup(\"autoscroll\"));\n  }) ];\n}));\n"]}},{"type":"js","data":"(function(){\nTemplate.__checkName(\"settingsAudio\");\nTemplate[\"settingsAudio\"] = new Template(\"Template.settingsAudio\", (function() {\n  var view = this;\n  return HTML.FIELDSET({\n    \"class\": \"desktopSettingsFieldset\"\n  }, HTML.Raw('\\n    <legend align=\"center\">Audio Options</legend>\\n      '), HTML.DIV({\n    id: \"audioButtonContainer\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"amIInAudio\"));\n  }, function() {\n    return [ \"\\n        \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"amIListenOnlyAudio\"));\n    }, function() {\n      return [ \"\\n          \", HTML.Comment(\" display listen only with exit \"), \"\\n          \", Blaze._TemplateWith(function() {\n        return {\n          id: Spacebars.call(\"exitAudio\"),\n          btn_class: Spacebars.call(\"exitAudio settingsButton joinAudioButton\"),\n          i_class: Spacebars.call(\"ion-volume-mute\"),\n          rel: Spacebars.call(\"tooltip\"),\n          data_placement: Spacebars.call(\"bottom\"),\n          title: Spacebars.call(\"Leave Audio Call\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n      }), \"\\n        \" ];\n    }, function() {\n      return [ \"\\n          \", HTML.Comment(\" display microphone with exit \"), \"\\n          \", Blaze._TemplateWith(function() {\n        return {\n          id: Spacebars.call(\"exitAudio\"),\n          btn_class: Spacebars.call(\"exitAudio settingsButton joinAudioButton\"),\n          i_class: Spacebars.call(\"ion-volume-mute\"),\n          rel: Spacebars.call(\"tooltip\"),\n          data_placement: Spacebars.call(\"bottom\"),\n          title: Spacebars.call(\"Leave Audio Call\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n      }), \"\\n        \" ];\n    }), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n        \", HTML.Comment(\" display both with join \"), \"\\n        \", Blaze.Unless(function() {\n      return Spacebars.call(view.lookup(\"isMyMicLocked\"));\n    }, function() {\n      return [ \"\\n          \", Blaze._TemplateWith(function() {\n        return {\n          id: Spacebars.call(\"joinMicrophone\"),\n          btn_class: Spacebars.call(\"joinMicrophone settingsButton joinAudioButton\"),\n          i_class: Spacebars.call(\"fi-microphone\"),\n          rel: Spacebars.call(\"tooltip\"),\n          data_placement: Spacebars.call(\"bottom\"),\n          title: Spacebars.call(\"Join Microphone\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n      }), \"\\n        \" ];\n    }), \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        id: Spacebars.call(\"joinListenOnly\"),\n        btn_class: Spacebars.call(\"joinListenOnly settingsButton joinAudioButton\"),\n        i_class: Spacebars.call(\"fi-volume\"),\n        rel: Spacebars.call(\"tooltip\"),\n        data_placement: Spacebars.call(\"bottom\"),\n        title: Spacebars.call(\"Join Listen only\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"settingsModal\");\nTemplate[\"settingsModal\"] = new Template(\"Template.settingsModal\", (function() {\n  var view = this;\n  return [ HTML.Raw('<div class=\"bar topBar\">\\n    <p>\\n        <span class=\"modalTitle\">BigBlueButton Settings</span>\\n    </p>\\n  </div>\\n\\n  '), HTML.DIV({\n    \"class\": \"settingsBody\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"settingsAudio\")), \"\\n    \", Spacebars.include(view.lookupTemplate(\"optionsFontSize\")), \"\\n    \", Blaze.View(\"lookup:getBBBSettingsInfo\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"getBBBSettingsInfo\")));\n  }), \"\\n  \"), \"\\n\\n  \", HTML.DIV({\n    \"class\": \"bar bottomBar\"\n  }, \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"closeSettings\"),\n      btn_class: Spacebars.call(\"settingsButton vertically-centered\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Close\"),\n      label: Spacebars.call(\"Close\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n  \") ];\n}));\n\nTemplate.__checkName(\"logoutModal\");\nTemplate[\"logoutModal\"] = new Template(\"Template.logoutModal\", (function() {\n  var view = this;\n  return [ HTML.Raw(\"<p>Are you sure you want to logout?</p>\\n  \"), Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"yes\"),\n      btn_class: Spacebars.call(\"logoutButton\"),\n      label: Spacebars.call(\"Yes\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n  \", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"no\"),\n      btn_class: Spacebars.call(\"logoutButton\"),\n      label: Spacebars.call(\"No\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }) ];\n}));\n\nTemplate.__checkName(\"optionsFontSize\");\nTemplate[\"optionsFontSize\"] = new Template(\"Template.optionsFontSize\", (function() {\n  var view = this;\n  return HTML.FIELDSET({\n    \"class\": \"desktopSettingsFieldset\"\n  }, HTML.Raw('\\n    <legend align=\"center\"><span class=\"chatOptionsText\">Chat Message Font Size</span><br></legend>\\n    '), HTML.TABLE({\n    id: \"fontSizeTable\",\n    align: \"center\"\n  }, \"\\n      \", HTML.TR(\"\\n        \", HTML.TD(Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"decreaseFontSize\"),\n      btn_class: Spacebars.call(\"displayButtons\"),\n      i_class: Spacebars.call(\"fi-minus\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Decrease Font Size\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  })), \"\\n        \", HTML.TD({\n    id: \"displayLabel\"\n  }, HTML.LABEL(HTML.Attrs({\n    \"class\": \"fontSizeLabel\"\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n  }), \"Size(\", Blaze.View(\"lookup:getInSession\", function() {\n    return Spacebars.mustache(view.lookup(\"getInSession\"), \"messageFontSize\");\n  }), \")\")), \"\\n        \", HTML.TD(Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"increaseFontSize\"),\n      btn_class: Spacebars.call(\"displayButtons\"),\n      i_class: Spacebars.call(\"fi-plus\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Increase Font Size\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  })), \"\\n      \"), \"\\n    \"), \"\\n  \");\n}));\n\n}).call(this);\n","servePath":"/client/views/modals/template.modals.js","sourceMap":{"version":3,"sources":["/client/views/modals/template.modals.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/views/modals/template.modals.js","sourcesContent":["\nTemplate.__checkName(\"settingsAudio\");\nTemplate[\"settingsAudio\"] = new Template(\"Template.settingsAudio\", (function() {\n  var view = this;\n  return HTML.FIELDSET({\n    \"class\": \"desktopSettingsFieldset\"\n  }, HTML.Raw('\\n    <legend align=\"center\">Audio Options</legend>\\n      '), HTML.DIV({\n    id: \"audioButtonContainer\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"amIInAudio\"));\n  }, function() {\n    return [ \"\\n        \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"amIListenOnlyAudio\"));\n    }, function() {\n      return [ \"\\n          \", HTML.Comment(\" display listen only with exit \"), \"\\n          \", Blaze._TemplateWith(function() {\n        return {\n          id: Spacebars.call(\"exitAudio\"),\n          btn_class: Spacebars.call(\"exitAudio settingsButton joinAudioButton\"),\n          i_class: Spacebars.call(\"ion-volume-mute\"),\n          rel: Spacebars.call(\"tooltip\"),\n          data_placement: Spacebars.call(\"bottom\"),\n          title: Spacebars.call(\"Leave Audio Call\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n      }), \"\\n        \" ];\n    }, function() {\n      return [ \"\\n          \", HTML.Comment(\" display microphone with exit \"), \"\\n          \", Blaze._TemplateWith(function() {\n        return {\n          id: Spacebars.call(\"exitAudio\"),\n          btn_class: Spacebars.call(\"exitAudio settingsButton joinAudioButton\"),\n          i_class: Spacebars.call(\"ion-volume-mute\"),\n          rel: Spacebars.call(\"tooltip\"),\n          data_placement: Spacebars.call(\"bottom\"),\n          title: Spacebars.call(\"Leave Audio Call\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n      }), \"\\n        \" ];\n    }), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n        \", HTML.Comment(\" display both with join \"), \"\\n        \", Blaze.Unless(function() {\n      return Spacebars.call(view.lookup(\"isMyMicLocked\"));\n    }, function() {\n      return [ \"\\n          \", Blaze._TemplateWith(function() {\n        return {\n          id: Spacebars.call(\"joinMicrophone\"),\n          btn_class: Spacebars.call(\"joinMicrophone settingsButton joinAudioButton\"),\n          i_class: Spacebars.call(\"fi-microphone\"),\n          rel: Spacebars.call(\"tooltip\"),\n          data_placement: Spacebars.call(\"bottom\"),\n          title: Spacebars.call(\"Join Microphone\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n      }), \"\\n        \" ];\n    }), \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        id: Spacebars.call(\"joinListenOnly\"),\n        btn_class: Spacebars.call(\"joinListenOnly settingsButton joinAudioButton\"),\n        i_class: Spacebars.call(\"fi-volume\"),\n        rel: Spacebars.call(\"tooltip\"),\n        data_placement: Spacebars.call(\"bottom\"),\n        title: Spacebars.call(\"Join Listen only\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"settingsModal\");\nTemplate[\"settingsModal\"] = new Template(\"Template.settingsModal\", (function() {\n  var view = this;\n  return [ HTML.Raw('<div class=\"bar topBar\">\\n    <p>\\n        <span class=\"modalTitle\">BigBlueButton Settings</span>\\n    </p>\\n  </div>\\n\\n  '), HTML.DIV({\n    \"class\": \"settingsBody\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"settingsAudio\")), \"\\n    \", Spacebars.include(view.lookupTemplate(\"optionsFontSize\")), \"\\n    \", Blaze.View(\"lookup:getBBBSettingsInfo\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"getBBBSettingsInfo\")));\n  }), \"\\n  \"), \"\\n\\n  \", HTML.DIV({\n    \"class\": \"bar bottomBar\"\n  }, \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"closeSettings\"),\n      btn_class: Spacebars.call(\"settingsButton vertically-centered\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Close\"),\n      label: Spacebars.call(\"Close\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n  \") ];\n}));\n\nTemplate.__checkName(\"logoutModal\");\nTemplate[\"logoutModal\"] = new Template(\"Template.logoutModal\", (function() {\n  var view = this;\n  return [ HTML.Raw(\"<p>Are you sure you want to logout?</p>\\n  \"), Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"yes\"),\n      btn_class: Spacebars.call(\"logoutButton\"),\n      label: Spacebars.call(\"Yes\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n  \", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"no\"),\n      btn_class: Spacebars.call(\"logoutButton\"),\n      label: Spacebars.call(\"No\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }) ];\n}));\n\nTemplate.__checkName(\"optionsFontSize\");\nTemplate[\"optionsFontSize\"] = new Template(\"Template.optionsFontSize\", (function() {\n  var view = this;\n  return HTML.FIELDSET({\n    \"class\": \"desktopSettingsFieldset\"\n  }, HTML.Raw('\\n    <legend align=\"center\"><span class=\"chatOptionsText\">Chat Message Font Size</span><br></legend>\\n    '), HTML.TABLE({\n    id: \"fontSizeTable\",\n    align: \"center\"\n  }, \"\\n      \", HTML.TR(\"\\n        \", HTML.TD(Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"decreaseFontSize\"),\n      btn_class: Spacebars.call(\"displayButtons\"),\n      i_class: Spacebars.call(\"fi-minus\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Decrease Font Size\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  })), \"\\n        \", HTML.TD({\n    id: \"displayLabel\"\n  }, HTML.LABEL(HTML.Attrs({\n    \"class\": \"fontSizeLabel\"\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"messageFontSize\"));\n  }), \"Size(\", Blaze.View(\"lookup:getInSession\", function() {\n    return Spacebars.mustache(view.lookup(\"getInSession\"), \"messageFontSize\");\n  }), \")\")), \"\\n        \", HTML.TD(Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"increaseFontSize\"),\n      btn_class: Spacebars.call(\"displayButtons\"),\n      i_class: Spacebars.call(\"fi-plus\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Increase Font Size\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  })), \"\\n      \"), \"\\n    \"), \"\\n  \");\n}));\n"]}},{"type":"js","data":"(function(){\nTemplate.__checkName(\"displayUserIcons\");\nTemplate[\"displayUserIcons\"] = new Template(\"Template.displayUserIcons\", (function() {\n  var view = this;\n  return [ HTML.Raw(\"<!-- audio, video, locking, presenter/moderator, hand raised -->\\n  \"), Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"isUserInAudio\"), view.lookup(\"userId\"));\n  }, function() {\n    return [ \"\\n    \", HTML.Comment(\" if the user is listen only, only display the one icon \"), \"\\n    \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"isUserListenOnlyAudio\"), view.lookup(\"userId\"));\n    }, function() {\n      return [ \"\\n      \", HTML.SPAN({\n        rel: \"tooltip\",\n        \"data-placement\": \"bottom\",\n        title: function() {\n          return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is only listening\" ];\n        }\n      }, \"\\n        \", HTML.I({\n        \"class\": \"icon fi-volume-none usericon\"\n      }), \"\\n      \"), \"\\n    \" ];\n    }, function() {\n      return [ \"\\n      \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"isCurrentUser\"), view.lookup(\"userId\"));\n      }, function() {\n        return [ \"\\n        \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"isUserMuted\"), view.lookup(\"userId\"));\n        }, function() {\n          return [ \"\\n          \", HTML.SPAN({\n            \"class\": \"muteIcon\",\n            rel: \"tooltip\",\n            \"data-placement\": \"bottom\",\n            title: \"Unmute yourself\"\n          }, \"\\n            \", HTML.I({\n            \"class\": \"ion-ios-mic-off usericon\"\n          }), \"\\n          \"), \"\\n        \" ];\n        }, function() {\n          return [ \"\\n          \", Blaze.If(function() {\n            return Spacebars.call(view.lookup(\"isCurrentUserTalking\"));\n          }, function() {\n            return [ \"\\n            \", HTML.SPAN({\n              \"class\": \"muteIcon\",\n              rel: \"tooltip\",\n              \"data-placement\": \"bottom\",\n              title: \"you are talking\"\n            }, \"\\n              \", HTML.I({\n              \"class\": \"ion-ios-mic usericon\"\n            }), \"\\n            \"), \"\\n          \" ];\n          }, function() {\n            return [ \"\\n          \", HTML.SPAN({\n              \"class\": \"muteIcon\",\n              rel: \"tooltip\",\n              \"data-placement\": \"bottom\",\n              title: \"you are talking\"\n            }, \"\\n            \", HTML.I({\n              \"class\": \"ion-ios-mic-outline usericon\"\n            }), \"\\n          \"), \"\\n          \" ];\n          }), \"\\n        \" ];\n        }), \"\\n      \" ];\n      }, function() {\n        return [ \"\\n        \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"isUserMuted\"), view.lookup(\"userId\"));\n        }, function() {\n          return [ \"\\n          \", HTML.SPAN({\n            rel: \"tooltip\",\n            \"data-placement\": \"bottom\",\n            title: function() {\n              return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is muted\" ];\n            }\n          }, \"\\n            \", HTML.I({\n            \"class\": \"ion-ios-mic-off usericon\"\n          }), \"\\n          \"), \"\\n        \" ];\n        }, function() {\n          return [ \"\\n          \", Blaze.If(function() {\n            return Spacebars.dataMustache(view.lookup(\"isUserTalking\"), view.lookup(\"userId\"));\n          }, function() {\n            return [ \"\\n          \", HTML.SPAN({\n              rel: \"tooltip\",\n              \"data-placement\": \"bottom\",\n              title: function() {\n                return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is talking\" ];\n              }\n            }, \"\\n            \", HTML.I({\n              \"class\": \"ion-ios-mic usericon\"\n            }), \"\\n          \"), \"\\n          \" ];\n          }, function() {\n            return [ \"\\n          \", HTML.SPAN({\n              rel: \"tooltip\",\n              \"data-placement\": \"bottom\",\n              title: function() {\n                return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is not talking\" ];\n              }\n            }, \"\\n            \", HTML.I({\n              \"class\": \"ion-ios-mic-outline usericon\"\n            }), \"\\n          \"), \"\\n          \" ];\n          }), \"\\n        \" ];\n        }), \"\\n      \" ];\n      }), \"\\n    \" ];\n    }), \"\\n  \" ];\n  }), \"\\n\\n  \", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"isUserSharingVideo\"), view.lookup(\"userId\"));\n  }, function() {\n    return [ \"\\n    \", HTML.SPAN({\n      rel: \"tooltip\",\n      \"data-placement\": \"bottom\",\n      title: function() {\n        return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is sharing their webcam\" ];\n      }\n    }, \"\\n      \", HTML.I({\n      \"class\": \"icon fi-video usericon\"\n    }), \"\\n    \"), \"\\n  \" ];\n  }), \"\\n\\n  \", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"userLockedIconApplicable\"), view.lookup(\"userId\"));\n  }, function() {\n    return [ \"\\n    \", HTML.SPAN({\n      rel: \"tooltip\",\n      \"data-placement\": \"bottom\",\n      title: function() {\n        return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is locked\" ];\n      }\n    }, \"\\n      \", HTML.I({\n      \"class\": \"icon fi-lock usericon\"\n    }), \"\\n    \"), \"\\n  \" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"usernameEntry\");\nTemplate[\"usernameEntry\"] = new Template(\"Template.usernameEntry\", (function() {\n  var view = this;\n  return [ HTML.DIV({\n    \"class\": \"status\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"happy\");\n  }, function() {\n    return [ \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        name: Spacebars.call(\"happy-face\"),\n        size: Spacebars.call(\"25\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"icon\"));\n    }), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n        \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"neutral\");\n    }, function() {\n      return [ \"\\n          \", Blaze._TemplateWith(function() {\n        return {\n          name: Spacebars.call(\"neutral-face\"),\n          size: Spacebars.call(\"25\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"icon\"));\n      }), \"\\n        \" ];\n    }, function() {\n      return [ \"\\n          \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"confused\");\n      }, function() {\n        return [ \"\\n            \", Blaze._TemplateWith(function() {\n          return {\n            name: Spacebars.call(\"confused-face\"),\n            size: Spacebars.call(\"25\")\n          };\n        }, function() {\n          return Spacebars.include(view.lookupTemplate(\"icon\"));\n        }), \"\\n          \" ];\n      }, function() {\n        return [ \"\\n            \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"sad\");\n        }, function() {\n          return [ \"\\n              \", Blaze._TemplateWith(function() {\n            return {\n              name: Spacebars.call(\"sad-face\"),\n              size: Spacebars.call(\"25\")\n            };\n          }, function() {\n            return Spacebars.include(view.lookupTemplate(\"icon\"));\n          }), \"\\n            \" ];\n        }, function() {\n          return [ \"\\n              \", Blaze.If(function() {\n            return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"away\");\n          }, function() {\n            return [ \"\\n                \", Blaze._TemplateWith(function() {\n              return {\n                name: Spacebars.call(\"clock\"),\n                size: Spacebars.call(\"25\")\n              };\n            }, function() {\n              return Spacebars.include(view.lookupTemplate(\"icon\"));\n            }), \"\\n              \" ];\n          }, function() {\n            return [ \"\\n                \", Blaze.If(function() {\n              return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"raiseHand\");\n            }, function() {\n              return [ \"\\n                  \", HTML.SPAN({\n                rel: \"tooltip\",\n                \"data-placement\": \"bottom\",\n                title: \"Lower your hand\"\n              }, \"\\n                    \", HTML.I({\n                \"class\": \"icon ion-android-hand statusIcon\"\n              }), \"\\n                  \"), \"\\n                \" ];\n            }, function() {\n              return [ \"\\n                  \", Blaze.If(function() {\n                return Spacebars.call(Spacebars.dot(view.lookup(\"user\"), \"presenter\"));\n              }, function() {\n                return [ \"\\n                    \", HTML.SPAN({\n                  rel: \"tooltip\",\n                  \"data-placement\": \"bottom\",\n                  title: function() {\n                    return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is the presenter\" ];\n                  }\n                }, \"\\n                      \", HTML.I({\n                  \"class\": \"icon fi-projection-screen statusIcon\"\n                }), \"\\n                    \"), \"\\n                  \" ];\n              }, function() {\n                return [ \"\\n                    \", Blaze.If(function() {\n                  return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"role\"), \"MODERATOR\");\n                }, function() {\n                  return [ \"\\n                      \", HTML.SPAN({\n                    rel: \"tooltip\",\n                    \"data-placement\": \"bottom\",\n                    title: function() {\n                      return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is a moderator\" ];\n                    }\n                  }, \"\\n                        \", HTML.I({\n                    \"class\": \"icon fi-torso statusIcon\"\n                  }), \"\\n                      \"), \"\\n                    \" ];\n                }), \"\\n                  \" ];\n              }), \"\\n                \" ];\n            }), \"\\n              \" ];\n          }), \"\\n            \" ];\n        }), \"\\n          \" ];\n      }), \"\\n        \" ];\n    }), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n\\n    \", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"isCurrentUser\"), view.lookup(\"userId\"));\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN({\n      \"class\": function() {\n        return [ \"userCurrent usernameEntry \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"hasGotUnreadMailClass\"), \"PUBLIC_CHAT\");\n        }, function() {\n          return \"gotUnreadMail\";\n        }) ];\n      },\n      rel: \"tooltip\",\n      \"data-placement\": \"bottom\",\n      title: function() {\n        return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" (you)\" ];\n      }\n    }, \"\\n        \", HTML.SPAN({\n      \"class\": \"userName\"\n    }, Blaze.View(\"lookup:user.name\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\"));\n    }), \" \", Blaze.If(function() {\n      return Spacebars.call(Spacebars.dot(view.lookup(\"user\"), \"presenter\"));\n    }, function() {\n      return \" (presenter) \";\n    }), \" (you)\"), \"\\n      \"), \"\\n      \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"hasGotUnreadMailClass\"), \"PUBLIC_CHAT\");\n    }, function() {\n      return [ \"\\n        \", HTML.DIV({\n        \"class\": \"unreadChatNumber\"\n      }, Blaze.View(\"lookup:getNumberOfUnreadMessages\", function() {\n        return Spacebars.mustache(view.lookup(\"getNumberOfUnreadMessages\"), \"PUBLIC_CHAT\");\n      })), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN({\n      \"class\": function() {\n        return [ \"usernameEntry \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"hasGotUnreadMailClass\"), Spacebars.dot(view.lookup(\"user\"), \"userid\"));\n        }, function() {\n          return \"gotUnreadMail\";\n        }) ];\n      },\n      rel: \"tooltip\",\n      \"data-placement\": \"bottom\",\n      title: function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\"));\n      }\n    }, \"\\n        \", HTML.SPAN({\n      \"class\": \"userName\"\n    }, \" \", Blaze.View(\"lookup:user.name\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\"));\n    }), \" \", Blaze.If(function() {\n      return Spacebars.call(Spacebars.dot(view.lookup(\"user\"), \"presenter\"));\n    }, function() {\n      return \" (presenter) \";\n    })), \"\\n      \"), \"\\n      \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"hasGotUnreadMailClass\"), Spacebars.dot(view.lookup(\"user\"), \"userid\"));\n    }, function() {\n      return [ \"\\n        \", HTML.DIV({\n        \"class\": \"unreadChatNumber\"\n      }, Blaze.View(\"lookup:getNumberOfUnreadMessages\", function() {\n        return Spacebars.mustache(view.lookup(\"getNumberOfUnreadMessages\"), Spacebars.dot(view.lookup(\"user\"), \"userid\"));\n      })), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"userItem\");\nTemplate[\"userItem\"] = new Template(\"Template.userItem\", (function() {\n  var view = this;\n  return [ Spacebars.include(view.lookupTemplate(\"usernameEntry\")), \"\\n  \", HTML.DIV({\n    id: \"usericons\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"displayUserIcons\")), \"\\n  \") ];\n}));\n\n}).call(this);\n","servePath":"/client/views/users/template.user_item.js","sourceMap":{"version":3,"sources":["/client/views/users/template.user_item.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/views/users/template.user_item.js","sourcesContent":["\nTemplate.__checkName(\"displayUserIcons\");\nTemplate[\"displayUserIcons\"] = new Template(\"Template.displayUserIcons\", (function() {\n  var view = this;\n  return [ HTML.Raw(\"<!-- audio, video, locking, presenter/moderator, hand raised -->\\n  \"), Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"isUserInAudio\"), view.lookup(\"userId\"));\n  }, function() {\n    return [ \"\\n    \", HTML.Comment(\" if the user is listen only, only display the one icon \"), \"\\n    \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"isUserListenOnlyAudio\"), view.lookup(\"userId\"));\n    }, function() {\n      return [ \"\\n      \", HTML.SPAN({\n        rel: \"tooltip\",\n        \"data-placement\": \"bottom\",\n        title: function() {\n          return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is only listening\" ];\n        }\n      }, \"\\n        \", HTML.I({\n        \"class\": \"icon fi-volume-none usericon\"\n      }), \"\\n      \"), \"\\n    \" ];\n    }, function() {\n      return [ \"\\n      \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"isCurrentUser\"), view.lookup(\"userId\"));\n      }, function() {\n        return [ \"\\n        \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"isUserMuted\"), view.lookup(\"userId\"));\n        }, function() {\n          return [ \"\\n          \", HTML.SPAN({\n            \"class\": \"muteIcon\",\n            rel: \"tooltip\",\n            \"data-placement\": \"bottom\",\n            title: \"Unmute yourself\"\n          }, \"\\n            \", HTML.I({\n            \"class\": \"ion-ios-mic-off usericon\"\n          }), \"\\n          \"), \"\\n        \" ];\n        }, function() {\n          return [ \"\\n          \", Blaze.If(function() {\n            return Spacebars.call(view.lookup(\"isCurrentUserTalking\"));\n          }, function() {\n            return [ \"\\n            \", HTML.SPAN({\n              \"class\": \"muteIcon\",\n              rel: \"tooltip\",\n              \"data-placement\": \"bottom\",\n              title: \"you are talking\"\n            }, \"\\n              \", HTML.I({\n              \"class\": \"ion-ios-mic usericon\"\n            }), \"\\n            \"), \"\\n          \" ];\n          }, function() {\n            return [ \"\\n          \", HTML.SPAN({\n              \"class\": \"muteIcon\",\n              rel: \"tooltip\",\n              \"data-placement\": \"bottom\",\n              title: \"you are talking\"\n            }, \"\\n            \", HTML.I({\n              \"class\": \"ion-ios-mic-outline usericon\"\n            }), \"\\n          \"), \"\\n          \" ];\n          }), \"\\n        \" ];\n        }), \"\\n      \" ];\n      }, function() {\n        return [ \"\\n        \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"isUserMuted\"), view.lookup(\"userId\"));\n        }, function() {\n          return [ \"\\n          \", HTML.SPAN({\n            rel: \"tooltip\",\n            \"data-placement\": \"bottom\",\n            title: function() {\n              return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is muted\" ];\n            }\n          }, \"\\n            \", HTML.I({\n            \"class\": \"ion-ios-mic-off usericon\"\n          }), \"\\n          \"), \"\\n        \" ];\n        }, function() {\n          return [ \"\\n          \", Blaze.If(function() {\n            return Spacebars.dataMustache(view.lookup(\"isUserTalking\"), view.lookup(\"userId\"));\n          }, function() {\n            return [ \"\\n          \", HTML.SPAN({\n              rel: \"tooltip\",\n              \"data-placement\": \"bottom\",\n              title: function() {\n                return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is talking\" ];\n              }\n            }, \"\\n            \", HTML.I({\n              \"class\": \"ion-ios-mic usericon\"\n            }), \"\\n          \"), \"\\n          \" ];\n          }, function() {\n            return [ \"\\n          \", HTML.SPAN({\n              rel: \"tooltip\",\n              \"data-placement\": \"bottom\",\n              title: function() {\n                return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is not talking\" ];\n              }\n            }, \"\\n            \", HTML.I({\n              \"class\": \"ion-ios-mic-outline usericon\"\n            }), \"\\n          \"), \"\\n          \" ];\n          }), \"\\n        \" ];\n        }), \"\\n      \" ];\n      }), \"\\n    \" ];\n    }), \"\\n  \" ];\n  }), \"\\n\\n  \", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"isUserSharingVideo\"), view.lookup(\"userId\"));\n  }, function() {\n    return [ \"\\n    \", HTML.SPAN({\n      rel: \"tooltip\",\n      \"data-placement\": \"bottom\",\n      title: function() {\n        return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is sharing their webcam\" ];\n      }\n    }, \"\\n      \", HTML.I({\n      \"class\": \"icon fi-video usericon\"\n    }), \"\\n    \"), \"\\n  \" ];\n  }), \"\\n\\n  \", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"userLockedIconApplicable\"), view.lookup(\"userId\"));\n  }, function() {\n    return [ \"\\n    \", HTML.SPAN({\n      rel: \"tooltip\",\n      \"data-placement\": \"bottom\",\n      title: function() {\n        return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is locked\" ];\n      }\n    }, \"\\n      \", HTML.I({\n      \"class\": \"icon fi-lock usericon\"\n    }), \"\\n    \"), \"\\n  \" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"usernameEntry\");\nTemplate[\"usernameEntry\"] = new Template(\"Template.usernameEntry\", (function() {\n  var view = this;\n  return [ HTML.DIV({\n    \"class\": \"status\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"happy\");\n  }, function() {\n    return [ \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        name: Spacebars.call(\"happy-face\"),\n        size: Spacebars.call(\"25\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"icon\"));\n    }), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n        \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"neutral\");\n    }, function() {\n      return [ \"\\n          \", Blaze._TemplateWith(function() {\n        return {\n          name: Spacebars.call(\"neutral-face\"),\n          size: Spacebars.call(\"25\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"icon\"));\n      }), \"\\n        \" ];\n    }, function() {\n      return [ \"\\n          \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"confused\");\n      }, function() {\n        return [ \"\\n            \", Blaze._TemplateWith(function() {\n          return {\n            name: Spacebars.call(\"confused-face\"),\n            size: Spacebars.call(\"25\")\n          };\n        }, function() {\n          return Spacebars.include(view.lookupTemplate(\"icon\"));\n        }), \"\\n          \" ];\n      }, function() {\n        return [ \"\\n            \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"sad\");\n        }, function() {\n          return [ \"\\n              \", Blaze._TemplateWith(function() {\n            return {\n              name: Spacebars.call(\"sad-face\"),\n              size: Spacebars.call(\"25\")\n            };\n          }, function() {\n            return Spacebars.include(view.lookupTemplate(\"icon\"));\n          }), \"\\n            \" ];\n        }, function() {\n          return [ \"\\n              \", Blaze.If(function() {\n            return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"away\");\n          }, function() {\n            return [ \"\\n                \", Blaze._TemplateWith(function() {\n              return {\n                name: Spacebars.call(\"clock\"),\n                size: Spacebars.call(\"25\")\n              };\n            }, function() {\n              return Spacebars.include(view.lookupTemplate(\"icon\"));\n            }), \"\\n              \" ];\n          }, function() {\n            return [ \"\\n                \", Blaze.If(function() {\n              return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"emoji_status\"), \"raiseHand\");\n            }, function() {\n              return [ \"\\n                  \", HTML.SPAN({\n                rel: \"tooltip\",\n                \"data-placement\": \"bottom\",\n                title: \"Lower your hand\"\n              }, \"\\n                    \", HTML.I({\n                \"class\": \"icon ion-android-hand statusIcon\"\n              }), \"\\n                  \"), \"\\n                \" ];\n            }, function() {\n              return [ \"\\n                  \", Blaze.If(function() {\n                return Spacebars.call(Spacebars.dot(view.lookup(\"user\"), \"presenter\"));\n              }, function() {\n                return [ \"\\n                    \", HTML.SPAN({\n                  rel: \"tooltip\",\n                  \"data-placement\": \"bottom\",\n                  title: function() {\n                    return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is the presenter\" ];\n                  }\n                }, \"\\n                      \", HTML.I({\n                  \"class\": \"icon fi-projection-screen statusIcon\"\n                }), \"\\n                    \"), \"\\n                  \" ];\n              }, function() {\n                return [ \"\\n                    \", Blaze.If(function() {\n                  return Spacebars.dataMustache(view.lookup(\"equals\"), Spacebars.dot(view.lookup(\"user\"), \"role\"), \"MODERATOR\");\n                }, function() {\n                  return [ \"\\n                      \", HTML.SPAN({\n                    rel: \"tooltip\",\n                    \"data-placement\": \"bottom\",\n                    title: function() {\n                      return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" is a moderator\" ];\n                    }\n                  }, \"\\n                        \", HTML.I({\n                    \"class\": \"icon fi-torso statusIcon\"\n                  }), \"\\n                      \"), \"\\n                    \" ];\n                }), \"\\n                  \" ];\n              }), \"\\n                \" ];\n            }), \"\\n              \" ];\n          }), \"\\n            \" ];\n        }), \"\\n          \" ];\n      }), \"\\n        \" ];\n    }), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n\\n    \", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"isCurrentUser\"), view.lookup(\"userId\"));\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN({\n      \"class\": function() {\n        return [ \"userCurrent usernameEntry \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"hasGotUnreadMailClass\"), \"PUBLIC_CHAT\");\n        }, function() {\n          return \"gotUnreadMail\";\n        }) ];\n      },\n      rel: \"tooltip\",\n      \"data-placement\": \"bottom\",\n      title: function() {\n        return [ Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\")), \" (you)\" ];\n      }\n    }, \"\\n        \", HTML.SPAN({\n      \"class\": \"userName\"\n    }, Blaze.View(\"lookup:user.name\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\"));\n    }), \" \", Blaze.If(function() {\n      return Spacebars.call(Spacebars.dot(view.lookup(\"user\"), \"presenter\"));\n    }, function() {\n      return \" (presenter) \";\n    }), \" (you)\"), \"\\n      \"), \"\\n      \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"hasGotUnreadMailClass\"), \"PUBLIC_CHAT\");\n    }, function() {\n      return [ \"\\n        \", HTML.DIV({\n        \"class\": \"unreadChatNumber\"\n      }, Blaze.View(\"lookup:getNumberOfUnreadMessages\", function() {\n        return Spacebars.mustache(view.lookup(\"getNumberOfUnreadMessages\"), \"PUBLIC_CHAT\");\n      })), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN({\n      \"class\": function() {\n        return [ \"usernameEntry \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"hasGotUnreadMailClass\"), Spacebars.dot(view.lookup(\"user\"), \"userid\"));\n        }, function() {\n          return \"gotUnreadMail\";\n        }) ];\n      },\n      rel: \"tooltip\",\n      \"data-placement\": \"bottom\",\n      title: function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\"));\n      }\n    }, \"\\n        \", HTML.SPAN({\n      \"class\": \"userName\"\n    }, \" \", Blaze.View(\"lookup:user.name\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"name\"));\n    }), \" \", Blaze.If(function() {\n      return Spacebars.call(Spacebars.dot(view.lookup(\"user\"), \"presenter\"));\n    }, function() {\n      return \" (presenter) \";\n    })), \"\\n      \"), \"\\n      \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"hasGotUnreadMailClass\"), Spacebars.dot(view.lookup(\"user\"), \"userid\"));\n    }, function() {\n      return [ \"\\n        \", HTML.DIV({\n        \"class\": \"unreadChatNumber\"\n      }, Blaze.View(\"lookup:getNumberOfUnreadMessages\", function() {\n        return Spacebars.mustache(view.lookup(\"getNumberOfUnreadMessages\"), Spacebars.dot(view.lookup(\"user\"), \"userid\"));\n      })), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"userItem\");\nTemplate[\"userItem\"] = new Template(\"Template.userItem\", (function() {\n  var view = this;\n  return [ Spacebars.include(view.lookupTemplate(\"usernameEntry\")), \"\\n  \", HTML.DIV({\n    id: \"usericons\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"displayUserIcons\")), \"\\n  \") ];\n}));\n"]}},{"type":"js","data":"(function(){\nTemplate.__checkName(\"usersList\");\nTemplate[\"usersList\"] = new Template(\"Template.usersList\", (function() {\n  var view = this;\n  return HTML.DIV(HTML.Attrs({\n    id: function() {\n      return Spacebars.mustache(view.lookup(\"id\"));\n    },\n    \"class\": function() {\n      return [ \"component \", Spacebars.mustache(view.lookup(\"class\")) ];\n    }\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"visibility\"), view.lookup(\"name\"));\n  }), \"\\n    \", HTML.H3({\n    \"class\": \"meetingTitle\"\n  }, \"\\n      \", Blaze.View(\"lookup:getMeetingName\", function() {\n    return Spacebars.mustache(view.lookup(\"getMeetingName\"));\n  }), \"\\n    \"), \"\\n    \", HTML.DIV({\n    id: \"user-contents\"\n  }, \"\\n      \", HTML.DIV({\n    \"class\": \"userlist ScrollableWindowY\"\n  }, \"\\n        \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getUsersInMeeting\"));\n  }, function() {\n    return [ \"\\n          \", HTML.DIV({\n      id: \"content\",\n      \"class\": \"userItem\"\n    }, Spacebars.include(view.lookupTemplate(\"userItem\"))), \"\\n        \" ];\n  }), \"\\n      \"), \"\\n    \"), \"\\n  \");\n}));\n\n}).call(this);\n","servePath":"/client/views/users/template.users_list.js","sourceMap":{"version":3,"sources":["/client/views/users/template.users_list.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/views/users/template.users_list.js","sourcesContent":["\nTemplate.__checkName(\"usersList\");\nTemplate[\"usersList\"] = new Template(\"Template.usersList\", (function() {\n  var view = this;\n  return HTML.DIV(HTML.Attrs({\n    id: function() {\n      return Spacebars.mustache(view.lookup(\"id\"));\n    },\n    \"class\": function() {\n      return [ \"component \", Spacebars.mustache(view.lookup(\"class\")) ];\n    }\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"visibility\"), view.lookup(\"name\"));\n  }), \"\\n    \", HTML.H3({\n    \"class\": \"meetingTitle\"\n  }, \"\\n      \", Blaze.View(\"lookup:getMeetingName\", function() {\n    return Spacebars.mustache(view.lookup(\"getMeetingName\"));\n  }), \"\\n    \"), \"\\n    \", HTML.DIV({\n    id: \"user-contents\"\n  }, \"\\n      \", HTML.DIV({\n    \"class\": \"userlist ScrollableWindowY\"\n  }, \"\\n        \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getUsersInMeeting\"));\n  }, function() {\n    return [ \"\\n          \", HTML.DIV({\n      id: \"content\",\n      \"class\": \"userItem\"\n    }, Spacebars.include(view.lookupTemplate(\"userItem\"))), \"\\n        \" ];\n  }), \"\\n      \"), \"\\n    \"), \"\\n  \");\n}));\n"]}},{"type":"js","data":"(function(){\nTemplate.__checkName(\"slide\");\nTemplate[\"slide\"] = new Template(\"Template.slide\", (function() {\n  var view = this;\n  return [ Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getShapesForSlide\"));\n  }, function() {\n    return [ \"\\n\t\t\", Spacebars.include(view.lookupTemplate(\"shape\")), \"\\n\t\" ];\n  }), \"\\n\t\", Blaze.View(\"lookup:updatePointerLocation\", function() {\n    return Spacebars.mustache(view.lookup(\"updatePointerLocation\"), view.lookup(\"pointerLocation\"));\n  }) ];\n}));\n\nTemplate.__checkName(\"shape\");\nTemplate[\"shape\"] = new Template(\"Template.shape\", (function() {\n  var view = this;\n  return \"\";\n}));\n\n}).call(this);\n","servePath":"/client/views/whiteboard/template.slide.js","sourceMap":{"version":3,"sources":["/client/views/whiteboard/template.slide.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/views/whiteboard/template.slide.js","sourcesContent":["\nTemplate.__checkName(\"slide\");\nTemplate[\"slide\"] = new Template(\"Template.slide\", (function() {\n  var view = this;\n  return [ Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getShapesForSlide\"));\n  }, function() {\n    return [ \"\\n\t\t\", Spacebars.include(view.lookupTemplate(\"shape\")), \"\\n\t\" ];\n  }), \"\\n\t\", Blaze.View(\"lookup:updatePointerLocation\", function() {\n    return Spacebars.mustache(view.lookup(\"updatePointerLocation\"), view.lookup(\"pointerLocation\"));\n  }) ];\n}));\n\nTemplate.__checkName(\"shape\");\nTemplate[\"shape\"] = new Template(\"Template.shape\", (function() {\n  var view = this;\n  return \"\";\n}));\n"]}},{"type":"js","data":"(function(){\nTemplate.__checkName(\"whiteboard\");\nTemplate[\"whiteboard\"] = new Template(\"Template.whiteboard\", (function() {\n  var view = this;\n  return HTML.DIV(HTML.Attrs({\n    id: function() {\n      return Spacebars.mustache(view.lookup(\"id\"));\n    },\n    \"class\": \"component\"\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"visibility\"), view.lookup(\"name\"));\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"getCurrentSlide\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"slide\")), \"\\n    \" ];\n  }), \"\\n    \", HTML.DIV({\n    id: \"whiteboard-container\",\n    \"class\": function() {\n      return Spacebars.mustache(view.lookup(\"whiteboardSize\"));\n    }\n  }, \"\\n      \", HTML.Raw('<div id=\"whiteboard-paper\">\\n      </div>'), \"\\n      \", HTML.Raw(\"<!-- TODO: Move this to the whiteboardControls -->\"), \"\\n      \", HTML.DIV({\n    \"class\": function() {\n      return [ \"FABContainer \", Blaze.Unless(function() {\n        return Spacebars.call(view.lookup(\"hasNoPresentation\"));\n      }, function() {\n        return \"noPresentation\";\n      }) ];\n    }\n  }, \"\\n        \", HTML.Raw('<button type=\"submit\" class=\"FABTriggerButton\">\\n          <i class=\"ion-android-hand\"></i>\\n        </button>'), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"sadEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"sad\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", Blaze._TemplateWith(function() {\n    return {\n      name: Spacebars.call(\"sad-face\"),\n      size: Spacebars.call(\"50\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"icon\"));\n  }), \"\\n        \"), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"happyEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"happy\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", Blaze._TemplateWith(function() {\n    return {\n      name: Spacebars.call(\"happy-face\"),\n      size: Spacebars.call(\"50\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"icon\"));\n  }), \"\\n        \"), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"confusedEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"confused\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", Blaze._TemplateWith(function() {\n    return {\n      name: Spacebars.call(\"confused-face\"),\n      size: Spacebars.call(\"50\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"icon\"));\n  }), \"\\n        \"), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"neutralEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"neutral\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", Blaze._TemplateWith(function() {\n    return {\n      name: Spacebars.call(\"neutral-face\"),\n      size: Spacebars.call(\"50\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"icon\"));\n  }), \"\\n        \"), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"awayEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"away\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", Blaze._TemplateWith(function() {\n    return {\n      name: Spacebars.call(\"clock\"),\n      size: Spacebars.call(\"50\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"icon\"));\n  }), \"\\n        \"), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"raiseHandEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"raiseHand\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", HTML.Raw('<i class=\"ion-android-hand\"></i>'), \"\\n        \"), \"\\n      \"), \"\\n\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isMobile\"));\n  }, function() {\n    return [ \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        btn_class: Spacebars.call(\"soaringButton fullscreenButton whiteboardFullscreenButton\"),\n        i_class: Spacebars.call(\"ion-arrow-expand\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n      \" ];\n  }), \"\\n\\n      \", Spacebars.include(view.lookupTemplate(\"whiteboardControls\")), \"\\n    \"), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isPollStarted\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"polling\")), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"whiteboardControls\");\nTemplate[\"whiteboardControls\"] = new Template(\"Template.whiteboardControls\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: \"whiteboard-controls\"\n  }, \"\\n    \", HTML.DIV({\n    \"class\": \"whiteboard-buttons-left\"\n  }, \"\\n      \", HTML.Raw(\"<!-- TODO: Adjust the presenter uploader for mobile views on iOS devices\\n                 you cant upload PDFs, only images from camera/gallery -->\"), \"\\n      \", Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"isMobile\"));\n  }, function() {\n    return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"presenterUploaderControl\")), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n    \", HTML.DIV({\n    \"class\": \"whiteboard-buttons-center\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isCurrentUserPresenter\"));\n  }, function() {\n    return [ \"\\n        \", HTML.DIV({\n      \"class\": \"whiteboard-buttons-slide\"\n    }, \"\\n          \", Blaze._TemplateWith(function() {\n      return {\n        btn_class: Spacebars.call(\"prev\"),\n        i_class: Spacebars.call(\"ion-arrow-left-a\"),\n        rel: Spacebars.call(\"tooltip\"),\n        data_placement: Spacebars.call(\"top\"),\n        title: Spacebars.call(\"Previous\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n          \", HTML.SPAN({\n      \"class\": \"current\"\n    }, \"\\n            \", Blaze.View(\"lookup:presentationProgress\", function() {\n      return Spacebars.mustache(view.lookup(\"presentationProgress\"));\n    }), \"\\n          \"), \"\\n          \", Blaze._TemplateWith(function() {\n      return {\n        btn_class: Spacebars.call(\"next\"),\n        i_class: Spacebars.call(\"ion-arrow-right-a\"),\n        rel: Spacebars.call(\"tooltip\"),\n        data_placement: Spacebars.call(\"top\"),\n        title: Spacebars.call(\"Next\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n        \"), \"\\n      \" ];\n  }), \"\\n    \"), HTML.Raw('\\n    <div class=\"whiteboard-buttons-right\">\\n    </div>\\n  '));\n}));\n\nTemplate.__checkName(\"presenterUploaderControl\");\nTemplate[\"presenterUploaderControl\"] = new Template(\"Template.presenterUploaderControl\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isCurrentUserPresenter\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": function() {\n        return [ \"presenter-uploader-control \", Blaze.If(function() {\n          return Spacebars.call(view.lookup(\"isOpen\"));\n        }, function() {\n          return \"is-open\";\n        }) ];\n      }\n    }, \"\\n      \", HTML.DIV({\n      \"class\": \"presenter-uploader-container\"\n    }, \"\\n        \", HTML.UL({\n      \"class\": \"presenter-uploader-file-list\"\n    }, \"\\n          \", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"files\"));\n    }, function() {\n      return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"presenterUploaderControlFileListItem\")), \"\\n          \" ];\n    }), \"\\n          \", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"presentations\"));\n    }, function() {\n      return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"presenterUploaderControlPresentationListItem\")), \"\\n          \" ];\n    }), \"\\n        \"), \"\\n        \", HTML.DIV({\n      \"class\": \"presenter-uploader-dropzone\",\n      \"data-dropzone\": \"\"\n    }, \"\\n          \", HTML.INPUT({\n      type: \"file\",\n      \"class\": \"presenter-uploader-dropzone-fileinput\",\n      multiple: \"\"\n    }), \"\\n          \", HTML.I({\n      \"class\": \"presenter-uploader-dropzone-icon ion-archive\"\n    }), \"\\n          \", HTML.SPAN({\n      \"class\": \"presenter-uploader-dropzone-label\"\n    }, \"Drop files here \", HTML.BR(), \"or click to upload\"), \"\\n        \"), \"\\n        \", HTML.DIV({\n      \"class\": \"presenter-uploader-tip\"\n    }, \"\\n          Upload any office document or Portable Document Format (PDF) file.\\n          \", HTML.BR(), \"\\n          For best results upload PDF.\\n        \"), \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        btn_class: Spacebars.call(\"presenter-uploader-control-btn js-close\"),\n        i_class: Spacebars.call(\"ion-ios-close-outline\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n      \"), \"\\n\\n      \", Blaze.Unless(function() {\n      return Spacebars.call(view.lookup(\"isOpen\"));\n    }, function() {\n      return [ \"\\n        \", Blaze._TemplateWith(function() {\n        return {\n          btn_class: Spacebars.call(\"presenter-uploader-control-btn js-open\"),\n          i_class: Spacebars.call(\"ion-ios-upload-outline\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n      }), \"\\n      \" ];\n    }), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"presenterUploaderControlFileListItem\");\nTemplate[\"presenterUploaderControlFileListItem\"] = new Template(\"Template.presenterUploaderControlFileListItem\", (function() {\n  var view = this;\n  return HTML.LI({\n    \"class\": \"presenter-uploader-file-item is-uploading\"\n  }, \"\\n    \", HTML.SPAN({\n    \"class\": \"presenter-uploader-file-item-name\"\n  }, \"\\n      \", Blaze.View(\"lookup:name\", function() {\n    return Spacebars.mustache(view.lookup(\"name\"));\n  }), \"\\n    \"), \"\\n    \", HTML.SPAN({\n    \"class\": \"presenter-uploader-file-item-progress\"\n  }, \"\\n      \", Blaze.View(\"lookup:percUploaded\", function() {\n    return Spacebars.mustache(view.lookup(\"percUploaded\"));\n  }), \"%\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"presenterUploaderControlPresentationListItem\");\nTemplate[\"presenterUploaderControlPresentationListItem\"] = new Template(\"Template.presenterUploaderControlPresentationListItem\", (function() {\n  var view = this;\n  return HTML.LI({\n    \"class\": function() {\n      return [ \"presenter-uploader-file-item \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"current\"));\n      }, function() {\n        return \"current\";\n      }) ];\n    }\n  }, \"\\n    \", HTML.SPAN({\n    \"class\": \"presenter-uploader-file-item-name\",\n    \"data-action-show\": \"\"\n  }, \"\\n      \", Blaze.View(\"lookup:name\", function() {\n    return Spacebars.mustache(view.lookup(\"name\"));\n  }), \"\\n    \"), \"\\n    \", HTML.SPAN({\n    \"class\": \"presenter-uploader-file-item-actions\"\n  }, \"\\n      \", Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"current\"));\n  }, function() {\n    return [ \"\\n        \", HTML.I({\n      \"class\": \"ion-ios-eye-outline\",\n      \"data-action-show\": \"\"\n    }), \"\\n      \" ];\n  }), \"\\n      \", HTML.Raw('<i class=\"ion-ios-trash-outline\" data-action-delete=\"\"></i>'), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"polling\");\nTemplate[\"polling\"] = new Template(\"Template.polling\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"polling\"\n  }, \"\\n    \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getPollQuestions\"));\n  }, function() {\n    return [ \"\\n      \", Blaze._TemplateWith(function() {\n      return {\n        btn_class: Spacebars.call(\"pollButtons\"),\n        rel: Spacebars.call(\"tooltip\"),\n        data_placement: Spacebars.call(\"top\"),\n        label: Spacebars.call(view.lookup(\"key\")),\n        answer: Spacebars.call(view.lookup(\"id\")),\n        style: Spacebars.call(view.lookup(\"style\"))\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\n}).call(this);\n","servePath":"/client/views/whiteboard/template.whiteboard.js","sourceMap":{"version":3,"sources":["/client/views/whiteboard/template.whiteboard.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/views/whiteboard/template.whiteboard.js","sourcesContent":["\nTemplate.__checkName(\"whiteboard\");\nTemplate[\"whiteboard\"] = new Template(\"Template.whiteboard\", (function() {\n  var view = this;\n  return HTML.DIV(HTML.Attrs({\n    id: function() {\n      return Spacebars.mustache(view.lookup(\"id\"));\n    },\n    \"class\": \"component\"\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"visibility\"), view.lookup(\"name\"));\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"getCurrentSlide\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"slide\")), \"\\n    \" ];\n  }), \"\\n    \", HTML.DIV({\n    id: \"whiteboard-container\",\n    \"class\": function() {\n      return Spacebars.mustache(view.lookup(\"whiteboardSize\"));\n    }\n  }, \"\\n      \", HTML.Raw('<div id=\"whiteboard-paper\">\\n      </div>'), \"\\n      \", HTML.Raw(\"<!-- TODO: Move this to the whiteboardControls -->\"), \"\\n      \", HTML.DIV({\n    \"class\": function() {\n      return [ \"FABContainer \", Blaze.Unless(function() {\n        return Spacebars.call(view.lookup(\"hasNoPresentation\"));\n      }, function() {\n        return \"noPresentation\";\n      }) ];\n    }\n  }, \"\\n        \", HTML.Raw('<button type=\"submit\" class=\"FABTriggerButton\">\\n          <i class=\"ion-android-hand\"></i>\\n        </button>'), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"sadEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"sad\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", Blaze._TemplateWith(function() {\n    return {\n      name: Spacebars.call(\"sad-face\"),\n      size: Spacebars.call(\"50\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"icon\"));\n  }), \"\\n        \"), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"happyEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"happy\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", Blaze._TemplateWith(function() {\n    return {\n      name: Spacebars.call(\"happy-face\"),\n      size: Spacebars.call(\"50\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"icon\"));\n  }), \"\\n        \"), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"confusedEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"confused\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", Blaze._TemplateWith(function() {\n    return {\n      name: Spacebars.call(\"confused-face\"),\n      size: Spacebars.call(\"50\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"icon\"));\n  }), \"\\n        \"), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"neutralEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"neutral\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", Blaze._TemplateWith(function() {\n    return {\n      name: Spacebars.call(\"neutral-face\"),\n      size: Spacebars.call(\"50\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"icon\"));\n  }), \"\\n        \"), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"awayEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"away\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", Blaze._TemplateWith(function() {\n    return {\n      name: Spacebars.call(\"clock\"),\n      size: Spacebars.call(\"50\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"icon\"));\n  }), \"\\n        \"), \"\\n        \", HTML.BUTTON({\n    type: \"submit\",\n    \"class\": function() {\n      return [ \"raiseHandEmojiButton \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"getCurrentUserEmojiStatus\"), \"raiseHand\");\n      }, function() {\n        return \"activeEmojiButton\";\n      }, function() {\n        return \"inactiveEmojiButton\";\n      }) ];\n    }\n  }, \"\\n          \", HTML.Raw('<i class=\"ion-android-hand\"></i>'), \"\\n        \"), \"\\n      \"), \"\\n\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isMobile\"));\n  }, function() {\n    return [ \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        btn_class: Spacebars.call(\"soaringButton fullscreenButton whiteboardFullscreenButton\"),\n        i_class: Spacebars.call(\"ion-arrow-expand\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n      \" ];\n  }), \"\\n\\n      \", Spacebars.include(view.lookupTemplate(\"whiteboardControls\")), \"\\n    \"), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isPollStarted\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"polling\")), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"whiteboardControls\");\nTemplate[\"whiteboardControls\"] = new Template(\"Template.whiteboardControls\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: \"whiteboard-controls\"\n  }, \"\\n    \", HTML.DIV({\n    \"class\": \"whiteboard-buttons-left\"\n  }, \"\\n      \", HTML.Raw(\"<!-- TODO: Adjust the presenter uploader for mobile views on iOS devices\\n                 you cant upload PDFs, only images from camera/gallery -->\"), \"\\n      \", Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"isMobile\"));\n  }, function() {\n    return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"presenterUploaderControl\")), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n    \", HTML.DIV({\n    \"class\": \"whiteboard-buttons-center\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isCurrentUserPresenter\"));\n  }, function() {\n    return [ \"\\n        \", HTML.DIV({\n      \"class\": \"whiteboard-buttons-slide\"\n    }, \"\\n          \", Blaze._TemplateWith(function() {\n      return {\n        btn_class: Spacebars.call(\"prev\"),\n        i_class: Spacebars.call(\"ion-arrow-left-a\"),\n        rel: Spacebars.call(\"tooltip\"),\n        data_placement: Spacebars.call(\"top\"),\n        title: Spacebars.call(\"Previous\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n          \", HTML.SPAN({\n      \"class\": \"current\"\n    }, \"\\n            \", Blaze.View(\"lookup:presentationProgress\", function() {\n      return Spacebars.mustache(view.lookup(\"presentationProgress\"));\n    }), \"\\n          \"), \"\\n          \", Blaze._TemplateWith(function() {\n      return {\n        btn_class: Spacebars.call(\"next\"),\n        i_class: Spacebars.call(\"ion-arrow-right-a\"),\n        rel: Spacebars.call(\"tooltip\"),\n        data_placement: Spacebars.call(\"top\"),\n        title: Spacebars.call(\"Next\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n        \"), \"\\n      \" ];\n  }), \"\\n    \"), HTML.Raw('\\n    <div class=\"whiteboard-buttons-right\">\\n    </div>\\n  '));\n}));\n\nTemplate.__checkName(\"presenterUploaderControl\");\nTemplate[\"presenterUploaderControl\"] = new Template(\"Template.presenterUploaderControl\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isCurrentUserPresenter\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": function() {\n        return [ \"presenter-uploader-control \", Blaze.If(function() {\n          return Spacebars.call(view.lookup(\"isOpen\"));\n        }, function() {\n          return \"is-open\";\n        }) ];\n      }\n    }, \"\\n      \", HTML.DIV({\n      \"class\": \"presenter-uploader-container\"\n    }, \"\\n        \", HTML.UL({\n      \"class\": \"presenter-uploader-file-list\"\n    }, \"\\n          \", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"files\"));\n    }, function() {\n      return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"presenterUploaderControlFileListItem\")), \"\\n          \" ];\n    }), \"\\n          \", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"presentations\"));\n    }, function() {\n      return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"presenterUploaderControlPresentationListItem\")), \"\\n          \" ];\n    }), \"\\n        \"), \"\\n        \", HTML.DIV({\n      \"class\": \"presenter-uploader-dropzone\",\n      \"data-dropzone\": \"\"\n    }, \"\\n          \", HTML.INPUT({\n      type: \"file\",\n      \"class\": \"presenter-uploader-dropzone-fileinput\",\n      multiple: \"\"\n    }), \"\\n          \", HTML.I({\n      \"class\": \"presenter-uploader-dropzone-icon ion-archive\"\n    }), \"\\n          \", HTML.SPAN({\n      \"class\": \"presenter-uploader-dropzone-label\"\n    }, \"Drop files here \", HTML.BR(), \"or click to upload\"), \"\\n        \"), \"\\n        \", HTML.DIV({\n      \"class\": \"presenter-uploader-tip\"\n    }, \"\\n          Upload any office document or Portable Document Format (PDF) file.\\n          \", HTML.BR(), \"\\n          For best results upload PDF.\\n        \"), \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        btn_class: Spacebars.call(\"presenter-uploader-control-btn js-close\"),\n        i_class: Spacebars.call(\"ion-ios-close-outline\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n      \"), \"\\n\\n      \", Blaze.Unless(function() {\n      return Spacebars.call(view.lookup(\"isOpen\"));\n    }, function() {\n      return [ \"\\n        \", Blaze._TemplateWith(function() {\n        return {\n          btn_class: Spacebars.call(\"presenter-uploader-control-btn js-open\"),\n          i_class: Spacebars.call(\"ion-ios-upload-outline\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n      }), \"\\n      \" ];\n    }), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"presenterUploaderControlFileListItem\");\nTemplate[\"presenterUploaderControlFileListItem\"] = new Template(\"Template.presenterUploaderControlFileListItem\", (function() {\n  var view = this;\n  return HTML.LI({\n    \"class\": \"presenter-uploader-file-item is-uploading\"\n  }, \"\\n    \", HTML.SPAN({\n    \"class\": \"presenter-uploader-file-item-name\"\n  }, \"\\n      \", Blaze.View(\"lookup:name\", function() {\n    return Spacebars.mustache(view.lookup(\"name\"));\n  }), \"\\n    \"), \"\\n    \", HTML.SPAN({\n    \"class\": \"presenter-uploader-file-item-progress\"\n  }, \"\\n      \", Blaze.View(\"lookup:percUploaded\", function() {\n    return Spacebars.mustache(view.lookup(\"percUploaded\"));\n  }), \"%\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"presenterUploaderControlPresentationListItem\");\nTemplate[\"presenterUploaderControlPresentationListItem\"] = new Template(\"Template.presenterUploaderControlPresentationListItem\", (function() {\n  var view = this;\n  return HTML.LI({\n    \"class\": function() {\n      return [ \"presenter-uploader-file-item \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"current\"));\n      }, function() {\n        return \"current\";\n      }) ];\n    }\n  }, \"\\n    \", HTML.SPAN({\n    \"class\": \"presenter-uploader-file-item-name\",\n    \"data-action-show\": \"\"\n  }, \"\\n      \", Blaze.View(\"lookup:name\", function() {\n    return Spacebars.mustache(view.lookup(\"name\"));\n  }), \"\\n    \"), \"\\n    \", HTML.SPAN({\n    \"class\": \"presenter-uploader-file-item-actions\"\n  }, \"\\n      \", Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"current\"));\n  }, function() {\n    return [ \"\\n        \", HTML.I({\n      \"class\": \"ion-ios-eye-outline\",\n      \"data-action-show\": \"\"\n    }), \"\\n      \" ];\n  }), \"\\n      \", HTML.Raw('<i class=\"ion-ios-trash-outline\" data-action-delete=\"\"></i>'), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"polling\");\nTemplate[\"polling\"] = new Template(\"Template.polling\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"polling\"\n  }, \"\\n    \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"getPollQuestions\"));\n  }, function() {\n    return [ \"\\n      \", Blaze._TemplateWith(function() {\n      return {\n        btn_class: Spacebars.call(\"pollButtons\"),\n        rel: Spacebars.call(\"tooltip\"),\n        data_placement: Spacebars.call(\"top\"),\n        label: Spacebars.call(view.lookup(\"key\")),\n        answer: Spacebars.call(view.lookup(\"id\")),\n        style: Spacebars.call(view.lookup(\"style\"))\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n    }), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n"]}},{"type":"js","data":"(function(){\nTemplate.__checkName(\"layout\");\nTemplate[\"layout\"] = new Template(\"Template.layout\", (function() {\n  var view = this;\n  return Spacebars.include(view.lookupTemplate(\"yield\"));\n}));\n\n}).call(this);\n","servePath":"/client/views/template.layout.js","sourceMap":{"version":3,"sources":["/client/views/template.layout.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA","file":"/client/views/template.layout.js","sourcesContent":["\nTemplate.__checkName(\"layout\");\nTemplate[\"layout\"] = new Template(\"Template.layout\", (function() {\n  var view = this;\n  return Spacebars.include(view.lookupTemplate(\"yield\"));\n}));\n"]}},{"type":"js","data":"(function(){\nTemplate.__checkName(\"makeButton\");\nTemplate[\"makeButton\"] = new Template(\"Template.makeButton\", (function() {\n  var view = this;\n  return HTML.BUTTON(HTML.Attrs({\n    type: \"submit\",\n    id: function() {\n      return Spacebars.mustache(view.lookup(\"id\"));\n    },\n    \"class\": function() {\n      return [ \"btn \", Spacebars.mustache(view.lookup(\"btn_class\")) ];\n    },\n    rel: function() {\n      return Spacebars.mustache(view.lookup(\"rel\"));\n    },\n    \"data-placement\": function() {\n      return Spacebars.mustache(view.lookup(\"data_placement\"));\n    },\n    title: function() {\n      return Spacebars.mustache(view.lookup(\"title\"));\n    },\n    style: function() {\n      return Spacebars.mustache(view.lookup(\"style\"));\n    }\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"isDisabled\"));\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"notification\"));\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"hasGotUnreadMail\"), view.lookup(\"notification\"));\n    }, function() {\n      return [ \"\\n        \", HTML.DIV({\n        \"class\": function() {\n          return Spacebars.mustache(view.lookup(\"getNotificationClass\"), view.lookup(\"notification\"));\n        }\n      }, Blaze.View(\"lookup:getNumberOfUnreadMessages\", function() {\n        return Spacebars.mustache(view.lookup(\"getNumberOfUnreadMessages\"), view.lookup(\"notification\"));\n      })), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"i_class\"));\n  }, function() {\n    return [ \"\\n      \", HTML.I({\n      \"class\": function() {\n        return Spacebars.mustache(view.lookup(\"i_class\"));\n      }\n    }), \"\\n    \" ];\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"label\"));\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN(Blaze.View(\"lookup:label\", function() {\n      return Spacebars.mustache(view.lookup(\"label\"));\n    })), \"\\n    \" ];\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"span\"));\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN(), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\n}).call(this);\n","servePath":"/client/views/template.sharedTemplates.js","sourceMap":{"version":3,"sources":["/client/views/template.sharedTemplates.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/views/template.sharedTemplates.js","sourcesContent":["\nTemplate.__checkName(\"makeButton\");\nTemplate[\"makeButton\"] = new Template(\"Template.makeButton\", (function() {\n  var view = this;\n  return HTML.BUTTON(HTML.Attrs({\n    type: \"submit\",\n    id: function() {\n      return Spacebars.mustache(view.lookup(\"id\"));\n    },\n    \"class\": function() {\n      return [ \"btn \", Spacebars.mustache(view.lookup(\"btn_class\")) ];\n    },\n    rel: function() {\n      return Spacebars.mustache(view.lookup(\"rel\"));\n    },\n    \"data-placement\": function() {\n      return Spacebars.mustache(view.lookup(\"data_placement\"));\n    },\n    title: function() {\n      return Spacebars.mustache(view.lookup(\"title\"));\n    },\n    style: function() {\n      return Spacebars.mustache(view.lookup(\"style\"));\n    }\n  }, function() {\n    return Spacebars.attrMustache(view.lookup(\"isDisabled\"));\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"notification\"));\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"hasGotUnreadMail\"), view.lookup(\"notification\"));\n    }, function() {\n      return [ \"\\n        \", HTML.DIV({\n        \"class\": function() {\n          return Spacebars.mustache(view.lookup(\"getNotificationClass\"), view.lookup(\"notification\"));\n        }\n      }, Blaze.View(\"lookup:getNumberOfUnreadMessages\", function() {\n        return Spacebars.mustache(view.lookup(\"getNumberOfUnreadMessages\"), view.lookup(\"notification\"));\n      })), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"i_class\"));\n  }, function() {\n    return [ \"\\n      \", HTML.I({\n      \"class\": function() {\n        return Spacebars.mustache(view.lookup(\"i_class\"));\n      }\n    }), \"\\n    \" ];\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"label\"));\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN(Blaze.View(\"lookup:label\", function() {\n      return Spacebars.mustache(view.lookup(\"label\"));\n    })), \"\\n    \" ];\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"span\"));\n  }, function() {\n    return [ \"\\n      \", HTML.SPAN(), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n"]}},{"type":"js","data":"(function(){\nTemplate.__checkName(\"header\");\nTemplate[\"header\"] = new Template(\"Template.header\", (function() {\n  var view = this;\n  return HTML.NAV({\n    id: \"navbar\",\n    \"class\": \"myNavbar top-bar\",\n    role: \"navigation\"\n  }, \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      btn_class: Spacebars.call(\"btn toggleUserlistButton navbarButton leftHamburgerButton\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Toggle Userlist\"),\n      span: Spacebars.call(true),\n      notification: Spacebars.call(\"all_chats\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"amIInAudio\"));\n  }, function() {\n    return [ \"\\n        \", HTML.DIV({\n      \"class\": \"audioNavbarSection\"\n    }, \"\\n          \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"amIListenOnlyAudio\"));\n    }, function() {\n      return [ \"\\n            \", Blaze._TemplateWith(function() {\n        return {\n          btn_class: Spacebars.call(\"navbarButton leaveAudioButton\"),\n          i_class: Spacebars.call(\"icon fi-volume-none\"),\n          rel: Spacebars.call(\"tooltip\"),\n          title: Spacebars.call(\"Exit Audio\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n      }), \"\\n          \" ];\n    }, function() {\n      return [ \"\\n            \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"isCurrentUserMuted\"));\n      }, function() {\n        return [ \"\\n              \", HTML.Comment(\" if you are muted the button representing your status will show volume off \"), \"\\n              \", Blaze._TemplateWith(function() {\n          return {\n            btn_class: Spacebars.call(\"navbarButton muteIcon\"),\n            i_class: Spacebars.call(\"ion-ios-mic-off\"),\n            rel: Spacebars.call(\"tooltip\"),\n            title: Spacebars.call(\"Unmute\")\n          };\n        }, function() {\n          return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n        }), \"\\n            \" ];\n      }, function() {\n        return [ \"\\n              \", Blaze.If(function() {\n          return Spacebars.call(view.lookup(\"isCurrentUserTalking\"));\n        }, function() {\n          return [ \"\\n                \", HTML.Comment(\" you are talking. Display a high volume/volume up representing voice activity \"), \"\\n                \", Blaze._TemplateWith(function() {\n            return {\n              btn_class: Spacebars.call(\"navbarButton muteIcon\"),\n              i_class: Spacebars.call(\"ion-ios-mic\"),\n              rel: Spacebars.call(\"tooltip\"),\n              title: Spacebars.call(\"Mute\")\n            };\n          }, function() {\n            return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n          }), \"\\n              \" ];\n        }, function() {\n          return [ \"\\n                \", HTML.Comment(\" you are not talking. Display low volume/volume down representing no voice activity \"), \"\\n                \", Blaze._TemplateWith(function() {\n            return {\n              btn_class: Spacebars.call(\"navbarButton muteIcon\"),\n              i_class: Spacebars.call(\"ion-ios-mic-outline\"),\n              rel: Spacebars.call(\"tooltip\"),\n              title: Spacebars.call(\"Mute\")\n            };\n          }, function() {\n            return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n          }), \"\\n              \" ];\n        }), \"\\n            \" ];\n      }), \"\\n          \" ];\n    }), \"\\n        \"), \"\\n        \", HTML.SPAN({\n      \"class\": \"navbarTitle shiftedTitle\"\n    }, \"\\n          \", Blaze.View(\"lookup:getWhiteboardTitle\", function() {\n      return Spacebars.mustache(view.lookup(\"getWhiteboardTitle\"));\n    }), \"\\n        \"), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n        \", HTML.SPAN({\n      \"class\": \"navbarTitle defaultTitle\"\n    }, \"\\n          \", Blaze.View(\"lookup:getWhiteboardTitle\", function() {\n      return Spacebars.mustache(view.lookup(\"getWhiteboardTitle\"));\n    }), \"\\n        \"), \"\\n      \" ];\n  }), \"\\n\\n    \", HTML.DIV({\n    \"class\": \"rightNavbarSection\"\n  }, \"\\n      \", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"settingsIcon\"),\n      btn_class: Spacebars.call(\"settingsIcon navbarButton\"),\n      i_class: Spacebars.call(\"ion-gear-b\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"BigBlueButton Settings\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n\\n      \", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"logout\"),\n      btn_class: Spacebars.call(\"signOutIcon navbarButton\"),\n      i_class: Spacebars.call(\"ion-log-out\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Logout\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n    \"), \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      btn_class: Spacebars.call(\"btn toggleMenuButton navbarButton rightHamburgerButton\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Toggle Menu\"),\n      span: Spacebars.call(true)\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"main\");\nTemplate[\"main\"] = new Template(\"Template.main\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: \"container\",\n    \"class\": function() {\n      return Spacebars.mustache(view.lookup(\"containerPosition\"));\n    }\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isDisconnected\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"status\")), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      \", HTML.DIV({\n      \"class\": \"userlistMenu\"\n    }, \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        id: Spacebars.call(\"users\"),\n        name: Spacebars.call(\"usersList\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"usersList\"));\n    }), \"\\n      \"), \"\\n      \", HTML.DIV({\n      \"class\": \"settingsMenu\"\n    }, \"\\n        \", HTML.DIV({\n      \"class\": \"titleArea\"\n    }), \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        id: Spacebars.call(\"menu\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"menu\"));\n    }), \"\\n      \"), \"\\n      \", HTML.DIV({\n      id: \"main\"\n    }, \"\\n        \", Spacebars.include(view.lookupTemplate(\"header\")), \"\\n        \", HTML.DIV({\n      id: \"panels\"\n    }, \"\\n          \", HTML.DIV({\n      \"class\": \"shield\"\n    }), \"\\n          \", Blaze._TemplateWith(function() {\n      return {\n        id: Spacebars.call(\"whiteboard\"),\n        name: Spacebars.call(\"whiteboard\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"whiteboard\"));\n    }), \"\\n          \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"getInSession\"), \"display_chatbar\");\n    }, function() {\n      return [ \"\\n            \", Blaze._TemplateWith(function() {\n        return {\n          id: Spacebars.call(\"chat\"),\n          title: Spacebars.call(\"Chat\"),\n          name: Spacebars.call(\"chatbar\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"chatbar\"));\n      }), \"\\n          \" ];\n    }), \"\\n        \"), \"\\n        \", Spacebars.include(view.lookupTemplate(\"modals\")), \"\\n      \"), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"modals\");\nTemplate[\"modals\"] = new Template(\"Template.modals\", (function() {\n  var view = this;\n  return [ HTML.DIV({\n    id: \"settingsModal\",\n    \"class\": \"reveal-modal small\",\n    \"data-reveal\": \"\",\n    \"aria-labelledby\": \"modalTitle\",\n    \"aria-hidden\": \"true\",\n    role: \"dialog\",\n    \"data-options\": \"close_on_background_click:false\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"settingsModal\")), \"\\n  \"), \"\\n  \", HTML.DIV({\n    id: \"logoutModal\",\n    \"class\": \"reveal-modal tiny\",\n    \"data-reveal\": \"\",\n    \"aria-labelledby\": \"modalTitle\",\n    \"aria-hidden\": \"true\",\n    role: \"dialog\",\n    \"data-options\": \"close_on_background_click:false\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"logoutModal\")), \"\\n  \"), HTML.Raw('\\n  <audio id=\"remote-media\" autoplay=\"autoplay\"></audio>') ];\n}));\n\nTemplate.__checkName(\"recordingStatus\");\nTemplate[\"recordingStatus\"] = new Template(\"Template.recordingStatus\", (function() {\n  var view = this;\n  return \"\";\n}));\n\nTemplate.__checkName(\"menu\");\nTemplate[\"menu\"] = new Template(\"Template.menu\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: function() {\n      return Spacebars.mustache(view.lookup(\"id\"));\n    }\n  }, \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      btn_class: Spacebars.call(\"slideButton toggleChatButton\"),\n      i_class: Spacebars.call(\"ion-chatbubble\"),\n      label: Spacebars.call(\"Chat\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      btn_class: Spacebars.call(\"slideButton settingsIcon\"),\n      i_class: Spacebars.call(\"ion-gear-b\"),\n      label: Spacebars.call(\"Settings\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      btn_class: Spacebars.call(\"slideButton signOutIcon\"),\n      i_class: Spacebars.call(\"ion-log-out\"),\n      label: Spacebars.call(\"Log out\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"loading\");\nTemplate[\"loading\"] = new Template(\"Template.loading\", (function() {\n  var view = this;\n  return HTML.Raw('<div id=\"floatingCirclesG\">\\n  <div class=\"f_circleG\" id=\"frotateG_01\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_02\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_03\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_04\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_05\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_06\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_07\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_08\"></div>\\n</div>');\n}));\n\nTemplate.__checkName(\"icon\");\nTemplate[\"icon\"] = new Template(\"Template.icon\", (function() {\n  var view = this;\n  return HTML.SVG({\n    width: function() {\n      return Spacebars.mustache(view.lookup(\"size\"));\n    },\n    height: function() {\n      return Spacebars.mustache(view.lookup(\"size\"));\n    },\n    viewBox: \"0 0 50 50\"\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"happy-face\");\n  }, function() {\n    return [ \"\\n      \", HTML.CIRCLE({\n      cx: \"25\",\n      cy: \"25\",\n      r: \"14\",\n      stroke: \"white\",\n      \"stroke-width\": \"3\",\n      fill: \"transparent\"\n    }), \"\\n      \", HTML.CIRCLE({\n      cx: \"19\",\n      cy: \"22\",\n      r: \"1\",\n      stroke: \"white\",\n      \"stroke-width\": \"2\",\n      fill: \"white\"\n    }), \"\\n      \", HTML.CIRCLE({\n      cx: \"31\",\n      cy: \"22\",\n      r: \"1\",\n      stroke: \"white\",\n      \"stroke-width\": \"2\",\n      fill: \"white\"\n    }), \"\\n      \", HTML.PATH({\n      d: \"m18 30 C 21 33, 29 33, 32 30\",\n      stroke: \"white\",\n      \"stroke-width\": \"3\",\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      fill: \"none\"\n    }), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"neutral-face\");\n    }, function() {\n      return [ \"\\n        \", HTML.CIRCLE({\n        cx: \"25\",\n        cy: \"25\",\n        r: \"14\",\n        stroke: \"white\",\n        \"stroke-width\": \"3\",\n        fill: \"transparent\"\n      }), \"\\n        \", HTML.CIRCLE({\n        cx: \"19\",\n        cy: \"22\",\n        r: \"1\",\n        stroke: \"white\",\n        \"stroke-width\": \"2\",\n        fill: \"white\"\n      }), \"\\n        \", HTML.CIRCLE({\n        cx: \"31\",\n        cy: \"22\",\n        r: \"1\",\n        stroke: \"white\",\n        \"stroke-width\": \"2\",\n        fill: \"white\"\n      }), \"\\n        \", HTML.PATH({\n        d: \"m18 30 l 14 0\",\n        stroke: \"white\",\n        \"stroke-width\": \"3\",\n        \"stroke-linecap\": \"round\",\n        \"stroke-linejoin\": \"round\"\n      }), \"\\n      \" ];\n    }, function() {\n      return [ \"\\n        \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"confused-face\");\n      }, function() {\n        return [ \"\\n          \", HTML.CIRCLE({\n          cx: \"25\",\n          cy: \"25\",\n          r: \"14\",\n          stroke: \"white\",\n          \"stroke-width\": \"3\",\n          fill: \"transparent\"\n        }), \"\\n          \", HTML.CIRCLE({\n          cx: \"19\",\n          cy: \"22\",\n          r: \"1\",\n          stroke: \"white\",\n          \"stroke-width\": \"2\",\n          fill: \"white\"\n        }), \"\\n          \", HTML.CIRCLE({\n          cx: \"31\",\n          cy: \"22\",\n          r: \"1\",\n          stroke: \"white\",\n          \"stroke-width\": \"2\",\n          fill: \"white\"\n        }), \"\\n          \", HTML.PATH({\n          d: \"M18 30 C 20 28, 22 28, 25 30 S 30 32, 32 30\",\n          stroke: \"white\",\n          \"stroke-width\": \"3\",\n          \"stroke-linecap\": \"round\",\n          \"stroke-linejoin\": \"round\"\n        }), \"\\n        \" ];\n      }, function() {\n        return [ \"\\n          \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"sad-face\");\n        }, function() {\n          return [ \"\\n            \", HTML.CIRCLE({\n            cx: \"25\",\n            cy: \"25\",\n            r: \"14\",\n            stroke: \"white\",\n            \"stroke-width\": \"3\",\n            fill: \"transparent\"\n          }), \"\\n            \", HTML.CIRCLE({\n            cx: \"19\",\n            cy: \"22\",\n            r: \"1\",\n            stroke: \"white\",\n            \"stroke-width\": \"2\",\n            fill: \"white\"\n          }), \"\\n            \", HTML.CIRCLE({\n            cx: \"31\",\n            cy: \"22\",\n            r: \"1\",\n            stroke: \"white\",\n            \"stroke-width\": \"2\",\n            fill: \"white\"\n          }), \"\\n            \", HTML.PATH({\n            d: \"m18 30 C 21 27, 29 27, 32 30\",\n            stroke: \"white\",\n            \"stroke-width\": \"3\",\n            \"stroke-linecap\": \"round\",\n            \"stroke-linejoin\": \"round\",\n            fill: \"none\"\n          }), \"\\n          \" ];\n        }, function() {\n          return [ \"\\n            \", Blaze.If(function() {\n            return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"clock\");\n          }, function() {\n            return [ \"\\n              \", HTML.CIRCLE({\n              cx: \"25\",\n              cy: \"25\",\n              r: \"14\",\n              stroke: \"white\",\n              \"stroke-width\": \"3\",\n              fill: \"transparent\"\n            }), \"\\n              \", HTML.PATH({\n              d: \"m25 25 l 0 -8\",\n              stroke: \"white\",\n              \"stroke-width\": \"3\",\n              \"stroke-linecap\": \"round\",\n              \"stroke-linejoin\": \"round\"\n            }), \"\\n              \", HTML.PATH({\n              d: \"m25 25 l 5 5\",\n              stroke: \"white\",\n              \"stroke-width\": \"3\",\n              \"stroke-linecap\": \"round\",\n              \"stroke-linejoin\": \"round\"\n            }), \"\\n            \" ];\n          }, function() {\n            return [ \"\\n              \", Blaze.If(function() {\n              return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"plus\");\n            }, function() {\n              return [ \"\\n                \", HTML.PATH({\n                d: \"m25 18 l 0 14\",\n                stroke: \"white\",\n                \"stroke-width\": \"3\",\n                \"stroke-linecap\": \"round\",\n                \"stroke-linejoin\": \"round\"\n              }), \"\\n                \", HTML.PATH({\n                d: \"m18 25 l 14 0\",\n                stroke: \"white\",\n                \"stroke-width\": \"3\",\n                \"stroke-linecap\": \"round\",\n                \"stroke-linejoin\": \"round\"\n              }), \"\\n              \" ];\n            }), \"\\n            \" ];\n          }), \"\\n          \" ];\n        }), \"\\n        \" ];\n      }), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\n}).call(this);\n","servePath":"/client/template.main.js","sourceMap":{"version":3,"sources":["/client/template.main.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/template.main.js","sourcesContent":["\nTemplate.__checkName(\"header\");\nTemplate[\"header\"] = new Template(\"Template.header\", (function() {\n  var view = this;\n  return HTML.NAV({\n    id: \"navbar\",\n    \"class\": \"myNavbar top-bar\",\n    role: \"navigation\"\n  }, \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      btn_class: Spacebars.call(\"btn toggleUserlistButton navbarButton leftHamburgerButton\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Toggle Userlist\"),\n      span: Spacebars.call(true),\n      notification: Spacebars.call(\"all_chats\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"amIInAudio\"));\n  }, function() {\n    return [ \"\\n        \", HTML.DIV({\n      \"class\": \"audioNavbarSection\"\n    }, \"\\n          \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"amIListenOnlyAudio\"));\n    }, function() {\n      return [ \"\\n            \", Blaze._TemplateWith(function() {\n        return {\n          btn_class: Spacebars.call(\"navbarButton leaveAudioButton\"),\n          i_class: Spacebars.call(\"icon fi-volume-none\"),\n          rel: Spacebars.call(\"tooltip\"),\n          title: Spacebars.call(\"Exit Audio\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n      }), \"\\n          \" ];\n    }, function() {\n      return [ \"\\n            \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"isCurrentUserMuted\"));\n      }, function() {\n        return [ \"\\n              \", HTML.Comment(\" if you are muted the button representing your status will show volume off \"), \"\\n              \", Blaze._TemplateWith(function() {\n          return {\n            btn_class: Spacebars.call(\"navbarButton muteIcon\"),\n            i_class: Spacebars.call(\"ion-ios-mic-off\"),\n            rel: Spacebars.call(\"tooltip\"),\n            title: Spacebars.call(\"Unmute\")\n          };\n        }, function() {\n          return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n        }), \"\\n            \" ];\n      }, function() {\n        return [ \"\\n              \", Blaze.If(function() {\n          return Spacebars.call(view.lookup(\"isCurrentUserTalking\"));\n        }, function() {\n          return [ \"\\n                \", HTML.Comment(\" you are talking. Display a high volume/volume up representing voice activity \"), \"\\n                \", Blaze._TemplateWith(function() {\n            return {\n              btn_class: Spacebars.call(\"navbarButton muteIcon\"),\n              i_class: Spacebars.call(\"ion-ios-mic\"),\n              rel: Spacebars.call(\"tooltip\"),\n              title: Spacebars.call(\"Mute\")\n            };\n          }, function() {\n            return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n          }), \"\\n              \" ];\n        }, function() {\n          return [ \"\\n                \", HTML.Comment(\" you are not talking. Display low volume/volume down representing no voice activity \"), \"\\n                \", Blaze._TemplateWith(function() {\n            return {\n              btn_class: Spacebars.call(\"navbarButton muteIcon\"),\n              i_class: Spacebars.call(\"ion-ios-mic-outline\"),\n              rel: Spacebars.call(\"tooltip\"),\n              title: Spacebars.call(\"Mute\")\n            };\n          }, function() {\n            return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n          }), \"\\n              \" ];\n        }), \"\\n            \" ];\n      }), \"\\n          \" ];\n    }), \"\\n        \"), \"\\n        \", HTML.SPAN({\n      \"class\": \"navbarTitle shiftedTitle\"\n    }, \"\\n          \", Blaze.View(\"lookup:getWhiteboardTitle\", function() {\n      return Spacebars.mustache(view.lookup(\"getWhiteboardTitle\"));\n    }), \"\\n        \"), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n        \", HTML.SPAN({\n      \"class\": \"navbarTitle defaultTitle\"\n    }, \"\\n          \", Blaze.View(\"lookup:getWhiteboardTitle\", function() {\n      return Spacebars.mustache(view.lookup(\"getWhiteboardTitle\"));\n    }), \"\\n        \"), \"\\n      \" ];\n  }), \"\\n\\n    \", HTML.DIV({\n    \"class\": \"rightNavbarSection\"\n  }, \"\\n      \", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"settingsIcon\"),\n      btn_class: Spacebars.call(\"settingsIcon navbarButton\"),\n      i_class: Spacebars.call(\"ion-gear-b\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"BigBlueButton Settings\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n\\n      \", Blaze._TemplateWith(function() {\n    return {\n      id: Spacebars.call(\"logout\"),\n      btn_class: Spacebars.call(\"signOutIcon navbarButton\"),\n      i_class: Spacebars.call(\"ion-log-out\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Logout\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n    \"), \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      btn_class: Spacebars.call(\"btn toggleMenuButton navbarButton rightHamburgerButton\"),\n      rel: Spacebars.call(\"tooltip\"),\n      title: Spacebars.call(\"Toggle Menu\"),\n      span: Spacebars.call(true)\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"main\");\nTemplate[\"main\"] = new Template(\"Template.main\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: \"container\",\n    \"class\": function() {\n      return Spacebars.mustache(view.lookup(\"containerPosition\"));\n    }\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isDisconnected\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"status\")), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      \", HTML.DIV({\n      \"class\": \"userlistMenu\"\n    }, \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        id: Spacebars.call(\"users\"),\n        name: Spacebars.call(\"usersList\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"usersList\"));\n    }), \"\\n      \"), \"\\n      \", HTML.DIV({\n      \"class\": \"settingsMenu\"\n    }, \"\\n        \", HTML.DIV({\n      \"class\": \"titleArea\"\n    }), \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        id: Spacebars.call(\"menu\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"menu\"));\n    }), \"\\n      \"), \"\\n      \", HTML.DIV({\n      id: \"main\"\n    }, \"\\n        \", Spacebars.include(view.lookupTemplate(\"header\")), \"\\n        \", HTML.DIV({\n      id: \"panels\"\n    }, \"\\n          \", HTML.DIV({\n      \"class\": \"shield\"\n    }), \"\\n          \", Blaze._TemplateWith(function() {\n      return {\n        id: Spacebars.call(\"whiteboard\"),\n        name: Spacebars.call(\"whiteboard\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"whiteboard\"));\n    }), \"\\n          \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"getInSession\"), \"display_chatbar\");\n    }, function() {\n      return [ \"\\n            \", Blaze._TemplateWith(function() {\n        return {\n          id: Spacebars.call(\"chat\"),\n          title: Spacebars.call(\"Chat\"),\n          name: Spacebars.call(\"chatbar\")\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"chatbar\"));\n      }), \"\\n          \" ];\n    }), \"\\n        \"), \"\\n        \", Spacebars.include(view.lookupTemplate(\"modals\")), \"\\n      \"), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"modals\");\nTemplate[\"modals\"] = new Template(\"Template.modals\", (function() {\n  var view = this;\n  return [ HTML.DIV({\n    id: \"settingsModal\",\n    \"class\": \"reveal-modal small\",\n    \"data-reveal\": \"\",\n    \"aria-labelledby\": \"modalTitle\",\n    \"aria-hidden\": \"true\",\n    role: \"dialog\",\n    \"data-options\": \"close_on_background_click:false\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"settingsModal\")), \"\\n  \"), \"\\n  \", HTML.DIV({\n    id: \"logoutModal\",\n    \"class\": \"reveal-modal tiny\",\n    \"data-reveal\": \"\",\n    \"aria-labelledby\": \"modalTitle\",\n    \"aria-hidden\": \"true\",\n    role: \"dialog\",\n    \"data-options\": \"close_on_background_click:false\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"logoutModal\")), \"\\n  \"), HTML.Raw('\\n  <audio id=\"remote-media\" autoplay=\"autoplay\"></audio>') ];\n}));\n\nTemplate.__checkName(\"recordingStatus\");\nTemplate[\"recordingStatus\"] = new Template(\"Template.recordingStatus\", (function() {\n  var view = this;\n  return \"\";\n}));\n\nTemplate.__checkName(\"menu\");\nTemplate[\"menu\"] = new Template(\"Template.menu\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: function() {\n      return Spacebars.mustache(view.lookup(\"id\"));\n    }\n  }, \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      btn_class: Spacebars.call(\"slideButton toggleChatButton\"),\n      i_class: Spacebars.call(\"ion-chatbubble\"),\n      label: Spacebars.call(\"Chat\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      btn_class: Spacebars.call(\"slideButton settingsIcon\"),\n      i_class: Spacebars.call(\"ion-gear-b\"),\n      label: Spacebars.call(\"Settings\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      btn_class: Spacebars.call(\"slideButton signOutIcon\"),\n      i_class: Spacebars.call(\"ion-log-out\"),\n      label: Spacebars.call(\"Log out\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"makeButton\"));\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"loading\");\nTemplate[\"loading\"] = new Template(\"Template.loading\", (function() {\n  var view = this;\n  return HTML.Raw('<div id=\"floatingCirclesG\">\\n  <div class=\"f_circleG\" id=\"frotateG_01\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_02\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_03\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_04\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_05\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_06\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_07\"></div>\\n  <div class=\"f_circleG\" id=\"frotateG_08\"></div>\\n</div>');\n}));\n\nTemplate.__checkName(\"icon\");\nTemplate[\"icon\"] = new Template(\"Template.icon\", (function() {\n  var view = this;\n  return HTML.SVG({\n    width: function() {\n      return Spacebars.mustache(view.lookup(\"size\"));\n    },\n    height: function() {\n      return Spacebars.mustache(view.lookup(\"size\"));\n    },\n    viewBox: \"0 0 50 50\"\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"happy-face\");\n  }, function() {\n    return [ \"\\n      \", HTML.CIRCLE({\n      cx: \"25\",\n      cy: \"25\",\n      r: \"14\",\n      stroke: \"white\",\n      \"stroke-width\": \"3\",\n      fill: \"transparent\"\n    }), \"\\n      \", HTML.CIRCLE({\n      cx: \"19\",\n      cy: \"22\",\n      r: \"1\",\n      stroke: \"white\",\n      \"stroke-width\": \"2\",\n      fill: \"white\"\n    }), \"\\n      \", HTML.CIRCLE({\n      cx: \"31\",\n      cy: \"22\",\n      r: \"1\",\n      stroke: \"white\",\n      \"stroke-width\": \"2\",\n      fill: \"white\"\n    }), \"\\n      \", HTML.PATH({\n      d: \"m18 30 C 21 33, 29 33, 32 30\",\n      stroke: \"white\",\n      \"stroke-width\": \"3\",\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      fill: \"none\"\n    }), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"neutral-face\");\n    }, function() {\n      return [ \"\\n        \", HTML.CIRCLE({\n        cx: \"25\",\n        cy: \"25\",\n        r: \"14\",\n        stroke: \"white\",\n        \"stroke-width\": \"3\",\n        fill: \"transparent\"\n      }), \"\\n        \", HTML.CIRCLE({\n        cx: \"19\",\n        cy: \"22\",\n        r: \"1\",\n        stroke: \"white\",\n        \"stroke-width\": \"2\",\n        fill: \"white\"\n      }), \"\\n        \", HTML.CIRCLE({\n        cx: \"31\",\n        cy: \"22\",\n        r: \"1\",\n        stroke: \"white\",\n        \"stroke-width\": \"2\",\n        fill: \"white\"\n      }), \"\\n        \", HTML.PATH({\n        d: \"m18 30 l 14 0\",\n        stroke: \"white\",\n        \"stroke-width\": \"3\",\n        \"stroke-linecap\": \"round\",\n        \"stroke-linejoin\": \"round\"\n      }), \"\\n      \" ];\n    }, function() {\n      return [ \"\\n        \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"confused-face\");\n      }, function() {\n        return [ \"\\n          \", HTML.CIRCLE({\n          cx: \"25\",\n          cy: \"25\",\n          r: \"14\",\n          stroke: \"white\",\n          \"stroke-width\": \"3\",\n          fill: \"transparent\"\n        }), \"\\n          \", HTML.CIRCLE({\n          cx: \"19\",\n          cy: \"22\",\n          r: \"1\",\n          stroke: \"white\",\n          \"stroke-width\": \"2\",\n          fill: \"white\"\n        }), \"\\n          \", HTML.CIRCLE({\n          cx: \"31\",\n          cy: \"22\",\n          r: \"1\",\n          stroke: \"white\",\n          \"stroke-width\": \"2\",\n          fill: \"white\"\n        }), \"\\n          \", HTML.PATH({\n          d: \"M18 30 C 20 28, 22 28, 25 30 S 30 32, 32 30\",\n          stroke: \"white\",\n          \"stroke-width\": \"3\",\n          \"stroke-linecap\": \"round\",\n          \"stroke-linejoin\": \"round\"\n        }), \"\\n        \" ];\n      }, function() {\n        return [ \"\\n          \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"sad-face\");\n        }, function() {\n          return [ \"\\n            \", HTML.CIRCLE({\n            cx: \"25\",\n            cy: \"25\",\n            r: \"14\",\n            stroke: \"white\",\n            \"stroke-width\": \"3\",\n            fill: \"transparent\"\n          }), \"\\n            \", HTML.CIRCLE({\n            cx: \"19\",\n            cy: \"22\",\n            r: \"1\",\n            stroke: \"white\",\n            \"stroke-width\": \"2\",\n            fill: \"white\"\n          }), \"\\n            \", HTML.CIRCLE({\n            cx: \"31\",\n            cy: \"22\",\n            r: \"1\",\n            stroke: \"white\",\n            \"stroke-width\": \"2\",\n            fill: \"white\"\n          }), \"\\n            \", HTML.PATH({\n            d: \"m18 30 C 21 27, 29 27, 32 30\",\n            stroke: \"white\",\n            \"stroke-width\": \"3\",\n            \"stroke-linecap\": \"round\",\n            \"stroke-linejoin\": \"round\",\n            fill: \"none\"\n          }), \"\\n          \" ];\n        }, function() {\n          return [ \"\\n            \", Blaze.If(function() {\n            return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"clock\");\n          }, function() {\n            return [ \"\\n              \", HTML.CIRCLE({\n              cx: \"25\",\n              cy: \"25\",\n              r: \"14\",\n              stroke: \"white\",\n              \"stroke-width\": \"3\",\n              fill: \"transparent\"\n            }), \"\\n              \", HTML.PATH({\n              d: \"m25 25 l 0 -8\",\n              stroke: \"white\",\n              \"stroke-width\": \"3\",\n              \"stroke-linecap\": \"round\",\n              \"stroke-linejoin\": \"round\"\n            }), \"\\n              \", HTML.PATH({\n              d: \"m25 25 l 5 5\",\n              stroke: \"white\",\n              \"stroke-width\": \"3\",\n              \"stroke-linecap\": \"round\",\n              \"stroke-linejoin\": \"round\"\n            }), \"\\n            \" ];\n          }, function() {\n            return [ \"\\n              \", Blaze.If(function() {\n              return Spacebars.dataMustache(view.lookup(\"equals\"), view.lookup(\"name\"), \"plus\");\n            }, function() {\n              return [ \"\\n                \", HTML.PATH({\n                d: \"m25 18 l 0 14\",\n                stroke: \"white\",\n                \"stroke-width\": \"3\",\n                \"stroke-linecap\": \"round\",\n                \"stroke-linejoin\": \"round\"\n              }), \"\\n                \", HTML.PATH({\n                d: \"m18 25 l 14 0\",\n                stroke: \"white\",\n                \"stroke-width\": \"3\",\n                \"stroke-linecap\": \"round\",\n                \"stroke-linejoin\": \"round\"\n              }), \"\\n              \" ];\n            }), \"\\n            \" ];\n          }), \"\\n          \" ];\n        }), \"\\n        \" ];\n      }), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/lib/bbb_api_bridge.coffee.js                                 //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\n                                                                       // 1\n/*                                                                     // 1\nThis file contains the BigBlueButton client APIs that will allow 3rd-party applications\nto embed the HTML5 client and interact with it through Javascript.     //\n                                                                       //\nHOW TO USE:                                                            //\nSome APIs allow synchronous and asynchronous calls. When using asynchronous, the 3rd-party\nJS should register as listener for events listed at the bottom of this file. For synchronous,\n3rd-party JS should pass in a callback function when calling the API.  //\n                                                                       //\nFor an example on how to use these APIs, see:                          //\n                                                                       //\nhttps://github.com/bigbluebutton/bigbluebutton/blob/master/bigbluebutton-client/resources/prod/lib/3rd-party.js\nhttps://github.com/bigbluebutton/bigbluebutton/blob/master/bigbluebutton-client/resources/prod/3rd-party.html\n */                                                                    //\nthis.BBB = (function() {                                               // 1\n  var BBB, listeners, returnOrCallback;                                // 18\n  BBB = {};                                                            // 18\n  returnOrCallback = function(res, callback) {                         // 18\n    if ((callback != null) && typeof callback === \"function\") {        // 21\n      return callback(res);                                            //\n    } else {                                                           //\n      return res;                                                      //\n    }                                                                  //\n  };                                                                   //\n  BBB.isPollGoing = function(userId) {                                 // 18\n    if (userId !== void 0 && Meteor.Polls.findOne({                    // 27\n      \"poll_info.users\": userId                                        // 27\n    })) {                                                              //\n      return true;                                                     // 28\n    } else {                                                           //\n      return false;                                                    // 30\n    }                                                                  //\n  };                                                                   //\n  BBB.getCurrentPoll = function(userId) {                              // 18\n    if (userId !== void 0 && Meteor.Polls.findOne({                    // 33\n      \"poll_info.users\": userId                                        // 33\n    })) {                                                              //\n      return Meteor.Polls.findOne({                                    // 34\n        \"poll_info.users\": userId                                      // 34\n      });                                                              //\n    }                                                                  //\n  };                                                                   //\n  BBB.sendPollResponseMessage = function(key, pollAnswerId) {          // 18\n    return Meteor.call(\"publishVoteMessage\", BBB.getMeetingId(), pollAnswerId, getInSession(\"userId\"), getInSession(\"authToken\"));\n  };                                                                   //\n  BBB.getMeetingId = function() {                                      // 18\n    var ref;                                                           // 40\n    return (ref = Meteor.Meetings.findOne()) != null ? ref.meetingId : void 0;\n  };                                                                   //\n  BBB.getInternalMeetingId = function(callback) {};                    // 18\n                                                                       // 44\n  /*                                                                   // 44\n    Queryies the user object via it's id                               //\n   */                                                                  //\n  BBB.getUser = function(userId) {                                     // 18\n    return Meteor.Users.findOne({                                      //\n      userId: userId                                                   // 48\n    });                                                                //\n  };                                                                   //\n  BBB.getCurrentUser = function() {                                    // 18\n    return BBB.getUser(getInSession(\"userId\"));                        //\n  };                                                                   //\n                                                                       // 53\n  /*                                                                   // 53\n  Query if the current user is sharing webcam.                         //\n                                                                       //\n  Param:                                                               //\n  callback - function to return the result                             //\n                                                                       //\n  If you want to instead receive an event with the result, register a listener\n  for AM_I_SHARING_CAM_RESP (see below).                               //\n   */                                                                  //\n  BBB.amISharingWebcam = function(callback) {                          // 18\n    return false;                                                      // 64\n  };                                                                   //\n                                                                       // 66\n  /*                                                                   // 66\n                                                                       //\n  Query if another user is sharing her camera.                         //\n                                                                       //\n  Param:                                                               //\n  userID : the id of the user that may be sharing the camera           //\n  callback: function if you want to be informed synchronously. Don't pass a function\n  if you want to be informed through an event. You have to register for\n  IS_USER_PUBLISHING_CAM_RESP (see below).                             //\n   */                                                                  //\n  BBB.isUserSharingWebcam = function(userId, callback) {               // 18\n    return false;                                                      // 78\n  };                                                                   //\n  BBB.amIInAudio = function(callback) {                                // 18\n    var ref, ref1, ref2, user;                                         // 83\n    user = BBB.getCurrentUser();                                       // 83\n    return (user != null ? (ref = user.user) != null ? ref.listenOnly : void 0 : void 0) || (user != null ? (ref1 = user.user) != null ? (ref2 = ref1.voiceUser) != null ? ref2.joined : void 0 : void 0 : void 0);\n  };                                                                   //\n  BBB.amIListenOnlyAudio = function(callback) {                        // 18\n    var ref, ref1;                                                     // 88\n    return (ref = BBB.getCurrentUser()) != null ? (ref1 = ref.user) != null ? ref1.listenOnly : void 0 : void 0;\n  };                                                                   //\n  BBB.amISharingAudio = function(callback) {                           // 18\n    var ref;                                                           // 92\n    return BBB.isUserSharingAudio((ref = BBB.getCurrentUser()) != null ? ref.userId : void 0);\n  };                                                                   //\n  BBB.amITalking = function(callback) {                                // 18\n    var ref;                                                           // 96\n    return BBB.isUserTalking((ref = BBB.getCurrentUser()) != null ? ref.userId : void 0);\n  };                                                                   //\n  BBB.isUserInAudio = function(userId, callback) {                     // 18\n    var ref, ref1, ref2, user;                                         // 99\n    user = BBB.getUser(userId);                                        // 99\n    return (user != null ? (ref = user.user) != null ? ref.listenOnly : void 0 : void 0) || (user != null ? (ref1 = user.user) != null ? (ref2 = ref1.voiceUser) != null ? ref2.joined : void 0 : void 0 : void 0);\n  };                                                                   //\n  BBB.isUserListenOnlyAudio = function(userId, callback) {             // 18\n    var ref, ref1;                                                     // 103\n    return (ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? ref1.listenOnly : void 0 : void 0;\n  };                                                                   //\n  BBB.isUserSharingAudio = function(userId, callback) {                // 18\n    var ref, ref1, ref2;                                               // 106\n    return (ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? (ref2 = ref1.voiceUser) != null ? ref2.joined : void 0 : void 0 : void 0;\n  };                                                                   //\n  BBB.isUserTalking = function(userId, callback) {                     // 18\n    var ref, ref1, ref2;                                               // 109\n    return (ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? (ref2 = ref1.voiceUser) != null ? ref2.talking : void 0 : void 0 : void 0;\n  };                                                                   //\n  BBB.isUserPresenter = function(userId, callback) {                   // 18\n    var ref, ref1;                                                     // 112\n    return (ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? ref1.presenter : void 0 : void 0;\n  };                                                                   //\n  BBB.amILocked = function() {                                         // 18\n    var ref;                                                           // 116\n    return (ref = BBB.getCurrentUser()) != null ? ref.user.locked : void 0;\n  };                                                                   //\n  BBB.isMyMicLocked = function() {                                     // 18\n    var lockedMicForRoom, ref;                                         // 121\n    lockedMicForRoom = (ref = Meteor.Meetings.findOne()) != null ? ref.roomLockSettings.disableMic : void 0;\n    return lockedMicForRoom && BBB.amILocked();                        // 124\n  };                                                                   //\n  BBB.getCurrentSlide = function() {                                   // 18\n    var currentPresentation, currentSlide, presentationId, ref;        // 127\n    currentPresentation = Meteor.Presentations.findOne({               // 127\n      \"presentation.current\": true                                     // 127\n    });                                                                //\n    presentationId = currentPresentation != null ? (ref = currentPresentation.presentation) != null ? ref.id : void 0 : void 0;\n    return currentSlide = Meteor.Slides.findOne({                      //\n      \"presentationId\": presentationId,                                // 129\n      \"slide.current\": true                                            // 129\n    });                                                                //\n  };                                                                   //\n  BBB.getMeetingName = function() {                                    // 18\n    var ref;                                                           // 132\n    return ((ref = Meteor.Meetings.findOne()) != null ? ref.meetingName : void 0) || null;\n  };                                                                   //\n  BBB.getNumberOfUsers = function() {                                  // 18\n    return Meteor.Users.find().count();                                //\n  };                                                                   //\n  BBB.currentPresentationName = function() {                           // 18\n    var ref, ref1;                                                     // 138\n    return (ref = Meteor.Presentations.findOne({                       //\n      \"presentation.current\": true                                     //\n    })) != null ? (ref1 = ref.presentation) != null ? ref1.name : void 0 : void 0;\n  };                                                                   //\n                                                                       // 140\n  /*                                                                   // 140\n  Raise user's hand.                                                   //\n  Param:                                                               //\n   */                                                                  //\n  BBB.lowerHand = function(meetingId, toUserId, byUserId, byAuthToken) {\n    return Meteor.call('userLowerHand', meetingId, toUserId, byUserId, byAuthToken);\n  };                                                                   //\n  BBB.raiseHand = function(meetingId, toUserId, byUserId, byAuthToken) {\n    return Meteor.call('userRaiseHand', meetingId, toUserId, byUserId, byAuthToken);\n  };                                                                   //\n  BBB.setEmojiStatus = function(meetingId, toUserId, byUserId, byAuthToken, status) {\n    return Meteor.call('userSetEmoji', meetingId, toUserId, byUserId, byAuthToken, status);\n  };                                                                   //\n  BBB.isUserEmojiStatusSet = function(userId) {                        // 18\n    var ref, ref1, ref2, ref3;                                         // 155\n    return ((ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? ref1.emoji_status : void 0 : void 0) !== \"none\" && ((ref2 = BBB.getUser(userId)) != null ? (ref3 = ref2.user) != null ? ref3.emoji_status : void 0 : void 0) !== void 0;\n  };                                                                   //\n  BBB.isCurrentUserEmojiStatusSet = function() {                       // 18\n    var ref;                                                           // 158\n    return BBB.isUserEmojiStatusSet((ref = BBB.getCurrentUser()) != null ? ref.userId : void 0);\n  };                                                                   //\n  BBB.isMeetingRecording = function() {                                // 18\n    var ref;                                                           // 161\n    return (ref = MEteor.Meetings.findOne()) != null ? ref.recorded : void 0;\n  };                                                                   //\n                                                                       // 164\n  /*                                                                   // 164\n  Issue a switch presenter command.                                    //\n                                                                       //\n  Param:                                                               //\n  newPresenterUserID - the user id of the new presenter                //\n                                                                       //\n  3rd-party JS must listen for SWITCHED_PRESENTER (see below) to get notified\n  of switch presenter events.                                          //\n   */                                                                  //\n  BBB.switchPresenter = function(newPresenterUserID) {};               // 18\n                                                                       // 175\n  /*                                                                   // 175\n  Query if current user is presenter.                                  //\n                                                                       //\n  Params:                                                              //\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for AM_I_PRESENTER_RESP (see below).                                 //\n   */                                                                  //\n  BBB.amIPresenter = function(callback) {                              // 18\n    return returnOrCallback(false, callback);                          //\n  };                                                                   //\n                                                                       // 185\n  /*                                                                   // 185\n  Eject a user.                                                        //\n                                                                       //\n  Params:                                                              //\n  userID - userID of the user you want to eject.                       //\n   */                                                                  //\n  BBB.ejectUser = function(userID) {};                                 // 18\n                                                                       // 193\n  /*                                                                   // 193\n  Query who is presenter.                                              //\n                                                                       //\n  Params:                                                              //\n  callback - function that gets executed for the response.             //\n   */                                                                  //\n  BBB.getPresenterUserID = function(callback) {};                      // 18\n                                                                       // 201\n  /*                                                                   // 201\n  Query the current user's role.                                       //\n  Params:                                                              //\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for GET_MY_ROLE_RESP (see below).                                    //\n   */                                                                  //\n  BBB.getMyRole = function(callback) {                                 // 18\n    return returnOrCallback(\"VIEWER\", callback);                       //\n  };                                                                   //\n                                                                       // 210\n  /*                                                                   // 210\n  Query the current user's id.                                         //\n                                                                       //\n  Params:                                                              //\n  callback - function that gets executed for the response.             //\n   */                                                                  //\n  BBB.getMyUserID = function(callback) {                               // 18\n    return returnOrCallback(getInSession(\"userId\"), callback);         //\n  };                                                                   //\n  BBB.getMyDBID = function(callback) {                                 // 18\n    var ref;                                                           // 221\n    return returnOrCallback((ref = Meteor.Users.findOne({              //\n      userId: getInSession(\"userId\")                                   //\n    })) != null ? ref._id : void 0, callback);                         //\n  };                                                                   //\n  BBB.getMyUserName = function(callback) {                             // 18\n    var ref;                                                           // 225\n    return BBB.getUserName((ref = BBB.getCurrentUser()) != null ? ref.userId : void 0);\n  };                                                                   //\n  BBB.getMyVoiceBridge = function(callback) {                          // 18\n    var res;                                                           // 228\n    res = Meteor.Meetings.findOne({}).voiceConf;                       // 228\n    return returnOrCallback(res, callback);                            //\n  };                                                                   //\n  BBB.getUserName = function(userId, callback) {                       // 18\n    var ref, ref1;                                                     // 232\n    return returnOrCallback((ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? ref1.name : void 0 : void 0, callback);\n  };                                                                   //\n                                                                       // 234\n  /*                                                                   // 234\n  Query the current user's role.                                       //\n  Params:                                                              //\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for GET_MY_ROLE_RESP (see below).                                    //\n   */                                                                  //\n  BBB.getMyUserInfo = function(callback) {                             // 18\n    var result;                                                        // 241\n    result = {                                                         // 241\n      myUserID: BBB.getMyUserID(),                                     // 242\n      myUsername: BBB.getMyUserName(),                                 // 242\n      myInternalUserID: BBB.getMyUserID(),                             // 242\n      myAvatarURL: null,                                               // 242\n      myRole: BBB.getMyRole(),                                         // 242\n      amIPresenter: BBB.amIPresenter(),                                // 242\n      voiceBridge: BBB.getMyVoiceBridge(),                             // 242\n      dialNumber: null                                                 // 242\n    };                                                                 //\n    return returnOrCallback(result, callback);                         //\n  };                                                                   //\n                                                                       // 253\n  /*                                                                   // 253\n  Query the meeting id.                                                //\n                                                                       //\n  Params:                                                              //\n  callback - function that gets executed for the response.             //\n   */                                                                  //\n                                                                       // 261\n  /*                                                                   // 261\n  Join the voice conference.                                           //\n  isListenOnly: signifies whether the user joining the conference audio requests to join the listen only stream\n   */                                                                  //\n  BBB.joinVoiceConference = function(callback, isListenOnly) {         // 18\n    if (BBB.isMyMicLocked()) {                                         // 266\n      callIntoConference(BBB.getMyVoiceBridge(), callback, true);      // 267\n    }                                                                  //\n    return callIntoConference(BBB.getMyVoiceBridge(), callback, isListenOnly);\n  };                                                                   //\n                                                                       // 270\n  /*                                                                   // 270\n  Leave the voice conference.                                          //\n   */                                                                  //\n  BBB.leaveVoiceConference = function(callback) {                      // 18\n    return webrtc_hangup(callback);                                    //\n  };                                                                   //\n                                                                       // 276\n  /*                                                                   // 276\n  Get a hold of the object containing the call information             //\n   */                                                                  //\n  BBB.getCallStatus = function() {                                     // 18\n    return getCallStatus();                                            //\n  };                                                                   //\n                                                                       // 282\n  /*                                                                   // 282\n  Share user's webcam.                                                 //\n                                                                       //\n  Params:                                                              //\n  publishInClient : (DO NOT USE - Unimplemented)                       //\n   */                                                                  //\n  BBB.shareVideoCamera = function(publishInClient) {};                 // 18\n                                                                       // 290\n  /*                                                                   // 290\n  Stop share user's webcam.                                            //\n   */                                                                  //\n  BBB.stopSharingCamera = function() {};                               // 18\n                                                                       // 295\n  /*                                                                   // 295\n    Indicates if a user is muted                                       //\n   */                                                                  //\n  BBB.isUserMuted = function(id) {                                     // 18\n    var ref, ref1, ref2;                                               // 299\n    return (ref = BBB.getUser(id)) != null ? (ref1 = ref.user) != null ? (ref2 = ref1.voiceUser) != null ? ref2.muted : void 0 : void 0 : void 0;\n  };                                                                   //\n                                                                       // 301\n  /*                                                                   // 301\n    Indicates if the current user is muted                             //\n   */                                                                  //\n  BBB.amIMuted = function() {                                          // 18\n    return BBB.isUserMuted(BBB.getCurrentUser().userId);               //\n  };                                                                   //\n                                                                       // 307\n  /*                                                                   // 307\n  Mute the current user.                                               //\n   */                                                                  //\n  BBB.muteMe = function() {                                            // 18\n    return BBB.muteUser(getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"));\n  };                                                                   //\n                                                                       // 312\n  /*                                                                   // 312\n  Unmute the current user.                                             //\n   */                                                                  //\n  BBB.unmuteMe = function() {                                          // 18\n    return BBB.unmuteUser(getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"));\n  };                                                                   //\n  BBB.muteUser = function(meetingId, userId, toMuteId, requesterId, requestToken) {\n    return Meteor.call('muteUser', meetingId, toMuteId, requesterId, getInSession(\"authToken\"));\n  };                                                                   //\n  BBB.unmuteUser = function(meetingId, userId, toMuteId, requesterId, requestToken) {\n    return Meteor.call('unmuteUser', meetingId, toMuteId, requesterId, getInSession(\"authToken\"));\n  };                                                                   //\n  BBB.toggleMyMic = function() {                                       // 18\n    var request;                                                       // 325\n    request = BBB.amIMuted() ? \"unmuteUser\" : \"muteUser\";              // 325\n    return Meteor.call(request, BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"));\n  };                                                                   //\n                                                                       // 328\n  /*                                                                   // 328\n  Mute all the users.                                                  //\n   */                                                                  //\n  BBB.muteAll = function() {};                                         // 18\n                                                                       // 333\n  /*                                                                   // 333\n  Unmute all the users.                                                //\n   */                                                                  //\n  BBB.unmuteAll = function() {};                                       // 18\n                                                                       // 338\n  /*                                                                   // 338\n  Switch to a new layout.                                              //\n                                                                       //\n  Param:                                                               //\n  newLayout : name of the layout as defined in layout.xml (found in /var/www/bigbluebutton/client/conf/layout.xml)\n   */                                                                  //\n  BBB.switchLayout = function(newLayout) {};                           // 18\n                                                                       // 346\n  /*                                                                   // 346\n  Lock the layout.                                                     //\n                                                                       //\n  Locking the layout means that users will have the same layout with the moderator that issued the lock command.\n  Other users won't be able to move or resize the different windows.   //\n   */                                                                  //\n  BBB.lockLayout = function(lock) {};                                  // 18\n                                                                       // 354\n  /*                                                                   // 354\n  Request to send a public chat                                        //\n  fromUserID - the external user id for the sender                     //\n  fontColor  - the color of the font to display the message            //\n  localeLang - the 2-char locale code (e.g. en) for the sender         //\n  message    - the message to send                                     //\n   */                                                                  //\n  BBB.sendPublicChatMessage = function(fontColor, localeLang, message) {\n    var messageForServer;                                              // 362\n    messageForServer = {                                               // 362\n      \"message\": message,                                              // 362\n      \"chat_type\": \"PUBLIC_CHAT\",                                      // 362\n      \"from_userid\": getInSession(\"userId\"),                           // 362\n      \"from_username\": BBB.getMyUserName(),                            // 362\n      \"from_tz_offset\": \"240\",                                         // 362\n      \"to_username\": \"public_chat_username\",                           // 362\n      \"to_userid\": \"public_chat_userid\",                               // 362\n      \"from_lang\": localeLang,                                         // 362\n      \"from_time\": getTime(),                                          // 362\n      \"from_color\": fontColor                                          // 362\n    };                                                                 //\n    return Meteor.call(\"sendChatMessagetoServer\", BBB.getMeetingId(), messageForServer, getInSession(\"userId\"), getInSession(\"authToken\"));\n  };                                                                   //\n                                                                       // 377\n  /*                                                                   // 377\n  Request to send a private chat                                       //\n  fromUserID - the external user id for the sender                     //\n  fontColor  - the color of the font to display the message            //\n  localeLang - the 2-char locale code (e.g. en) for the sender         //\n  message    - the message to send                                     //\n  toUserID   - the external user id of the receiver                    //\n   */                                                                  //\n  BBB.sendPrivateChatMessage = function(fontColor, localeLang, message, toUserID, toUserName) {\n    var messageForServer;                                              // 386\n    messageForServer = {                                               // 386\n      \"message\": message,                                              // 386\n      \"chat_type\": \"PRIVATE_CHAT\",                                     // 386\n      \"from_userid\": getInSession(\"userId\"),                           // 386\n      \"from_username\": BBB.getMyUserName(),                            // 386\n      \"from_tz_offset\": \"240\",                                         // 386\n      \"to_username\": toUserName,                                       // 386\n      \"to_userid\": toUserID,                                           // 386\n      \"from_lang\": localeLang,                                         // 386\n      \"from_time\": getTime(),                                          // 386\n      \"from_color\": fontColor                                          // 386\n    };                                                                 //\n    return Meteor.call(\"sendChatMessagetoServer\", BBB.getMeetingId(), messageForServer, getInSession(\"userId\"), getInSession(\"authToken\"));\n  };                                                                   //\n                                                                       // 401\n  /*                                                                   // 401\n  Request to display a presentation.                                   //\n  presentationID - the presentation to display                         //\n   */                                                                  //\n  BBB.displayPresentation = function(presentationID) {};               // 18\n                                                                       // 407\n  /*                                                                   // 407\n  Query the list of uploaded presentations.                            //\n   */                                                                  //\n  BBB.queryListOfPresentations = function() {};                        // 18\n                                                                       // 412\n  /*                                                                   // 412\n  Request to delete a presentation.                                    //\n  presentationID - the presentation to delete                          //\n   */                                                                  //\n  BBB.deletePresentation = function(presentationID) {};                // 18\n  BBB.goToPreviousPage = function() {                                  // 18\n    return Meteor.call('publishSwitchToPreviousSlideMessage', getInSession('meetingId'), getInSession('userId'), getInSession('authToken'));\n  };                                                                   //\n  BBB.goToNextPage = function() {                                      // 18\n    return Meteor.call('publishSwitchToNextSlideMessage', getInSession('meetingId'), getInSession('userId'), getInSession('authToken'));\n  };                                                                   //\n  BBB.webRTCConferenceCallStarted = function() {};                     // 18\n  BBB.webRTCConferenceCallConnecting = function() {};                  // 18\n  BBB.webRTCConferenceCallEnded = function() {};                       // 18\n  BBB.webRTCConferenceCallFailed = function(errorcode) {};             // 18\n  BBB.webRTCConferenceCallWaitingForICE = function() {};               // 18\n  BBB.webRTCCallProgressCallback = function(progress) {};              // 18\n  BBB.webRTCEchoTestStarted = function() {};                           // 18\n  BBB.webRTCEchoTestConnecting = function() {};                        // 18\n  BBB.webRTCEchoTestFailed = function(reason) {};                      // 18\n  BBB.webRTCEchoTestWaitingForICE = function() {};                     // 18\n  BBB.webRTCEchoTestEnded = function() {};                             // 18\n  BBB.webRTCMediaRequest = function() {};                              // 18\n  BBB.webRTCMediaSuccess = function() {};                              // 18\n  BBB.webRTCMediaFail = function() {};                                 // 18\n  BBB.webRTCWebcamRequest = function() {};                             // 18\n  BBB.webRTCWebcamRequestSuccess = function() {};                      // 18\n  BBB.webRTCWebcamRequestFail = function(reason) {};                   // 18\n                                                                       // 472\n  /*                                                                   // 472\n  Stores the 3rd-party app event listeners **                          //\n   */                                                                  //\n  listeners = {};                                                      // 18\n                                                                       // 477\n  /*                                                                   // 477\n  3rd-party apps should use this method to register to listen for events.\n   */                                                                  //\n  BBB.listen = function(eventName, handler) {};                        // 18\n                                                                       // 482\n  /*                                                                   // 482\n  3rd-party app should use this method to unregister listener for a given event.\n   */                                                                  //\n  BBB.unlisten = function(eventName, handler) {};                      // 18\n  BBB.init = function(callback) {};                                    // 18\n  return BBB;                                                          //\n})();                                                                  // 16\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/lib/bbb_api_bridge.coffee.js","sourceMap":{"version":3,"sources":["/client/lib/bbb_api_bridge.coffee"],"names":[],"mappings":";;;;;;;;;AAAA;AAAA;;;;;;;;;;;;;GAAA;AAAA,IAeC,IAAD,GAAO,CAAC;AAEN;AAAA,QAAM,EAAN;AAAA,EAEA,mBAAmB,SAAC,GAAD,EAAM,QAAN;AACjB,QAAG,sBAAc,oBAAmB,UAApC;aACE,SAAS,GAAT,EADF;KAAA;aAGE,IAHF;KADiB;EAAA,CAFnB;AAAA,EAQA,GAAG,CAAC,WAAJ,GAAkB,SAAC,MAAD;AAChB,QAAG,WAAY,MAAZ,IAA0B,MAAM,CAAC,KAAK,CAAC,OAAb,CAAqB;AAAA,MAAC,mBAAmB,MAApB;KAArB,CAA7B;AACE,aAAO,IAAP,CADF;KAAA;AAGE,aAAO,KAAP,CAHF;KADgB;EAAA,CARlB;AAAA,EAcA,GAAG,CAAC,cAAJ,GAAqB,SAAC,MAAD;AACnB,QAAG,WAAY,MAAZ,IAA0B,MAAM,CAAC,KAAK,CAAC,OAAb,CAAqB;AAAA,MAAC,mBAAmB,MAApB;KAArB,CAA7B;AACE,aAAO,MAAM,CAAC,KAAK,CAAC,OAAb,CAAqB;AAAA,QAAC,mBAAmB,MAApB;OAArB,CAAP,CADF;KADmB;EAAA,CAdrB;AAAA,EAkBA,GAAG,CAAC,uBAAJ,GAA8B,SAAC,GAAD,EAAM,YAAN;WAC5B,MAAM,CAAC,IAAP,CAAY,oBAAZ,EAAkC,GAAG,CAAC,YAAJ,EAAlC,EAAsD,YAAtD,EAAoE,aAAa,QAAb,CAApE,EAA4F,aAAa,WAAb,CAA5F,EAD4B;EAAA,CAlB9B;AAAA,EAqBA,GAAG,CAAC,YAAJ,GAAmB;AACjB;0DAAyB,CAAE,mBADV;EAAA,CArBnB;AAAA,EAwBA,GAAG,CAAC,oBAAJ,GAA2B,SAAC,QAAD,IAxB3B;AA0BA;AAAA;;KA1BA;AAAA,EA6BA,GAAG,CAAC,OAAJ,GAAc,SAAC,MAAD;WACZ,MAAM,CAAC,KAAK,CAAC,OAAb,CAAqB;AAAA,MAAC,QAAQ,MAAT;KAArB,EADY;EAAA,CA7Bd;AAAA,EAgCA,GAAG,CAAC,cAAJ,GAAqB;WACnB,GAAG,CAAC,OAAJ,CAAY,aAAa,QAAb,CAAZ,EADmB;EAAA,CAhCrB;AAmCA;AAAA;;;;;;;;KAnCA;AAAA,EA4CA,GAAG,CAAC,gBAAJ,GAAuB,SAAC,QAAD;AAErB,WAAO,KAAP,CAFqB;EAAA,CA5CvB;AAgDA;AAAA;;;;;;;;;KAhDA;AAAA,EA0DA,GAAG,CAAC,mBAAJ,GAA0B,SAAC,MAAD,EAAS,QAAT;AAExB,WAAO,KAAP,CAFwB;EAAA,CA1D1B;AAAA,EAgEA,GAAG,CAAC,UAAJ,GAAiB,SAAC,QAAD;AACf;AAAA,WAAO,GAAG,CAAC,cAAJ,EAAP;0DACU,CAAE,6BAAZ,uFAA+C,CAAE,mCAFlC;EAAA,CAhEjB;AAAA,EAqEA,GAAG,CAAC,kBAAJ,GAAyB,SAAC,QAAD;AACvB;kFAA0B,CAAE,6BADL;EAAA,CArEzB;AAAA,EAyEA,GAAG,CAAC,eAAJ,GAAsB,SAAC,QAAD;AACpB;WAAA,GAAG,CAAC,kBAAJ,2CAA2C,CAAE,eAA7C,EADoB;EAAA,CAzEtB;AAAA,EA6EA,GAAG,CAAC,UAAJ,GAAiB,SAAC,QAAD;AACf;WAAA,GAAG,CAAC,aAAJ,2CAAsC,CAAE,eAAxC,EADe;EAAA,CA7EjB;AAAA,EAgFA,GAAG,CAAC,aAAJ,GAAoB,SAAC,MAAD,EAAS,QAAT;AAClB;AAAA,WAAO,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAP;0DACU,CAAE,6BAAZ,uFAA+C,CAAE,mCAF/B;EAAA,CAhFpB;AAAA,EAoFA,GAAG,CAAC,qBAAJ,GAA4B,SAAC,MAAD,EAAS,QAAT;AAC1B;iFAAyB,CAAE,6BADD;EAAA,CApF5B;AAAA,EAuFA,GAAG,CAAC,kBAAJ,GAAyB,SAAC,MAAD,EAAS,QAAT;AACvB;mHAAoC,CAAE,kCADf;EAAA,CAvFzB;AAAA,EA0FA,GAAG,CAAC,aAAJ,GAAoB,SAAC,MAAD,EAAS,QAAT;AAClB;mHAAoC,CAAE,mCADpB;EAAA,CA1FpB;AAAA,EA6FA,GAAG,CAAC,eAAJ,GAAsB,SAAC,MAAD,EAAS,QAAT;AACpB;iFAAyB,CAAE,4BADP;EAAA,CA7FtB;AAAA,EAiGA,GAAG,CAAC,SAAJ,GAAgB;AACd;AAAA,qDAA2B,CAAE,IAAI,CAAC,eAAlC,CADc;EAAA,CAjGhB;AAAA,EAsGA,GAAG,CAAC,aAAJ,GAAoB;AAClB;AAAA,sEAA4C,CAAE,gBAAgB,CAAC,mBAA/D;AAGA,WAAO,oBAAqB,GAAG,CAAC,SAAJ,EAA5B,CAJkB;EAAA,CAtGpB;AAAA,EA4GA,GAAG,CAAC,eAAJ,GAAsB;AACpB;AAAA,0BAAsB,MAAM,CAAC,aAAa,CAAC,OAArB,CAA6B;AAAA,MAAC,wBAAwB,IAAzB;KAA7B,CAAtB;AAAA,IACA,qGAAkD,CAAE,oBADpD;WAEA,eAAe,MAAM,CAAC,MAAM,CAAC,OAAd,CAAsB;AAAA,MAAC,kBAAkB,cAAnB;AAAA,MAAmC,iBAAiB,IAApD;KAAtB,EAHK;EAAA,CA5GtB;AAAA,EAiHA,GAAG,CAAC,cAAJ,GAAqB;AACnB;2DAAyB,CAAE,qBAA3B,IAA0C,KADvB;EAAA,CAjHrB;AAAA,EAoHA,GAAG,CAAC,gBAAJ,GAAuB;WACrB,MAAM,CAAC,KAAK,CAAC,IAAb,EAAmB,CAAC,KAApB,GADqB;EAAA,CApHvB;AAAA,EAuHA,GAAG,CAAC,uBAAJ,GAA8B;AAC5B;;;0DAA0E,CAAE,uBADhD;EAAA,CAvH9B;AA0HA;AAAA;;;KA1HA;AAAA,EA+HA,GAAG,CAAC,SAAJ,GAAgB,SAAC,SAAD,EAAY,QAAZ,EAAsB,QAAtB,EAAgC,WAAhC;WACd,MAAM,CAAC,IAAP,CAAY,eAAZ,EAA6B,SAA7B,EAAwC,QAAxC,EAAkD,QAAlD,EAA4D,WAA5D,EADc;EAAA,CA/HhB;AAAA,EAkIA,GAAG,CAAC,SAAJ,GAAgB,SAAC,SAAD,EAAY,QAAZ,EAAsB,QAAtB,EAAgC,WAAhC;WACd,MAAM,CAAC,IAAP,CAAY,eAAZ,EAA6B,SAA7B,EAAwC,QAAxC,EAAkD,QAAlD,EAA4D,WAA5D,EADc;EAAA,CAlIhB;AAAA,EAqIA,GAAG,CAAC,cAAJ,GAAqB,SAAC,SAAD,EAAY,QAAZ,EAAsB,QAAtB,EAAgC,WAAhC,EAA6C,MAA7C;WACnB,MAAM,CAAC,IAAP,CAAY,cAAZ,EAA4B,SAA5B,EAAuC,QAAvC,EAAiD,QAAjD,EAA2D,WAA3D,EAAwE,MAAxE,EADmB;EAAA,CArIrB;AAAA,EAwIA,GAAG,CAAC,oBAAJ,GAA2B,SAAC,MAAD;AACzB;kFAAyB,CAAE,+BAA3B,KAA6C,MAA7C,6EAAiF,CAAE,+BAA3B,KAA6C,OAD5E;EAAA,CAxI3B;AAAA,EA2IA,GAAG,CAAC,2BAAJ,GAAkC;AAChC;WAAA,GAAG,CAAC,oBAAJ,2CAA6C,CAAE,eAA/C,EADgC;EAAA,CA3IlC;AAAA,EA8IA,GAAG,CAAC,kBAAJ,GAAyB;AACvB;0DAAyB,CAAE,kBADJ;EAAA,CA9IzB;AAkJA;AAAA;;;;;;;;KAlJA;AAAA,EA2JA,GAAG,CAAC,eAAJ,GAAsB,SAAC,kBAAD,IA3JtB;AA6JA;AAAA;;;;;;KA7JA;AAAA,EAoKA,GAAG,CAAC,YAAJ,GAAmB,SAAC,QAAD;WACjB,iBAAiB,KAAjB,EAAwB,QAAxB,EADiB;EAAA,CApKnB;AAuKA;AAAA;;;;;KAvKA;AAAA,EA6KA,GAAG,CAAC,SAAJ,GAAgB,SAAC,MAAD,IA7KhB;AA+KA;AAAA;;;;;KA/KA;AAAA,EAqLA,GAAG,CAAC,kBAAJ,GAAyB,SAAC,QAAD,IArLzB;AAuLA;AAAA;;;;;KAvLA;AAAA,EA6LA,GAAG,CAAC,SAAJ,GAAgB,SAAC,QAAD;WACd,iBAAiB,QAAjB,EAA2B,QAA3B,EADc;EAAA,CA7LhB;AAgMA;AAAA;;;;;KAhMA;AAAA,EAsMA,GAAG,CAAC,WAAJ,GAAkB,SAAC,QAAD;WAChB,iBAAiB,aAAa,QAAb,CAAjB,EAAyC,QAAzC,EADgB;EAAA,CAtMlB;AAAA,EA0MA,GAAG,CAAC,SAAJ,GAAgB,SAAC,QAAD;AACd;WAAA;;qBAAsE,CAAE,YAAxE,EAA6E,QAA7E,EADc;EAAA,CA1MhB;AAAA,EA8MA,GAAG,CAAC,aAAJ,GAAoB,SAAC,QAAD;AAClB;WAAA,GAAG,CAAC,WAAJ,2CAAoC,CAAE,eAAtC,EADkB;EAAA,CA9MpB;AAAA,EAiNA,GAAG,CAAC,gBAAJ,GAAuB,SAAC,QAAD;AACrB;AAAA,UAAM,MAAM,CAAC,QAAQ,CAAC,OAAhB,CAAwB,EAAxB,CAA2B,CAAC,SAAlC;WACA,iBAAiB,GAAjB,EAAsB,QAAtB,EAFqB;EAAA,CAjNvB;AAAA,EAqNA,GAAG,CAAC,WAAJ,GAAkB,SAAC,MAAD,EAAS,QAAT;AAChB;WAAA,uFAA0C,CAAE,sBAA5C,EAAkD,QAAlD,EADgB;EAAA,CArNlB;AAwNA;AAAA;;;;;KAxNA;AAAA,EA8NA,GAAG,CAAC,aAAJ,GAAoB,SAAC,QAAD;AAClB;AAAA,aACE;AAAA,gBAAU,GAAG,CAAC,WAAJ,EAAV;AAAA,MACA,YAAY,GAAG,CAAC,aAAJ,EADZ;AAAA,MAEA,kBAAkB,GAAG,CAAC,WAAJ,EAFlB;AAAA,MAGA,aAAa,IAHb;AAAA,MAIA,QAAQ,GAAG,CAAC,SAAJ,EAJR;AAAA,MAKA,cAAc,GAAG,CAAC,YAAJ,EALd;AAAA,MAMA,aAAa,GAAG,CAAC,gBAAJ,EANb;AAAA,MAOA,YAAY,IAPZ;KADF;WAUA,iBAAiB,MAAjB,EAAyB,QAAzB,EAXkB;EAAA,CA9NpB;AA2OA;AAAA;;;;;KA3OA;AAmPA;AAAA;;;KAnPA;AAAA,EAuPA,GAAG,CAAC,mBAAJ,GAA0B,SAAC,QAAD,EAAW,YAAX;AACxB,QAAG,GAAG,CAAC,aAAJ,EAAH;AACE,yBAAmB,GAAG,CAAC,gBAAJ,EAAnB,EAA2C,QAA3C,EAAqD,IAArD,EADF;KAAA;WAEA,mBAAmB,GAAG,CAAC,gBAAJ,EAAnB,EAA2C,QAA3C,EAAqD,YAArD,EAHwB;EAAA,CAvP1B;AA4PA;AAAA;;KA5PA;AAAA,EA+PA,GAAG,CAAC,oBAAJ,GAA2B,SAAC,QAAD;WACzB,cAAc,QAAd,EADyB;EAAA,CA/P3B;AAkQA;AAAA;;KAlQA;AAAA,EAqQA,GAAG,CAAC,aAAJ,GAAoB;WAClB,gBADkB;EAAA,CArQpB;AAwQA;AAAA;;;;;KAxQA;AAAA,EA8QA,GAAG,CAAC,gBAAJ,GAAuB,SAAC,eAAD,IA9QvB;AAgRA;AAAA;;KAhRA;AAAA,EAmRA,GAAG,CAAC,iBAAJ,GAAwB,aAnRxB;AAqRA;AAAA;;KArRA;AAAA,EAwRA,GAAG,CAAC,WAAJ,GAAkB,SAAC,EAAD;AAChB;+GAAgC,CAAE,iCADlB;EAAA,CAxRlB;AA2RA;AAAA;;KA3RA;AAAA,EA8RA,GAAG,CAAC,QAAJ,GAAe;WACb,GAAG,CAAC,WAAJ,CAAgB,GAAG,CAAC,cAAJ,EAAoB,CAAC,MAArC,EADa;EAAA,CA9Rf;AAiSA;AAAA;;KAjSA;AAAA,EAoSA,GAAG,CAAC,MAAJ,GAAa;WACX,GAAG,CAAC,QAAJ,CAAa,aAAa,QAAb,CAAb,EAAqC,aAAa,QAAb,CAArC,EAA6D,aAAa,WAAb,CAA7D,EADW;EAAA,CApSb;AAsSA;AAAA;;KAtSA;AAAA,EAySA,GAAG,CAAC,QAAJ,GAAe;WACb,GAAG,CAAC,UAAJ,CAAe,aAAa,QAAb,CAAf,EAAuC,aAAa,QAAb,CAAvC,EAA+D,aAAa,WAAb,CAA/D,EADa;EAAA,CAzSf;AAAA,EA4SA,GAAG,CAAC,QAAJ,GAAe,SAAC,SAAD,EAAY,MAAZ,EAAoB,QAApB,EAA8B,WAA9B,EAA2C,YAA3C;WACb,MAAM,CAAC,IAAP,CAAY,UAAZ,EAAwB,SAAxB,EAAmC,QAAnC,EAA6C,WAA7C,EAA0D,aAAa,WAAb,CAA1D,EADa;EAAA,CA5Sf;AAAA,EA+SA,GAAG,CAAC,UAAJ,GAAiB,SAAC,SAAD,EAAY,MAAZ,EAAoB,QAApB,EAA8B,WAA9B,EAA2C,YAA3C;WACf,MAAM,CAAC,IAAP,CAAY,YAAZ,EAA0B,SAA1B,EAAqC,QAArC,EAA+C,WAA/C,EAA4D,aAAa,WAAb,CAA5D,EADe;EAAA,CA/SjB;AAAA,EAkTA,GAAG,CAAC,WAAJ,GAAkB;AAChB;AAAA,cAAa,GAAG,CAAC,QAAJ,EAAH,GAAuB,YAAvB,GAAyC,UAAnD;WACA,MAAM,CAAC,IAAP,CAAY,OAAZ,EAAqB,GAAG,CAAC,YAAJ,EAArB,EAAyC,aAAa,QAAb,CAAzC,EAAiE,aAAa,QAAb,CAAjE,EAAyF,aAAa,WAAb,CAAzF,EAFgB;EAAA,CAlTlB;AAsTA;AAAA;;KAtTA;AAAA,EAyTA,GAAG,CAAC,OAAJ,GAAc,aAzTd;AA2TA;AAAA;;KA3TA;AAAA,EA8TA,GAAG,CAAC,SAAJ,GAAgB,aA9ThB;AAgUA;AAAA;;;;;KAhUA;AAAA,EAsUA,GAAG,CAAC,YAAJ,GAAmB,SAAC,SAAD,IAtUnB;AAwUA;AAAA;;;;;KAxUA;AAAA,EA8UA,GAAG,CAAC,UAAJ,GAAiB,SAAC,IAAD,IA9UjB;AAgVA;AAAA;;;;;;KAhVA;AAAA,EAuVA,GAAG,CAAC,qBAAJ,GAA4B,SAAC,SAAD,EAAY,UAAZ,EAAwB,OAAxB;AAC1B;AAAA,uBAAmB;AAAA,MACjB,WAAW,OADM;AAAA,MAEjB,aAAa,aAFI;AAAA,MAGjB,eAAe,aAAa,QAAb,CAHE;AAAA,MAIjB,iBAAiB,GAAG,CAAC,aAAJ,EAJA;AAAA,MAKjB,kBAAkB,KALD;AAAA,MAMjB,eAAe,sBANE;AAAA,MAOjB,aAAa,oBAPI;AAAA,MAQjB,aAAa,UARI;AAAA,MASjB,aAAa,SATI;AAAA,MAUjB,cAAc,SAVG;KAAnB;WAaA,MAAM,CAAC,IAAP,CAAY,yBAAZ,EAAuC,GAAG,CAAC,YAAJ,EAAvC,EAA2D,gBAA3D,EAA6E,aAAa,QAAb,CAA7E,EAAqG,aAAa,WAAb,CAArG,EAd0B;EAAA,CAvV5B;AAuWA;AAAA;;;;;;;KAvWA;AAAA,EA+WA,GAAG,CAAC,sBAAJ,GAA6B,SAAC,SAAD,EAAY,UAAZ,EAAwB,OAAxB,EAAiC,QAAjC,EAA2C,UAA3C;AAC3B;AAAA,uBAAmB;AAAA,MACjB,WAAW,OADM;AAAA,MAEjB,aAAa,cAFI;AAAA,MAGjB,eAAe,aAAa,QAAb,CAHE;AAAA,MAIjB,iBAAiB,GAAG,CAAC,aAAJ,EAJA;AAAA,MAKjB,kBAAkB,KALD;AAAA,MAMjB,eAAe,UANE;AAAA,MAOjB,aAAa,QAPI;AAAA,MAQjB,aAAa,UARI;AAAA,MASjB,aAAa,SATI;AAAA,MAUjB,cAAc,SAVG;KAAnB;WAaA,MAAM,CAAC,IAAP,CAAY,yBAAZ,EAAuC,GAAG,CAAC,YAAJ,EAAvC,EAA2D,gBAA3D,EAA6E,aAAa,QAAb,CAA7E,EAAqG,aAAa,WAAb,CAArG,EAd2B;EAAA,CA/W7B;AA+XA;AAAA;;;KA/XA;AAAA,EAmYA,GAAG,CAAC,mBAAJ,GAA0B,SAAC,cAAD,IAnY1B;AAqYA;AAAA;;KArYA;AAAA,EAwYA,GAAG,CAAC,wBAAJ,GAA+B,aAxY/B;AA0YA;AAAA;;;KA1YA;AAAA,EA8YA,GAAG,CAAC,kBAAJ,GAAyB,SAAC,cAAD,IA9YzB;AAAA,EAiZA,GAAG,CAAC,gBAAJ,GAAuB;WACrB,MAAM,CAAC,IAAP,CAAY,qCAAZ,EACE,aAAa,WAAb,CADF,EAEE,aAAa,QAAb,CAFF,EAGE,aAAa,WAAb,CAHF,EADqB;EAAA,CAjZvB;AAAA,EAwZA,GAAG,CAAC,YAAJ,GAAmB;WACjB,MAAM,CAAC,IAAP,CAAY,iCAAZ,EACE,aAAa,WAAb,CADF,EAEE,aAAa,QAAb,CAFF,EAGE,aAAa,WAAb,CAHF,EADiB;EAAA,CAxZnB;AAAA,EA8ZA,GAAG,CAAC,2BAAJ,GAAkC,aA9ZlC;AAAA,EAgaA,GAAG,CAAC,8BAAJ,GAAqC,aAharC;AAAA,EAkaA,GAAG,CAAC,yBAAJ,GAAgC,aAlahC;AAAA,EAoaA,GAAG,CAAC,0BAAJ,GAAiC,SAAC,SAAD,IApajC;AAAA,EAsaA,GAAG,CAAC,iCAAJ,GAAwC,aAtaxC;AAAA,EAwaA,GAAG,CAAC,0BAAJ,GAAiC,SAAC,QAAD,IAxajC;AAAA,EA0aA,GAAG,CAAC,qBAAJ,GAA4B,aA1a5B;AAAA,EA4aA,GAAG,CAAC,wBAAJ,GAA+B,aA5a/B;AAAA,EA8aA,GAAG,CAAC,oBAAJ,GAA2B,SAAC,MAAD,IA9a3B;AAAA,EAgbA,GAAG,CAAC,2BAAJ,GAAkC,aAhblC;AAAA,EAkbA,GAAG,CAAC,mBAAJ,GAA0B,aAlb1B;AAAA,EAobA,GAAG,CAAC,kBAAJ,GAAyB,aApbzB;AAAA,EAsbA,GAAG,CAAC,kBAAJ,GAAyB,aAtbzB;AAAA,EAwbA,GAAG,CAAC,eAAJ,GAAsB,aAxbtB;AAAA,EA0bA,GAAG,CAAC,mBAAJ,GAA0B,aA1b1B;AAAA,EA4bA,GAAG,CAAC,0BAAJ,GAAiC,aA5bjC;AAAA,EA8bA,GAAG,CAAC,uBAAJ,GAA8B,SAAC,MAAD,IA9b9B;AAscA;AAAA;;KAtcA;AAAA,EAycA,YAAY,EAzcZ;AA2cA;AAAA;;KA3cA;AAAA,EA8cA,GAAG,CAAC,MAAJ,GAAa,SAAC,SAAD,EAAY,OAAZ,IA9cb;AAgdA;AAAA;;KAhdA;AAAA,EAmdA,GAAG,CAAC,QAAJ,GAAe,SAAC,SAAD,EAAY,OAAZ,IAndf;AAAA,EAqdA,GAAG,CAAC,IAAJ,GAAW,SAAC,QAAD,IArdX;SAudA,IAzdM;AAAA,CAAD,GAfP","file":"/client/lib/bbb_api_bridge.coffee.js","sourcesContent":["###\nThis file contains the BigBlueButton client APIs that will allow 3rd-party applications\nto embed the HTML5 client and interact with it through Javascript.\n\nHOW TO USE:\nSome APIs allow synchronous and asynchronous calls. When using asynchronous, the 3rd-party\nJS should register as listener for events listed at the bottom of this file. For synchronous,\n3rd-party JS should pass in a callback function when calling the API.\n\nFor an example on how to use these APIs, see:\n\nhttps://github.com/bigbluebutton/bigbluebutton/blob/master/bigbluebutton-client/resources/prod/lib/3rd-party.js\nhttps://github.com/bigbluebutton/bigbluebutton/blob/master/bigbluebutton-client/resources/prod/3rd-party.html\n###\n\n@BBB = (->\n\n  BBB = {}\n\n  returnOrCallback = (res, callback) ->\n    if callback? and typeof callback is \"function\"\n      callback res\n    else\n      res\n\n  BBB.isPollGoing = (userId) ->\n    if userId isnt undefined and Meteor.Polls.findOne({\"poll_info.users\": userId})\n      return true\n    else\n      return false\n\n  BBB.getCurrentPoll = (userId) ->\n    if userId isnt undefined and Meteor.Polls.findOne({\"poll_info.users\": userId})\n      return Meteor.Polls.findOne({\"poll_info.users\": userId})\n\n  BBB.sendPollResponseMessage = (key, pollAnswerId) ->\n    Meteor.call \"publishVoteMessage\", BBB.getMeetingId(), pollAnswerId, getInSession(\"userId\"), getInSession(\"authToken\")\n\n  BBB.getMeetingId = ->\n    Meteor.Meetings.findOne()?.meetingId\n\n  BBB.getInternalMeetingId = (callback) ->\n\n  ###\n    Queryies the user object via it's id\n  ###\n  BBB.getUser = (userId) ->\n    Meteor.Users.findOne({userId: userId})\n\n  BBB.getCurrentUser = () ->\n    BBB.getUser(getInSession(\"userId\"))\n\n  ###\n  Query if the current user is sharing webcam.\n\n  Param:\n  callback - function to return the result\n\n  If you want to instead receive an event with the result, register a listener\n  for AM_I_SHARING_CAM_RESP (see below).\n  ###\n  BBB.amISharingWebcam = (callback) ->\n    # BBB.isUserSharingWebcam BBB.getCurrentUser()?.userId\n    return false\n\n  ###\n\n  Query if another user is sharing her camera.\n\n  Param:\n  userID : the id of the user that may be sharing the camera\n  callback: function if you want to be informed synchronously. Don't pass a function\n  if you want to be informed through an event. You have to register for\n  IS_USER_PUBLISHING_CAM_RESP (see below).\n  ###\n  BBB.isUserSharingWebcam = (userId, callback) ->\n    # BBB.getUser(userId)?.user?.webcam_stream?.length isnt 0\n    return false\n\n\n  # returns whether the user has joined any type of audio\n  BBB.amIInAudio = (callback) ->\n    user = BBB.getCurrentUser()\n    user?.user?.listenOnly or user?.user?.voiceUser?.joined\n\n  # returns true if the user has joined the listen only audio stream\n  BBB.amIListenOnlyAudio = (callback) ->\n    BBB.getCurrentUser()?.user?.listenOnly\n\n  # returns whether the user has joined the voice conference and is sharing audio through a microphone\n  BBB.amISharingAudio = (callback) ->\n    BBB.isUserSharingAudio BBB.getCurrentUser()?.userId\n\n  # returns whether the user is currently talking\n  BBB.amITalking = (callback) ->\n    BBB.isUserTalking BBB.getCurrentUser()?.userId\n\n  BBB.isUserInAudio = (userId, callback) ->\n    user = BBB.getUser(userId)\n    user?.user?.listenOnly or user?.user?.voiceUser?.joined\n\n  BBB.isUserListenOnlyAudio = (userId, callback) ->\n    BBB.getUser(userId)?.user?.listenOnly\n\n  BBB.isUserSharingAudio = (userId, callback) ->\n    BBB.getUser(userId)?.user?.voiceUser?.joined\n\n  BBB.isUserTalking = (userId, callback) ->\n    BBB.getUser(userId)?.user?.voiceUser?.talking\n\n  BBB.isUserPresenter = (userId, callback) ->\n    BBB.getUser(userId)?.user?.presenter\n\n  # returns true if the current user is marked as locked\n  BBB.amILocked = ->\n    return BBB.getCurrentUser()?.user.locked\n\n  # check whether the user is locked AND the current lock settings for the room\n  # includes locking the microphone of viewers (listenOnly is still alowed)\n  BBB.isMyMicLocked = ->\n    lockedMicForRoom = Meteor.Meetings.findOne()?.roomLockSettings.disableMic\n    # note that voiceUser.locked is not used in BigBlueButton at this stage (April 2015)\n\n    return lockedMicForRoom and BBB.amILocked()\n\n  BBB.getCurrentSlide = ->\n    currentPresentation = Meteor.Presentations.findOne({\"presentation.current\": true})\n    presentationId = currentPresentation?.presentation?.id\n    currentSlide = Meteor.Slides.findOne({\"presentationId\": presentationId, \"slide.current\": true})\n\n  BBB.getMeetingName = ->\n    Meteor.Meetings.findOne()?.meetingName or null\n\n  BBB.getNumberOfUsers = ->\n    Meteor.Users.find().count()\n\n  BBB.currentPresentationName = ->\n    Meteor.Presentations.findOne({\"presentation.current\": true})?.presentation?.name\n\n  ###\n  Raise user's hand.\n  Param:\n\n  ###\n  BBB.lowerHand = (meetingId, toUserId, byUserId, byAuthToken) ->\n    Meteor.call('userLowerHand', meetingId, toUserId, byUserId, byAuthToken)\n\n  BBB.raiseHand = (meetingId, toUserId, byUserId, byAuthToken) ->\n    Meteor.call('userRaiseHand', meetingId, toUserId, byUserId, byAuthToken)\n\n  BBB.setEmojiStatus = (meetingId, toUserId, byUserId, byAuthToken, status) ->\n    Meteor.call('userSetEmoji', meetingId, toUserId, byUserId, byAuthToken, status)\n\n  BBB.isUserEmojiStatusSet = (userId) ->\n    BBB.getUser(userId)?.user?.emoji_status isnt \"none\" and BBB.getUser(userId)?.user?.emoji_status isnt undefined\n\n  BBB.isCurrentUserEmojiStatusSet = ->\n    BBB.isUserEmojiStatusSet(BBB.getCurrentUser()?.userId)\n\n  BBB.isMeetingRecording = ->\n    MEteor.Meetings.findOne()?.recorded\n\n\n  ###\n  Issue a switch presenter command.\n\n  Param:\n  newPresenterUserID - the user id of the new presenter\n\n  3rd-party JS must listen for SWITCHED_PRESENTER (see below) to get notified\n  of switch presenter events.\n  ###\n  BBB.switchPresenter = (newPresenterUserID) ->\n\n  ###\n  Query if current user is presenter.\n\n  Params:\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for AM_I_PRESENTER_RESP (see below).\n  ###\n  BBB.amIPresenter = (callback) ->\n    returnOrCallback false, callback\n\n  ###\n  Eject a user.\n\n  Params:\n  userID - userID of the user you want to eject.\n  ###\n  BBB.ejectUser = (userID) ->\n\n  ###\n  Query who is presenter.\n\n  Params:\n  callback - function that gets executed for the response.\n  ###\n  BBB.getPresenterUserID = (callback) ->\n\n  ###\n  Query the current user's role.\n  Params:\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for GET_MY_ROLE_RESP (see below).\n  ###\n  BBB.getMyRole = (callback) ->\n    returnOrCallback \"VIEWER\", callback\n\n  ###\n  Query the current user's id.\n\n  Params:\n  callback - function that gets executed for the response.\n  ###\n  BBB.getMyUserID = (callback) ->\n    returnOrCallback getInSession(\"userId\"), callback\n\n\n  BBB.getMyDBID = (callback) ->\n    returnOrCallback Meteor.Users.findOne({userId:getInSession(\"userId\")})?._id, callback\n\n\n  BBB.getMyUserName = (callback) ->\n    BBB.getUserName(BBB.getCurrentUser()?.userId)\n\n  BBB.getMyVoiceBridge = (callback) ->\n    res = Meteor.Meetings.findOne({}).voiceConf\n    returnOrCallback res, callback\n\n  BBB.getUserName = (userId, callback) ->\n    returnOrCallback BBB.getUser(userId)?.user?.name, callback\n\n  ###\n  Query the current user's role.\n  Params:\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for GET_MY_ROLE_RESP (see below).\n  ###\n  BBB.getMyUserInfo = (callback) ->\n    result =\n      myUserID: BBB.getMyUserID()\n      myUsername: BBB.getMyUserName()\n      myInternalUserID: BBB.getMyUserID()\n      myAvatarURL: null\n      myRole: BBB.getMyRole()\n      amIPresenter: BBB.amIPresenter()\n      voiceBridge: BBB.getMyVoiceBridge()\n      dialNumber: null\n\n    returnOrCallback(result, callback)\n\n  ###\n  Query the meeting id.\n\n  Params:\n  callback - function that gets executed for the response.\n  ###\n\n\n  ###\n  Join the voice conference.\n  isListenOnly: signifies whether the user joining the conference audio requests to join the listen only stream\n  ###\n  BBB.joinVoiceConference = (callback, isListenOnly) ->\n    if BBB.isMyMicLocked()\n      callIntoConference(BBB.getMyVoiceBridge(), callback, true) #true because we force isListenOnly mode\n    callIntoConference(BBB.getMyVoiceBridge(), callback, isListenOnly)\n\n  ###\n  Leave the voice conference.\n  ###\n  BBB.leaveVoiceConference = (callback) ->\n    webrtc_hangup callback # sign out of call\n\n  ###\n  Get a hold of the object containing the call information\n  ###\n  BBB.getCallStatus = ->\n    getCallStatus()\n\n  ###\n  Share user's webcam.\n\n  Params:\n  publishInClient : (DO NOT USE - Unimplemented)\n  ###\n  BBB.shareVideoCamera = (publishInClient) ->\n\n  ###\n  Stop share user's webcam.\n  ###\n  BBB.stopSharingCamera = ->\n\n  ###\n    Indicates if a user is muted\n  ###\n  BBB.isUserMuted = (id) ->\n    BBB.getUser(id)?.user?.voiceUser?.muted\n\n  ###\n    Indicates if the current user is muted\n  ###\n  BBB.amIMuted = ->\n    BBB.isUserMuted(BBB.getCurrentUser().userId)\n\n  ###\n  Mute the current user.\n  ###\n  BBB.muteMe = ->\n    BBB.muteUser(getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"))\n  ###\n  Unmute the current user.\n  ###\n  BBB.unmuteMe = ->\n    BBB.unmuteUser(getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"))\n\n  BBB.muteUser = (meetingId, userId, toMuteId, requesterId, requestToken) ->\n    Meteor.call('muteUser', meetingId, toMuteId, requesterId, getInSession(\"authToken\"))\n\n  BBB.unmuteUser = (meetingId, userId, toMuteId, requesterId, requestToken) ->\n    Meteor.call('unmuteUser', meetingId, toMuteId, requesterId, getInSession(\"authToken\"))\n\n  BBB.toggleMyMic = ->\n    request = if BBB.amIMuted() then \"unmuteUser\" else \"muteUser\"\n    Meteor.call(request, BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"))\n\n  ###\n  Mute all the users.\n  ###\n  BBB.muteAll = ->\n\n  ###\n  Unmute all the users.\n  ###\n  BBB.unmuteAll = ->\n\n  ###\n  Switch to a new layout.\n\n  Param:\n  newLayout : name of the layout as defined in layout.xml (found in /var/www/bigbluebutton/client/conf/layout.xml)\n  ###\n  BBB.switchLayout = (newLayout) ->\n\n  ###\n  Lock the layout.\n\n  Locking the layout means that users will have the same layout with the moderator that issued the lock command.\n  Other users won't be able to move or resize the different windows.\n  ###\n  BBB.lockLayout = (lock) ->\n\n  ###\n  Request to send a public chat\n  fromUserID - the external user id for the sender\n  fontColor  - the color of the font to display the message\n  localeLang - the 2-char locale code (e.g. en) for the sender\n  message    - the message to send\n  ###\n  BBB.sendPublicChatMessage = (fontColor, localeLang, message) ->\n    messageForServer = { # construct message for server\n      \"message\": message\n      \"chat_type\": \"PUBLIC_CHAT\"\n      \"from_userid\": getInSession(\"userId\")\n      \"from_username\": BBB.getMyUserName()\n      \"from_tz_offset\": \"240\"\n      \"to_username\": \"public_chat_username\"\n      \"to_userid\": \"public_chat_userid\"\n      \"from_lang\": localeLang\n      \"from_time\": getTime()\n      \"from_color\": fontColor\n    }\n\n    Meteor.call \"sendChatMessagetoServer\", BBB.getMeetingId(), messageForServer, getInSession(\"userId\"), getInSession(\"authToken\")\n\n  ###\n  Request to send a private chat\n  fromUserID - the external user id for the sender\n  fontColor  - the color of the font to display the message\n  localeLang - the 2-char locale code (e.g. en) for the sender\n  message    - the message to send\n  toUserID   - the external user id of the receiver\n  ###\n  BBB.sendPrivateChatMessage = (fontColor, localeLang, message, toUserID, toUserName) ->\n    messageForServer = { # construct message for server\n      \"message\": message\n      \"chat_type\": \"PRIVATE_CHAT\"\n      \"from_userid\": getInSession(\"userId\")\n      \"from_username\": BBB.getMyUserName()\n      \"from_tz_offset\": \"240\"\n      \"to_username\": toUserName\n      \"to_userid\": toUserID\n      \"from_lang\": localeLang\n      \"from_time\": getTime()\n      \"from_color\": fontColor\n    }\n\n    Meteor.call \"sendChatMessagetoServer\", BBB.getMeetingId(), messageForServer, getInSession(\"userId\"), getInSession(\"authToken\")\n\n  ###\n  Request to display a presentation.\n  presentationID - the presentation to display\n  ###\n  BBB.displayPresentation = (presentationID) ->\n\n  ###\n  Query the list of uploaded presentations.\n  ###\n  BBB.queryListOfPresentations = ->\n\n  ###\n  Request to delete a presentation.\n  presentationID - the presentation to delete\n  ###\n  BBB.deletePresentation = (presentationID) ->\n\n  # Request to switch the presentation to the previous slide\n  BBB.goToPreviousPage = () ->\n    Meteor.call('publishSwitchToPreviousSlideMessage',\n      getInSession('meetingId'),\n      getInSession('userId'),\n      getInSession('authToken'))\n\n  # Request to switch the presentation to the next slide\n  BBB.goToNextPage = () ->\n    Meteor.call('publishSwitchToNextSlideMessage',\n      getInSession('meetingId'),\n      getInSession('userId'),\n      getInSession('authToken'))\n\n  BBB.webRTCConferenceCallStarted = ->\n\n  BBB.webRTCConferenceCallConnecting = ->\n\n  BBB.webRTCConferenceCallEnded = ->\n\n  BBB.webRTCConferenceCallFailed = (errorcode) ->\n\n  BBB.webRTCConferenceCallWaitingForICE = ->\n\n  BBB.webRTCCallProgressCallback = (progress) ->\n\n  BBB.webRTCEchoTestStarted = ->\n\n  BBB.webRTCEchoTestConnecting = ->\n\n  BBB.webRTCEchoTestFailed = (reason) ->\n\n  BBB.webRTCEchoTestWaitingForICE = ->\n\n  BBB.webRTCEchoTestEnded = ->\n\n  BBB.webRTCMediaRequest = ->\n\n  BBB.webRTCMediaSuccess = ->\n\n  BBB.webRTCMediaFail = ->\n\n  BBB.webRTCWebcamRequest = ->\n\n  BBB.webRTCWebcamRequestSuccess = ->\n\n  BBB.webRTCWebcamRequestFail = (reason) ->\n\n  # Third-party JS apps should use this to query if the BBB SWF file is ready to handle calls.\n\n  # ***********************************************************************************\n  # *       Broadcasting of events to 3rd-party apps.\n  # ************************************************************************************\n\n  ###\n  Stores the 3rd-party app event listeners **\n  ###\n  listeners = {}\n\n  ###\n  3rd-party apps should use this method to register to listen for events.\n  ###\n  BBB.listen = (eventName, handler) ->\n\n  ###\n  3rd-party app should use this method to unregister listener for a given event.\n  ###\n  BBB.unlisten = (eventName, handler) ->\n\n  BBB.init = (callback) ->\n\n  BBB\n)()\n"]}},{"type":"js","data":"(function(){//\n// Regular Expression for URL validation\n//\n// Author: Diego Perini\n// Updated: 2010/12/05\n// License: MIT\n//\n// Copyright (c) 2010-2013 Diego Perini (http://www.iport.it)\n//\n// Permission is hereby granted, free of charge, to any person\n// obtaining a copy of this software and associated documentation\n// files (the \"Software\"), to deal in the Software without\n// restriction, including without limitation the rights to use,\n// copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the\n// Software is furnished to do so, subject to the following\n// conditions:\n//\n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n// OTHER DEALINGS IN THE SOFTWARE.\n//\n// the regular expression composed & commented\n// could be easily tweaked for RFC compliance,\n// it was expressly modified to fit & satisfy\n// these test for an URL shortener:\n//\n//   http://mathiasbynens.be/demo/url-regex\n//\n// Notes on possible differences from a standard/generic validation:\n//\n// - utf-8 char class take in consideration the full Unicode range\n// - TLDs have been made mandatory so single names like \"localhost\" fails\n// - protocols have been restricted to ftp, http and https only as requested\n//\n// Changes:\n//\n// - IP address dotted notation validation, range: 1.0.0.0 - 223.255.255.255\n//   first and last IP address of each class is considered invalid\n//   (since they are broadcast/network addresses)\n//\n// - Added exclusion of private, reserved and/or local networks ranges\n//\n// - Made starting path slash optional (http://example.com?foo=bar)\n//\n// - Allow a dot (.) at the end of hostnames (http://example.com.)\n//\n// Compressed one-line versions:\n//\n// Javascript version\n//\n// /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/i\n//\n// PHP version\n//\n// _^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)*[a-z\\x{00a1}-\\x{ffff}0-9]+)(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)*[a-z\\x{00a1}-\\x{ffff}0-9]+)*(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$_iuS\n//\n\nre_weburl = new RegExp(\n    // protocol identifier\n    \"(?:(?:https?|ftp)://)\" +\n    // user:pass authentication\n    \"(?:\\\\S+(?::\\\\S*)?@)?\" +\n    \"(?:\" +\n      // IP address exclusion\n      // private & local networks\n      \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +\n      \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +\n      \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" +\n      // IP address dotted notation octets\n      // excludes loopback network 0.0.0.0\n      // excludes reserved space >= 224.0.0.0\n      // excludes network & broacast addresses\n      // (first & last IP address of each class)\n      \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\n      \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\n      \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" +\n    \"|\" +\n      // host name\n      \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\" +\n      // domain name\n      \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\" +\n      // TLD identifier\n      \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\" +\n      // TLD may end with dot\n      \"\\\\.?\" +\n    \")\" +\n    // port number\n    \"(?::\\\\d{2,5})?\" +\n    // resource path\n    \"(?:[/?#]\\\\S*)?\", \"img\"\n);\n\n}).call(this);\n","servePath":"/client/lib/regex-weburl.js","sourceMap":{"version":3,"sources":["/client/lib/regex-weburl.js"],"names":[],"mappings":"cAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/lib/regex-weburl.js","sourcesContent":["//\n// Regular Expression for URL validation\n//\n// Author: Diego Perini\n// Updated: 2010/12/05\n// License: MIT\n//\n// Copyright (c) 2010-2013 Diego Perini (http://www.iport.it)\n//\n// Permission is hereby granted, free of charge, to any person\n// obtaining a copy of this software and associated documentation\n// files (the \"Software\"), to deal in the Software without\n// restriction, including without limitation the rights to use,\n// copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the\n// Software is furnished to do so, subject to the following\n// conditions:\n//\n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n// OTHER DEALINGS IN THE SOFTWARE.\n//\n// the regular expression composed & commented\n// could be easily tweaked for RFC compliance,\n// it was expressly modified to fit & satisfy\n// these test for an URL shortener:\n//\n//   http://mathiasbynens.be/demo/url-regex\n//\n// Notes on possible differences from a standard/generic validation:\n//\n// - utf-8 char class take in consideration the full Unicode range\n// - TLDs have been made mandatory so single names like \"localhost\" fails\n// - protocols have been restricted to ftp, http and https only as requested\n//\n// Changes:\n//\n// - IP address dotted notation validation, range: 1.0.0.0 - 223.255.255.255\n//   first and last IP address of each class is considered invalid\n//   (since they are broadcast/network addresses)\n//\n// - Added exclusion of private, reserved and/or local networks ranges\n//\n// - Made starting path slash optional (http://example.com?foo=bar)\n//\n// - Allow a dot (.) at the end of hostnames (http://example.com.)\n//\n// Compressed one-line versions:\n//\n// Javascript version\n//\n// /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/i\n//\n// PHP version\n//\n// _^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)*[a-z\\x{00a1}-\\x{ffff}0-9]+)(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}0-9]-*)*[a-z\\x{00a1}-\\x{ffff}0-9]+)*(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$_iuS\n//\n\nre_weburl = new RegExp(\n    // protocol identifier\n    \"(?:(?:https?|ftp)://)\" +\n    // user:pass authentication\n    \"(?:\\\\S+(?::\\\\S*)?@)?\" +\n    \"(?:\" +\n      // IP address exclusion\n      // private & local networks\n      \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +\n      \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +\n      \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" +\n      // IP address dotted notation octets\n      // excludes loopback network 0.0.0.0\n      // excludes reserved space >= 224.0.0.0\n      // excludes network & broacast addresses\n      // (first & last IP address of each class)\n      \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\n      \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\n      \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" +\n    \"|\" +\n      // host name\n      \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\" +\n      // domain name\n      \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\" +\n      // TLD identifier\n      \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\" +\n      // TLD may end with dot\n      \"\\\\.?\" +\n    \")\" +\n    // port number\n    \"(?::\\\\d{2,5})?\" +\n    // resource path\n    \"(?:[/?#]\\\\S*)?\", \"img\"\n);\n"]}},{"type":"js","data":"(function(){/*\n * ScaleRaphael 0.8 by Zevan Rosser 2010\n * For use with Raphael library : www.raphaeljs.com\n * Licensed under the MIT license.\n *\n * www.shapevent.com/scaleraphael/\n */\n(function(){\n  window.ScaleRaphael = function(container, width, height){\n    var wrapper = document.getElementById(container);\n    if (!wrapper.style.position) wrapper.style.position = \"relative\";\n    wrapper.style.width = width + \"px\";\n    wrapper.style.height = height + \"px\";\n    wrapper.style.overflow = \"hidden\";\n    var nestedWrapper;\n\n    if (Raphael.type == \"VML\"){\n      wrapper.innerHTML = \"<rvml:group style='position : absolute; width: 1000px; height: 1000px; top: 0px; left: 0px' coordsize='1000,1000' class='rvml' id='vmlgroup'><\\/rvml:group>\";\n      nestedWrapper = document.getElementById(\"vmlgroup\");\n    }else{\n      wrapper.innerHTML = \"<div id='svggroup'><\\/div>\";\n      nestedWrapper = document.getElementById(\"svggroup\");\n    }\n\n    var paper = new Raphael(nestedWrapper, width, height);\n    var vmlDiv;\n\n    if (Raphael.type == \"SVG\"){\n      paper.canvas.setAttribute(\"viewBox\", \"0 0 \"+width+\" \"+height);\n    }else{\n      vmlDiv = wrapper.getElementsByTagName(\"div\")[0];\n    }\n\n    paper.changeSize = function(w, h, center, clipping){\n      clipping = !clipping;\n\n      var ratioW = w / width;\n      var ratioH = h / height;\n      var scale = ratioW < ratioH ? ratioW : ratioH;\n\n      var newHeight = parseInt(height * scale);\n      var newWidth = parseInt(width * scale);\n\n      if (Raphael.type == \"VML\"){\n         // scale the textpaths\n       var txt = document.getElementsByTagName(\"textpath\");\n        for (var i in txt){\n          var curr = txt[i];\n          if (curr.style){\n            if(!curr._fontSize){\n              var mod = curr.style.font.split(\"px\");\n              curr._fontSize = parseInt(mod[0]);\n              curr._font = mod[1];\n            }\n            curr.style.font = curr._fontSize * scale + \"px\" + curr._font;\n          }\n        }\n        var newSize;\n\n        if (newWidth < newHeight){\n         newSize = newWidth * 1000 / width;\n        }else{\n         newSize = newHeight * 1000 / height;\n        }\n        newSize = parseInt(newSize);\n        nestedWrapper.style.width = newSize + \"px\";\n        nestedWrapper.style.height = newSize + \"px\";\n        if (clipping){\n          nestedWrapper.style.left = parseInt((w - newWidth) / 2) + \"px\";\n          nestedWrapper.style.top = parseInt((h - newHeight) / 2) + \"px\";\n        }\n        vmlDiv.style.overflow = \"visible\";\n      }\n\n      if (clipping){\n        newWidth = w;\n        newHeight = h;\n      }\n\n      wrapper.style.width = newWidth + \"px\";\n      wrapper.style.height = newHeight + \"px\";\n      paper.setSize(newWidth, newHeight);\n\n      if (center){\n        wrapper.style.position = \"absolute\";\n        wrapper.style.left = parseInt((w - newWidth) / 2) + \"px\";\n        wrapper.style.top = parseInt((h - newHeight) / 2) + \"px\";\n      }\n    }\n\n    paper.scaleAll = function(amount){\n      paper.changeSize(width * amount, height * amount);\n    }\n\n    paper.changeSize(width, height);\n\n    paper.w = width;\n    paper.h = height;\n\n    return paper;\n  }\n})();\n}).call(this);\n","servePath":"/client/lib/scale.raphael.js","sourceMap":{"version":3,"sources":["/client/lib/scale.raphael.js"],"names":[],"mappings":"cAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,K","file":"/client/lib/scale.raphael.js","sourcesContent":["/*\n * ScaleRaphael 0.8 by Zevan Rosser 2010\n * For use with Raphael library : www.raphaeljs.com\n * Licensed under the MIT license.\n *\n * www.shapevent.com/scaleraphael/\n */\n(function(){\n  window.ScaleRaphael = function(container, width, height){\n    var wrapper = document.getElementById(container);\n    if (!wrapper.style.position) wrapper.style.position = \"relative\";\n    wrapper.style.width = width + \"px\";\n    wrapper.style.height = height + \"px\";\n    wrapper.style.overflow = \"hidden\";\n    var nestedWrapper;\n\n    if (Raphael.type == \"VML\"){\n      wrapper.innerHTML = \"<rvml:group style='position : absolute; width: 1000px; height: 1000px; top: 0px; left: 0px' coordsize='1000,1000' class='rvml' id='vmlgroup'><\\/rvml:group>\";\n      nestedWrapper = document.getElementById(\"vmlgroup\");\n    }else{\n      wrapper.innerHTML = \"<div id='svggroup'><\\/div>\";\n      nestedWrapper = document.getElementById(\"svggroup\");\n    }\n\n    var paper = new Raphael(nestedWrapper, width, height);\n    var vmlDiv;\n\n    if (Raphael.type == \"SVG\"){\n      paper.canvas.setAttribute(\"viewBox\", \"0 0 \"+width+\" \"+height);\n    }else{\n      vmlDiv = wrapper.getElementsByTagName(\"div\")[0];\n    }\n\n    paper.changeSize = function(w, h, center, clipping){\n      clipping = !clipping;\n\n      var ratioW = w / width;\n      var ratioH = h / height;\n      var scale = ratioW < ratioH ? ratioW : ratioH;\n\n      var newHeight = parseInt(height * scale);\n      var newWidth = parseInt(width * scale);\n\n      if (Raphael.type == \"VML\"){\n         // scale the textpaths\n       var txt = document.getElementsByTagName(\"textpath\");\n        for (var i in txt){\n          var curr = txt[i];\n          if (curr.style){\n            if(!curr._fontSize){\n              var mod = curr.style.font.split(\"px\");\n              curr._fontSize = parseInt(mod[0]);\n              curr._font = mod[1];\n            }\n            curr.style.font = curr._fontSize * scale + \"px\" + curr._font;\n          }\n        }\n        var newSize;\n\n        if (newWidth < newHeight){\n         newSize = newWidth * 1000 / width;\n        }else{\n         newSize = newHeight * 1000 / height;\n        }\n        newSize = parseInt(newSize);\n        nestedWrapper.style.width = newSize + \"px\";\n        nestedWrapper.style.height = newSize + \"px\";\n        if (clipping){\n          nestedWrapper.style.left = parseInt((w - newWidth) / 2) + \"px\";\n          nestedWrapper.style.top = parseInt((h - newHeight) / 2) + \"px\";\n        }\n        vmlDiv.style.overflow = \"visible\";\n      }\n\n      if (clipping){\n        newWidth = w;\n        newHeight = h;\n      }\n\n      wrapper.style.width = newWidth + \"px\";\n      wrapper.style.height = newHeight + \"px\";\n      paper.setSize(newWidth, newHeight);\n\n      if (center){\n        wrapper.style.position = \"absolute\";\n        wrapper.style.left = parseInt((w - newWidth) / 2) + \"px\";\n        wrapper.style.top = parseInt((h - newHeight) / 2) + \"px\";\n      }\n    }\n\n    paper.scaleAll = function(amount){\n      paper.changeSize(width * amount, height * amount);\n    }\n\n    paper.changeSize(width, height);\n\n    paper.w = width;\n    paper.h = height;\n\n    return paper;\n  }\n})();"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// lib/environment.coffee.js                                           //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nthis.BREAK_LINE = '<br/>';                                             // 2\n                                                                       //\nthis.CARRIAGE_RETURN = '\\r';                                           // 2\n                                                                       //\nthis.NEW_LINE = '\\n';                                                  // 2\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/lib/environment.coffee.js","sourceMap":{"version":3,"sources":["/lib/environment.coffee"],"names":[],"mappings":";;;;;;;;;AACA,IAAC,WAAD,GAAY,OAAZ;;AAAA,IAEC,gBAAD,GAAiB,IAFjB;;AAAA,IAIC,SAAD,GAAU,IAJV","file":"/lib/environment.coffee.js","sourcesContent":["# used in Flash and HTML to show a legitimate break in the line\r\n@BREAK_LINE='<br/>'\r\n# soft return in HTML to signify a broken line without displaying the escaped '<br/>' line break text\r\n@CARRIAGE_RETURN='\\r'\r\n# handle this the same as carriage return, in case text copied has this\r\n@NEW_LINE='\\n'\r\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// lib/router.coffee.js                                                //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nthis.Router.configure({                                                // 1\n  layoutTemplate: 'layout'                                             // 1\n});                                                                    //\n                                                                       //\nthis.Router.map(function() {                                           // 1\n  this.route(\"main\", {                                                 // 5\n    path: \"/html5client/:meeting_id/:user_id/:auth_token\",             // 6\n    onBeforeAction: function() {                                       // 6\n      var applyNewSessionVars, authToken, meetingId, userId;           // 8\n      meetingId = this.params.meeting_id;                              // 8\n      userId = this.params.user_id;                                    // 8\n      authToken = this.params.auth_token;                              // 8\n      if ((authToken == null) || (meetingId == null) || (userId == null)) {\n        document.location = getInSession('logoutURL');                 // 15\n      } else {                                                         //\n        Meteor.call(\"validateAuthToken\", meetingId, userId, authToken);\n        applyNewSessionVars = function() {                             // 18\n          setInSession(\"authToken\", authToken);                        // 21\n          setInSession(\"meetingId\", meetingId);                        // 21\n          setInSession(\"userId\", userId);                              // 21\n          return Router.go('/html5client');                            //\n        };                                                             //\n        clearSessionVar(applyNewSessionVars);                          // 18\n      }                                                                //\n      return this.next();                                              //\n    }                                                                  //\n  });                                                                  //\n  this.route(\"signedin\", {                                             // 5\n    path: \"/html5client\",                                              // 33\n    action: function() {                                               // 33\n      var authToken, meetingId, onErrorFunction, userId;               // 35\n      meetingId = getInSession(\"meetingId\");                           // 35\n      userId = getInSession(\"userId\");                                 // 35\n      authToken = getInSession(\"authToken\");                           // 35\n      onErrorFunction = function(error, result) {                      // 35\n        console.log(\"ONERRORFUNCTION\");                                // 40\n        Meteor.call(\"userLogout\", meetingId, userId, authToken);       // 40\n        clearSessionVar(alert(\"Please sign in again\"));                // 40\n        document.location = getInSession('logoutURL') || '/';          // 40\n      };                                                               //\n      Meteor.subscribe('chat', meetingId, userId, authToken, {         // 35\n        onError: onErrorFunction,                                      // 52\n        onReady: (function(_this) {                                    // 52\n          return function() {                                          //\n            return Meteor.subscribe('shapes', meetingId, {             //\n              onReady: function() {                                    // 53\n                return Meteor.subscribe('slides', meetingId, {         //\n                  onReady: function() {                                // 54\n                    return Meteor.subscribe('meetings', meetingId, {   //\n                      onReady: function() {                            // 55\n                        return Meteor.subscribe('presentations', meetingId, {\n                          onReady: function() {                        // 56\n                            return Meteor.subscribe('users', meetingId, userId, authToken, {\n                              onError: onErrorFunction,                // 57\n                              onReady: function() {                    // 57\n                                return Meteor.subscribe('whiteboard-clean-status', meetingId, {\n                                  onReady: function() {                // 58\n                                    var a, handleLogourUrlError;       // 59\n                                    Meteor.subscribe('bbb_poll', meetingId, userId, authToken, {\n                                      onReady: function() {}           // 59\n                                    });                                //\n                                    _this.render('main');              // 59\n                                    onLoadComplete();                  // 59\n                                    handleLogourUrlError = function() {\n                                      alert(\"Error: could not find the logoutURL\");\n                                      setInSession(\"logoutURL\", document.location.hostname);\n                                    };                                 //\n                                    a = $.ajax({                       // 59\n                                      dataType: 'json',                // 70\n                                      url: '/bigbluebutton/api/enter'  // 70\n                                    });                                //\n                                    a.done(function(data) {            // 59\n                                      if (data.response.logoutURL != null) {\n                                        setInSession(\"logoutURL\", data.response.logoutURL);\n                                      } else {                         //\n                                        if (data.response.logoutUrl != null) {\n                                          setInSession(\"logoutURL\", data.response.logoutUrl);\n                                        } else {                       //\n                                          return handleLogourUrlError();\n                                        }                              //\n                                      }                                //\n                                    });                                //\n                                    return a.fail(function(data, textStatus, errorThrown) {\n                                      return handleLogourUrlError();   //\n                                    });                                //\n                                  }                                    //\n                                });                                    //\n                              }                                        //\n                            });                                        //\n                          }                                            //\n                        });                                            //\n                      }                                                //\n                    });                                                //\n                  }                                                    //\n                });                                                    //\n              }                                                        //\n            });                                                        //\n          };                                                           //\n        })(this)                                                       //\n      });                                                              //\n      return this.render('loading');                                   //\n    }                                                                  //\n  });                                                                  //\n  this.route('meteorEndpoint', {                                       // 5\n    path: '/check',                                                    // 90\n    where: 'server',                                                   // 90\n    action: function() {                                               // 90\n      this.response.writeHead(200, {                                   // 93\n        'Content-Type': 'application/json'                             // 93\n      });                                                              //\n      this.response.end(JSON.stringify({                               // 93\n        \"html5clientStatus\": \"running\"                                 // 96\n      }));                                                             //\n    }                                                                  //\n  });                                                                  //\n});                                                                    // 3\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/lib/router.coffee.js","sourceMap":{"version":3,"sources":["/lib/router.coffee"],"names":[],"mappings":"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","file":"/lib/router.coffee.js","sourcesContent":["@Router.configure layoutTemplate: 'layout'\n\n@Router.map ->\n  # this is how we handle login attempts\n  @route \"main\",\n    path: \"/html5client/:meeting_id/:user_id/:auth_token\"\n    onBeforeAction: ->\n      meetingId = @params.meeting_id\n      userId = @params.user_id\n      authToken = @params.auth_token\n\n      # catch if any of the user's meeting data is invalid\n      if not authToken? or not meetingId? or not userId?\n        # if their data is invalid, redirect the user to the logout page\n        document.location = getInSession 'logoutURL'\n\n      else\n        Meteor.call(\"validateAuthToken\", meetingId, userId, authToken)\n\n        applyNewSessionVars = ->\n          setInSession(\"authToken\", authToken)\n          setInSession(\"meetingId\", meetingId)\n          setInSession(\"userId\", userId)\n          Router.go('/html5client')\n\n        clearSessionVar(applyNewSessionVars)\n\n      @next()\n\n\n  # the user successfully logged in\n  @route \"signedin\",\n    path: \"/html5client\"\n    action: ->\n      meetingId = getInSession \"meetingId\"\n      userId = getInSession \"userId\"\n      authToken = getInSession \"authToken\"\n\n      onErrorFunction = (error, result) ->\n        console.log \"ONERRORFUNCTION\"\n        #if error\n        #  # Was unable to authorize the user. Redirect to the home page\n        #  # alert error.reason\n\n        #make sure the user is not let through\n        Meteor.call(\"userLogout\", meetingId, userId, authToken)\n\n        clearSessionVar (alert \"Please sign in again\")\n        document.location = getInSession('logoutURL') or '/'\n        return\n\n      Meteor.subscribe 'chat', meetingId, userId, authToken, onError: onErrorFunction, onReady: =>\n        Meteor.subscribe 'shapes', meetingId, onReady: =>\n          Meteor.subscribe 'slides', meetingId, onReady: =>\n            Meteor.subscribe 'meetings', meetingId, onReady: =>\n              Meteor.subscribe 'presentations', meetingId, onReady: =>\n                Meteor.subscribe 'users', meetingId, userId, authToken, onError: onErrorFunction, onReady: =>\n                  Meteor.subscribe 'whiteboard-clean-status', meetingId, onReady: =>\n                    Meteor.subscribe 'bbb_poll', meetingId,  userId, authToken, onReady: =>\n                    # done subscribing, start rendering the client and set default settings\n                    @render('main')\n                    onLoadComplete()\n\n                    handleLogourUrlError = () ->\n                      alert \"Error: could not find the logoutURL\"\n                      setInSession(\"logoutURL\", document.location.hostname)\n                      return\n\n                    # obtain the logoutURL\n                    a = $.ajax({dataType: 'json', url: '/bigbluebutton/api/enter'})\n                    a.done (data) ->\n                      if data.response.logoutURL? # for a meeting with 0 users\n                        setInSession(\"logoutURL\", data.response.logoutURL)\n                        return\n                      else\n                        if data.response.logoutUrl? # for a running meeting\n                          setInSession(\"logoutURL\", data.response.logoutUrl)\n                          return\n                        else\n                          handleLogourUrlError()\n\n                    a.fail (data, textStatus, errorThrown) ->\n                      handleLogourUrlError()\n\n      @render('loading')\n\n\n  # endpoint - is the html5client running (ready to handle a user)\n  @route 'meteorEndpoint',\n    path: '/check'\n    where: 'server'\n    action: ->\n      @response.writeHead 200, 'Content-Type': 'application/json'\n\n      # reply that the html5client is running\n      @response.end JSON.stringify {\"html5clientStatus\":\"running\"}\n      return\n  return\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/views/chat/chat_bar.coffee.js                                //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nthis.activateBreakLines = function(str) {                              // 9\n  var res;                                                             // 10\n  if (typeof str === 'string') {                                       // 10\n    res = str.replace(new RegExp(CARRIAGE_RETURN, 'g'), BREAK_LINE);   // 12\n    return res;                                                        //\n  }                                                                    //\n};                                                                     // 9\n                                                                       //\nthis.detectUnreadChat = function() {                                   // 9\n  return Meteor.Chat.find({}).observe({                                //\n    added: (function(_this) {                                          // 17\n      return function(chatMessage) {                                   //\n        var findDestinationTab;                                        // 19\n        findDestinationTab = function() {                              // 19\n          var ref, ref1;                                               // 20\n          if (((ref = chatMessage.message) != null ? ref.chat_type : void 0) === \"PUBLIC_CHAT\") {\n            return \"PUBLIC_CHAT\";                                      //\n          } else {                                                     //\n            return (ref1 = chatMessage.message) != null ? ref1.from_userid : void 0;\n          }                                                            //\n        };                                                             //\n        return Tracker.autorun(function(comp) {                        //\n          var destinationTab, tabsTime;                                // 25\n          tabsTime = getInSession('userListRenderedTime');             // 25\n          if ((tabsTime != null) && chatMessage.message.from_userid !== \"SYSTEM_MESSAGE\" && chatMessage.message.from_time - tabsTime > 0) {\n            populateNotifications(chatMessage);                        // 27\n            destinationTab = findDestinationTab();                     // 27\n            if (destinationTab !== getInSession(\"inChatWith\")) {       // 29\n              setInSession('chats', getInSession('chats').map(function(tab) {\n                if (tab.userId === destinationTab) {                   // 31\n                  tab.gotMail = true;                                  // 32\n                  tab.number++;                                        // 32\n                }                                                      //\n                return tab;                                            //\n              }));                                                     //\n            }                                                          //\n          }                                                            //\n          return comp.stop();                                          //\n        });                                                            //\n      };                                                               //\n    })(this)                                                           //\n  });                                                                  //\n};                                                                     // 15\n                                                                       //\nthis.getFormattedMessagesForChat = function() {                        // 9\n  var chattingWith;                                                    // 42\n  chattingWith = getInSession('inChatWith');                           // 42\n  if (chattingWith === 'PUBLIC_CHAT') {                                // 43\n    return Meteor.Chat.find({                                          // 44\n      'message.chat_type': {                                           // 44\n        $in: [\"SYSTEM_MESSAGE\", \"PUBLIC_CHAT\"]                         // 44\n      }                                                                //\n    }, {                                                               //\n      sort: {                                                          // 44\n        'message.from_time': 1                                         // 44\n      }                                                                //\n    }).fetch();                                                        //\n  } else {                                                             //\n    return Meteor.Chat.find({                                          // 46\n      'message.chat_type': 'PRIVATE_CHAT',                             // 46\n      $or: [                                                           // 46\n        {                                                              //\n          'message.to_userid': chattingWith                            // 46\n        }, {                                                           //\n          'message.from_userid': chattingWith                          // 46\n        }                                                              //\n      ]                                                                //\n    }).fetch();                                                        //\n  }                                                                    //\n};                                                                     // 41\n                                                                       //\nHandlebars.registerHelper(\"autoscroll\", function() {                   // 9\n  var ref;                                                             // 50\n  $('#chatbody').scrollTop((ref = $('#chatbody')[0]) != null ? ref.scrollHeight : void 0);\n  return false;                                                        //\n});                                                                    // 49\n                                                                       //\nHandlebars.registerHelper(\"publicChatDisabled\", function() {           // 9\n  var presenter, publicChatIsDisabled, ref, ref1, ref2, userIsLocked;  // 55\n  userIsLocked = (ref = Meteor.Users.findOne({                         // 55\n    userId: getInSession('userId')                                     //\n  })) != null ? ref.user.locked : void 0;                              //\n  publicChatIsDisabled = (ref1 = Meteor.Meetings.findOne({})) != null ? ref1.roomLockSettings.disablePublicChat : void 0;\n  presenter = (ref2 = Meteor.Users.findOne({                           // 55\n    userId: getInSession('userId')                                     //\n  })) != null ? ref2.user.presenter : void 0;                          //\n  return userIsLocked && publicChatIsDisabled && !presenter;           // 58\n});                                                                    // 54\n                                                                       //\nHandlebars.registerHelper(\"privateChatDisabled\", function() {          // 9\n  var presenter, privateChatIsDisabled, ref, ref1, ref2, userIsLocked;\n  userIsLocked = (ref = Meteor.Users.findOne({                         // 62\n    userId: getInSession('userId')                                     //\n  })) != null ? ref.user.locked : void 0;                              //\n  privateChatIsDisabled = (ref1 = Meteor.Meetings.findOne({})) != null ? ref1.roomLockSettings.disablePrivateChat : void 0;\n  presenter = (ref2 = Meteor.Users.findOne({                           // 62\n    userId: getInSession('userId')                                     //\n  })) != null ? ref2.user.presenter : void 0;                          //\n  return userIsLocked && privateChatIsDisabled && !presenter;          // 65\n});                                                                    // 61\n                                                                       //\nHandlebars.registerHelper(\"inPrivateChat\", function() {                // 9\n  return (getInSession('inChatWith')) !== 'PUBLIC_CHAT';               // 69\n});                                                                    // 68\n                                                                       //\nthis.sendMessage = function() {                                        // 9\n  var chattingWith, color, message, ref, toUsername;                   // 72\n  message = linkify($('#newMessageInput').val());                      // 72\n  if (!((message != null ? message.length : void 0) > 0 && (/\\S/.test(message)))) {\n    return;                                                            // 74\n  }                                                                    //\n  color = \"0x000000\";                                                  // 72\n  if ((chattingWith = getInSession('inChatWith')) !== \"PUBLIC_CHAT\") {\n    toUsername = (ref = Meteor.Users.findOne({                         // 78\n      userId: chattingWith                                             //\n    })) != null ? ref.user.name : void 0;                              //\n    BBB.sendPrivateChatMessage(color, \"en\", message, chattingWith, toUsername);\n  } else {                                                             //\n    BBB.sendPublicChatMessage(color, \"en\", message);                   // 81\n  }                                                                    //\n  return $('#newMessageInput').val('');                                //\n};                                                                     // 71\n                                                                       //\nTemplate.chatbar.helpers({                                             // 9\n  getCombinedMessagesForChat: function() {                             // 86\n    var deleted, i, j, len, msgs;                                      // 87\n    msgs = getFormattedMessagesForChat();                              // 87\n    len = msgs != null ? msgs.length : void 0;                         // 87\n    i = 0;                                                             // 87\n    while (i < len) {                                                  // 90\n      if (msgs[i].message.from_userid !== 'System') {                  // 91\n        j = i + 1;                                                     // 92\n        while (j < len) {                                              // 94\n          deleted = false;                                             // 95\n          if (msgs[j].message.from_userid !== 'System') {              // 96\n            if ((parseFloat(msgs[j].message.from_time) - parseFloat(msgs[i].message.from_time)) >= 60000) {\n              break;                                                   // 99\n            }                                                          //\n            if (msgs[i].message.from_userid === msgs[j].message.from_userid) {\n              msgs[i].message.message += \"\" + CARRIAGE_RETURN + msgs[j].message.message;\n              msgs.splice(j, 1);                                       // 103\n              deleted = true;                                          // 103\n            } else {                                                   //\n              break;                                                   // 106\n            }                                                          //\n          } else {                                                     //\n            break;                                                     // 108\n          }                                                            //\n          len = msgs.length;                                           // 95\n          if (!deleted) {                                              // 111\n            ++j;                                                       // 111\n          }                                                            //\n        }                                                              //\n      }                                                                //\n      ++i;                                                             // 91\n      len = msgs.length;                                               // 91\n    }                                                                  //\n    return msgs;                                                       //\n  },                                                                   //\n  userExists: function() {                                             // 86\n    if (getInSession('inChatWith') === \"PUBLIC_CHAT\") {                // 119\n      return true;                                                     // 120\n    } else {                                                           //\n      return Meteor.Users.findOne({                                    // 122\n        userId: getInSession('inChatWith')                             //\n      }) != null;                                                      //\n    }                                                                  //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.chatbar.rendered = function() {                               // 9\n  return detectUnreadChat();                                           //\n};                                                                     // 125\n                                                                       //\nTemplate.chatbar.events({                                              // 9\n  'click .toPublic': function(event) {                                 // 130\n    setInSession('inChatWith', 'PUBLIC_CHAT');                         // 131\n    return setInSession('chats', getInSession('chats').map(function(chat) {\n      if (chat.userId === \"PUBLIC_CHAT\") {                             // 133\n        chat.gotMail = false;                                          // 134\n        chat.number = 0;                                               // 134\n      }                                                                //\n      return chat;                                                     //\n    }));                                                               //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.privateChatTab.rendered = function() {                        // 9\n  if (isLandscape() || isPortrait()) {                                 // 140\n    return $(\"#newMessageInput\").focus();                              //\n  }                                                                    //\n};                                                                     // 139\n                                                                       //\nTemplate.message.rendered = function() {                               // 9\n  var ref;                                                             // 145\n  $('#chatbody').scrollTop((ref = $('#chatbody')[0]) != null ? ref.scrollHeight : void 0);\n  return false;                                                        //\n};                                                                     // 144\n                                                                       //\nTemplate.chatInput.rendered = function() {                             // 9\n  return $('.panel-footer').resizable({                                //\n    handles: 'n',                                                      // 150\n    minHeight: 70,                                                     // 150\n    resize: function(event, ui) {                                      // 150\n      var ref;                                                         // 153\n      if ($('.panel-footer').css('top') === '0px') {                   // 153\n        $('.panel-footer').height(70);                                 // 154\n      } else {                                                         //\n        $('.panel-footer').css('top', parseInt($('.panel-footer').css('top')) + 1 + 'px');\n      }                                                                //\n      $('#chatbody').height($('#chat').height() - $('.panel-footer').height() - 45);\n      return $('#chatbody').scrollTop((ref = $('#chatbody')[0]) != null ? ref.scrollHeight : void 0);\n    },                                                                 //\n    start: function(event, ui) {                                       // 150\n      $('#newMessageInput').css('overflow', '');                       // 160\n      return $('.panel-footer').resizable('option', 'maxHeight', Math.max($('.panel-footer').height(), $('#chat').height() / 2));\n    },                                                                 //\n    stop: function(event, ui) {                                        // 150\n      return setInSession('chatInputMinHeight', $('.panel-footer').height() + 1);\n    }                                                                  //\n  });                                                                  //\n};                                                                     // 148\n                                                                       //\nTemplate.chatInput.events({                                            // 9\n  'click #sendMessageButton': function(event) {                        // 166\n    $('#sendMessageButton').blur();                                    // 167\n    sendMessage();                                                     // 167\n    return adjustChatInputHeight();                                    //\n  },                                                                   //\n  'keypress #newMessageInput': function(event) {                       // 166\n    var key;                                                           // 172\n    key = (event.charCode ? event.charCode : (event.keyCode ? event.keyCode : 0));\n    if (event.shiftKey && (key === 13)) {                              // 174\n      event.preventDefault();                                          // 175\n      document.getElementById(\"newMessageInput\").value += CARRIAGE_RETURN;\n      return;                                                          // 178\n    }                                                                  //\n    if (key === 13) {                                                  // 180\n      event.preventDefault();                                          // 181\n      sendMessage();                                                   // 181\n      $('#newMessageInput').val(\"\");                                   // 181\n      return false;                                                    // 184\n    }                                                                  //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.chatInputControls.rendered = function() {                     // 9\n  return $('#newMessageInput').on('keydown paste cut', function() {    //\n    return setTimeout(function() {                                     //\n      return adjustChatInputHeight();                                  //\n    }, 0);                                                             //\n  });                                                                  //\n};                                                                     // 186\n                                                                       //\nTemplate.message.helpers({                                             // 9\n  sanitizeAndFormat: function(str) {                                   // 192\n    var res;                                                           // 193\n    if (typeof str === 'string') {                                     // 193\n      res = str.replace(/&/g, '&amp;').replace(/<(?![au\\/])/g, '&lt;').replace(/\\/([^au])>/g, '$1&gt;').replace(/([^=])\"(?!>)/g, '$1&quot;');\n      res = toClickable(res);                                          // 195\n      return res = activateBreakLines(res);                            //\n    }                                                                  //\n  },                                                                   //\n  toClockTime: function(epochTime) {                                   // 192\n    var dateObj, hours, local, minutes, offset;                        // 200\n    if (epochTime === null) {                                          // 200\n      return \"\";                                                       // 201\n    }                                                                  //\n    local = new Date();                                                // 200\n    offset = local.getTimezoneOffset();                                // 200\n    epochTime = epochTime - offset * 60000;                            // 200\n    dateObj = new Date(epochTime);                                     // 200\n    hours = dateObj.getUTCHours();                                     // 200\n    minutes = dateObj.getUTCMinutes();                                 // 200\n    if (minutes < 10) {                                                // 208\n      minutes = \"0\" + minutes;                                         // 209\n    }                                                                  //\n    return hours + \":\" + minutes;                                      //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nthis.toClickable = function(str) {                                     // 9\n  var res;                                                             // 214\n  if (typeof str === 'string') {                                       // 214\n    res = str.replace(/<a href='event:/gim, \"<a target='_blank' href='\");\n    return res = res.replace(/<a href=\"event:/gim, '<a target=\"_blank\" href=\"');\n  }                                                                    //\n};                                                                     // 213\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/views/chat/chat_bar.coffee.js","sourceMap":{"version":3,"sources":["/client/views/chat/chat_bar.coffee"],"names":[],"mappings":"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","file":"/client/views/chat/chat_bar.coffee.js","sourcesContent":["# --------------------------------------------------------------------------------------------------------------------\r\n# If a function's last line is the statement false that represents the function returning false\r\n# A function such as a click handler will continue along with the propogation and default behaivour if not stopped\r\n# Returning false stops propogation/prevents default. You cannot always use the event object to call these methods\r\n# Because most Meteor event handlers set the event object to the exact context of the event which does not\r\n# allow you to simply call these methods.\r\n# --------------------------------------------------------------------------------------------------------------------\r\n\r\n@activateBreakLines = (str) ->\r\n  if typeof str is 'string'\r\n    # turn '\\r' carriage return characters into '<br/>' break lines\r\n    res = str.replace(new RegExp(CARRIAGE_RETURN, 'g'), BREAK_LINE)\r\n    res\r\n\r\n@detectUnreadChat = ->\r\n  #if the current tab is not the same as the tab we just published in\r\n  Meteor.Chat.find({}).observe({\r\n    added: (chatMessage) =>\r\n      findDestinationTab = ->\r\n        if chatMessage.message?.chat_type is \"PUBLIC_CHAT\"\r\n          \"PUBLIC_CHAT\"\r\n        else\r\n          chatMessage.message?.from_userid\r\n      Tracker.autorun (comp) ->\r\n        tabsTime = getInSession('userListRenderedTime')\r\n        if tabsTime? and chatMessage.message.from_userid isnt \"SYSTEM_MESSAGE\" and chatMessage.message.from_time - tabsTime > 0\r\n          populateNotifications(chatMessage) # check if we need to show a new notification\r\n          destinationTab = findDestinationTab()\r\n          if destinationTab isnt getInSession \"inChatWith\"\r\n            setInSession 'chats', getInSession('chats').map((tab) ->\r\n              if tab.userId is destinationTab\r\n                tab.gotMail = true\r\n                tab.number++\r\n              tab\r\n            )\r\n        comp.stop()\r\n    })\r\n\r\n# This method returns all messages for the user. It looks at the session to determine whether the user is in\r\n# private or public chat. If true is passed, messages returned are from before the user joined. Else, the messages are from after the user joined\r\n@getFormattedMessagesForChat = ->\r\n  chattingWith = getInSession('inChatWith')\r\n  if chattingWith is 'PUBLIC_CHAT' # find all public and system messages\r\n    return Meteor.Chat.find({'message.chat_type': $in: [\"SYSTEM_MESSAGE\",\"PUBLIC_CHAT\"]},{sort: {'message.from_time': 1}}).fetch()\r\n  else\r\n    return Meteor.Chat.find({'message.chat_type': 'PRIVATE_CHAT', $or: [{'message.to_userid': chattingWith},{'message.from_userid': chattingWith}]}).fetch()\r\n\r\n# Scrolls the message container to the bottom. The number of pixels to scroll down is the height of the container\r\nHandlebars.registerHelper \"autoscroll\", ->\r\n  $('#chatbody').scrollTop($('#chatbody')[0]?.scrollHeight)\r\n  false\r\n\r\n# true if the lock settings limit public chat and the current user is locked\r\nHandlebars.registerHelper \"publicChatDisabled\", ->\r\n  userIsLocked = Meteor.Users.findOne({userId:getInSession 'userId'})?.user.locked\r\n  publicChatIsDisabled = Meteor.Meetings.findOne({})?.roomLockSettings.disablePublicChat\r\n  presenter = Meteor.Users.findOne({userId:getInSession 'userId'})?.user.presenter\r\n  return userIsLocked and publicChatIsDisabled and !presenter\r\n\r\n# true if the lock settings limit private chat and the current user is locked\r\nHandlebars.registerHelper \"privateChatDisabled\", ->\r\n  userIsLocked = Meteor.Users.findOne({userId:getInSession 'userId'})?.user.locked\r\n  privateChatIsDisabled = Meteor.Meetings.findOne({})?.roomLockSettings.disablePrivateChat\r\n  presenter = Meteor.Users.findOne({userId:getInSession 'userId'})?.user.presenter\r\n  return userIsLocked and privateChatIsDisabled and !presenter\r\n\r\n# return whether the user's chat pane is open in Private chat\r\nHandlebars.registerHelper \"inPrivateChat\", ->\r\n  return (getInSession 'inChatWith') isnt 'PUBLIC_CHAT'\r\n\r\n@sendMessage = ->\r\n  message = linkify $('#newMessageInput').val() # get the message from the input box\r\n  unless (message?.length > 0 and (/\\S/.test(message))) # check the message has content and it is not whitespace\r\n    return # do nothing if invalid message\r\n\r\n  color = \"0x000000\" #\"0x#{getInSession(\"messageColor\")}\"\r\n  if (chattingWith = getInSession('inChatWith')) isnt \"PUBLIC_CHAT\"\r\n    toUsername = Meteor.Users.findOne(userId: chattingWith)?.user.name\r\n    BBB.sendPrivateChatMessage(color, \"en\", message, chattingWith, toUsername)\r\n  else\r\n    BBB.sendPublicChatMessage(color, \"en\", message)\r\n\r\n  $('#newMessageInput').val '' # Clear message box\r\n\r\nTemplate.chatbar.helpers\r\n  getCombinedMessagesForChat: ->\r\n    msgs = getFormattedMessagesForChat()\r\n    len = msgs?.length # get length of messages\r\n    i = 0\r\n    while i < len # Must be a do while, for loop compiles and stores the length of array which can change inside the loop!\r\n      if msgs[i].message.from_userid isnt 'System' # skip system messages\r\n        j = i+1 # Start looking at messages right after the current one\r\n\r\n        while j < len\r\n          deleted = false\r\n          if msgs[j].message.from_userid isnt 'System' # Ignore system messages\r\n            # Check if the time discrepancy between the two messages exceeds window for grouping\r\n            if (parseFloat(msgs[j].message.from_time)-parseFloat(msgs[i].message.from_time)) >= 60000 # 60 seconds/1 minute\r\n              break # Messages are too far between, so them seperated and stop joining here\r\n\r\n            if msgs[i].message.from_userid is msgs[j].message.from_userid # Both messages are from the same user\r\n              # insert a '\\r' carriage return character between messages to put them on a new line\r\n              msgs[i].message.message += \"#{CARRIAGE_RETURN}#{msgs[j].message.message}\" # Combine the messages\r\n              msgs.splice(j,1) # Delete the message from the collection\r\n              deleted = true\r\n            else break # Messages are from different people, move on\r\n            #\r\n          else break # This is the break point in the chat, don't merge\r\n          #\r\n          len = msgs.length\r\n          ++j if not deleted\r\n      #\r\n      ++i\r\n      len = msgs.length\r\n\r\n    msgs\r\n\r\n  userExists: ->\r\n    if getInSession('inChatWith') is \"PUBLIC_CHAT\"\r\n      return true\r\n    else\r\n      return Meteor.Users.findOne({userId: getInSession('inChatWith')})?\r\n\r\n# When chatbar gets rendered, launch the auto-check for unread chat\r\nTemplate.chatbar.rendered = ->\r\n  detectUnreadChat()\r\n\r\n# When \"< Public\" is clicked, go to public chat\r\nTemplate.chatbar.events\r\n  'click .toPublic': (event) ->\r\n    setInSession 'inChatWith', 'PUBLIC_CHAT'\r\n    setInSession 'chats', getInSession('chats').map((chat) ->\r\n      if chat.userId is \"PUBLIC_CHAT\"\r\n        chat.gotMail = false\r\n        chat.number = 0\r\n      chat\r\n    )\r\n\r\nTemplate.privateChatTab.rendered = ->\r\n  if isLandscape() or isPortrait()\r\n    $(\"#newMessageInput\").focus()\r\n\r\n# When message gets rendered, scroll to the bottom\r\nTemplate.message.rendered = ->\r\n  $('#chatbody').scrollTop($('#chatbody')[0]?.scrollHeight)\r\n  false\r\n\r\nTemplate.chatInput.rendered = ->\r\n  $('.panel-footer').resizable\r\n    handles: 'n'\r\n    minHeight: 70\r\n    resize: (event, ui) ->\r\n      if $('.panel-footer').css('top') is '0px'\r\n        $('.panel-footer').height(70) # prevents the element from shrinking vertically for 1-2 px\r\n      else\r\n        $('.panel-footer').css('top', parseInt($('.panel-footer').css('top')) + 1 + 'px')\r\n      $('#chatbody').height($('#chat').height() - $('.panel-footer').height() - 45)\r\n      $('#chatbody').scrollTop($('#chatbody')[0]?.scrollHeight)\r\n    start: (event, ui) ->\r\n      $('#newMessageInput').css('overflow', '')\r\n      $('.panel-footer').resizable('option', 'maxHeight', Math.max($('.panel-footer').height(), $('#chat').height() / 2))\r\n    stop: (event, ui) ->\r\n      setInSession 'chatInputMinHeight', $('.panel-footer').height() + 1\r\n\r\nTemplate.chatInput.events\r\n  'click #sendMessageButton': (event) ->\r\n    $('#sendMessageButton').blur()\r\n    sendMessage()\r\n    adjustChatInputHeight()\r\n\r\n  'keypress #newMessageInput': (event) -> # user pressed a button inside the chatbox\r\n    key = (if event.charCode then event.charCode else (if event.keyCode then event.keyCode else 0))\r\n\r\n    if event.shiftKey and (key is 13)\r\n      event.preventDefault()\r\n      # append a '\\r' carriage return character to the input box dropping the cursor to a new line\r\n      document.getElementById(\"newMessageInput\").value += CARRIAGE_RETURN # Change newline character\r\n      return\r\n\r\n    if key is 13 # Check for pressing enter to submit message\r\n      event.preventDefault()\r\n      sendMessage()\r\n      $('#newMessageInput').val(\"\")\r\n      return false\r\n\r\nTemplate.chatInputControls.rendered = ->\r\n  $('#newMessageInput').on('keydown paste cut', () -> setTimeout(() ->\r\n    adjustChatInputHeight()\r\n  , 0))\r\n\r\nTemplate.message.helpers\r\n  sanitizeAndFormat: (str) ->\r\n    if typeof str is 'string'\r\n      # First, replace replace all tags with the ascii equivalent (excluding those involved in anchor tags)\r\n      res = str.replace(/&/g, '&amp;').replace(/<(?![au\\/])/g, '&lt;').replace(/\\/([^au])>/g, '$1&gt;').replace(/([^=])\"(?!>)/g, '$1&quot;');\r\n      res = toClickable res\r\n      res = activateBreakLines res\r\n\r\n  toClockTime: (epochTime) ->\r\n    if epochTime is null\r\n      return \"\"\r\n    local = new Date()\r\n    offset = local.getTimezoneOffset()\r\n    epochTime = epochTime - offset * 60000 # 1 min = 60 s = 60,000 ms\r\n    dateObj = new Date(epochTime)\r\n    hours = dateObj.getUTCHours()\r\n    minutes = dateObj.getUTCMinutes()\r\n    if minutes < 10\r\n      minutes = \"0\" + minutes\r\n    hours + \":\" + minutes\r\n\r\n# make links received from Flash client clickable in HTML\r\n@toClickable = (str) ->\r\n  if typeof str is 'string'\r\n    res = str.replace /<a href='event:/gim, \"<a target='_blank' href='\"\r\n    res = res.replace /<a href=\"event:/gim, '<a target=\"_blank\" href=\"'\r\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/views/modals/modals.coffee.js                                //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nTemplate.settingsModal.helpers({                                       // 1\n  getBBBSettingsInfo: function() {                                     // 2\n    var info, result;                                                  // 3\n    info = getBuildInformation();                                      // 3\n    return result = \"(c) \" + info.copyrightYear + \" BigBlueButton Inc. [build \" + info.html5ClientBuild + \"] - For more information visit \" + info.link;\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.logoutModal.events({                                          // 1\n  \"click #yes\": function() {                                           // 7\n    return userLogout(getInSession(\"meetingId\"), getInSession(\"userId\"));\n  },                                                                   //\n  \"click #no\": function() {                                            // 7\n    return $(\"#logoutModal\").foundation('reveal', 'close');            //\n  },                                                                   //\n  \"click .logoutButton\": function() {                                  // 7\n    return $(\".tooltip\").hide();                                       //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.settingsAudio.events({                                        // 1\n  \"click #exitAudio\": function() {                                     // 12\n    return exitVoiceCall();                                            //\n  },                                                                   //\n  \"click .joinAudioButton\": function(event) {                          // 12\n    return $(\"#settingsModal\").foundation('reveal', 'close');          //\n  },                                                                   //\n  \"click #joinListenOnly\": function(event) {                           // 12\n    return joinVoiceCall(this, {                                       //\n      isListenOnly: true                                               // 16\n    });                                                                //\n  },                                                                   //\n  \"click #joinMicrophone\": function(event) {                           // 12\n    return joinVoiceCall(this, {                                       //\n      isListenOnly: false                                              // 18\n    });                                                                //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.settingsModal.events({                                        // 1\n  \"click #closeSettings\": function() {                                 // 21\n    return $(\"#settingsModal\").foundation('reveal', 'close');          //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.optionsFontSize.events({                                      // 1\n  \"click #decreaseFontSize\": function(event) {                         // 24\n    if (getInSession(\"messageFontSize\") === 8) {                       // 25\n      $('#decreaseFontSize').disabled = true;                          // 26\n      $('#decreaseFontSize').removeClass('icon fi-minus');             // 26\n      return $('#decreaseFontSize').html('MIN');                       //\n    } else {                                                           //\n      setInSession(\"messageFontSize\", getInSession(\"messageFontSize\") - 2);\n      adjustChatInputHeight();                                         // 30\n      setTimeout(scrollChatDown, 0);                                   // 30\n      if ($('#increaseFontSize').html() === 'MAX') {                   // 33\n        $('#increaseFontSize').html('');                               // 34\n        return $('#increaseFontSize').addClass('icon fi-plus');        //\n      }                                                                //\n    }                                                                  //\n  },                                                                   //\n  \"click #increaseFontSize\": function(event) {                         // 24\n    if (getInSession(\"messageFontSize\") === 40) {                      // 38\n      $('#increaseFontSize').disabled = true;                          // 39\n      $('#increaseFontSize').removeClass('icon fi-plus');              // 39\n      return $('#increaseFontSize').html('MAX');                       //\n    } else {                                                           //\n      setInSession(\"messageFontSize\", getInSession(\"messageFontSize\") + 2);\n      adjustChatInputHeight();                                         // 43\n      setTimeout(scrollChatDown, 0);                                   // 43\n      if ($('#decreaseFontSize').html() === 'MIN') {                   // 47\n        $('#decreaseFontSize').html('');                               // 48\n        return $('#decreaseFontSize').addClass('icon fi-minus');       //\n      }                                                                //\n    }                                                                  //\n  }                                                                    //\n});                                                                    //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/views/modals/modals.coffee.js","sourceMap":{"version":3,"sources":["/client/views/modals/modals.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,QAAQ,CAAC,aAAa,CAAC,OAAvB,CACE;AAAA,sBAAoB;AAClB;AAAA,WAAO,qBAAP;WACA,SAAS,SAAO,IAAI,CAAC,aAAZ,GAA0B,6BAA1B,GAAuD,IAAI,CAAC,gBAA5D,GAA6E,iCAA7E,GAA8G,IAAI,CAAC,KAF1G;EAAA,CAApB;CADF;;AAAA,QAKQ,CAAC,WAAW,CAAC,MAArB,CACE;AAAA,gBAAc;WAAG,WAAW,aAAa,WAAb,CAAX,EAAsC,aAAa,QAAb,CAAtC,EAAH;EAAA,CAAd;AAAA,EACA,aAAa;WAAG,EAAE,cAAF,CAAiB,CAAC,UAAlB,CAA6B,QAA7B,EAAuC,OAAvC,EAAH;EAAA,CADb;AAAA,EAEA,uBAAuB;WAAG,EAAE,UAAF,CAAa,CAAC,IAAd,GAAH;EAAA,CAFvB;CADF,CALA;;AAAA,QAUQ,CAAC,aAAa,CAAC,MAAvB,CACE;AAAA,sBAAoB;WAAG,gBAAH;EAAA,CAApB;AAAA,EAEA,0BAA0B,SAAC,KAAD;WAAW,EAAE,gBAAF,CAAmB,CAAC,UAApB,CAA+B,QAA/B,EAAyC,OAAzC,EAAX;EAAA,CAF1B;AAAA,EAIA,yBAAyB,SAAC,KAAD;WAAW,cAAc,IAAd,EAAiB;AAAA,oBAAc,IAAd;KAAjB,EAAX;EAAA,CAJzB;AAAA,EAMA,yBAAyB,SAAC,KAAD;WAAW,cAAc,IAAd,EAAiB;AAAA,oBAAc,KAAd;KAAjB,EAAX;EAAA,CANzB;CADF,CAVA;;AAAA,QAmBQ,CAAC,aAAa,CAAC,MAAvB,CACE;AAAA,0BAAwB;WAAG,EAAE,gBAAF,CAAmB,CAAC,UAApB,CAA+B,QAA/B,EAAyC,OAAzC,EAAH;EAAA,CAAxB;CADF,CAnBA;;AAAA,QAsBQ,CAAC,eAAe,CAAC,MAAzB,CACE;AAAA,6BAA2B,SAAC,KAAD;AACzB,QAAG,aAAa,iBAAb,MAAmC,CAAtC;AACE,QAAE,mBAAF,CAAsB,CAAC,QAAvB,GAAkC,IAAlC;AAAA,MACA,EAAE,mBAAF,CAAsB,CAAC,WAAvB,CAAmC,eAAnC,CADA;aAEA,EAAE,mBAAF,CAAsB,CAAC,IAAvB,CAA4B,KAA5B,EAHF;KAAA;AAKE,mBAAa,iBAAb,EAAgC,aAAa,iBAAb,IAAkC,CAAlE;AAAA,MACA,uBADA;AAAA,MAEA,WAAW,cAAX,EAA2B,CAA3B,CAFA;AAGA,UAAG,EAAE,mBAAF,CAAsB,CAAC,IAAvB,OAAiC,KAApC;AACE,UAAE,mBAAF,CAAsB,CAAC,IAAvB,CAA4B,EAA5B;eACA,EAAE,mBAAF,CAAsB,CAAC,QAAvB,CAAgC,cAAhC,EAFF;OARF;KADyB;EAAA,CAA3B;AAAA,EAaA,2BAA2B,SAAC,KAAD;AACzB,QAAG,aAAa,iBAAb,MAAmC,EAAtC;AACE,QAAE,mBAAF,CAAsB,CAAC,QAAvB,GAAkC,IAAlC;AAAA,MACA,EAAE,mBAAF,CAAsB,CAAC,WAAvB,CAAmC,cAAnC,CADA;aAEA,EAAE,mBAAF,CAAsB,CAAC,IAAvB,CAA4B,KAA5B,EAHF;KAAA;AAKE,mBAAa,iBAAb,EAAgC,aAAa,iBAAb,IAAkC,CAAlE;AAAA,MACA,uBADA;AAAA,MAEA,WAAW,cAAX,EAA2B,CAA3B,CAFA;AAIA,UAAG,EAAE,mBAAF,CAAsB,CAAC,IAAvB,OAAiC,KAApC;AACE,UAAE,mBAAF,CAAsB,CAAC,IAAvB,CAA4B,EAA5B;eACA,EAAE,mBAAF,CAAsB,CAAC,QAAvB,CAAgC,eAAhC,EAFF;OATF;KADyB;EAAA,CAb3B;CADF,CAtBA","file":"/client/views/modals/modals.coffee.js","sourcesContent":["Template.settingsModal.helpers\n  getBBBSettingsInfo: ->\n    info = getBuildInformation()\n    result = \"(c) #{info.copyrightYear} BigBlueButton Inc. [build #{info.html5ClientBuild}] - For more information visit #{info.link}\"\n\nTemplate.logoutModal.events\n  \"click #yes\": -> userLogout(getInSession(\"meetingId\"), getInSession(\"userId\"))\n  \"click #no\": -> $(\"#logoutModal\").foundation('reveal', 'close')\n  \"click .logoutButton\": -> $(\".tooltip\").hide()\n\nTemplate.settingsAudio.events\n  \"click #exitAudio\": -> exitVoiceCall()\n\n  \"click .joinAudioButton\": (event) -> $(\"#settingsModal\").foundation('reveal', 'close')\n\n  \"click #joinListenOnly\": (event) -> joinVoiceCall @, isListenOnly: true\n\n  \"click #joinMicrophone\": (event) -> joinVoiceCall @, isListenOnly: false\n\nTemplate.settingsModal.events\n  \"click #closeSettings\": -> $(\"#settingsModal\").foundation('reveal', 'close');\n\nTemplate.optionsFontSize.events\n  \"click #decreaseFontSize\": (event) ->\n    if getInSession(\"messageFontSize\") is 8 # min\n      $('#decreaseFontSize').disabled = true\n      $('#decreaseFontSize').removeClass('icon fi-minus')\n      $('#decreaseFontSize').html('MIN')\n    else\n      setInSession \"messageFontSize\", getInSession(\"messageFontSize\") - 2\n      adjustChatInputHeight()\n      setTimeout(scrollChatDown, 0)\n      if $('#increaseFontSize').html() is 'MAX'\n        $('#increaseFontSize').html('')\n        $('#increaseFontSize').addClass('icon fi-plus')\n\n  \"click #increaseFontSize\": (event) ->\n    if getInSession(\"messageFontSize\") is 40 # max\n      $('#increaseFontSize').disabled = true\n      $('#increaseFontSize').removeClass('icon fi-plus')\n      $('#increaseFontSize').html('MAX')\n    else\n      setInSession \"messageFontSize\", getInSession(\"messageFontSize\") + 2\n      adjustChatInputHeight()\n      setTimeout(scrollChatDown, 0)\n\n      if $('#decreaseFontSize').html() is 'MIN'\n        $('#decreaseFontSize').html('')\n        $('#decreaseFontSize').addClass('icon fi-minus')\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/views/users/user_item.coffee.js                              //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nTemplate.displayUserIcons.events({                                     // 1\n  'click .muteIcon': function(event) {                                 // 2\n    return toggleMic(this);                                            //\n  },                                                                   //\n  'click .raisedHandIcon': function(event) {                           // 2\n    return BBB.lowerHand(getInSession(\"meetingId\"), this.userId, getInSession(\"userId\"), getInSession(\"authToken\"));\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.displayUserIcons.helpers({                                    // 1\n  userLockedIconApplicable: function(userId) {                         // 13\n    var lockInAction, locked, ref, ref1, settings;                     // 16\n    locked = (ref = BBB.getUser(userId)) != null ? ref.user.locked : void 0;\n    settings = (ref1 = Meteor.Meetings.findOne()) != null ? ref1.roomLockSettings : void 0;\n    lockInAction = settings.disablePrivateChat || settings.disableCam || settings.disableMic || settings.lockedLayout || settings.disablePublicChat;\n    return locked && lockInAction;                                     // 23\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.usernameEntry.events({                                        // 1\n  'click .usernameEntry': function(event) {                            // 27\n    var ref, userIdSelected;                                           // 28\n    userIdSelected = this.userId;                                      // 28\n    if (userIdSelected !== null) {                                     // 29\n      if (userIdSelected === ((ref = BBB.getCurrentUser()) != null ? ref.userId : void 0)) {\n        setInSession(\"inChatWith\", \"PUBLIC_CHAT\");                     // 31\n      } else {                                                         //\n        setInSession(\"inChatWith\", userIdSelected);                    // 33\n      }                                                                //\n    }                                                                  //\n    if (isPortrait() || isPortraitMobile()) {                          // 34\n      toggleUserlistMenu();                                            // 35\n      toggleLeftHamburderIcon();                                       // 35\n      toggleShield();                                                  // 35\n    }                                                                  //\n    return setTimeout(function() {                                     //\n      return $(\"#newMessageInput\").focus();                            //\n    }, 0);                                                             //\n  },                                                                   //\n  'click .gotUnreadMail': function(event) {                            // 27\n    var _id, _this, chat, chats, currentId, i, len;                    // 43\n    _this = this;                                                      // 43\n    currentId = getInSession('userId');                                // 43\n    if (currentId !== void 0 && currentId === _this.userId) {          // 45\n      _id = \"PUBLIC_CHAT\";                                             // 46\n    } else {                                                           //\n      _id = _this.userId;                                              // 48\n    }                                                                  //\n    chats = getInSession('chats');                                     // 43\n    if (chats !== void 0) {                                            // 50\n      for (i = 0, len = chats.length; i < len; i++) {                  // 51\n        chat = chats[i];                                               //\n        if (chat.userId === _id) {                                     // 52\n          chat.gotMail = false;                                        // 53\n          chat.number = 0;                                             // 53\n          break;                                                       // 55\n        }                                                              //\n      }                                                                // 51\n      return setInSession('chats', chats);                             //\n    }                                                                  //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.usernameEntry.helpers({                                       // 1\n  hasGotUnreadMailClass: function(userId) {                            // 59\n    var chat, chats, i, len;                                           // 60\n    chats = getInSession('chats');                                     // 60\n    if (chats !== void 0) {                                            // 61\n      for (i = 0, len = chats.length; i < len; i++) {                  // 62\n        chat = chats[i];                                               //\n        if (chat.userId === userId && chat.gotMail) {                  // 63\n          return true;                                                 // 64\n        }                                                              //\n      }                                                                // 62\n    }                                                                  //\n    return false;                                                      // 65\n  },                                                                   //\n  getNumberOfUnreadMessages: function(userId) {                        // 59\n    var chat, chats, i, len;                                           // 68\n    chats = getInSession('chats');                                     // 68\n    if (chats !== void 0) {                                            // 69\n      for (i = 0, len = chats.length; i < len; i++) {                  // 70\n        chat = chats[i];                                               //\n        if (chat.userId === userId && chat.gotMail) {                  // 71\n          if (chat.number > 9) {                                       // 72\n            return \"9+\";                                               // 73\n          } else {                                                     //\n            return chat.number;                                        // 75\n          }                                                            //\n        }                                                              //\n      }                                                                // 70\n    }                                                                  //\n  }                                                                    //\n});                                                                    //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/views/users/user_item.coffee.js","sourceMap":{"version":3,"sources":["/client/views/users/user_item.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,QAAQ,CAAC,gBAAgB,CAAC,MAA1B,CACE;AAAA,qBAAmB,SAAC,KAAD;WACjB,UAAU,IAAV,EADiB;EAAA,CAAnB;AAAA,EAGA,yBAAyB,SAAC,KAAD;WAKvB,GAAG,CAAC,SAAJ,CAAc,aAAa,WAAb,CAAd,EAAyC,IAAC,OAA1C,EAAkD,aAAa,QAAb,CAAlD,EAA0E,aAAa,WAAb,CAA1E,EALuB;EAAA,CAHzB;CADF;;AAAA,QAWQ,CAAC,gBAAgB,CAAC,OAA1B,CACE;AAAA,4BAA0B,SAAC,MAAD;AAGxB;AAAA,sDAA4B,CAAE,IAAI,CAAC,eAAnC;AAAA,IACA,4DAAoC,CAAE,yBADtC;AAAA,IAEA,eAAe,QAAQ,CAAC,kBAAT,IACC,QAAQ,CAAC,UADV,IAEC,QAAQ,CAAC,UAFV,IAGC,QAAQ,CAAC,YAHV,IAIC,QAAQ,CAAC,iBANzB;AAOA,WAAO,UAAW,YAAlB,CAVwB;EAAA,CAA1B;CADF,CAXA;;AAAA,QAyBQ,CAAC,aAAa,CAAC,MAAvB,CACE;AAAA,0BAAwB,SAAC,KAAD;AACtB;AAAA,qBAAiB,IAAC,CAAC,MAAnB;AACA,QAAO,mBAAkB,IAAzB;AACE,UAAG,8DAAsC,CAAE,gBAA3C;AACE,qBAAa,YAAb,EAA2B,aAA3B,EADF;OAAA;AAGE,qBAAa,YAAb,EAA2B,cAA3B,EAHF;OADF;KADA;AAMA,QAAG,gBAAgB,kBAAnB;AACE;AAAA,MACA,yBADA;AAAA,MAEA,cAFA,CADF;KANA;WAUA,WAAW;aACT,EAAE,kBAAF,CAAqB,CAAC,KAAtB,GADS;IAAA,CAAX,EAEE,CAFF,EAXsB;EAAA,CAAxB;AAAA,EAeA,wBAAwB,SAAC,KAAD;AACtB;AAAA,YAAQ,IAAR;AAAA,IACA,YAAY,aAAa,QAAb,CADZ;AAEA,QAAG,cAAe,MAAf,IAA6B,cAAa,KAAK,CAAC,MAAnD;AACE,YAAM,aAAN,CADF;KAAA;AAGE,YAAM,KAAK,CAAC,MAAZ,CAHF;KAFA;AAAA,IAMA,QAAQ,aAAa,OAAb,CANR;AAOA,QAAG,UAAW,MAAd;AACE;wBAAA;AACE,YAAG,IAAI,CAAC,MAAL,KAAe,GAAlB;AACE,cAAI,CAAC,OAAL,GAAe,KAAf;AAAA,UACA,IAAI,CAAC,MAAL,GAAc,CADd;AAEA,gBAHF;SADF;AAAA;aAKA,aAAa,OAAb,EAAsB,KAAtB,EANF;KARsB;EAAA,CAfxB;CADF,CAzBA;;AAAA,QAyDQ,CAAC,aAAa,CAAC,OAAvB,CACE;AAAA,yBAAuB,SAAC,MAAD;AACrB;AAAA,YAAQ,aAAa,OAAb,CAAR;AACA,QAAG,UAAW,MAAd;AACE;wBAAA;AACE,YAAG,IAAI,CAAC,MAAL,KAAe,MAAf,IAA0B,IAAI,CAAC,OAAlC;AACE,iBAAO,IAAP,CADF;SADF;AAAA,OADF;KADA;AAKA,WAAO,KAAP,CANqB;EAAA,CAAvB;AAAA,EAQA,2BAA2B,SAAC,MAAD;AACzB;AAAA,YAAQ,aAAa,OAAb,CAAR;AACA,QAAG,UAAW,MAAd;AACE;wBAAA;AACE,YAAG,IAAI,CAAC,MAAL,KAAe,MAAf,IAA0B,IAAI,CAAC,OAAlC;AACE,cAAG,IAAI,CAAC,MAAL,GAAc,CAAjB;AACE,mBAAO,IAAP,CADF;WAAA;AAGE,mBAAO,IAAI,CAAC,MAAZ,CAHF;WADF;SADF;AAAA,OADF;KAFyB;EAAA,CAR3B;CADF,CAzDA","file":"/client/views/users/user_item.coffee.js","sourcesContent":["Template.displayUserIcons.events\n  'click .muteIcon': (event) ->\n    toggleMic @\n\n  'click .raisedHandIcon': (event) ->\n    # the function to call 'userLowerHand'\n    # the meeting id\n    # the _id of the person whose land is to be lowered\n    # the userId of the person who is lowering the hand\n    BBB.lowerHand(getInSession(\"meetingId\"), @userId, getInSession(\"userId\"), getInSession(\"authToken\"))\n\nTemplate.displayUserIcons.helpers\n  userLockedIconApplicable: (userId) ->\n    # the lock settings affect the user (and requiire a lock icon) if\n    # the user is set to be locked and there is a relevant lock in place\n    locked = BBB.getUser(userId)?.user.locked\n    settings = Meteor.Meetings.findOne()?.roomLockSettings\n    lockInAction = settings.disablePrivateChat or\n                    settings.disableCam or\n                    settings.disableMic or\n                    settings.lockedLayout or\n                    settings.disablePublicChat\n    return locked and lockInAction\n\n# Opens a private chat tab when a username from the userlist is clicked\nTemplate.usernameEntry.events\n  'click .usernameEntry': (event) ->\n    userIdSelected = @.userId\n    unless userIdSelected is null\n      if userIdSelected is BBB.getCurrentUser()?.userId\n        setInSession \"inChatWith\", \"PUBLIC_CHAT\"\n      else\n        setInSession \"inChatWith\", userIdSelected\n    if isPortrait() or isPortraitMobile()\n      toggleUserlistMenu()\n      toggleLeftHamburderIcon()\n      toggleShield()\n    setTimeout () -> # waits until the end of execution queue\n      $(\"#newMessageInput\").focus()\n    , 0\n\n  'click .gotUnreadMail': (event) ->\n    _this = @\n    currentId = getInSession('userId')\n    if currentId isnt undefined and currentId is _this.userId\n      _id = \"PUBLIC_CHAT\"\n    else\n      _id = _this.userId\n    chats = getInSession('chats')\n    if chats isnt undefined\n      for chat in chats\n        if chat.userId is _id\n          chat.gotMail = false\n          chat.number = 0\n          break\n      setInSession 'chats', chats\n\nTemplate.usernameEntry.helpers\n  hasGotUnreadMailClass: (userId) ->\n    chats = getInSession('chats')\n    if chats isnt undefined\n      for chat in chats\n        if chat.userId is userId and chat.gotMail\n          return true\n    return false\n\n  getNumberOfUnreadMessages: (userId) ->\n    chats = getInSession('chats')\n    if chats isnt undefined\n      for chat in chats\n        if chat.userId is userId and chat.gotMail\n          if chat.number > 9\n            return \"9+\"\n          else\n            return chat.number\n    return\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/views/users/user_list.coffee.js                              //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nTemplate.usersList.helpers({                                           // 1\n  getInfoNumberOfUsers: function() {                                   // 2\n    var numberUsers;                                                   // 3\n    numberUsers = BBB.getNumberOfUsers();                              // 3\n    if (numberUsers > 8) {                                             // 4\n      return \"Users: \" + numberUsers;                                  // 5\n    }                                                                  //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.usersList.rendered = function() {                             // 1\n  $('.userlistMenu').resizable({                                       // 9\n    handles: 'e',                                                      // 10\n    maxWidth: 600,                                                     // 10\n    minWidth: 200,                                                     // 10\n    resize: function() {                                               // 10\n      return adjustChatInputHeight();                                  //\n    }                                                                  //\n  });                                                                  //\n  Tracker.autorun(function(comp) {                                     // 9\n    setInSession('userListRenderedTime', TimeSync.serverTime());       // 17\n    if (getInSession('userListRenderedTime') !== void 0) {             // 18\n      return comp.stop();                                              //\n    }                                                                  //\n  });                                                                  //\n  if (isPhone()) {                                                     // 21\n    return $('.userlistMenu').addClass('hiddenInLandscape');           //\n  }                                                                    //\n};                                                                     // 8\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/views/users/user_list.coffee.js","sourceMap":{"version":3,"sources":["/client/views/users/user_list.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,QAAQ,CAAC,SAAS,CAAC,OAAnB,CACE;AAAA,wBAAsB;AACpB;AAAA,kBAAc,GAAG,CAAC,gBAAJ,EAAd;AACA,QAAG,cAAc,CAAjB;AACE,aAAO,YAAU,WAAjB,CADF;KAFoB;EAAA,CAAtB;CADF;;AAAA,QAOQ,CAAC,SAAS,CAAC,QAAnB,GAA8B;AAC5B,IAAE,eAAF,CAAkB,CAAC,SAAnB,CACE;AAAA,aAAS,GAAT;AAAA,IACA,UAAU,GADV;AAAA,IAEA,UAAU,GAFV;AAAA,IAGA,QAAQ;aACN,wBADM;IAAA,CAHR;GADF;AAAA,EAOA,OAAO,CAAC,OAAR,CAAgB,SAAC,IAAD;AACd,iBAAa,sBAAb,EAAqC,QAAQ,CAAC,UAAT,EAArC;AACA,QAAG,aAAa,sBAAb,MAA0C,MAA7C;aACE,IAAI,CAAC,IAAL,GADF;KAFc;EAAA,CAAhB,CAPA;AAYA,MAAG,SAAH;WACE,EAAE,eAAF,CAAkB,CAAC,QAAnB,CAA4B,mBAA5B,EADF;GAb4B;AAAA,CAP9B","file":"/client/views/users/user_list.coffee.js","sourcesContent":["Template.usersList.helpers\r\n  getInfoNumberOfUsers: ->\r\n    numberUsers = BBB.getNumberOfUsers()\r\n    if numberUsers > 8\r\n      return \"Users: #{numberUsers}\"\r\n    # do not display the label if there are just a few users\r\n\r\nTemplate.usersList.rendered = ->\r\n  $('.userlistMenu').resizable\r\n    handles: 'e'\r\n    maxWidth: 600\r\n    minWidth: 200\r\n    resize: () ->\r\n      adjustChatInputHeight()\r\n\r\n  Tracker.autorun (comp) ->\r\n    setInSession 'userListRenderedTime', TimeSync.serverTime()\r\n    if getInSession('userListRenderedTime') isnt undefined\r\n      comp.stop()\r\n\r\n  if isPhone()\r\n    $('.userlistMenu').addClass('hiddenInLandscape')\r\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/views/whiteboard/slide.coffee.js                             //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nTemplate.slide.rendered = function() {                                 // 1\n  var currentSlide, pic, ref;                                          // 2\n  currentSlide = getCurrentSlideDoc();                                 // 2\n  pic = new Image();                                                   // 2\n  pic.onload = function() {                                            // 2\n    var ref;                                                           // 6\n    setInSession('slideOriginalWidth', this.width);                    // 6\n    setInSession('slideOriginalHeight', this.height);                  // 6\n    $(window).resize(function() {                                      // 6\n      if (!$('.panel-footer').hasClass('ui-resizable-resizing')) {     // 10\n        return scaleWhiteboard();                                      //\n      }                                                                //\n    });                                                                //\n    if ((currentSlide != null ? (ref = currentSlide.slide) != null ? ref.img_uri : void 0 : void 0) != null) {\n      return createWhiteboardPaper(function(wpm) {                     //\n        return displaySlide(wpm);                                      //\n      });                                                              //\n    }                                                                  //\n  };                                                                   //\n  return pic.src = currentSlide != null ? (ref = currentSlide.slide) != null ? ref.img_uri : void 0 : void 0;\n};                                                                     // 1\n                                                                       //\nthis.createWhiteboardPaper = (function(_this) {                        // 1\n  return function(callback) {                                          //\n    _this.whiteboardPaperModel = new Meteor.WhiteboardPaperModel('whiteboard-paper');\n    return callback(_this.whiteboardPaperModel);                       //\n  };                                                                   //\n})(this);                                                              // 18\n                                                                       //\nthis.displaySlide = function(wpm) {                                    // 1\n  var adjustedDimensions, currentSlide, ref;                           // 23\n  currentSlide = getCurrentSlideDoc();                                 // 23\n  wpm.create();                                                        // 23\n  adjustedDimensions = scaleSlide(getInSession('slideOriginalWidth'), getInSession('slideOriginalHeight'));\n  wpm._displayPage(currentSlide != null ? (ref = currentSlide.slide) != null ? ref.img_uri : void 0 : void 0, getInSession('slideOriginalWidth'), getInSession('slideOriginalHeight'));\n  manuallyDisplayShapes();                                             // 23\n  return wpm.scale(adjustedDimensions.width, adjustedDimensions.height);\n};                                                                     // 22\n                                                                       //\nthis.manuallyDisplayShapes = function() {                              // 1\n  var currentSlide, i, j, len, len1, num, ref, ref1, ref2, results, s, shapeInfo, shapeType, shapes, wpm;\n  if (Meteor.WhiteboardCleanStatus.findOne({                           // 33\n    in_progress: true                                                  //\n  }) != null) {                                                        //\n    return;                                                            // 33\n  }                                                                    //\n  currentSlide = getCurrentSlideDoc();                                 // 33\n  wpm = this.whiteboardPaperModel;                                     // 33\n  shapes = Meteor.Shapes.find({                                        // 33\n    whiteboardId: currentSlide != null ? (ref = currentSlide.slide) != null ? ref.id : void 0 : void 0\n  }).fetch();                                                          //\n  results = [];                                                        // 38\n  for (i = 0, len1 = shapes.length; i < len1; i++) {                   //\n    s = shapes[i];                                                     //\n    shapeInfo = ((ref1 = s.shape) != null ? ref1.shape : void 0) || (s != null ? s.shape : void 0);\n    shapeType = shapeInfo != null ? shapeInfo.type : void 0;           // 39\n    if (shapeType !== \"text\") {                                        // 42\n      len = shapeInfo.points.length;                                   // 43\n      for (num = j = 0, ref2 = len; 0 <= ref2 ? j <= ref2 : j >= ref2; num = 0 <= ref2 ? ++j : --j) {\n        if (shapeInfo != null) {                                       //\n          shapeInfo.points[num] = (shapeInfo != null ? shapeInfo.points[num] : void 0) / 100;\n        }                                                              //\n      }                                                                // 44\n    }                                                                  //\n    if (wpm != null) {                                                 //\n      wpm.makeShape(shapeType, shapeInfo);                             //\n    }                                                                  //\n    results.push(wpm != null ? wpm.updateShape(shapeType, shapeInfo) : void 0);\n  }                                                                    // 38\n  return results;                                                      //\n};                                                                     // 31\n                                                                       //\nthis.scaleSlide = function(originalWidth, originalHeight) {            // 1\n  var adjustedHeight, adjustedWidth, boardHeight, boardWidth;          // 55\n  if (window.matchMedia('(orientation: landscape)').matches) {         // 55\n    boardWidth = $(\"#whiteboard-container\").width();                   // 58\n    boardHeight = $(\"#whiteboard-container\").height();                 // 58\n  } else {                                                             //\n    boardWidth = $(\"#whiteboard-container\").width();                   // 63\n    boardHeight = 1.4 * $(\"#whiteboard-container\").width();            // 63\n  }                                                                    //\n  adjustedWidth = null;                                                // 55\n  adjustedHeight = null;                                               // 55\n  if (originalWidth <= originalHeight) {                               // 72\n    adjustedWidth = boardHeight * originalWidth / originalHeight;      // 73\n    if (boardWidth < adjustedWidth) {                                  // 74\n      adjustedHeight = boardHeight * boardWidth / adjustedWidth;       // 75\n      adjustedWidth = boardWidth;                                      // 75\n    } else {                                                           //\n      adjustedHeight = boardHeight;                                    // 78\n    }                                                                  //\n  } else {                                                             //\n    adjustedHeight = boardWidth * originalHeight / originalWidth;      // 82\n    if (boardHeight < adjustedHeight) {                                // 83\n      adjustedWidth = boardWidth * boardHeight / adjustedHeight;       // 84\n      adjustedHeight = boardHeight;                                    // 84\n    } else {                                                           //\n      adjustedWidth = boardWidth;                                      // 87\n    }                                                                  //\n  }                                                                    //\n  return {                                                             //\n    width: adjustedWidth,                                              // 89\n    height: adjustedHeight,                                            // 89\n    boardWidth: boardWidth,                                            // 89\n    boardHeight: boardHeight                                           // 89\n  };                                                                   //\n};                                                                     // 52\n                                                                       //\nTemplate.slide.helpers({                                               // 1\n  updatePointerLocation: function(pointer) {                           // 92\n    var wpm;                                                           // 93\n    if (typeof whiteboardPaperModel !== \"undefined\" && whiteboardPaperModel !== null) {\n      wpm = whiteboardPaperModel;                                      // 94\n      return wpm != null ? wpm.moveCursor(pointer.x, pointer.y) : void 0;\n    }                                                                  //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.shape.rendered = function() {                                 // 1\n  var i, len, num, ref, ref1, shapeInfo, shapeType, wpm;               // 100\n  shapeInfo = ((ref = this.data.shape) != null ? ref.shape : void 0) || this.data.shape;\n  shapeType = shapeInfo != null ? shapeInfo.type : void 0;             // 100\n  if (shapeType !== \"text\") {                                          // 103\n    len = shapeInfo.points.length;                                     // 104\n    for (num = i = 0, ref1 = len; 0 <= ref1 ? i <= ref1 : i >= ref1; num = 0 <= ref1 ? ++i : --i) {\n      shapeInfo.points[num] = shapeInfo.points[num] / 100;             // 106\n    }                                                                  // 105\n  }                                                                    //\n  if (typeof whiteboardPaperModel !== \"undefined\" && whiteboardPaperModel !== null) {\n    wpm = whiteboardPaperModel;                                        // 109\n    if (wpm != null) {                                                 //\n      wpm.makeShape(shapeType, shapeInfo);                             //\n    }                                                                  //\n    return wpm != null ? wpm.updateShape(shapeType, shapeInfo) : void 0;\n  }                                                                    //\n};                                                                     // 98\n                                                                       //\nTemplate.shape.destroyed = function() {                                // 1\n  var wpm;                                                             // 114\n  if (typeof whiteboardPaperModel !== \"undefined\" && whiteboardPaperModel !== null) {\n    wpm = whiteboardPaperModel;                                        // 115\n    wpm.clearShapes();                                                 // 115\n    return manuallyDisplayShapes();                                    //\n  }                                                                    //\n};                                                                     // 113\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/views/whiteboard/slide.coffee.js","sourceMap":{"version":3,"sources":["/client/views/whiteboard/slide.coffee"],"names":[],"mappings":"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","file":"/client/views/whiteboard/slide.coffee.js","sourcesContent":["Template.slide.rendered = ->\n  currentSlide = getCurrentSlideDoc()\n\n  pic = new Image()\n  pic.onload = ->\n    setInSession 'slideOriginalWidth', this.width\n    setInSession 'slideOriginalHeight', this.height\n    $(window).resize( ->\n      # redraw the whiteboard to adapt to the resized window\n      if !$('.panel-footer').hasClass('ui-resizable-resizing') # not in the middle of resizing the message input\n        scaleWhiteboard()\n    )\n    if currentSlide?.slide?.img_uri?\n      createWhiteboardPaper (wpm) ->\n        displaySlide wpm\n  pic.src = currentSlide?.slide?.img_uri\n\n@createWhiteboardPaper = (callback) =>\n  @whiteboardPaperModel = new Meteor.WhiteboardPaperModel('whiteboard-paper')\n  callback(@whiteboardPaperModel)\n\n@displaySlide = (wpm) ->\n  currentSlide = getCurrentSlideDoc()\n\n  wpm.create()\n  adjustedDimensions = scaleSlide(getInSession('slideOriginalWidth'), getInSession('slideOriginalHeight'))\n  wpm._displayPage(currentSlide?.slide?.img_uri, getInSession('slideOriginalWidth'), getInSession('slideOriginalHeight'))\n  manuallyDisplayShapes()\n  wpm.scale(adjustedDimensions.width, adjustedDimensions.height)\n\n@manuallyDisplayShapes = ->\n\n  return if Meteor.WhiteboardCleanStatus.findOne({in_progress: true})?\n\n  currentSlide = getCurrentSlideDoc()\n  wpm = @whiteboardPaperModel\n  shapes = Meteor.Shapes.find({whiteboardId: currentSlide?.slide?.id}).fetch()\n  for s in shapes\n    shapeInfo = s.shape?.shape or s?.shape\n    shapeType = shapeInfo?.type\n\n    if shapeType isnt \"text\"\n      len = shapeInfo.points.length\n      for num in [0..len] # the coordinates must be in the range 0 to 1\n        shapeInfo?.points[num] = shapeInfo?.points[num] / 100\n    wpm?.makeShape(shapeType, shapeInfo)\n    wpm?.updateShape(shapeType, shapeInfo)\n\n\n# calculates and returns the best fitting {width, height} pair\n# based on the image's original width and height\n@scaleSlide = (originalWidth, originalHeight) ->\n\n  # set the size of the whiteboard space (frame) where the slide will be displayed\n  if window.matchMedia('(orientation: landscape)').matches\n    # for landscape orientation we want \"fit to height\" so that we can\n    # minimize the empty space above and below the slide (for best readability)\n    boardWidth = $(\"#whiteboard-container\").width()\n    boardHeight = $(\"#whiteboard-container\").height()\n  else\n    # for portrait orientation we want \"fit to width\" so that we can\n    # minimize the empty space on the sides of the slide (for best readability)\n    boardWidth = $(\"#whiteboard-container\").width()\n    boardHeight = 1.4 * $(\"#whiteboard-container\").width() # A4 paper size\n\n  # this is the best fitting pair\n  adjustedWidth = null\n  adjustedHeight = null\n\n\n  # the slide image is in portrait orientation\n  if originalWidth <= originalHeight\n    adjustedWidth = boardHeight * originalWidth / originalHeight\n    if boardWidth < adjustedWidth\n      adjustedHeight = boardHeight * boardWidth / adjustedWidth\n      adjustedWidth = boardWidth\n    else\n      adjustedHeight = boardHeight\n\n  # ths slide image is in landscape orientation\n  else\n    adjustedHeight = boardWidth * originalHeight / originalWidth\n    if boardHeight < adjustedHeight\n      adjustedWidth = boardWidth * boardHeight / adjustedHeight\n      adjustedHeight = boardHeight\n    else\n      adjustedWidth = boardWidth\n\n  { width: adjustedWidth, height: adjustedHeight, boardWidth: boardWidth, boardHeight: boardHeight }\n\nTemplate.slide.helpers\n  updatePointerLocation: (pointer) ->\n    if whiteboardPaperModel?\n      wpm = whiteboardPaperModel\n      wpm?.moveCursor(pointer.x, pointer.y)\n\n#### SHAPE ####\nTemplate.shape.rendered = ->\n  # @data is the shape object coming from the {{#each}} in the html file\n  shapeInfo = @data.shape?.shape or @data.shape\n  shapeType = shapeInfo?.type\n\n  if shapeType isnt \"text\"\n    len = shapeInfo.points.length\n    for num in [0..len] # the coordinates must be in the range 0 to 1\n      shapeInfo.points[num] = shapeInfo.points[num] / 100\n\n  if whiteboardPaperModel?\n    wpm = whiteboardPaperModel\n    wpm?.makeShape(shapeType, shapeInfo)\n    wpm?.updateShape(shapeType, shapeInfo)\n\nTemplate.shape.destroyed = ->\n  if whiteboardPaperModel?\n    wpm = whiteboardPaperModel\n    wpm.clearShapes()\n    manuallyDisplayShapes()\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/views/whiteboard/whiteboard.coffee.js                        //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar fakeUpload;                                                        // 2\n                                                                       //\nthis.scaleWhiteboard = function(callback) {                            // 2\n  var adjustedDimensions, wpm;                                         // 3\n  adjustedDimensions = scaleSlide(getInSession('slideOriginalWidth'), getInSession('slideOriginalHeight'));\n  wpm = whiteboardPaperModel;                                          // 3\n  wpm.scale(adjustedDimensions.width, adjustedDimensions.height);      // 3\n  if (callback) {                                                      // 6\n    return callback();                                                 //\n  }                                                                    //\n};                                                                     // 2\n                                                                       //\nTemplate.whiteboard.helpers({                                          // 2\n  presentationProgress: function() {                                   // 10\n    var currentPresentation, currentSlideNum, ref, ref1, totalSlideNum;\n    currentPresentation = Meteor.Presentations.findOne({               // 11\n      'presentation.current': true                                     // 11\n    });                                                                //\n    currentSlideNum = (ref = Meteor.Slides.findOne({                   // 11\n      'presentationId': currentPresentation != null ? currentPresentation.presentation.id : void 0,\n      'slide.current': true                                            //\n    })) != null ? ref.slide.num : void 0;                              //\n    totalSlideNum = (ref1 = Meteor.Slides.find({                       // 11\n      'presentationId': currentPresentation != null ? currentPresentation.presentation.id : void 0\n    })) != null ? ref1.count() : void 0;                               //\n    console.log('slide', currentSlideNum);                             // 11\n    if (currentSlideNum !== void 0) {                                  // 15\n      return currentSlideNum + \"/\" + totalSlideNum;                    // 16\n    } else {                                                           //\n      return '';                                                       // 18\n    }                                                                  //\n  },                                                                   //\n  isPollStarted: function() {                                          // 10\n    if (BBB.isPollGoing(getInSession('userId'))) {                     // 20\n      return true;                                                     // 21\n    } else {                                                           //\n      return false;                                                    // 23\n    }                                                                  //\n  },                                                                   //\n  hasNoPresentation: function() {                                      // 10\n    return Meteor.Presentations.findOne({                              //\n      'presentation.current': true                                     // 26\n    });                                                                //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.whiteboard.events({                                           // 2\n  'click .whiteboardFullscreenButton': function(event, template) {     // 29\n    return enterWhiteboardFullscreen();                                //\n  },                                                                   //\n  'click .exitFullscreenButton': function(event, template) {           // 29\n    if (document.exitFullscreen) {                                     // 33\n      return document.exitFullscreen();                                //\n    } else if (document.mozCancelFullScreen) {                         //\n      return document.mozCancelFullScreen();                           //\n    } else if (document.webkitExitFullscreen) {                        //\n      return document.webkitExitFullscreen();                          //\n    }                                                                  //\n  },                                                                   //\n  'click .sadEmojiButton.inactiveEmojiButton': function(event) {       // 29\n    if ($('.sadEmojiButton').css('opacity') === '1') {                 // 41\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"sad\");\n      $('.FABTriggerButton').blur();                                   // 42\n      return toggleEmojisFAB();                                        //\n    }                                                                  //\n  },                                                                   //\n  'click .happyEmojiButton.inactiveEmojiButton': function(event) {     // 29\n    if ($('.happyEmojiButton').css('opacity') === '1') {               // 47\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"happy\");\n      $('.FABTriggerButton').blur();                                   // 48\n      return toggleEmojisFAB();                                        //\n    }                                                                  //\n  },                                                                   //\n  'click .confusedEmojiButton.inactiveEmojiButton': function(event) {  // 29\n    if ($('.confusedEmojiButton').css('opacity') === '1') {            // 53\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"confused\");\n      $('.FABTriggerButton').blur();                                   // 54\n      return toggleEmojisFAB();                                        //\n    }                                                                  //\n  },                                                                   //\n  'click .neutralEmojiButton.inactiveEmojiButton': function(event) {   // 29\n    if ($('.neutralEmojiButton').css('opacity') === '1') {             // 59\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"neutral\");\n      $('.FABTriggerButton').blur();                                   // 60\n      return toggleEmojisFAB();                                        //\n    }                                                                  //\n  },                                                                   //\n  'click .awayEmojiButton.inactiveEmojiButton': function(event) {      // 29\n    if ($('.awayEmojiButton').css('opacity') === '1') {                // 65\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"away\");\n      $('.FABTriggerButton').blur();                                   // 66\n      return toggleEmojisFAB();                                        //\n    }                                                                  //\n  },                                                                   //\n  'click .raiseHandEmojiButton.inactiveEmojiButton': function(event) {\n    if ($('.raiseHandEmojiButton').css('opacity') === '1') {           // 71\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"raiseHand\");\n      $('.FABTriggerButton').blur();                                   // 72\n      return toggleEmojisFAB();                                        //\n    }                                                                  //\n  },                                                                   //\n  'click .activeEmojiButton': function(event) {                        // 29\n    if ($('.activeEmojiButton').css('opacity') === '1') {              // 77\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"none\");\n      $('.FABTriggerButton').blur();                                   // 78\n      return toggleEmojisFAB();                                        //\n    }                                                                  //\n  },                                                                   //\n  'click .FABTriggerButton': function(event) {                         // 29\n    $('.FABTriggerButton').blur();                                     // 83\n    return toggleEmojisFAB();                                          //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.whiteboardControls.events({                                   // 2\n  'click .whiteboard-buttons-slide > .prev': function(event) {         // 87\n    return BBB.goToPreviousPage();                                     //\n  },                                                                   //\n  'click .whiteboard-buttons-slide > .next': function(event) {         // 87\n    return BBB.goToNextPage();                                         //\n  },                                                                   //\n  'click .switchSlideButton': function(event) {                        // 87\n    return $('.tooltip').hide();                                       //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.polling.events({                                              // 2\n  'click .pollButtons': function(event) {                              // 97\n    var _id, _key;                                                     // 98\n    _key = this.label;                                                 // 98\n    _id = this.answer;                                                 // 98\n    return BBB.sendPollResponseMessage(_key, _id);                     //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.polling.rendered = function() {                               // 2\n  return scaleWhiteboard();                                            //\n};                                                                     // 102\n                                                                       //\nTemplate.polling.destroyed = function() {                              // 2\n  return setTimeout(scaleWhiteboard, 0);                               //\n};                                                                     // 105\n                                                                       //\nTemplate.whiteboardControls.rendered = function() {                    // 2\n  return scaleWhiteboard();                                            //\n};                                                                     // 108\n                                                                       //\nTemplate.whiteboardControls.destroyed = function() {                   // 2\n  return setTimeout(scaleWhiteboard, 0);                               //\n};                                                                     // 111\n                                                                       //\nTemplate.whiteboard.rendered = function() {                            // 2\n  $('#whiteboard').resizable({                                         // 115\n    handles: 'e',                                                      // 116\n    minWidth: 150,                                                     // 116\n    resize: function() {                                               // 116\n      return adjustChatInputHeight();                                  //\n    },                                                                 //\n    start: function() {                                                // 116\n      if ($('#chat').width() / $('#panels').width() > 0.2) {           // 121\n        return $('#whiteboard').resizable('option', 'maxWidth', $('#panels').width() - 200);\n      } else {                                                         //\n        return $('#whiteboard').resizable('option', 'maxWidth', $('#whiteboard').width());\n      }                                                                //\n    },                                                                 //\n    stop: function() {                                                 // 116\n      $('#whiteboard').css('width', 100 * $('#whiteboard').width() / $('#panels').width() + '%');\n      return $('#whiteboard').resizable('option', 'maxWidth', null);   //\n    }                                                                  //\n  });                                                                  //\n  Meteor.NotificationControl = new NotificationControl('notificationArea');\n  return $(document).foundation();                                     //\n};                                                                     // 114\n                                                                       //\nTemplate.presenterUploaderControl.created = function() {               // 2\n  this.isOpen = new ReactiveVar(false);                                // 135\n  this.files = new ReactiveList({                                      // 135\n    sort: function(a, b) {                                             // 136\n      var ref, ref1;                                                   // 139\n      return (ref = a.isUploading === b.isUploading) != null ? ref : {\n        0: (ref1 = a.isUploading) != null ? ref1 : -{                  // 139\n          1: 1                                                         // 139\n        }                                                              //\n      };                                                               //\n    }                                                                  //\n  });                                                                  //\n  return this.presentations = Meteor.Presentations.find({}, {          //\n    sort: {                                                            // 142\n      'presentation.current': -1,                                      // 143\n      'presentation.name': 1                                           // 143\n    },                                                                 //\n    fields: {                                                          // 142\n      'presentation': 1                                                // 144\n    }                                                                  //\n  });                                                                  //\n};                                                                     // 134\n                                                                       //\nfakeUpload = function(file, list) {                                    // 2\n  return setTimeout((function() {                                      //\n    file.uploadedSize = file.uploadedSize + (Math.floor(Math.random() * file.size + file.uploadedSize) / 10);\n    if (!(file.size > file.uploadedSize)) {                            // 150\n      file.uploadedSize = file.size;                                   // 151\n      file.isUploading = false;                                        // 151\n    }                                                                  //\n    list.update(file.name, file);                                      // 149\n    if (file.isUploading === true) {                                   // 156\n      return fakeUpload(file, list);                                   //\n    } else {                                                           //\n      return list.remove(file.name);                                   //\n    }                                                                  //\n  }), 200);                                                            //\n};                                                                     // 147\n                                                                       //\nTemplate.presenterUploaderControl.events({                             // 2\n  'click .js-open': function(event, template) {                        // 164\n    return template.isOpen.set(true);                                  //\n  },                                                                   //\n  'click .js-close': function(event, template) {                       // 164\n    return template.isOpen.set(false);                                 //\n  },                                                                   //\n  'dragover [data-dropzone]': function(e) {                            // 164\n    e.preventDefault();                                                // 171\n    return $(e.currentTarget).addClass('hover');                       //\n  },                                                                   //\n  'dragleave [data-dropzone]': function(e) {                           // 164\n    e.preventDefault();                                                // 175\n    return $(e.currentTarget).removeClass('hover');                    //\n  },                                                                   //\n  'drop [data-dropzone], change [data-dropzone] > input[type=\"file\"]': function(e, template) {\n    var files;                                                         // 179\n    e.preventDefault();                                                // 179\n    files = (e.originalEvent.dataTransfer || e.originalEvent.target).files;\n    return _.each(files, function(file) {                              //\n      file.isUploading = true;                                         // 183\n      file.uploadedSize = 0;                                           // 183\n      file.percUploaded = 0;                                           // 183\n      template.files.insert(file.name, file);                          // 183\n      return fakeUpload(file, template.files);                         //\n    });                                                                //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.presenterUploaderControl.helpers({                            // 2\n  isOpen: function() {                                                 // 192\n    return Template.instance().isOpen.get();                           //\n  },                                                                   //\n  files: function() {                                                  // 192\n    return Template.instance().files.fetch();                          //\n  },                                                                   //\n  presentations: function() {                                          // 192\n    return Template.instance().presentations.fetch().map(function(x) {\n      return x.presentation;                                           //\n    });                                                                //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.presenterUploaderControlFileListItem.helpers({                // 2\n  percUploaded: function() {                                           // 197\n    return Math.round((this.uploadedSize / this.size) * 100);          //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.presenterUploaderControlPresentationListItem.events({         // 2\n  'click [data-action-show]': function(event, template) {              // 200\n    return console.info('Should show the file `' + this.name + '`');   //\n  },                                                                   //\n  'click [data-action-delete]': function(event, template) {            // 200\n    return console.info('Should delete the file `' + this.name + '`');\n  }                                                                    //\n});                                                                    //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/views/whiteboard/whiteboard.coffee.js","sourceMap":{"version":3,"sources":["/client/views/whiteboard/whiteboard.coffee"],"names":[],"mappings":"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","file":"/client/views/whiteboard/whiteboard.coffee.js","sourcesContent":["# scale the whiteboard to adapt to the resized window\r\n@scaleWhiteboard = (callback) ->\r\n  adjustedDimensions = scaleSlide(getInSession('slideOriginalWidth'), getInSession('slideOriginalHeight'))\r\n  wpm = whiteboardPaperModel\r\n  wpm.scale(adjustedDimensions.width, adjustedDimensions.height)\r\n  if callback\r\n    callback()\r\n\r\nTemplate.whiteboard.helpers\r\n  presentationProgress: ->\r\n    currentPresentation = Meteor.Presentations.findOne({'presentation.current':true})\r\n    currentSlideNum = Meteor.Slides.findOne({'presentationId': currentPresentation?.presentation.id, 'slide.current':true})?.slide.num\r\n    totalSlideNum = Meteor.Slides.find({'presentationId': currentPresentation?.presentation.id})?.count()\r\n    console.log('slide', currentSlideNum)\r\n    if currentSlideNum isnt undefined\r\n      return \"#{currentSlideNum}/#{totalSlideNum}\"\r\n    else\r\n      return ''\r\n  isPollStarted: ->\r\n    if BBB.isPollGoing(getInSession('userId'))\r\n      return true\r\n    else\r\n      return false\r\n\r\n  hasNoPresentation: ->\r\n    Meteor.Presentations.findOne({'presentation.current':true})\r\n\r\nTemplate.whiteboard.events\r\n  'click .whiteboardFullscreenButton': (event, template) ->\r\n    enterWhiteboardFullscreen()\r\n\r\n  'click .exitFullscreenButton': (event, template) ->\r\n    if document.exitFullscreen\r\n      document.exitFullscreen()\r\n    else if document.mozCancelFullScreen\r\n      document.mozCancelFullScreen()\r\n    else if document.webkitExitFullscreen\r\n      document.webkitExitFullscreen()\r\n\r\n  'click .sadEmojiButton.inactiveEmojiButton': (event) ->\r\n    if $('.sadEmojiButton').css('opacity') is '1'\r\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"sad\")\r\n      $('.FABTriggerButton').blur()\r\n      toggleEmojisFAB()\r\n\r\n  'click .happyEmojiButton.inactiveEmojiButton': (event) ->\r\n    if $('.happyEmojiButton').css('opacity') is '1'\r\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"happy\")\r\n      $('.FABTriggerButton').blur()\r\n      toggleEmojisFAB()\r\n\r\n  'click .confusedEmojiButton.inactiveEmojiButton': (event) ->\r\n    if $('.confusedEmojiButton').css('opacity') is '1'\r\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"confused\")\r\n      $('.FABTriggerButton').blur()\r\n      toggleEmojisFAB()\r\n\r\n  'click .neutralEmojiButton.inactiveEmojiButton': (event) ->\r\n    if $('.neutralEmojiButton').css('opacity') is '1'\r\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"neutral\")\r\n      $('.FABTriggerButton').blur()\r\n      toggleEmojisFAB()\r\n\r\n  'click .awayEmojiButton.inactiveEmojiButton': (event) ->\r\n    if $('.awayEmojiButton').css('opacity') is '1'\r\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"away\")\r\n      $('.FABTriggerButton').blur()\r\n      toggleEmojisFAB()\r\n\r\n  'click .raiseHandEmojiButton.inactiveEmojiButton': (event) ->\r\n    if $('.raiseHandEmojiButton').css('opacity') is '1'\r\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"raiseHand\")\r\n      $('.FABTriggerButton').blur()\r\n      toggleEmojisFAB()\r\n\r\n  'click .activeEmojiButton': (event) ->\r\n    if $('.activeEmojiButton').css('opacity') is '1'\r\n      BBB.setEmojiStatus(BBB.getMeetingId(), getInSession('userId'), getInSession('userId'), getInSession('authToken'), \"none\")\r\n      $('.FABTriggerButton').blur()\r\n      toggleEmojisFAB()\r\n\r\n  'click .FABTriggerButton': (event) ->\r\n    $('.FABTriggerButton').blur()\r\n    toggleEmojisFAB()\r\n\r\nTemplate.whiteboardControls.events\r\n  'click .whiteboard-buttons-slide > .prev':(event) ->\r\n    BBB.goToPreviousPage()\r\n\r\n  'click .whiteboard-buttons-slide > .next':(event) ->\r\n    BBB.goToNextPage()\r\n\r\n  'click .switchSlideButton': (event) ->\r\n    $('.tooltip').hide()\r\n\r\nTemplate.polling.events\r\n  'click .pollButtons': (event) ->\r\n    _key = @.label\r\n    _id = @.answer\r\n    BBB.sendPollResponseMessage(_key, _id)\r\n\r\nTemplate.polling.rendered = ->\r\n  scaleWhiteboard()\r\n\r\nTemplate.polling.destroyed = ->\r\n  setTimeout(scaleWhiteboard, 0)\r\n\r\nTemplate.whiteboardControls.rendered = ->\r\n  scaleWhiteboard()\r\n\r\nTemplate.whiteboardControls.destroyed = ->\r\n  setTimeout(scaleWhiteboard, 0)\r\n\r\nTemplate.whiteboard.rendered = ->\r\n  $('#whiteboard').resizable\r\n    handles: 'e'\r\n    minWidth: 150\r\n    resize: () ->\r\n      adjustChatInputHeight()\r\n    start: () ->\r\n      if $('#chat').width() / $('#panels').width() > 0.2 # chat shrinking can't make it smaller than one fifth of the whiteboard-chat area\r\n        $('#whiteboard').resizable('option', 'maxWidth', $('#panels').width() - 200) # gives the chat enough space (200px)\r\n      else\r\n        $('#whiteboard').resizable('option', 'maxWidth', $('#whiteboard').width())\r\n    stop: () ->\r\n      $('#whiteboard').css('width', 100 * $('#whiteboard').width() / $('#panels').width() + '%') # transforms width to %\r\n      $('#whiteboard').resizable('option', 'maxWidth', null)\r\n\r\n  # whiteboard element needs to be available\r\n  Meteor.NotificationControl = new NotificationControl('notificationArea')\r\n\r\n  $(document).foundation() # initialize foundation javascript\r\n\r\nTemplate.presenterUploaderControl.created = ->\r\n  this.isOpen = new ReactiveVar(false);\r\n  this.files = new ReactiveList({\r\n    sort: (a, b) ->\r\n      # Put the ones who still uploading first\r\n      (a.isUploading == b.isUploading) ? 0 : a.isUploading ? -1 : 1;\r\n  });\r\n  this.presentations = Meteor.Presentations.find({},\r\n  {\r\n    sort: {'presentation.current': -1, 'presentation.name': 1}\r\n    fields: {'presentation': 1}\r\n  });\r\n\r\nfakeUpload = (file, list) ->\r\n  setTimeout (->\r\n    file.uploadedSize = file.uploadedSize + (Math.floor(Math.random() * file.size + file.uploadedSize)/10)\r\n    unless file.size > file.uploadedSize\r\n      file.uploadedSize = file.size\r\n      file.isUploading = false\r\n\r\n    list.update(file.name, file)\r\n\r\n    if file.isUploading == true\r\n      fakeUpload(file, list)\r\n    else\r\n      # TODO: Here we should remove and update te presentation on mongo\r\n      list.remove(file.name)\r\n  ), 200\r\n\r\nTemplate.presenterUploaderControl.events\r\n  'click .js-open':(event, template) ->\r\n    template.isOpen.set(true);\r\n\r\n  'click .js-close':(event, template) ->\r\n    template.isOpen.set(false);\r\n\r\n  'dragover [data-dropzone]':(e) ->\r\n    e.preventDefault()\r\n    $(e.currentTarget).addClass('hover')\r\n\r\n  'dragleave [data-dropzone]':(e) ->\r\n    e.preventDefault()\r\n    $(e.currentTarget).removeClass('hover')\r\n\r\n  'drop [data-dropzone], change [data-dropzone] > input[type=\"file\"]':(e, template) ->\r\n    e.preventDefault();\r\n    files = (e.originalEvent.dataTransfer || e.originalEvent.target).files\r\n\r\n    _.each(files, (file) ->\r\n      file.isUploading = true;\r\n      file.uploadedSize = 0;\r\n      file.percUploaded = 0;\r\n\r\n      template.files.insert(file.name, file)\r\n      fakeUpload(file, template.files)\r\n    )\r\n\r\nTemplate.presenterUploaderControl.helpers\r\n  isOpen: -> Template.instance().isOpen.get()\r\n  files: -> Template.instance().files.fetch()\r\n  presentations: -> Template.instance().presentations.fetch().map((x) -> x.presentation)\r\n\r\nTemplate.presenterUploaderControlFileListItem.helpers\r\n  percUploaded: -> Math.round((this.uploadedSize / this.size) * 100)\r\n\r\nTemplate.presenterUploaderControlPresentationListItem.events\r\n  'click [data-action-show]':(event, template) ->\r\n    console.info('Should show the file `' + this.name + '`');\r\n\r\n  'click [data-action-delete]':(event, template) ->\r\n    console.info('Should delete the file `' + this.name + '`');\r\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/views/sharedTemplates.coffee.js                              //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nTemplate.makeButton.helpers({                                          // 1\n  hasGotUnreadMail: function(userId) {                                 // 2\n    var chats, i, j, len, len1, tabs;                                  // 3\n    chats = getInSession('chats');                                     // 3\n    if (chats !== void 0) {                                            // 4\n      if (userId === \"all_chats\") {                                    // 5\n        for (i = 0, len = chats.length; i < len; i++) {                // 6\n          tabs = chats[i];                                             //\n          if (tabs.gotMail === true) {                                 // 7\n            return true;                                               // 8\n          }                                                            //\n        }                                                              // 6\n      } else if (userId === \"PUBLIC_CHAT\") {                           //\n        for (j = 0, len1 = chats.length; j < len1; j++) {              // 10\n          tabs = chats[j];                                             //\n          if (tabs.userId === userId && tabs.gotMail === true) {       // 11\n            return true;                                               // 12\n          }                                                            //\n        }                                                              // 10\n      }                                                                //\n    }                                                                  //\n    return false;                                                      // 13\n  },                                                                   //\n  getNumberOfUnreadMessages: function(userId) {                        // 2\n    var chat, chats, i, len;                                           // 16\n    if (userId === \"all_chats\") {                                      // 16\n      return;                                                          // 17\n    } else {                                                           //\n      chats = getInSession('chats');                                   // 19\n      if (chats !== void 0) {                                          // 20\n        for (i = 0, len = chats.length; i < len; i++) {                // 21\n          chat = chats[i];                                             //\n          if (chat.userId === userId && chat.gotMail) {                // 22\n            if (chat.number > 9) {                                     // 23\n              return \"9+\";                                             // 24\n            } else {                                                   //\n              return chat.number;                                      // 26\n            }                                                          //\n          }                                                            //\n        }                                                              // 21\n      }                                                                //\n    }                                                                  //\n  },                                                                   //\n  getNotificationClass: function(userId) {                             // 2\n    if (userId === \"all_chats\") {                                      // 30\n      return \"unreadChat\";                                             // 31\n    }                                                                  //\n    if (userId === \"PUBLIC_CHAT\") {                                    // 32\n      return \"unreadChatNumber\";                                       // 33\n    }                                                                  //\n  }                                                                    //\n});                                                                    //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/views/sharedTemplates.coffee.js","sourceMap":{"version":3,"sources":["/client/views/sharedTemplates.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,QAAQ,CAAC,UAAU,CAAC,OAApB,CACE;AAAA,oBAAkB,SAAC,MAAD;AAChB;AAAA,YAAQ,aAAa,OAAb,CAAR;AACA,QAAG,UAAW,MAAd;AACE,UAAG,WAAU,WAAb;AACE;0BAAA;AACE,cAAG,IAAI,CAAC,OAAL,KAAgB,IAAnB;AACE,mBAAO,IAAP,CADF;WADF;AAAA,SADF;OAAA,MAIK,IAAG,WAAU,aAAb;AACH;0BAAA;AACE,cAAG,IAAI,CAAC,MAAL,KAAe,MAAf,IAA0B,IAAI,CAAC,OAAL,KAAgB,IAA7C;AACE,mBAAO,IAAP,CADF;WADF;AAAA,SADG;OALP;KADA;AAUA,WAAO,KAAP,CAXgB;EAAA,CAAlB;AAAA,EAaA,2BAA2B,SAAC,MAAD;AACzB;AAAA,QAAG,WAAU,WAAb;AACE,aADF;KAAA;AAGE,cAAQ,aAAa,OAAb,CAAR;AACA,UAAG,UAAW,MAAd;AACE;0BAAA;AACE,cAAG,IAAI,CAAC,MAAL,KAAe,MAAf,IAA0B,IAAI,CAAC,OAAlC;AACE,gBAAG,IAAI,CAAC,MAAL,GAAc,CAAjB;AACE,qBAAO,IAAP,CADF;aAAA;AAGE,qBAAO,IAAI,CAAC,MAAZ,CAHF;aADF;WADF;AAAA,SADF;OAJF;KADyB;EAAA,CAb3B;AAAA,EA2BA,sBAAsB,SAAC,MAAD;AACpB,QAAG,WAAU,WAAb;AACE,aAAO,YAAP,CADF;KAAA;AAEA,QAAG,WAAU,aAAb;AACE,aAAO,kBAAP,CADF;KAHoB;EAAA,CA3BtB;CADF","file":"/client/views/sharedTemplates.coffee.js","sourcesContent":["Template.makeButton.helpers\r\n  hasGotUnreadMail: (userId) ->\r\n    chats = getInSession('chats')\r\n    if chats isnt undefined\r\n      if userId is \"all_chats\"\r\n        for tabs in chats\r\n          if tabs.gotMail is true\r\n            return true\r\n      else if userId is \"PUBLIC_CHAT\"\r\n        for tabs in chats\r\n          if tabs.userId is userId and tabs.gotMail is true\r\n            return true\r\n    return false\r\n  \r\n  getNumberOfUnreadMessages: (userId) ->\r\n    if userId is \"all_chats\"\r\n      return\r\n    else\r\n      chats = getInSession('chats')\r\n      if chats isnt undefined\r\n        for chat in chats\r\n          if chat.userId is userId and chat.gotMail\r\n            if chat.number > 9\r\n              return \"9+\"\r\n            else\r\n              return chat.number\r\n    return\r\n\r\n  getNotificationClass: (userId) ->\r\n    if userId is \"all_chats\"\r\n      return \"unreadChat\"\r\n    if userId is \"PUBLIC_CHAT\"\r\n      return \"unreadChatNumber\"\r\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/whiteboard_models/_whiteboard_tool.coffee.js                 //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nthis.WhiteboardToolModel = (function() {                               // 2\n  function WhiteboardToolModel() {}                                    //\n                                                                       //\n  WhiteboardToolModel.prototype.initialize = function(paper) {         // 4\n    this.paper = paper;                                                // 5\n    console.log(\"paper:\" + this.paper);                                // 5\n    this.gh = 0;                                                       // 5\n    this.gw = 0;                                                       // 5\n    this.obj = 0;                                                      // 5\n    return this.definition = [];                                       //\n  };                                                                   //\n                                                                       //\n  WhiteboardToolModel.prototype.setPaperSize = function(gh, gw) {      // 4\n    this.gh = gh;                                                      // 15\n    this.gw = gw;                                                      // 15\n  };                                                                   //\n                                                                       //\n  WhiteboardToolModel.prototype.setOffsets = function(xOffset, yOffset) {\n    this.xOffset = xOffset;                                            // 17\n    this.yOffset = yOffset;                                            // 17\n  };                                                                   //\n                                                                       //\n  WhiteboardToolModel.prototype.setPaperDimensions = function(paperWidth, paperHeight) {\n    this.paperWidth = paperWidth;                                      // 19\n    this.paperHeight = paperHeight;                                    // 19\n  };                                                                   //\n                                                                       //\n  WhiteboardToolModel.prototype.getDefinition = function() {           // 4\n    return this.definition;                                            //\n  };                                                                   //\n                                                                       //\n  WhiteboardToolModel.prototype.hide = function() {                    // 4\n    if (this.obj != null) {                                            // 26\n      return this.obj.hide();                                          //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  return WhiteboardToolModel;                                          //\n                                                                       //\n})();                                                                  //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/whiteboard_models/_whiteboard_tool.coffee.js","sourceMap":{"version":3,"sources":["/client/whiteboard_models/_whiteboard_tool.coffee"],"names":[],"mappings":";;;;;;;;;AACA,IAAO;mCAEL;;AAAA,6CAAY,SAAC,KAAD;AACV,IADW,IAAC,SAAD,KACX;AAAA,WAAO,CAAC,GAAR,CAAY,WAAW,IAAC,MAAxB;AAAA,IACA,IAAC,GAAD,GAAM,CADN;AAAA,IAEA,IAAC,GAAD,GAAM,CAFN;AAAA,IAGA,IAAC,IAAD,GAAO,CAHP;WAKA,IAAC,WAAD,GAAc,GANJ;EAAA,CAAZ;;AAAA,gCAWA,eAAc,SAAC,EAAD,EAAM,EAAN;AAAY,IAAX,IAAC,MAAD,EAAW;AAAA,IAAN,IAAC,MAAD,EAAM,CAAZ;EAAA,CAXd;;AAAA,gCAaA,aAAY,SAAC,OAAD,EAAW,OAAX;AAAsB,IAArB,IAAC,WAAD,OAAqB;AAAA,IAAX,IAAC,WAAD,OAAW,CAAtB;EAAA,CAbZ;;AAAA,gCAeA,qBAAoB,SAAC,UAAD,EAAc,WAAd;AAA6B,IAA5B,IAAC,cAAD,UAA4B;AAAA,IAAf,IAAC,eAAD,WAAe,CAA7B;EAAA,CAfpB;;AAAA,gCAkBA,gBAAe;WACb,IAAC,YADY;EAAA,CAlBf;;AAAA,gCAqBA,OAAM;AACJ,QAAe,gBAAf;aAAA,IAAC,IAAG,CAAC,IAAL;KADI;EAAA,CArBN;;6BAAA;;IAFF","file":"/client/whiteboard_models/_whiteboard_tool.coffee.js","sourcesContent":["# A base class for whiteboard tools\nclass @WhiteboardToolModel\n\n  initialize: (@paper) ->\n    console.log \"paper:\" + @paper\n    @gh = 0\n    @gw = 0\n    @obj = 0\n    # the defintion of this shape, kept so we can redraw the shape whenever needed\n    @definition = []\n\n  #set the size of the paper\n  # @param  {number} @gh    gh parameter\n  # @param  {number} @gw    gw parameter\n  setPaperSize: (@gh, @gw) ->\n\n  setOffsets: (@xOffset, @yOffset) ->\n\n  setPaperDimensions: (@paperWidth, @paperHeight) ->\n    # TODO: can't we simply take the width and the height from `@paper`?\n\n  getDefinition: () ->\n    @definition\n\n  hide: () ->\n    @obj.hide() if @obj?\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/whiteboard_models/utils.coffee.js                            //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nMeteor.methods({                                                       // 3\n  postToUrl: function(path, params, method) {                          // 9\n    var $hiddenField, form, key;                                       // 10\n    method = method || \"post\";                                         // 10\n    form = $(\"<form></form>\");                                         // 10\n    form.attr({                                                        // 10\n      \"method\": method,                                                // 13\n      \"action\": path                                                   // 13\n    });                                                                //\n    for (key in params) {                                              // 15\n      if (params.hasOwnProperty(key)) {                                // 16\n        $hiddenField = $(\"input\");                                     // 17\n        $hiddenField.attr({                                            // 17\n          \"type\": \"hidden\",                                            // 19\n          \"name\": key,                                                 // 19\n          \"value\": params[key]                                         // 19\n        });                                                            //\n        form.append($hiddenField);                                     // 17\n      }                                                                //\n    }                                                                  // 15\n    $('body').append(form);                                            // 10\n    return form.submit();                                              //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nthis.formatThickness = function(thickness) {                           // 3\n  if (thickness == null) {                                             //\n    thickness = \"1\";                                                   //\n  }                                                                    //\n  if (!thickness.toString().match(/.*px$/)) {                          // 30\n    \"#\" + thickness + \"px\";                                            // 31\n  }                                                                    //\n  return thickness;                                                    //\n};                                                                     // 28\n                                                                       //\nthis.zoomStroke = function(thickness) {                                // 3\n  var currentSlide, ratio;                                             // 36\n  currentSlide = this.getCurrentSlideDoc();                            // 36\n  ratio = ((currentSlide != null ? currentSlide.slide.width_ratio : void 0) + (currentSlide != null ? currentSlide.slide.height_ratio : void 0)) / 2;\n  return thickness * 100 / ratio;                                      //\n};                                                                     // 35\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/whiteboard_models/utils.coffee.js","sourceMap":{"version":3,"sources":["/client/whiteboard_models/utils.coffee"],"names":[],"mappings":";;;;;;;;;AAEA,MAAM,CAAC,OAAP,CAME;AAAA,aAAW,SAAC,IAAD,EAAO,MAAP,EAAe,MAAf;AACT;AAAA,aAAS,UAAU,MAAnB;AAAA,IACA,OAAO,EAAE,eAAF,CADP;AAAA,IAEA,IAAI,CAAC,IAAL,CACE;AAAA,gBAAW,MAAX;AAAA,MACA,UAAW,IADX;KADF,CAFA;AAKA;AACE,UAAG,MAAM,CAAC,cAAP,CAAsB,GAAtB,CAAH;AACE,uBAAe,EAAE,OAAF,CAAf;AAAA,QACA,YAAY,CAAC,IAAb,CACE;AAAA,kBAAS,QAAT;AAAA,UACA,QAAS,GADT;AAAA,UAEA,SAAU,MAAO,KAFjB;SADF,CADA;AAAA,QAKA,IAAI,CAAC,MAAL,CAAY,YAAZ,CALA,CADF;OADF;AAAA,KALA;AAAA,IAcA,EAAE,MAAF,CAAS,CAAC,MAAV,CAAiB,IAAjB,CAdA;WAeA,IAAI,CAAC,MAAL,GAhBS;EAAA,CAAX;CANF;;AAAA,IAyBC,gBAAD,GAAmB,SAAC,SAAD;;IACjB,YAAa;GAAb;AACA,MAAG,UAAU,CAAC,QAAV,EAAoB,CAAC,KAArB,CAA2B,OAA3B,CAAJ;AACE,UAAM,SAAN,GAAkB,IAAlB,CADF;GADA;SAGA,UAJiB;AAAA,CAzBnB;;AAAA,IAgCC,WAAD,GAAc,SAAC,SAAD;AACZ;AAAA,iBAAe,IAAC,mBAAD,EAAf;AAAA,EACA,QAAQ,yBAAC,YAAY,CAAE,KAAK,CAAC,qBAApB,2BAAkC,YAAY,CAAE,KAAK,CAAC,sBAAvD,IAAuE,CAD/E;SAEA,YAAY,GAAZ,GAAkB,MAHN;AAAA,CAhCd","file":"/client/whiteboard_models/utils.coffee.js","sourcesContent":["# General utility methods\n\nMeteor.methods\n  # POST request using javascript\n  # @param  {string} path   path of submission\n  # @param  {string} params parameters to submit\n  # @param  {string} method method of submission (\"post\" is default)\n  # @return {undefined}\n  postToUrl: (path, params, method) ->\n    method = method or \"post\"\n    form = $(\"<form></form>\")\n    form.attr\n      \"method\" : method,\n      \"action\" : path\n    for key of params\n      if params.hasOwnProperty(key)\n        $hiddenField = $ \"input\"\n        $hiddenField.attr\n          \"type\" : \"hidden\",\n          \"name\" : key,\n          \"value\" : params[key]\n        form.append $hiddenField\n\n    $('body').append form\n    form.submit()\n\n# thickness can be a number (e.g. \"2\") or a string (e.g. \"2px\")\n@formatThickness = (thickness) ->\n  thickness ?= \"1\" # default value\n  if !thickness.toString().match(/.*px$/)\n    \"#\" + thickness + \"px\" # leading \"#\" - to be compatible with Firefox\n  thickness\n\n# applies zooming to the stroke thickness\n@zoomStroke = (thickness) ->\n  currentSlide = @getCurrentSlideDoc()\n  ratio = (currentSlide?.slide.width_ratio + currentSlide?.slide.height_ratio) / 2\n  thickness * 100 / ratio\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/whiteboard_models/whiteboard_cursor.coffee.js                //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n                                                                       //\nthis.WhiteboardCursorModel = (function() {                             // 2\n  function WhiteboardCursorModel(paper, radius, color) {               // 4\n    this.paper = paper;                                                // 5\n    this.radius = radius != null ? radius : null;                      // 5\n    this.color = color != null ? color : null;                         // 5\n    this.draw = bind(this.draw, this);                                 // 5\n    if (this.radius == null) {                                         //\n      this.radius = 6;                                                 //\n    }                                                                  //\n    if (this.color == null) {                                          //\n      this.color = \"#ff6666\";                                          //\n    }                                                                  //\n    this.cursor = null;                                                // 5\n    this.paper;                                                        // 5\n  }                                                                    //\n                                                                       //\n  WhiteboardCursorModel.prototype.draw = function() {                  // 4\n    this.cursor = this.paper.circle(0, 0, this.radius);                // 11\n    this.cursor.attr({                                                 // 11\n      \"fill\": this.color,                                              // 13\n      \"stroke\": this.color,                                            // 13\n      \"opacity\": \"0.8\"                                                 // 13\n    });                                                                //\n    return $(this.cursor.node).on(\"mousewheel\", _.bind(this._onMouseWheel, this));\n  };                                                                   //\n                                                                       //\n  WhiteboardCursorModel.prototype.toFront = function() {               // 4\n    if (this.cursor != null) {                                         // 19\n      return this.cursor.toFront();                                    //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardCursorModel.prototype.setRadius = function(value) {        // 4\n    if (this.cursor != null) {                                         // 22\n      return this.cursor.attr({                                        //\n        r: value                                                       // 23\n      });                                                              //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardCursorModel.prototype.setPosition = function(x, y) {       // 4\n    if (this.cursor != null) {                                         // 26\n      return this.cursor.attr({                                        //\n        cx: x,                                                         // 28\n        cy: y                                                          // 28\n      });                                                              //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardCursorModel.prototype.undrag = function() {                // 4\n    if (this.cursor != null) {                                         // 32\n      return this.cursor.undrag();                                     //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardCursorModel.prototype.drag = function(onMove, onStart, onEnd, target) {\n    if (target == null) {                                              //\n      target = null;                                                   //\n    }                                                                  //\n    if (this.cursor != null) {                                         // 35\n      target || (target = this);                                       // 36\n      return this.cursor.drag(_.bind(onMove, target), _.bind(onStart, target), _.bind(onEnd, target));\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardCursorModel.prototype._onMouseWheel = function(e, delta) {\n    return this.trigger(\"cursor:mousewheel\", e, delta);                //\n  };                                                                   //\n                                                                       //\n  WhiteboardCursorModel.prototype.remove = function() {                // 4\n    return this.cursor.remove();                                       //\n  };                                                                   //\n                                                                       //\n  return WhiteboardCursorModel;                                        //\n                                                                       //\n})();                                                                  //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/whiteboard_models/whiteboard_cursor.coffee.js","sourceMap":{"version":3,"sources":["/client/whiteboard_models/whiteboard_cursor.coffee"],"names":[],"mappings":";;;;;;;;;AACA;;AAAA,IAAO;AAEQ,iCAAC,KAAD,EAAS,MAAT,EAAuB,KAAvB;AACX,IADY,IAAC,SAAD,KACZ;AAAA,IADoB,IAAC,2BAAD,SAAQ,IAC5B;AAAA,IADkC,IAAC,yBAAD,QAAO,IACzC;AAAA;;MAAA,IAAC,UAAU;KAAX;;MACA,IAAC,SAAS;KADV;AAAA,IAEA,IAAC,OAAD,GAAU,IAFV;AAAA,IAGA,IAAC,MAHD,CADW;EAAA,CAAb;;AAAA,kCAMA,OAAM;AACJ,QAAC,OAAD,GAAU,IAAC,MAAK,CAAC,MAAP,CAAc,CAAd,EAAiB,CAAjB,EAAoB,IAAC,OAArB,CAAV;AAAA,IACA,IAAC,OAAM,CAAC,IAAR,CACE;AAAA,cAAQ,IAAC,MAAT;AAAA,MACA,UAAU,IAAC,MADX;AAAA,MAEA,WAAW,KAFX;KADF,CADA;WAKA,EAAE,IAAC,OAAM,CAAC,IAAV,CAAe,CAAC,EAAhB,CAAmB,YAAnB,EAAiC,CAAC,CAAC,IAAF,CAAO,IAAC,cAAR,EAAuB,IAAvB,CAAjC,EANI;EAAA,CANN;;AAAA,kCAcA,UAAS;AACP,QAAqB,mBAArB;aAAA,IAAC,OAAM,CAAC,OAAR;KADO;EAAA,CAdT;;AAAA,kCAiBA,YAAW,SAAC,KAAD;AACT,QAAG,mBAAH;aACE,IAAC,OAAM,CAAC,IAAR,CAAa;AAAA,WAAG,KAAH;OAAb,EADF;KADS;EAAA,CAjBX;;AAAA,kCAqBA,cAAa,SAAC,CAAD,EAAI,CAAJ;AACX,QAAG,mBAAH;aACE,IAAC,OAAM,CAAC,IAAR,CACE;AAAA,YAAI,CAAJ;AAAA,QACA,IAAI,CADJ;OADF,EADF;KADW;EAAA,CArBb;;AAAA,kCA2BA,SAAQ;AACN,QAAoB,mBAApB;aAAA,IAAC,OAAM,CAAC,MAAR;KADM;EAAA,CA3BR;;AAAA,kCA8BA,OAAM,SAAC,MAAD,EAAS,OAAT,EAAkB,KAAlB,EAAyB,MAAzB;;MAAyB,SAAO;KACpC;AAAA,QAAG,mBAAH;AACE,0BAAW,KAAX;aACA,IAAC,OAAM,CAAC,IAAR,CAAa,CAAC,CAAC,IAAF,CAAO,MAAP,EAAe,MAAf,CAAb,EAAqC,CAAC,CAAC,IAAF,CAAO,OAAP,EAAgB,MAAhB,CAArC,EAA8D,CAAC,CAAC,IAAF,CAAO,KAAP,EAAc,MAAd,CAA9D,EAFF;KADI;EAAA,CA9BN;;AAAA,kCAmCA,gBAAe,SAAC,CAAD,EAAI,KAAJ;WACb,IAAC,QAAD,CAAS,mBAAT,EAA8B,CAA9B,EAAiC,KAAjC,EADa;EAAA,CAnCf;;AAAA,kCAsCA,SAAQ;WACN,IAAC,OAAM,CAAC,MAAR,GADM;EAAA,CAtCR;;+BAAA;;IAFF","file":"/client/whiteboard_models/whiteboard_cursor.coffee.js","sourcesContent":["# The cursor/pointer in the whiteboard\nclass @WhiteboardCursorModel\n\n  constructor: (@paper, @radius=null, @color=null) ->\n    @radius ?= 6\n    @color ?= \"#ff6666\" # a pinkish red\n    @cursor = null\n    @paper\n\n  draw: () =>\n    @cursor = @paper.circle(0, 0, @radius)\n    @cursor.attr\n      \"fill\": @color\n      \"stroke\": @color\n      \"opacity\": \"0.8\"\n    $(@cursor.node).on \"mousewheel\", _.bind(@_onMouseWheel, @)\n\n  toFront: () ->\n    @cursor.toFront() if @cursor?\n\n  setRadius: (value) ->\n    if @cursor?\n      @cursor.attr r: value\n\n  setPosition: (x, y) ->\n    if @cursor?\n      @cursor.attr\n        cx: x\n        cy: y\n\n  undrag: () ->\n    @cursor.undrag() if @cursor?\n\n  drag: (onMove, onStart, onEnd, target=null) ->\n    if @cursor?\n      target or= @\n      @cursor.drag _.bind(onMove, target), _.bind(onStart, target), _.bind(onEnd, target)\n\n  _onMouseWheel: (e, delta) ->\n    @trigger(\"cursor:mousewheel\", e, delta)\n\n  remove: () ->\n    @cursor.remove()"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/whiteboard_models/whiteboard_ellipse.coffee.js               //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;                                         //\n                                                                       //\nthis.WhiteboardEllipseModel = (function(superClass) {                  // 2\n  extend(WhiteboardEllipseModel, superClass);                          // 4\n                                                                       //\n  function WhiteboardEllipseModel(paper) {                             // 4\n    this.paper = paper;                                                // 5\n    WhiteboardEllipseModel.__super__.constructor.call(this, this.paper);\n    this.definition = [0, 0, 0, 0, \"#000\", \"0px\"];                     // 5\n  }                                                                    //\n                                                                       //\n  WhiteboardEllipseModel.prototype.make = function(info) {             // 4\n    var color, thickness, x, y;                                        // 19\n    if ((info != null ? info.points : void 0) != null) {               // 19\n      x = info.points[0];                                              // 20\n      y = info.points[1];                                              // 20\n      color = info.color;                                              // 20\n      thickness = info.thickness;                                      // 20\n      this.obj = this.paper.ellipse(x * this.gw + this.xOffset, y * this.gh + this.yOffset, 0, 0);\n      this.obj.attr(\"stroke\", formatColor(color));                     // 20\n      this.obj.attr(\"stroke-width\", zoomStroke(formatThickness(thickness)));\n      this.definition = [x, y, y, x, this.obj.attrs[\"stroke\"], this.obj.attrs[\"stroke-width\"]];\n    }                                                                  //\n    return this.obj;                                                   //\n  };                                                                   //\n                                                                       //\n  WhiteboardEllipseModel.prototype.update = function(info) {           // 4\n    var circle, coords, r, ref, ref1, reversed, rx, ry, x1, x2, y1, y2;\n    if ((info != null ? info.points : void 0) != null) {               // 40\n      x1 = info.points[0];                                             // 41\n      y1 = info.points[1];                                             // 41\n      x2 = info.points[2];                                             // 41\n      y2 = info.points[3];                                             // 41\n      circle = info.square;                                            // 41\n      if (this.obj != null) {                                          // 48\n        if (x2 < x1) {                                                 // 49\n          ref = [x2, x1], x1 = ref[0], x2 = ref[1];                    // 49\n        }                                                              //\n        if (y2 < y1) {                                                 // 51\n          ref1 = [y2, y1], y1 = ref1[0], y2 = ref1[1];                 // 52\n          reversed = true;                                             // 52\n        }                                                              //\n        if (circle) {                                                  // 57\n          if (reversed) {                                              // 58\n            y1 = y2 - (x2 - x1) * this.gw / this.gh;                   // 59\n          } else {                                                     //\n            y2 = y1 + (x2 - x1) * this.gw / this.gh;                   // 61\n          }                                                            //\n        }                                                              //\n        coords = {                                                     // 49\n          x1: x1,                                                      // 64\n          x2: x2,                                                      // 64\n          y1: y1,                                                      // 64\n          y2: y2                                                       // 64\n        };                                                             //\n        rx = (x2 - x1) / 2;                                            // 49\n        ry = (y2 - y1) / 2;                                            // 49\n        r = {                                                          // 49\n          rx: rx * this.gw,                                            // 75\n          ry: ry * this.gh,                                            // 75\n          cx: (rx + x1) * this.gw + this.xOffset,                      // 75\n          cy: (ry + y1) * this.gh + this.yOffset                       // 75\n        };                                                             //\n        this.obj.attr(r);                                              // 49\n        this.definition[0] = x1;                                       // 49\n        this.definition[1] = y1;                                       // 49\n        this.definition[2] = x2;                                       // 49\n        return this.definition[3] = y2;                                //\n      }                                                                //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardEllipseModel.prototype.draw = function(x1, y1, x2, y2, colour, thickness) {\n    var elip, ref, ref1, rx, ry, x, y;                                 // 97\n    if (x2 < x1) {                                                     // 97\n      ref = [x2, x1], x1 = ref[0], x2 = ref[1];                        // 97\n    }                                                                  //\n    if (y2 < y1) {                                                     // 98\n      ref1 = [y2, y1], y1 = ref1[0], y2 = ref1[1];                     // 98\n    }                                                                  //\n    rx = (x2 - x1) / 2;                                                // 97\n    ry = (y2 - y1) / 2;                                                // 97\n    x = (rx + x1) * this.gw + this.xOffset;                            // 97\n    y = (ry + y1) * this.gh + this.yOffset;                            // 97\n    elip = this.paper.ellipse(x, y, rx * this.gw, ry * this.gh);       // 97\n    elip.attr(Utils.strokeAndThickness(colour, thickness));            // 97\n    return elip;                                                       //\n  };                                                                   //\n                                                                       //\n  WhiteboardEllipseModel.prototype.dragOnStart = function(x, y) {};    // 4\n                                                                       //\n  WhiteboardEllipseModel.prototype.dragOnMove = function(dx, dy, x, y, e) {};\n                                                                       //\n  WhiteboardEllipseModel.prototype.dragOnStop = function(e) {};        // 4\n                                                                       //\n  return WhiteboardEllipseModel;                                       //\n                                                                       //\n})(WhiteboardToolModel);                                               //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/whiteboard_models/whiteboard_ellipse.coffee.js","sourceMap":{"version":3,"sources":["/client/whiteboard_models/whiteboard_ellipse.coffee"],"names":[],"mappings":"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","file":"/client/whiteboard_models/whiteboard_ellipse.coffee.js","sourcesContent":["# An ellipse in the whiteboard\nclass @WhiteboardEllipseModel extends WhiteboardToolModel\n\n    constructor: (@paper) ->\n      super @paper\n\n      # the defintion of this shape, kept so we can redraw the shape whenever needed\n      # format: top left x, top left y, bottom right x, bottom right y, stroke color, thickness\n      @definition = [0, 0, 0, 0, \"#000\", \"0px\"]\n\n    # Make an ellipse on the whiteboard\n    # @param    {[type]} x                 the x value of the top left corner\n    # @param    {[type]} y                 the y value of the top left corner\n    # @param    {string} colour        the colour of the object\n    # @param    {number} thickness the thickness of the object's line(s)\n    make: (info) ->\n      #console.log \"Whiteboard - Making ellipse: \"\n      #console.log info\n      if info?.points?\n        x = info.points[0]\n        y = info.points[1]\n        color = info.color\n        thickness = info.thickness\n\n        @obj = @paper.ellipse(x * @gw + @xOffset, y * @gh + @yOffset, 0, 0)\n        @obj.attr \"stroke\", formatColor(color)\n        @obj.attr \"stroke-width\", zoomStroke(formatThickness(thickness))\n        @definition = [x, y, y, x, @obj.attrs[\"stroke\"], @obj.attrs[\"stroke-width\"]]\n\n      @obj\n\n    # Update ellipse drawn\n    # @param    {number} x1 the x value of the top left corner in percent of current slide size\n    # @param    {number} y1 the y value of the top left corner in percent of current slide size\n    # @param    {number} x2 the x value of the bottom right corner in percent of current slide size\n    # @param    {number} y2 the y value of the bottom right corner in percent of current slide size\n    # @param    {boolean} square (draw a circle or not\n    update: (info) ->\n      #console.log info\n      if info?.points?\n        x1 = info.points[0]\n        y1 = info.points[1]\n        x2 = info.points[2]\n        y2 = info.points[3]\n\n        circle = info.square\n\n        if @obj?\n          [x1, x2] = [x2, x1] if x2 < x1\n\n          if y2 < y1\n            [y1, y2] = [y2, y1]\n            reversed = true\n\n          #if the control key is pressed then the width and height of the ellipse are equal (a circle)\n          #we calculate this by making the y2 coord equal to the y1 coord plus the width of x2-x1 and corrected for the slide size\n          if circle\n            if reversed # if reveresed, the y1 coordinate gets updated, not the y2 coordinate\n              y1 = y2 - (x2 - x1) * @gw / @gh\n            else\n              y2 = y1 + (x2 - x1) * @gw / @gh\n\n          coords =\n            x1: x1\n            x2: x2\n            y1: y1\n            y2: y2\n\n          #console.log(coords)\n\n          rx = (x2 - x1) / 2\n          ry = (y2 - y1) / 2\n\n          r =\n            rx: rx * @gw\n            ry: ry * @gh\n            cx: (rx + x1) * @gw + @xOffset\n            cy: (ry + y1) * @gh + @yOffset\n\n          @obj.attr(r)\n\n          #console.log( \"@gw: \" + @gw + \"\\n@gh: \" + @gh + \"\\n@xOffset: \" + @xOffset + \"\\n@yOffset: \" + @yOffset );\n          # we need to update all these values, specially for when shapes are drawn backwards\n          @definition[0] = x1\n          @definition[1] = y1\n          @definition[2] = x2\n          @definition[3] = y2\n\n    # Draw an ellipse on the whiteboard\n    # @param    {number} x1 the x value of the top left corner\n    # @param    {number} y1 the y value of the top left corner\n    # @param    {number} x2 the x value of the bottom right corner\n    # @param    {number} y2 the y value of the bottom right corner\n    # @param    {string} colour        the colour of the object\n    # @param    {number} thickness the thickness of the object's line(s)\n    draw: (x1, y1, x2, y2, colour, thickness) ->\n        [x1, x2] = [x2, x1] if x2 < x1\n        [y1, y2] = [y2, y1] if y2 < y1\n\n        rx = (x2 - x1) / 2\n        ry = (y2 - y1) / 2\n        x = (rx + x1) * @gw + @xOffset\n        y = (ry + y1) * @gh + @yOffset\n        elip = @paper.ellipse(x, y, rx * @gw, ry * @gh)\n        elip.attr Utils.strokeAndThickness(colour, thickness)\n        elip\n\n    # When first starting drawing the ellipse\n    # @param    {number} x the x value of cursor at the time in relation to the left side of the browser\n    # @param    {number} y the y value of cursor at the time in relation to the top of the browser\n    # TODO: moved here but not finished\n    dragOnStart: (x, y) ->\n        # sx = (@paperWidth - @gw) / 2\n        # sy = (@paperHeight - @gh) / 2\n        # # find the x and y values in relation to the whiteboard\n        # @ellipseX = (x - @containerOffsetLeft - sx + @xOffset)\n        # @ellipseY = (y - @containerOffsetTop - sy + @yOffset)\n        # globals.connection.emitMakeShape \"ellipse\",\n        #     [ @ellipseX / @paperWidth, @ellipseY / @paperHeight, @currentColour, @currentThickness ]\n\n    # When first starting to draw an ellipse\n    # @param    {number} dx the difference in the x value at the start as opposed to the x value now\n    # @param    {number} dy the difference in the y value at the start as opposed to the y value now\n    # @param    {number} x the x value of cursor at the time in relation to the left side of the browser\n    # @param    {number} y the y value of cursor at the time in relation to the top of the browser\n    # @param    {Event} e     the mouse event\n    # TODO: moved here but not finished\n    dragOnMove: (dx, dy, x, y, e) ->\n        # # if shift is pressed, draw a circle instead of ellipse\n        # dy = dx if @shiftPressed\n        # dx = dx / 2\n        # dy = dy / 2\n        # # adjust for negative values as well\n        # x = @ellipseX + dx\n        # y = @ellipseY + dy\n        # dx = (if dx < 0 then -dx else dx)\n        # dy = (if dy < 0 then -dy else dy)\n        # globals.connection.emitUpdateShape \"ellipse\",\n        #     [ x / @paperWidth, y / @paperHeight, dx / @paperWidth, dy / @paperHeight ]\n\n    # When releasing the mouse after drawing the ellipse\n    # @param    {Event} e the mouse event\n    # TODO: moved here but not finished\n    dragOnStop: (e) ->\n        # attrs = undefined\n        # attrs = @currentEllipse.attrs if @currentEllipse?\n        # if attrs?\n        #     globals.connection.emitPublishShape \"ellipse\",\n        #         [ attrs.cx / @gw, attrs.cy / @gh, attrs.rx / @gw, attrs.ry / @gh,\n        #             @currentColour, @currentThickness ]\n        # @currentEllipse = null # late updates will be blocked by this\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/whiteboard_models/whiteboard_line.coffee.js                  //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar MAX_PATHS_IN_SEQUENCE,                                             // 1\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;                                         //\n                                                                       //\nMAX_PATHS_IN_SEQUENCE = 30;                                            // 1\n                                                                       //\nthis.WhiteboardLineModel = (function(superClass) {                     // 1\n  extend(WhiteboardLineModel, superClass);                             // 10\n                                                                       //\n  function WhiteboardLineModel(paper) {                                // 10\n    this.paper = paper;                                                // 11\n    WhiteboardLineModel.__super__.constructor.call(this, this.paper);  // 11\n    this.definition = [\"\", \"#000\", \"0px\"];                             // 11\n  }                                                                    //\n                                                                       //\n  WhiteboardLineModel.prototype.make = function(info) {                // 10\n    var color, path, pathPercent, thickness, x, x1, y, y1;             // 24\n    if ((info != null ? info.points : void 0) != null) {               // 24\n      x = info.points[0];                                              // 25\n      y = info.points[1];                                              // 25\n      color = info.color;                                              // 25\n      thickness = info.thickness;                                      // 25\n      x1 = x * this.gw + this.xOffset;                                 // 25\n      y1 = y * this.gh + this.yOffset;                                 // 25\n      path = \"M\" + x1 + \" \" + y1 + \" L\" + x1 + \" \" + y1;               // 25\n      pathPercent = \"M\" + x + \" \" + y + \" L\" + x + \" \" + y;            // 25\n      this.obj = this.paper.path(path);                                // 25\n      this.obj.attr(\"stroke\", formatColor(color));                     // 25\n      this.obj.attr(\"stroke-width\", zoomStroke(formatThickness(thickness)));\n      this.obj.attr({                                                  // 25\n        \"stroke-linejoin\": \"round\"                                     // 37\n      });                                                              //\n      this.obj.attr(\"stroke-linecap\", \"round\");                        // 25\n      this.definition = [pathPercent, this.obj.attrs[\"stroke\"], this.obj.attrs[\"stroke-width\"]];\n    }                                                                  //\n    return this.obj;                                                   //\n  };                                                                   //\n                                                                       //\n  WhiteboardLineModel.prototype.update = function(info) {              // 10\n    var path, x1, x2, y1, y2;                                          // 56\n    if ((info != null ? info.points : void 0) != null) {               // 56\n      x1 = info.points[0];                                             // 57\n      y1 = info.points[1];                                             // 57\n      x2 = info.points[2];                                             // 57\n      y2 = info.points[3];                                             // 57\n      if (this.obj != null) {                                          // 62\n        path = this._buildPath(info.points);                           // 63\n        this.definition[0] = path;                                     // 63\n        path = this._scaleLinePath(path, this.gw, this.gh, this.xOffset, this.yOffset);\n        return this.obj.attr({                                         //\n          path: path                                                   // 68\n        });                                                            //\n      }                                                                //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardLineModel.prototype.draw = function(x1, y1, x2, y2, colour, thickness) {};\n                                                                       //\n  WhiteboardLineModel.prototype.dragOnStart = function(x, y) {};       // 10\n                                                                       //\n  WhiteboardLineModel.prototype.dragOnMove = function(dx, dy, x, y) {};\n                                                                       //\n  WhiteboardLineModel.prototype.dragOnEnd = function(e) {};            // 10\n                                                                       //\n  WhiteboardLineModel.prototype._buildPath = function(points) {        // 10\n    var i, path;                                                       // 162\n    path = \"\";                                                         // 162\n    if (points && points.length >= 2) {                                // 164\n      path += \"M \" + points[0] + \" \" + points[1];                      // 165\n      i = 2;                                                           // 165\n      while (i < points.length) {                                      // 168\n        path += \"L\" + points[i] + \" \" + points[i + 1];                 // 169\n        i += 2;                                                        // 169\n      }                                                                //\n      path += \"Z\";                                                     // 165\n      return path;                                                     //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardLineModel.prototype._scaleLinePath = function(string, w, h, xOffset, yOffset) {\n    var j, len, path, points;                                          // 180\n    if (xOffset == null) {                                             //\n      xOffset = 0;                                                     //\n    }                                                                  //\n    if (yOffset == null) {                                             //\n      yOffset = 0;                                                     //\n    }                                                                  //\n    path = null;                                                       // 180\n    points = string.match(/(\\d+[.]?\\d*)/g);                            // 180\n    len = points.length;                                               // 180\n    j = 0;                                                             // 180\n    while (j < len) {                                                  // 186\n      if (j !== 0) {                                                   // 187\n        path += \"L\" + (points[j] * w + xOffset) + \",\" + (points[j + 1] * h + yOffset);\n      } else {                                                         //\n        path = \"M\" + (points[j] * w + xOffset) + \",\" + (points[j + 1] * h + yOffset);\n      }                                                                //\n      j += 2;                                                          // 187\n    }                                                                  //\n    return path;                                                       //\n  };                                                                   //\n                                                                       //\n  return WhiteboardLineModel;                                          //\n                                                                       //\n})(WhiteboardToolModel);                                               //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/whiteboard_models/whiteboard_line.coffee.js","sourceMap":{"version":3,"sources":["/client/whiteboard_models/whiteboard_line.coffee"],"names":[],"mappings":"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","file":"/client/whiteboard_models/whiteboard_line.coffee.js","sourcesContent":["MAX_PATHS_IN_SEQUENCE = 30\n\n# A line in the whiteboard\n# Note: is used to draw lines from the pencil tool and from the line tool, this is why some\n# methods can receive different set of parameters.\n# TODO: Maybe this should be split in WhiteboardPathModel for the pencil and\n#       WhiteboardLineModel for the line tool\nclass @WhiteboardLineModel extends WhiteboardToolModel\n\n  constructor: (@paper) ->\n    super @paper\n\n    # the defintion of this shape, kept so we can redraw the shape whenever needed\n    # format: svg path, stroke color, thickness\n    @definition = [\"\", \"#000\", \"0px\"]\n\n  # Creates a line in the paper\n  # @param  {number} x         the x value of the line start point as a percentage of the original width\n  # @param  {number} y         the y value of the line start point as a percentage of the original height\n  # @param  {string} colour    the colour of the shape to be drawn\n  # @param  {number} thickness the thickness of the line to be drawn\n  make: (info) ->\n\n    if info?.points?\n      x = info.points[0]\n      y = info.points[1]\n      color = info.color\n      thickness = info.thickness\n\n      x1 = x * @gw + @xOffset\n      y1 = y * @gh + @yOffset\n      path = \"M\" + x1 + \" \" + y1 + \" L\" + x1 + \" \" + y1\n      pathPercent = \"M\" + x + \" \" + y + \" L\" + x + \" \" + y\n      @obj = @paper.path(path)\n      @obj.attr \"stroke\", formatColor(color)\n      @obj.attr \"stroke-width\", zoomStroke(formatThickness(thickness))\n      @obj.attr({\"stroke-linejoin\": \"round\"})\n      @obj.attr \"stroke-linecap\", \"round\"\n\n      @definition = [pathPercent, @obj.attrs[\"stroke\"], @obj.attrs[\"stroke-width\"]]\n\n    @obj\n\n  # Update the line dimensions\n  # @param  {number}  x1         1) the x of the first point\n  #                              2) the next x point to be added to the line\n  # @param  {number}  y1         1) the y of the first point\n  #                              2) the next y point to be added to the line\n  # @param  {number,boolean} x2  1) the x of the second point\n  #                              2) true if the line should be added to the current line,\n  #                                 false if it should replace the last point\n  # @param  {number}         y2  1) the y of the second point\n  #                              2) undefined\n  update: (info) ->\n\n    if info?.points?\n      x1 = info.points[0]\n      y1 = info.points[1]\n      x2 = info.points[2]\n      y2 = info.points[3]\n\n      if @obj?\n        path = @_buildPath(info.points)\n\n        @definition[0] = path\n\n        path = @_scaleLinePath(path, @gw, @gh, @xOffset, @yOffset)\n        @obj.attr path: path\n\n  # Draw a line on the paper\n  # @param  {number,string} x1 1) the x value of the first point\n  #                            2) the string path\n  # @param  {number,string} y1 1) the y value of the first point\n  #                            2) the colour\n  # @param  {number} x2        1) the x value of the second point\n  #                            2) the thickness\n  # @param  {number} y2        1) the y value of the second point\n  #                            2) undefined\n  # @param  {string} colour    1) the colour of the shape to be drawn\n  #                            2) undefined\n  # @param  {number} thickness 1) the thickness of the line to be drawn\n  #                            2) undefined\n  draw: (x1, y1, x2, y2, colour, thickness) ->\n\n    # if the drawing is from the pencil tool, it comes as a path first\n    # if _.isString(x1)\n    #   colour = y1\n    #   thickness = x2\n    #   path = x1\n\n    # # if the drawing is from the line tool, it comes with two points\n    # else\n    #   path = @_buildPath(points)\n\n    # line = @paper.path(@_scaleLinePath(path, @gw, @gh, @xOffset, @yOffset))\n    # line.attr Utils.strokeAndThickness(colour, thickness)\n    # line.attr({\"stroke-linejoin\": \"round\"})\n    # line\n\n  # When dragging for drawing lines starts\n  # @param  {number} x the x value of the cursor\n  # @param  {number} y the y value of the cursor\n  # TODO: moved here but not finished\n  dragOnStart: (x, y) ->\n    # # find the x and y values in relation to the whiteboard\n    # sx = (@paperWidth - @gw) / 2\n    # sy = (@paperHeight - @gh) / 2\n    # @lineX = x - @containerOffsetLeft - sx + @xOffset\n    # @lineY = y - @containerOffsetTop - sy + @yOffset\n    # values = [ @lineX / @paperWidth, @lineY / @paperHeight, @currentColour, @currentThickness ]\n    # globals.connection.emitMakeShape \"line\", values\n\n  # As line drawing drag continues\n  # @param  {number} dx the difference between the x value from _lineDragStart and now\n  # @param  {number} dy the difference between the y value from _lineDragStart and now\n  # @param  {number} x  the x value of the cursor\n  # @param  {number} y  the y value of the cursor\n  # TODO: moved here but not finished\n  dragOnMove: (dx, dy, x, y) ->\n    # sx = (@paperWidth - @gw) / 2\n    # sy = (@paperHeight - @gh) / 2\n    # [cx, cy] = @_currentSlideOffsets()\n    # # find the x and y values in relation to the whiteboard\n    # @cx2 = x - @containerOffsetLeft - sx + @xOffset\n    # @cy2 = y - @containerOffsetTop - sy + @yOffset\n    # if @shiftPressed\n    #   globals.connection.emitUpdateShape \"line\", [ @cx2 / @paperWidth, @cy2 / @paperHeight, false ]\n    # else\n    #   @currentPathCount++\n    #   if @currentPathCount < MAX_PATHS_IN_SEQUENCE\n    #     globals.connection.emitUpdateShape \"line\", [ @cx2 / @paperHeight, @cy2 / @paperHeight, true ]\n    #   else if @obj?\n    #     @currentPathCount = 0\n    #     # save the last path of the line\n    #     @obj.attrs.path.pop()\n    #     path = @obj.attrs.path.join(\" \")\n    #     @obj.attr path: (path + \"L\" + @lineX + \" \" + @lineY)\n\n    #     # scale the path appropriately before sending\n    #     pathStr = @obj.attrs.path.join(\",\")\n    #     globals.connection.emitPublishShape \"path\",\n    #       [ @_scaleLinePath(pathStr, 1 / @gw, 1 / @gh),\n    #         @currentColour, @currentThickness ]\n    #     globals.connection.emitMakeShape \"line\",\n    #       [ @lineX / @paperWidth, @lineY / @paperHeight, @currentColour, @currentThickness ]\n    #   @lineX = @cx2\n    #   @lineY = @cy2\n\n  # Drawing line has ended\n  # @param  {Event} e the mouse event\n  # TODO: moved here but not finished\n  dragOnEnd: (e) ->\n    # if @obj?\n    #   path = @obj.attrs.path\n    #   @obj = null # any late updates will be blocked by this\n    #   # scale the path appropriately before sending\n    #   globals.connection.emitPublishShape \"path\",\n    #     [ @_scaleLinePath(path.join(\",\"), 1 / @gw, 1 / @gh),\n    #       @currentColour, @currentThickness ]\n\n  _buildPath: (points) ->\n    path = \"\"\n\n    if points and points.length >= 2\n      path += \"M #{points[0]} #{points[1]}\"\n      i = 2\n\n      while i < points.length\n        path += \"L#{points[i]} #{points[i + 1]}\"\n        i += 2\n\n      path += \"Z\"\n      path\n\n  # Scales a path string to fit within a width and height of the new paper size\n  # @param  {number} w width of the shape as a percentage of the original width\n  # @param  {number} h height of the shape as a percentage of the original height\n  # @return {string}   the path string after being manipulated to new paper size\n  _scaleLinePath: (string, w, h, xOffset=0, yOffset=0) ->\n    path = null\n    points = string.match(/(\\d+[.]?\\d*)/g)\n    len = points.length\n    j = 0\n\n    # go through each point and multiply it by the new height and width\n    while j < len\n      if j isnt 0\n        path += \"L\" + (points[j] * w + xOffset) + \",\" + (points[j + 1] * h + yOffset)\n      else\n        path = \"M\" + (points[j] * w + xOffset) + \",\" + (points[j + 1] * h + yOffset)\n      j += 2\n    path\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/whiteboard_models/whiteboard_paper.coffee.js                 //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nMeteor.WhiteboardPaperModel = (function() {                            // 3\n  function WhiteboardPaperModel(container) {                           // 6\n    this.container = container;                                        // 8\n    this.cursor = null;                                                // 8\n    this.slides = {};                                                  // 8\n    this.panX = null;                                                  // 8\n    this.panY = null;                                                  // 8\n    this.current = {};                                                 // 8\n    this.current.slide = null;                                         // 8\n    this.current.shapes = null;                                        // 8\n    this.current.shapeDefinitions = [];                                // 8\n    this.zoomLevel = 1;                                                // 8\n    this.shiftPressed = false;                                         // 8\n    this.currentPathCount = 0;                                         // 8\n    this._updateContainerDimensions();                                 // 8\n    this.zoomObserver = null;                                          // 8\n    this.adjustedWidth = 0;                                            // 8\n    this.adjustedHeight = 0;                                           // 8\n    this.widthRatio = 100;                                             // 8\n    this.heightRatio = 100;                                            // 8\n  }                                                                    //\n                                                                       //\n  WhiteboardPaperModel.prototype.create = function() {                 // 6\n    var h, w;                                                          // 48\n    h = $(\"#\" + this.container).height();                              // 48\n    w = $(\"#\" + this.container).width();                               // 48\n    if (this.raphaelObj == null) {                                     //\n      this.raphaelObj = ScaleRaphael(this.container, w, h);            //\n    }                                                                  //\n    if (this.raphaelObj == null) {                                     //\n      this.raphaelObj = ScaleRaphael(this.container, $container.innerHeight(), $container.innerWidth());\n    }                                                                  //\n    this.raphaelObj.canvas.setAttribute(\"preserveAspectRatio\", \"xMinYMin slice\");\n    this.createCursor();                                               // 48\n    if (this.slides) {                                                 // 58\n      this.rebuild();                                                  // 59\n    } else {                                                           //\n      this.slides = {};                                                // 61\n    }                                                                  //\n    if (navigator.userAgent.indexOf(\"Firefox\") !== -1) {               // 62\n      this.raphaelObj.renderfix();                                     // 63\n    }                                                                  //\n    return this.raphaelObj;                                            //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.rebuild = function() {                // 6\n    var results, url;                                                  // 70\n    this.current.slide = null;                                         // 70\n    results = [];                                                      // 71\n    for (url in this.slides) {                                         //\n      if (this.slides.hasOwnProperty(url)) {                           // 72\n        results.push(this.addImageToPaper(url, this.slides[url].getWidth(), this.slides[url].getHeight()));\n      } else {                                                         //\n        results.push(void 0);                                          //\n      }                                                                //\n    }                                                                  // 71\n    return results;                                                    //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.scale = function(width, height) {     // 6\n    var ref;                                                           // 76\n    return (ref = this.raphaelObj) != null ? ref.changeSize(width, height) : void 0;\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.addImageToPaper = function(url, width, height) {\n    var cx, cy, img, max, sh, sw;                                      // 84\n    this._updateContainerDimensions();                                 // 84\n    max = Math.max(width / this.containerWidth, height / this.containerHeight);\n    url = this._slideUrl(url);                                         // 84\n    sw = width / max;                                                  // 84\n    sh = height / max;                                                 // 84\n    img = this.raphaelObj.image(url, cx = 0, cy = 0, width, height);   // 84\n    this.slides[url] = new WhiteboardSlideModel(img.id, url, img, width, height, sw, sh, cx, cy);\n    if (this.current.slide == null) {                                  // 102\n      img.toBack();                                                    // 103\n      this.current.slide = this.slides[url];                           // 103\n    } else if (this.current.slide.url === url) {                       //\n      img.toBack();                                                    // 106\n    } else {                                                           //\n      img.hide();                                                      // 108\n    }                                                                  //\n    this._updateContainerDimensions();                                 // 84\n    this._updateZoomRatios();                                          // 84\n    if (this.raphaelObj.w === 100) {                                   // 114\n      this.cursor.setRadius(0.65 * this.widthRatio / 100);             // 115\n    } else {                                                           //\n      this.cursor.setRadius(6 * this.widthRatio / 100);                // 117\n    }                                                                  //\n    return img;                                                        //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.removeAllImagesFromPaper = function() {\n    var ref, ref1, url;                                                // 123\n    for (url in this.slides) {                                         // 123\n      if (this.slides.hasOwnProperty(url)) {                           // 124\n        if ((ref = this.raphaelObj.getById((ref1 = this.slides[url]) != null ? ref1.getId() : void 0)) != null) {\n          ref.remove();                                                //\n        }                                                              //\n      }                                                                //\n    }                                                                  // 123\n    this.slides = {};                                                  // 123\n    return this.current.slide = null;                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.setCurrentTool = function(tool) {     // 6\n    this.currentTool = tool;                                           // 136\n    console.log(\"setting current tool to\", tool);                      // 136\n    switch (tool) {                                                    // 138\n      case \"line\":                                                     // 138\n        this.cursor.undrag();                                          // 140\n        this.current.line = this._createTool(tool);                    // 140\n        return this.cursor.drag(this.current.line.dragOnMove, this.current.line.dragOnStart, this.current.line.dragOnEnd);\n      case \"rectangle\":                                                // 138\n        this.cursor.undrag();                                          // 144\n        this.current.rectangle = this._createTool(tool);               // 144\n        return this.cursor.drag(this.current.rectangle.dragOnMove, this.current.rectangle.dragOnStart, this.current.rectangle.dragOnEnd);\n      default:                                                         // 138\n        return console.log(\"ERROR: Cannot set invalid tool:\", tool);   //\n    }                                                                  // 138\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.clearShapes = function() {            // 6\n    if (this.current.shapes != null) {                                 // 152\n      this.current.shapes.forEach(function(element) {                  // 153\n        return element.remove();                                       //\n      });                                                              //\n      this.current.shapeDefinitions = [];                              // 153\n      this.current.shapes.clear();                                     // 153\n    }                                                                  //\n    this.clearCursor();                                                // 152\n    return this.createCursor();                                        //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.clearCursor = function() {            // 6\n    var ref;                                                           // 161\n    return (ref = this.cursor) != null ? ref.remove() : void 0;        //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.createCursor = function() {           // 6\n    if (this.raphaelObj.w === 100) {                                   // 164\n      this.cursor = new WhiteboardCursorModel(this.raphaelObj, 0.65);  // 165\n      this.cursor.setRadius(0.65 * this.widthRatio / 100);             // 165\n    } else {                                                           //\n      this.cursor = new WhiteboardCursorModel(this.raphaelObj);        // 168\n      this.cursor.setRadius(6 * this.widthRatio / 100);                // 168\n    }                                                                  //\n    return this.cursor.draw();                                         //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.updateShape = function(shape, data) {\n    return this.current[shape].update(data);                           //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.makeShape = function(shape, data) {   // 6\n    var base, base1, i, len, obj, tool, toolModel;                     // 179\n    data.thickness *= this.adjustedWidth / 1000;                       // 179\n    tool = null;                                                       // 179\n    this.current[shape] = this._createTool(shape);                     // 179\n    toolModel = this.current[shape];                                   // 179\n    tool = this.current[shape].make(data);                             // 179\n    if ((tool != null) && shape !== \"poll_result\") {                   // 189\n      if ((base = this.current).shapes == null) {                      //\n        base.shapes = this.raphaelObj.set();                           //\n      }                                                                //\n      this.current.shapes.push(tool);                                  // 190\n      this.current.shapeDefinitions.push(toolModel.getDefinition());   // 190\n    }                                                                  //\n    if ((tool != null) && shape === \"poll_result\") {                   // 195\n      if ((base1 = this.current).shapes == null) {                     //\n        base1.shapes = this.raphaelObj.set();                          //\n      }                                                                //\n      for (i = 0, len = tool.length; i < len; i++) {                   // 197\n        obj = tool[i];                                                 //\n        this.current.shapes.push(obj);                                 // 198\n      }                                                                // 197\n      return this.current.shapeDefinitions.push(toolModel.getDefinition());\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.moveCursor = function(x, y) {         // 6\n    var cx, cy, ref, ref1, slideHeight, slideWidth;                    // 205\n    ref = this._currentSlideOffsets(), cx = ref[0], cy = ref[1];       // 205\n    ref1 = this._currentSlideOriginalDimensions(), slideWidth = ref1[0], slideHeight = ref1[1];\n    this.cursor.setPosition(x * slideWidth + cx, y * slideHeight + cy);\n    if ((this.viewBoxXpos != null) && (this.viewBoxYPos != null) && (this.viewBoxWidth != null) && (this.viewBoxHeight != null)) {\n      return this.cursor.setPosition(this.viewBoxXpos + x * this.viewBoxWidth, this.viewBoxYPos + y * this.viewBoxHeight);\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.zoomAndPan = function(widthRatio, heightRatio, xOffset, yOffset) {\n    var newHeight, newWidth, newX, newY;                               // 215\n    newX = -xOffset * 2 * this.adjustedWidth / 100;                    // 215\n    newY = -yOffset * 2 * this.adjustedHeight / 100;                   // 215\n    newWidth = this.adjustedWidth * widthRatio / 100;                  // 215\n    newHeight = this.adjustedHeight * heightRatio / 100;               // 215\n    return this.raphaelObj.setViewBox(newX, newY, newWidth, newHeight);\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype.setAdjustedDimensions = function(width, height) {\n    this.adjustedWidth = width;                                        // 222\n    return this.adjustedHeight = height;                               //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype._updateContainerDimensions = function() {\n    var $container, containerDimensions, ref, ref1;                    // 227\n    $container = $('#whiteboard-paper');                               // 227\n    containerDimensions = scaleSlide(getInSession('slideOriginalWidth'), getInSession('slideOriginalHeight'));\n    if ($container.innerWidth() === 0) {                               // 230\n      this.containerWidth = containerDimensions.boardWidth;            // 231\n    } else {                                                           //\n      this.containerWidth = $container.innerWidth();                   // 233\n    }                                                                  //\n    if ($container.innerHeight() === 0) {                              // 234\n      this.containerHeight = containerDimensions.boardHeight;          // 235\n    } else {                                                           //\n      this.containerHeight = $container.innerHeight();                 // 237\n    }                                                                  //\n    this.containerOffsetLeft = (ref = $container.offset()) != null ? ref.left : void 0;\n    return this.containerOffsetTop = (ref1 = $container.offset()) != null ? ref1.top : void 0;\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype._updateZoomRatios = function() {      // 6\n    var currentSlideDoc;                                               // 243\n    currentSlideDoc = getCurrentSlideDoc();                            // 243\n    this.widthRatio = currentSlideDoc.slide.width_ratio;               // 243\n    return this.heightRatio = currentSlideDoc.slide.height_ratio;      //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype._getImageFromPaper = function(url) {  // 6\n    var id;                                                            // 252\n    if (this.slides[url]) {                                            // 252\n      id = this.slides[url].getId();                                   // 253\n      if (id != null) {                                                // 254\n        return this.raphaelObj.getById(id);                            // 254\n      }                                                                //\n    }                                                                  //\n    return null;                                                       //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype._currentSlideDimensions = function() {\n    if (this.current.slide != null) {                                  // 258\n      return this.current.slide.getDimensions();                       //\n    } else {                                                           //\n      return [0, 0];                                                   //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype._currentSlideOriginalDimensions = function() {\n    if (this.current.slide != null) {                                  // 261\n      return this.current.slide.getOriginalDimensions();               //\n    } else {                                                           //\n      return [0, 0];                                                   //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype._currentSlideOffsets = function() {   // 6\n    if (this.current.slide != null) {                                  // 264\n      return this.current.slide.getOffsets();                          //\n    } else {                                                           //\n      return [0, 0];                                                   //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype._createTool = function(type) {        // 6\n    var height, model, ref, ref1, ref2, slideHeight, slideWidth, tool, width, xOffset, yOffset;\n    switch (type) {                                                    // 268\n      case \"pencil\":                                                   // 268\n        model = WhiteboardLineModel;                                   // 270\n        break;                                                         // 269\n      case \"path\":                                                     // 268\n      case \"line\":                                                     // 268\n        model = WhiteboardLineModel;                                   // 272\n        break;                                                         // 271\n      case \"rectangle\":                                                // 268\n        model = WhiteboardRectModel;                                   // 274\n        break;                                                         // 273\n      case \"ellipse\":                                                  // 268\n        model = WhiteboardEllipseModel;                                // 276\n        break;                                                         // 275\n      case \"triangle\":                                                 // 268\n        model = WhiteboardTriangleModel;                               // 278\n        break;                                                         // 277\n      case \"text\":                                                     // 268\n        model = WhiteboardTextModel;                                   // 280\n        break;                                                         // 279\n      case \"poll_result\":                                              // 268\n        model = WhiteboardPollModel;                                   // 282\n    }                                                                  // 268\n    if (model != null) {                                               // 284\n      ref = this._currentSlideOriginalDimensions(), slideWidth = ref[0], slideHeight = ref[1];\n      ref1 = this._currentSlideOffsets(), xOffset = ref1[0], yOffset = ref1[1];\n      ref2 = this._currentSlideDimensions(), width = ref2[0], height = ref2[1];\n      tool = new model(this.raphaelObj);                               // 285\n      tool.setPaperSize(slideHeight, slideWidth);                      // 285\n      tool.setOffsets(xOffset, yOffset);                               // 285\n      tool.setPaperDimensions(width, height);                          // 285\n      return tool;                                                     //\n    } else {                                                           //\n      return null;                                                     //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype._slideUrl = function(url) {           // 6\n    if (url != null ? url.match(/http[s]?:/) : void 0) {               // 300\n      return url;                                                      //\n    } else {                                                           //\n      return console.log(\"The url '\" + url + \"'' did not match the expected format of: http/s\");\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardPaperModel.prototype._displayPage = function(data, originalWidth, originalHeight) {\n    var _this, boardHeight, boardWidth, currentPresentation, currentSlide, currentSlideCursor, presentationId, ref;\n    this.removeAllImagesFromPaper();                                   // 309\n    this._updateContainerDimensions();                                 // 309\n    boardWidth = this.containerWidth;                                  // 309\n    boardHeight = this.containerHeight;                                // 309\n    currentSlide = getCurrentSlideDoc();                               // 309\n    currentPresentation = Meteor.Presentations.findOne({               // 309\n      \"presentation.current\": true                                     // 316\n    });                                                                //\n    presentationId = currentPresentation != null ? (ref = currentPresentation.presentation) != null ? ref.id : void 0 : void 0;\n    currentSlideCursor = Meteor.Slides.find({                          // 309\n      \"presentationId\": presentationId,                                // 318\n      \"slide.current\": true                                            // 318\n    });                                                                //\n    if (this.zoomObserver !== null) {                                  // 320\n      this.zoomObserver.stop();                                        // 321\n    }                                                                  //\n    _this = this;                                                      // 309\n    this.zoomObserver = currentSlideCursor.observe({                   // 309\n      changed: function(newDoc, oldDoc) {                              // 324\n        var newRatio, oldRatio, ref1, ref2;                            // 325\n        if (originalWidth <= originalHeight) {                         // 325\n          this.adjustedWidth = boardHeight * originalWidth / originalHeight;\n          this.adjustedHeight = boardHeight;                           // 326\n        } else {                                                       //\n          this.adjustedHeight = boardWidth * originalHeight / originalWidth;\n          this.adjustedWidth = boardWidth;                             // 329\n        }                                                              //\n        _this.zoomAndPan(newDoc.slide.width_ratio, newDoc.slide.height_ratio, newDoc.slide.x_offset, newDoc.slide.y_offset);\n        oldRatio = (oldDoc.slide.width_ratio + oldDoc.slide.height_ratio) / 2;\n        newRatio = (newDoc.slide.width_ratio + newDoc.slide.height_ratio) / 2;\n        if (_this != null) {                                           //\n          if ((ref1 = _this.current) != null) {                        //\n            if ((ref2 = ref1.shapes) != null) {                        //\n              ref2.forEach(function(shape) {                           //\n                return shape.attr(\"stroke-width\", shape.attr('stroke-width') * oldRatio / newRatio);\n              });                                                      //\n            }                                                          //\n          }                                                            //\n        }                                                              //\n        if (_this.raphaelObj === 100) {                                // 341\n          return _this.cursor.setRadius(0.65 * newDoc.slide.width_ratio / 100);\n        } else {                                                       //\n          return _this.cursor.setRadius(6 * newDoc.slide.width_ratio / 100);\n        }                                                              //\n      }                                                                //\n    });                                                                //\n    if (originalWidth <= originalHeight) {                             // 346\n      this.adjustedWidth = boardHeight * originalWidth / originalHeight;\n      $('#whiteboard-paper').width(this.adjustedWidth);                // 348\n      this.addImageToPaper(data, this.adjustedWidth, boardHeight);     // 348\n      this.adjustedHeight = boardHeight;                               // 348\n    } else {                                                           //\n      this.adjustedHeight = boardWidth * originalHeight / originalWidth;\n      $('#whiteboard-paper').height(this.adjustedHeight);              // 353\n      this.addImageToPaper(data, boardWidth, this.adjustedHeight);     // 353\n      this.adjustedWidth = boardWidth;                                 // 353\n    }                                                                  //\n    return this.zoomAndPan(currentSlide.slide.width_ratio, currentSlide.slide.height_ratio, currentSlide.slide.x_offset, currentSlide.slide.y_offset);\n  };                                                                   //\n                                                                       //\n  return WhiteboardPaperModel;                                         //\n                                                                       //\n})();                                                                  //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/whiteboard_models/whiteboard_paper.coffee.js","sourceMap":{"version":3,"sources":["/client/whiteboard_models/whiteboard_paper.coffee"],"names":[],"mappings":"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","file":"/client/whiteboard_models/whiteboard_paper.coffee.js","sourcesContent":["# \"Paper\" which is the Raphael term for the entire SVG object on the webpage.\n# This class deals with this SVG component only.\nclass Meteor.WhiteboardPaperModel\n\n  # Container must be a DOM element\n  constructor: (@container) ->\n    # a WhiteboardCursorModel\n    @cursor = null\n\n    # all slides in the presentation indexed by url\n    @slides = {}\n\n    @panX = null\n    @panY = null\n\n    @current = {}\n\n    # the slide being shown\n    @current.slide = null\n\n    # a raphaeljs set with all the shapes in the current slide\n    @current.shapes = null\n    # a list of shapes as passed to this client when it receives `all_slides`\n    # (se we are able to redraw the shapes whenever needed)\n    @current.shapeDefinitions = []\n\n    @zoomLevel = 1\n    @shiftPressed = false\n    @currentPathCount = 0\n\n    @_updateContainerDimensions()\n\n    @zoomObserver = null\n\n    @adjustedWidth = 0\n    @adjustedHeight = 0\n\n    @widthRatio = 100\n    @heightRatio = 100\n\n  # Initializes the paper in the page.\n  # Can't do these things in initialize() because by then some elements\n  # are not yet created in the page.\n  create: ->\n    # paper is embedded within the div#slide of the page.\n    # @raphaelObj ?= ScaleRaphael(@container, \"900\", \"500\")\n\n    h = $(\"#\"+@container).height()\n    w = $(\"#\"+@container).width()\n\n    @raphaelObj ?= ScaleRaphael(@container, w, h)\n    @raphaelObj ?= ScaleRaphael(@container, $container.innerHeight(), $container.innerWidth())\n\n    @raphaelObj.canvas.setAttribute \"preserveAspectRatio\", \"xMinYMin slice\"\n\n    @createCursor()\n\n    if @slides\n      @rebuild()\n    else\n      @slides = {} # if previously loaded\n    unless navigator.userAgent.indexOf(\"Firefox\") is -1\n      @raphaelObj.renderfix()\n\n    @raphaelObj\n\n  # Re-add the images to the paper that are found\n  # in the slides array (an object of urls and dimensions).\n  rebuild: ->\n    @current.slide = null\n    for url of @slides\n      if @slides.hasOwnProperty(url)\n        @addImageToPaper url, @slides[url].getWidth(), @slides[url].getHeight()\n\n  scale: (width, height) ->\n    @raphaelObj?.changeSize(width, height)\n\n  # Add an image to the paper.\n  # @param {string} url the URL of the image to add to the paper\n  # @param {number} width   the width of the image (in pixels)\n  # @param {number} height   the height of the image (in pixels)\n  # @return {Raphael.image} the image object added to the whiteboard\n  addImageToPaper: (url, width, height) ->\n    @_updateContainerDimensions()\n\n    # solve for the ratio of what length is going to fit more than the other\n    max = Math.max(width / @containerWidth, height / @containerHeight)\n    # fit it all in appropriately\n    url = @_slideUrl(url)\n    sw = width / max\n    sh = height / max\n    #cx = (@containerWidth / 2) - (width / 2)\n    #cy = (@containerHeight / 2) - (height / 2)\n    img = @raphaelObj.image(url, cx = 0, cy = 0, width, height)\n\n    # sw slide width as percentage of original width of paper\n    # sh slide height as a percentage of original height of paper\n    # x-offset from top left corner as percentage of original width of paper\n    # y-offset from top left corner as percentage of original height of paper\n    @slides[url] = new WhiteboardSlideModel(img.id, url, img, width, height, sw, sh, cx, cy)\n\n    unless @current.slide?\n      img.toBack()\n      @current.slide = @slides[url]\n    else if @current.slide.url is url\n      img.toBack()\n    else\n      img.hide()\n\n    # TODO: other places might also required an update in these dimensions\n    @_updateContainerDimensions()\n\n    @_updateZoomRatios()\n    if @raphaelObj.w is 100 # on first load: Raphael object is initially tiny\n      @cursor.setRadius(0.65 * @widthRatio / 100)\n    else\n      @cursor.setRadius(6 * @widthRatio / 100)\n\n    img\n\n  # Removes all the images from the Raphael paper.\n  removeAllImagesFromPaper: ->\n    for url of @slides\n      if @slides.hasOwnProperty(url)\n        @raphaelObj.getById(@slides[url]?.getId())?.remove()\n        #@trigger('paper:image:removed', @slides[url].getId()) # Removes the previous image preventing images from being redrawn over each other repeatedly\n    @slides = {}\n    @current.slide = null\n\n\n  # Switches the tool and thus the functions that get\n  # called when certain events are fired from Raphael.\n  # @param  {string} tool the tool to turn on\n  # @return {undefined}\n  setCurrentTool: (tool) ->\n    @currentTool = tool\n    console.log \"setting current tool to\", tool\n    switch tool\n      when \"line\"\n        @cursor.undrag()\n        @current.line = @_createTool(tool)\n        @cursor.drag(@current.line.dragOnMove, @current.line.dragOnStart, @current.line.dragOnEnd)\n      when \"rectangle\"\n        @cursor.undrag()\n        @current.rectangle = @_createTool(tool)\n        @cursor.drag(@current.rectangle.dragOnMove, @current.rectangle.dragOnStart, @current.rectangle.dragOnEnd)\n      else\n        console.log \"ERROR: Cannot set invalid tool:\", tool\n\n  # Clear all shapes from this paper.\n  clearShapes: ->\n    if @current.shapes?\n      @current.shapes.forEach (element) ->\n        element.remove()\n      @current.shapeDefinitions = []\n      @current.shapes.clear()\n    @clearCursor()\n    @createCursor()\n\n  clearCursor: ->\n    @cursor?.remove()\n\n  createCursor: ->\n    if @raphaelObj.w is 100 # on first load: Raphael object is initially tiny\n      @cursor = new WhiteboardCursorModel(@raphaelObj, 0.65)\n      @cursor.setRadius(0.65 * @widthRatio / 100)\n    else\n      @cursor = new WhiteboardCursorModel(@raphaelObj)\n      @cursor.setRadius(6 * @widthRatio / 100)\n    @cursor.draw()\n\n  # Updated a shape `shape` with the data in `data`.\n  # TODO: check if the objects exist before calling update, if they don't they should be created\n  updateShape: (shape, data) ->\n    @current[shape].update(data)\n\n  # Make a shape `shape` with the data in `data`.\n  makeShape: (shape, data) ->\n    data.thickness *= @adjustedWidth / 1000\n\n    tool = null\n    #TODO pay attention to this array, data in this array slows down the whiteboard\n    #console.log @current\n    #console.log @\n    @current[shape] = @_createTool(shape)\n    toolModel = @current[shape]\n    tool = @current[shape].make(data)\n\n    if tool? and shape isnt \"poll_result\"\n      @current.shapes ?= @raphaelObj.set()\n      @current.shapes.push(tool)\n      @current.shapeDefinitions.push(toolModel.getDefinition())\n\n    #We have a separate case for Poll as it returns an array instead of just one object\n    if tool? and shape is \"poll_result\"\n      @current.shapes ?= @raphaelObj.set()\n      for obj in tool\n        @current.shapes.push(obj)\n      @current.shapeDefinitions.push(toolModel.getDefinition())\n\n  # Update the cursor position on screen\n  # @param  {number} x the x value of the cursor as a percentage of the width\n  # @param  {number} y the y value of the cursor as a percentage of the height\n  moveCursor: (x, y) ->\n    [cx, cy] = @_currentSlideOffsets()\n    [slideWidth, slideHeight] = @_currentSlideOriginalDimensions()\n    @cursor.setPosition(x * slideWidth + cx, y * slideHeight + cy)\n\n    #if the slide is zoomed in then move the cursor based on where the viewBox is looking\n    if @viewBoxXpos? && @viewBoxYPos?  && @viewBoxWidth? && @viewBoxHeight?\n      @cursor.setPosition( @viewBoxXpos + x * @viewBoxWidth, @viewBoxYPos + y * @viewBoxHeight )\n\n  zoomAndPan: (widthRatio, heightRatio, xOffset, yOffset) ->\n    # console.log \"zoomAndPan #{widthRatio} #{heightRatio} #{xOffset} #{yOffset}\"\n    newX = - xOffset * 2 * @adjustedWidth / 100\n    newY = - yOffset * 2 * @adjustedHeight / 100\n    newWidth = @adjustedWidth * widthRatio / 100\n    newHeight = @adjustedHeight * heightRatio / 100\n    @raphaelObj.setViewBox(newX, newY, newWidth, newHeight) # zooms and pans\n\n  setAdjustedDimensions: (width, height) ->\n    @adjustedWidth = width\n    @adjustedHeight = height\n\n  # Update the dimensions of the container.\n  _updateContainerDimensions: ->\n    $container = $('#whiteboard-paper')\n\n    containerDimensions = scaleSlide(getInSession('slideOriginalWidth'), getInSession('slideOriginalHeight'))\n    if($container.innerWidth() is 0)\n      @containerWidth = containerDimensions.boardWidth\n    else\n      @containerWidth = $container.innerWidth()\n    if($container.innerHeight() is 0)\n      @containerHeight = containerDimensions.boardHeight\n    else\n      @containerHeight = $container.innerHeight()\n\n    @containerOffsetLeft = $container.offset()?.left\n    @containerOffsetTop = $container.offset()?.top\n\n  _updateZoomRatios: ->\n    currentSlideDoc = getCurrentSlideDoc()\n    @widthRatio = currentSlideDoc.slide.width_ratio\n    @heightRatio = currentSlideDoc.slide.height_ratio\n\n  # Retrieves an image element from the paper.\n  # The url must be in the slides array.\n  # @param  {string} url        the url of the image (must be in slides array)\n  # @return {Raphael.image}     return the image or null if not found\n  _getImageFromPaper: (url) ->\n    if @slides[url]\n      id = @slides[url].getId()\n      return @raphaelObj.getById(id) if id?\n    null\n\n  _currentSlideDimensions: ->\n    if @current.slide? then @current.slide.getDimensions() else [0, 0]\n\n  _currentSlideOriginalDimensions: ->\n    if @current.slide? then @current.slide.getOriginalDimensions() else [0, 0]\n\n  _currentSlideOffsets: ->\n    if @current.slide? then @current.slide.getOffsets() else [0, 0]\n\n  # Wrapper method to create a tool for the whiteboard\n  _createTool: (type) ->\n    switch type\n      when \"pencil\"\n        model = WhiteboardLineModel\n      when \"path\", \"line\"\n        model = WhiteboardLineModel\n      when \"rectangle\"\n        model = WhiteboardRectModel\n      when \"ellipse\"\n        model = WhiteboardEllipseModel\n      when \"triangle\"\n        model = WhiteboardTriangleModel\n      when \"text\"\n        model = WhiteboardTextModel\n      when \"poll_result\"\n        model = WhiteboardPollModel\n\n    if model?\n      [slideWidth, slideHeight] = @_currentSlideOriginalDimensions()\n      [xOffset, yOffset] = @_currentSlideOffsets()\n      [width, height] = @_currentSlideDimensions()\n\n      tool = new model(@raphaelObj)\n      # TODO: why are the parameters inverted and it works?\n      tool.setPaperSize(slideHeight, slideWidth)\n      tool.setOffsets(xOffset, yOffset)\n      tool.setPaperDimensions(width,height)\n      tool\n    else\n      null\n\n  # Adds the base url (the protocol+server part) to `url` if needed.\n  _slideUrl: (url) ->\n    if url?.match(/http[s]?:/)\n      url\n    else\n      console.log \"The url '#{url}'' did not match the expected format of: http/s\"\n      #globals.presentationServer + url\n\n  #Changes the currently displayed page/slide (if any) with this one\n  #@param {data} message object containing the \"presentation\" object\n  _displayPage: (data, originalWidth, originalHeight) ->\n    @removeAllImagesFromPaper()\n\n    @_updateContainerDimensions()\n    boardWidth = @containerWidth\n    boardHeight = @containerHeight\n\n    currentSlide = getCurrentSlideDoc()\n    currentPresentation = Meteor.Presentations.findOne({\"presentation.current\": true})\n    presentationId = currentPresentation?.presentation?.id\n    currentSlideCursor = Meteor.Slides.find({\"presentationId\": presentationId, \"slide.current\": true})\n\n    if @zoomObserver isnt null\n      @zoomObserver.stop()\n    _this = this\n    @zoomObserver = currentSlideCursor.observe # watching the current slide changes\n      changed: (newDoc, oldDoc) ->\n        if originalWidth <= originalHeight\n          @adjustedWidth = boardHeight * originalWidth / originalHeight\n          @adjustedHeight = boardHeight\n        else\n          @adjustedHeight = boardWidth * originalHeight / originalWidth\n          @adjustedWidth = boardWidth\n\n        _this.zoomAndPan(newDoc.slide.width_ratio, newDoc.slide.height_ratio,\n          newDoc.slide.x_offset, newDoc.slide.y_offset)\n\n        oldRatio = (oldDoc.slide.width_ratio + oldDoc.slide.height_ratio) / 2\n        newRatio = (newDoc.slide.width_ratio + newDoc.slide.height_ratio) / 2\n\n        _this?.current?.shapes?.forEach (shape) ->\n          shape.attr \"stroke-width\", shape.attr('stroke-width') * oldRatio  / newRatio\n\n        if _this.raphaelObj is 100 # on first load: Raphael object is initially tiny\n          _this.cursor.setRadius(0.65 * newDoc.slide.width_ratio / 100)\n        else\n          _this.cursor.setRadius(6 * newDoc.slide.width_ratio / 100)\n\n    if originalWidth <= originalHeight\n      # square => boardHeight is the shortest side\n      @adjustedWidth = boardHeight * originalWidth / originalHeight\n      $('#whiteboard-paper').width(@adjustedWidth)\n      @addImageToPaper(data, @adjustedWidth, boardHeight)\n      @adjustedHeight = boardHeight\n    else\n      @adjustedHeight = boardWidth * originalHeight / originalWidth\n      $('#whiteboard-paper').height(@adjustedHeight)\n      @addImageToPaper(data, boardWidth, @adjustedHeight)\n      @adjustedWidth = boardWidth\n\n    @zoomAndPan(currentSlide.slide.width_ratio, currentSlide.slide.height_ratio,\n      currentSlide.slide.x_offset, currentSlide.slide.y_offset)\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/whiteboard_models/whiteboard_poll.coffee.js                  //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar calculateFontAndWidth, getRenderedTextSize,                        // 2\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;                                         //\n                                                                       //\nthis.WhiteboardPollModel = (function(superClass) {                     // 2\n  extend(WhiteboardPollModel, superClass);                             // 3\n                                                                       //\n  function WhiteboardPollModel(paper1) {                               // 3\n    this.paper = paper1;                                               // 4\n    this.make = bind(this.make, this);                                 // 4\n    WhiteboardPollModel.__super__.constructor.call(this, this.paper);  // 4\n    this.definition = [0, 0, 0, 0, \"#333333\", \"2px\", \"#ffffff\"];       // 4\n    this.paper;                                                        // 4\n  }                                                                    //\n                                                                       //\n  WhiteboardPollModel.prototype.make = function(startingData) {        // 3\n    var backgroundColor, barHeight, barWidth, calcFontSize, calculatedData, centerCell, color, height, horizontalPadding, i, k, l, leftCell, m, magicNumber, maxBarWidth, maxDigitWidth, maxLeftWidth, maxLineHeight, maxNumVotes, maxRightWidth, n, objects, percResult, ref, ref1, ref2, ref3, ref4, ref5, rightCell, svgNSi, tempSpanEl, tempTextNode, textArray, thickness, verticalPadding, votesTotal, width, x, x1, x2, xBar, xLeft, xNumVotes, xNumVotesDefault, xNumVotesMovedRight, xRight, y, y1, y2, yBar, yLeft, yNumVotes, yRight;\n    x1 = startingData.points[0];                                       // 21\n    y1 = startingData.points[1];                                       // 21\n    x2 = startingData.points[2] + startingData.points[0] - 0.001;      // 21\n    y2 = startingData.points[3] + startingData.points[1] - 0.001;      // 21\n    thickness = 2;                                                     // 21\n    backgroundColor = \"#ffffff\";                                       // 21\n    verticalPadding = 0;                                               // 21\n    horizontalPadding = 0;                                             // 21\n    calcFontSize = 30;                                                 // 21\n    votesTotal = 0;                                                    // 21\n    maxNumVotes = 0;                                                   // 21\n    textArray = [];                                                    // 21\n    if (startingData.result != null) {                                 // 35\n      for (i = k = 0, ref = startingData.result.length - 1; 0 <= ref ? k <= ref : k >= ref; i = 0 <= ref ? ++k : --k) {\n        votesTotal += startingData.result[i].num_votes;                // 38\n        if (maxNumVotes < startingData.result[i].num_votes) {          // 39\n          maxNumVotes = startingData.result[i].num_votes;              // 40\n        }                                                              //\n        textArray[i] = [];                                             // 38\n      }                                                                // 37\n      for (i = l = 0, ref1 = startingData.result.length - 1; 0 <= ref1 ? l <= ref1 : l >= ref1; i = 0 <= ref1 ? ++l : --l) {\n        textArray[i].push(startingData.result[i].key, startingData.result[i].num_votes + \"\");\n        if (votesTotal === 0) {                                        // 45\n          textArray[i].push(\"0%\");                                     // 46\n        } else {                                                       //\n          percResult = startingData.result[i].num_votes / votesTotal * 100;\n          textArray[i].push(Math.round(percResult) + \"%\");             // 48\n        }                                                              //\n      }                                                                // 43\n    }                                                                  //\n    if (x2 < x1) {                                                     // 52\n      ref2 = [x2, x1], x1 = ref2[0], x2 = ref2[1];                     // 53\n    }                                                                  //\n    if (y2 < y1) {                                                     // 54\n      ref3 = [y2, y1], y1 = ref3[0], y2 = ref3[1];                     // 55\n    }                                                                  //\n    x = x1 * this.gw + this.xOffset;                                   // 21\n    y = y1 * this.gh + this.yOffset;                                   // 21\n    width = (x2 * this.gw + this.xOffset) - x;                         // 21\n    height = (y2 * this.gh + this.yOffset) - y;                        // 21\n    this.obj = this.paper.rect(x, y, width, height, 0);                // 21\n    this.obj.attr(\"fill\", backgroundColor);                            // 21\n    this.obj.attr(\"stroke-width\", 0);                                  // 21\n    this.definition = {                                                // 21\n      shape: \"poll_result\",                                            // 72\n      data: [x1, y1, x2, y2, this.obj.attrs[\"stroke\"], this.obj.attrs[\"stroke-width\"], this.obj.attrs[\"fill\"]]\n    };                                                                 //\n    width = width * 0.95;                                              // 21\n    height = height - width * 0.05;                                    // 21\n    x = x + width * 0.025;                                             // 21\n    y = y + width * 0.025;                                             // 21\n    this.obj1 = this.paper.rect(x, y, width, height, 0);               // 21\n    this.obj1.attr(\"stroke\", \"#333333\");                               // 21\n    this.obj1.attr(\"fill\", backgroundColor);                           // 21\n    this.obj1.attr(\"stroke-width\", zoomStroke(formatThickness(thickness)));\n    this.definition = {                                                // 21\n      shape: \"poll_result\",                                            // 87\n      data: [x1, y1, x2, y2, this.obj.attrs[\"stroke\"], this.obj1.attrs[\"stroke-width\"], this.obj1.attrs[\"fill\"]]\n    };                                                                 //\n    calculatedData = calculateFontAndWidth(textArray, calcFontSize, width, height, x, y);\n    calcFontSize = calculatedData[0];                                  // 21\n    maxLeftWidth = calculatedData[1];                                  // 21\n    maxRightWidth = calculatedData[2];                                 // 21\n    maxLineHeight = calculatedData[3];                                 // 21\n    maxDigitWidth = calculatedData[4];                                 // 21\n    maxBarWidth = width * 0.9 - maxLeftWidth - maxRightWidth;          // 21\n    barHeight = height * 0.75 / textArray.length;                      // 21\n    svgNSi = \"http://www.w3.org/2000/svg\";                             // 21\n    this.obj2 = this.paper.text(x, y, \"\");                             // 21\n    this.obj2.attr({                                                   // 21\n      \"fill\": \"#333333\",                                               // 104\n      \"font-family\": \"Arial\",                                          // 104\n      \"font-size\": calcFontSize                                        // 104\n    });                                                                //\n    this.obj2.node.style[\"text-anchor\"] = \"start\";                     // 21\n    this.obj2.node.style[\"textAnchor\"] = \"start\";                      // 21\n    leftCell = this.obj2.node;                                         // 21\n    while ((leftCell != null) && leftCell.hasChildNodes()) {           // 110\n      leftCell.removeChild(leftCell.firstChild);                       // 111\n    }                                                                  //\n    this.obj3 = this.paper.text(x, y, \"\");                             // 21\n    this.obj3.attr({                                                   // 21\n      \"fill\": \"#333333\",                                               // 116\n      \"font-family\": \"Arial\",                                          // 116\n      \"font-size\": calcFontSize                                        // 116\n    });                                                                //\n    this.obj3.node.style[\"text-anchor\"] = \"end\";                       // 21\n    this.obj3.node.style[\"textAnchor\"] = \"end\";                        // 21\n    rightCell = this.obj3.node;                                        // 21\n    while ((rightCell != null) && rightCell.hasChildNodes()) {         // 122\n      rightCell.removeChild(rightCell.firstChild);                     // 123\n    }                                                                  //\n    leftCell.style['font-size'] = calcFontSize;                        // 21\n    rightCell.style['font-size'] = calcFontSize;                       // 21\n    horizontalPadding = width * 0.1 / 4;                               // 21\n    verticalPadding = height * 0.25 / (textArray.length + 1);          // 21\n    magicNumber = 3.5;                                                 // 21\n    yLeft = y + verticalPadding + barHeight / 2 - magicNumber;         // 21\n    xLeft = x + horizontalPadding + 1;                                 // 21\n    xBar = x + maxLeftWidth + horizontalPadding * 2;                   // 21\n    yBar = y + verticalPadding;                                        // 21\n    yRight = y + verticalPadding + barHeight / 2 - magicNumber;        // 21\n    xRight = x + horizontalPadding * 3 + maxLeftWidth + maxRightWidth + maxBarWidth + 1;\n    objects = [this.obj, this.obj1, this.obj2, this.obj3];             // 21\n    for (i = m = 0, ref4 = textArray.length - 1; 0 <= ref4 ? m <= ref4 : m >= ref4; i = 0 <= ref4 ? ++m : --m) {\n      tempSpanEl = document.createElementNS(svgNSi, \"tspan\");          // 159\n      tempSpanEl.setAttributeNS(null, \"x\", xLeft);                     // 159\n      tempSpanEl.setAttributeNS(null, \"y\", yLeft);                     // 159\n      tempSpanEl.setAttributeNS(null, \"dy\", maxLineHeight / 2);        // 159\n      tempTextNode = document.createTextNode(textArray[i][0]);         // 159\n      tempSpanEl.appendChild(tempTextNode);                            // 159\n      leftCell.appendChild(tempSpanEl);                                // 159\n      if (maxNumVotes === 0 || startingData.result[i].num_votes === 0) {\n        barWidth = 2;                                                  // 169\n      } else {                                                         //\n        barWidth = startingData.result[i].num_votes / maxNumVotes * maxBarWidth;\n      }                                                                //\n      this.obj4 = this.paper.rect(xBar, yBar, barWidth, barHeight, 0);\n      this.obj4.attr(\"stroke\", \"#333333\");                             // 159\n      this.obj4.attr(\"fill\", \"#333333\");                               // 159\n      this.obj4.attr(\"stroke-width\", zoomStroke(formatThickness(0)));  // 159\n      objects.push(this.obj4);                                         // 159\n      tempSpanEl = document.createElementNS(svgNSi, \"tspan\");          // 159\n      tempSpanEl.setAttributeNS(null, \"x\", xRight);                    // 159\n      tempSpanEl.setAttributeNS(null, \"y\", yRight);                    // 159\n      tempSpanEl.setAttributeNS(null, \"dy\", maxLineHeight / 2);        // 159\n      tempTextNode = document.createTextNode(textArray[i][2]);         // 159\n      tempSpanEl.appendChild(tempTextNode);                            // 159\n      rightCell.appendChild(tempSpanEl);                               // 159\n      yBar = yBar + barHeight + verticalPadding;                       // 159\n      yLeft = yLeft + barHeight + verticalPadding;                     // 159\n      yRight = yRight + barHeight + verticalPadding;                   // 159\n    }                                                                  // 157\n    this.obj5 = this.paper.text(x, y, \"\");                             // 21\n    this.obj5.attr({                                                   // 21\n      \"fill\": \"#333333\",                                               // 195\n      \"font-family\": \"Arial\",                                          // 195\n      \"font-size\": calcFontSize                                        // 195\n    });                                                                //\n    centerCell = this.obj5.node;                                       // 21\n    while ((centerCell != null) && centerCell.hasChildNodes()) {       // 199\n      centerCell.removeChild(centerCell.firstChild);                   // 200\n    }                                                                  //\n    xNumVotesDefault = x + maxLeftWidth + horizontalPadding * 2;       // 21\n    xNumVotesMovedRight = xNumVotesDefault + barWidth / 2 + horizontalPadding + maxDigitWidth / 2;\n    yNumVotes = y + verticalPadding - magicNumber;                     // 21\n    color = \"white\";                                                   // 21\n    for (i = n = 0, ref5 = textArray.length - 1; 0 <= ref5 ? n <= ref5 : n >= ref5; i = 0 <= ref5 ? ++n : --n) {\n      if (maxNumVotes === 0 || startingData.result[i].num_votes === 0) {\n        barWidth = 2;                                                  // 211\n      } else {                                                         //\n        barWidth = startingData.result[i].num_votes / maxNumVotes * maxBarWidth;\n      }                                                                //\n      if (barWidth < maxDigitWidth + 8) {                              // 214\n        xNumVotes = xNumVotesMovedRight;                               // 215\n        color = \"#333333\";                                             // 215\n      } else {                                                         //\n        xNumVotes = xNumVotesDefault;                                  // 218\n        color = \"white\";                                               // 218\n      }                                                                //\n      tempSpanEl = document.createElementNS(svgNSi, \"tspan\");          // 210\n      tempSpanEl.setAttributeNS(null, \"x\", xNumVotes + barWidth / 2);  // 210\n      tempSpanEl.setAttributeNS(null, \"y\", yNumVotes + barHeight / 2);\n      tempSpanEl.setAttributeNS(null, \"dy\", maxLineHeight / 2);        // 210\n      tempSpanEl.setAttributeNS(null, \"fill\", color);                  // 210\n      tempTextNode = document.createTextNode(startingData.result[i].num_votes);\n      tempSpanEl.appendChild(tempTextNode);                            // 210\n      centerCell.appendChild(tempSpanEl);                              // 210\n      yNumVotes = yNumVotes + barHeight + verticalPadding;             // 210\n    }                                                                  // 209\n    objects.push(this.obj5);                                           // 21\n    return objects;                                                    //\n  };                                                                   //\n                                                                       //\n  WhiteboardPollModel.prototype.update = function(startingData) {};    // 3\n                                                                       //\n  return WhiteboardPollModel;                                          //\n                                                                       //\n})(WhiteboardToolModel);                                               //\n                                                                       //\ncalculateFontAndWidth = function(textArray, calcFontSize, width, height, x, y) {\n  var calculatedData, flag, i, j, k, l, len, line, m, maxDigitWidth, maxLeftWidth, maxLineHeight, maxLineWidth, maxRightWidth, ref, ref1, spanHeight, spanWidth, test;\n  calculatedData = [];                                                 // 239\n  maxLineWidth = width / 3;                                            // 239\n  maxLineHeight = height * 0.75 / (textArray != null ? textArray.length : void 0);\n  flag = true;                                                         // 239\n  while (flag) {                                                       // 247\n    flag = false;                                                      // 248\n    for (i = k = 0, ref = textArray.length - 1; 0 <= ref ? k <= ref : k >= ref; i = 0 <= ref ? ++k : --k) {\n      for (j = l = 0, ref1 = textArray[i].length - 1; 0 <= ref1 ? l <= ref1 : l >= ref1; j = 0 <= ref1 ? ++l : --l) {\n        test = getRenderedTextSize(textArray[i][j], calcFontSize);     // 251\n        spanWidth = test[0];                                           // 251\n        spanHeight = test[1];                                          // 251\n        if (spanWidth > maxLineWidth || spanHeight > maxLineHeight) {  // 254\n          calcFontSize -= 1;                                           // 255\n          flag = true;                                                 // 255\n        }                                                              //\n      }                                                                // 250\n    }                                                                  // 249\n  }                                                                    //\n  calculatedData.push(calcFontSize);                                   // 239\n  maxLeftWidth = 0;                                                    // 239\n  maxRightWidth = 0;                                                   // 239\n  maxLineHeight = 0;                                                   // 239\n  for (m = 0, len = textArray.length; m < len; m++) {                  // 263\n    line = textArray[m];                                               //\n    test = getRenderedTextSize(line[0], calcFontSize);                 // 264\n    spanWidth = test[0];                                               // 264\n    spanHeight = test[1];                                              // 264\n    if (spanWidth > maxLeftWidth) {                                    // 267\n      maxLeftWidth = spanWidth;                                        // 268\n    }                                                                  //\n    if (spanHeight > maxLineHeight) {                                  // 269\n      maxLineHeight = spanHeight;                                      // 270\n    }                                                                  //\n    test = getRenderedTextSize(line[2], calcFontSize);                 // 264\n    spanWidth = test[0];                                               // 264\n    spanHeight = test[1];                                              // 264\n    if (spanWidth > maxRightWidth) {                                   // 274\n      maxRightWidth = spanWidth;                                       // 275\n    }                                                                  //\n    if (spanHeight > maxLineHeight) {                                  // 276\n      maxLineHeight = spanHeight;                                      // 277\n    }                                                                  //\n  }                                                                    // 263\n  test = getRenderedTextSize(\"0\", calcFontSize);                       // 239\n  spanWidth = test[0];                                                 // 239\n  spanHeight = test[1];                                                // 239\n  maxDigitWidth = spanWidth;                                           // 239\n  calculatedData.push(maxLeftWidth, maxRightWidth, maxLineHeight, maxDigitWidth);\n  return calculatedData;                                               //\n};                                                                     // 238\n                                                                       //\ngetRenderedTextSize = function(string, fontSize) {                     // 2\n  var arrayTest, bBox, el, paper;                                      // 288\n  paper = Raphael(0, 0, 0, 0);                                         // 288\n  paper.canvas.style.visibility = 'hidden';                            // 288\n  el = paper.text(0, 0, string);                                       // 288\n  el.attr(\"font-family\", \"Arial\");                                     // 288\n  el.attr(\"font-size\", fontSize);                                      // 288\n  bBox = el.getBBox();                                                 // 288\n  paper.remove();                                                      // 288\n  arrayTest = [];                                                      // 288\n  arrayTest.push(bBox.width);                                          // 288\n  arrayTest.push(bBox.height);                                         // 288\n  paper.remove();                                                      // 288\n  return arrayTest;                                                    //\n};                                                                     // 287\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/whiteboard_models/whiteboard_poll.coffee.js","sourceMap":{"version":3,"sources":["/client/whiteboard_models/whiteboard_poll.coffee"],"names":[],"mappings":";;;;;;;;;AACA;EAAA;;6BAAA;;AAAA,IAAO;AACL;;AAAa,+BAAC,MAAD;AACX,IADY,IAAC,SAAD,MACZ;AAAA;AAAA,yDAAM,IAAC,MAAP;AAAA,IAIA,IAAC,WAAD,GAAc,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,SAAb,EAAwB,KAAxB,EAA+B,SAA/B,CAJd;AAAA,IAKA,IAAC,MALD,CADW;EAAA,CAAb;;AAAA,gCAgBA,OAAM,SAAC,YAAD;AAEJ;AAAA,SAAK,YAAY,CAAC,MAAO,GAAzB;AAAA,IACA,KAAK,YAAY,CAAC,MAAO,GADzB;AAAA,IAEA,KAAK,YAAY,CAAC,MAAO,GAApB,GAAyB,YAAY,CAAC,MAAO,GAA7C,GAAkD,KAFvD;AAAA,IAGA,KAAK,YAAY,CAAC,MAAO,GAApB,GAAyB,YAAY,CAAC,MAAO,GAA7C,GAAkD,KAHvD;AAAA,IAIA,YAAY,CAJZ;AAAA,IAKA,kBAAkB,SALlB;AAAA,IAMA,kBAAkB,CANlB;AAAA,IAOA,oBAAoB,CAPpB;AAAA,IAQA,eAAe,EARf;AAAA,IASA,aAAa,CATb;AAAA,IAUA,cAAc,CAVd;AAAA,IAWA,YAAY,EAXZ;AAcA,QAAG,2BAAH;AAEE,WAAS,yGAAT;AACE,sBAAc,YAAY,CAAC,MAAO,GAAE,CAAC,SAArC;AACA,YAAG,cAAc,YAAY,CAAC,MAAO,GAAE,CAAC,SAAxC;AACE,wBAAc,YAAY,CAAC,MAAO,GAAE,CAAC,SAArC,CADF;SADA;AAAA,QAGA,SAAU,GAAV,GAAe,EAHf,CADF;AAAA;AAMA,WAAS,8GAAT;AACE,iBAAU,GAAE,CAAC,IAAb,CAAkB,YAAY,CAAC,MAAO,GAAE,CAAC,GAAzC,EAA8C,YAAY,CAAC,MAAO,GAAE,CAAC,SAAvB,GAAiC,EAA/E;AACA,YAAG,eAAc,CAAjB;AACE,mBAAU,GAAE,CAAC,IAAb,CAAkB,IAAlB,EADF;SAAA;AAGE,uBAAa,YAAY,CAAC,MAAO,GAAE,CAAC,SAAvB,GAAiC,UAAjC,GAA4C,GAAzD;AAAA,UACA,SAAU,GAAE,CAAC,IAAb,CAAkB,IAAI,CAAC,KAAL,CAAW,UAAX,IAAyB,GAA3C,CADA,CAHF;SAFF;AAAA,OARF;KAdA;AA+BA,QAAG,KAAK,EAAR;AACI,aAAW,CAAC,EAAD,EAAK,EAAL,CAAX,EAAC,YAAD,EAAK,YAAL,CADJ;KA/BA;AAiCA,QAAG,KAAK,EAAR;AACE,aAAW,CAAC,EAAD,EAAK,EAAL,CAAX,EAAC,YAAD,EAAK,YAAL,CADF;KAjCA;AAAA,IAyCA,IAAI,KAAK,IAAC,GAAN,GAAW,IAAC,QAzChB;AAAA,IA0CA,IAAI,KAAK,IAAC,GAAN,GAAW,IAAC,QA1ChB;AAAA,IA2CA,QAAQ,CAAC,KAAK,IAAC,GAAN,GAAW,IAAC,QAAb,IAAwB,CA3ChC;AAAA,IA4CA,SAAS,CAAC,KAAK,IAAC,GAAN,GAAW,IAAC,QAAb,IAAwB,CA5CjC;AAAA,IA+CA,IAAC,IAAD,GAAO,IAAC,MAAK,CAAC,IAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,KAAlB,EAAyB,MAAzB,EAAiC,CAAjC,CA/CP;AAAA,IAgDA,IAAC,IAAG,CAAC,IAAL,CAAU,MAAV,EAAkB,eAAlB,CAhDA;AAAA,IAiDA,IAAC,IAAG,CAAC,IAAL,CAAU,cAAV,EAA0B,CAA1B,CAjDA;AAAA,IAkDA,IAAC,WAAD,GACE;AAAA,aAAO,aAAP;AAAA,MACA,MAAM,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,EAAiB,IAAC,IAAG,CAAC,KAAM,UAA5B,EAAuC,IAAC,IAAG,CAAC,KAAM,gBAAlD,EAAmE,IAAC,IAAG,CAAC,KAAM,QAA9E,CADN;KAnDF;AAAA,IAuDA,QAAQ,QAAM,IAvDd;AAAA,IAwDA,SAAS,SAAS,QAAM,IAxDxB;AAAA,IAyDA,IAAI,IAAE,QAAM,KAzDZ;AAAA,IA0DA,IAAI,IAAE,QAAM,KA1DZ;AAAA,IA6DA,IAAC,KAAD,GAAQ,IAAC,MAAK,CAAC,IAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,KAAlB,EAAyB,MAAzB,EAAiC,CAAjC,CA7DR;AAAA,IA8DA,IAAC,KAAI,CAAC,IAAN,CAAW,QAAX,EAAqB,SAArB,CA9DA;AAAA,IA+DA,IAAC,KAAI,CAAC,IAAN,CAAW,MAAX,EAAmB,eAAnB,CA/DA;AAAA,IAgEA,IAAC,KAAI,CAAC,IAAN,CAAW,cAAX,EAA2B,WAAW,gBAAgB,SAAhB,CAAX,CAA3B,CAhEA;AAAA,IAiEA,IAAC,WAAD,GACE;AAAA,aAAO,aAAP;AAAA,MACA,MAAM,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,EAAiB,IAAC,IAAG,CAAC,KAAM,UAA5B,EAAuC,IAAC,KAAI,CAAC,KAAM,gBAAnD,EAAoE,IAAC,KAAI,CAAC,KAAM,QAAhF,CADN;KAlEF;AAAA,IAsEA,iBAAiB,sBAAsB,SAAtB,EAAiC,YAAjC,EAA+C,KAA/C,EAAsD,MAAtD,EAA8D,CAA9D,EAAiE,CAAjE,CAtEjB;AAAA,IAuEA,eAAe,cAAe,GAvE9B;AAAA,IAwEA,eAAe,cAAe,GAxE9B;AAAA,IAyEA,gBAAgB,cAAe,GAzE/B;AAAA,IA0EA,gBAAgB,cAAe,GA1E/B;AAAA,IA2EA,gBAAgB,cAAe,GA3E/B;AAAA,IA4EA,cAAc,QAAM,GAAN,GAAU,YAAV,GAAuB,aA5ErC;AAAA,IA6EA,YAAY,SAAO,IAAP,GAAY,SAAS,CAAC,MA7ElC;AAAA,IA8EA,SAAS,4BA9ET;AAAA,IAiFA,IAAC,KAAD,GAAQ,IAAC,MAAK,CAAC,IAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,EAAlB,CAjFR;AAAA,IAkFA,IAAC,KAAI,CAAC,IAAN,CACE;AAAA,cAAQ,SAAR;AAAA,MACA,eAAe,OADf;AAAA,MAEA,aAAa,YAFb;KADF,CAlFA;AAAA,IAsFA,IAAC,KAAI,CAAC,IAAI,CAAC,KAAM,eAAjB,GAAkC,OAtFlC;AAAA,IAuFA,IAAC,KAAI,CAAC,IAAI,CAAC,KAAM,cAAjB,GAAiC,OAvFjC;AAAA,IAwFA,WAAW,IAAC,KAAI,CAAC,IAxFjB;AAyFA,WAAM,sBAAc,QAAQ,CAAC,aAAT,EAApB;AACE,cAAQ,CAAC,WAAT,CAAqB,QAAQ,CAAC,UAA9B,EADF;IAAA,CAzFA;AAAA,IA6FA,IAAC,KAAD,GAAQ,IAAC,MAAK,CAAC,IAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,EAAlB,CA7FR;AAAA,IA8FA,IAAC,KAAI,CAAC,IAAN,CACE;AAAA,cAAQ,SAAR;AAAA,MACA,eAAe,OADf;AAAA,MAEA,aAAa,YAFb;KADF,CA9FA;AAAA,IAkGA,IAAC,KAAI,CAAC,IAAI,CAAC,KAAM,eAAjB,GAAkC,KAlGlC;AAAA,IAmGA,IAAC,KAAI,CAAC,IAAI,CAAC,KAAM,cAAjB,GAAiC,KAnGjC;AAAA,IAoGA,YAAY,IAAC,KAAI,CAAC,IApGlB;AAqGA,WAAM,uBAAe,SAAS,CAAC,aAAV,EAArB;AACE,eAAS,CAAC,WAAV,CAAsB,SAAS,CAAC,UAAhC,EADF;IAAA,CArGA;AAAA,IA0GA,QAAQ,CAAC,KAAM,aAAf,GAA8B,YA1G9B;AAAA,IA2GA,SAAS,CAAC,KAAM,aAAhB,GAA+B,YA3G/B;AAAA,IA6GA,oBAAoB,QAAM,GAAN,GAAU,CA7G9B;AAAA,IA+GA,kBAAkB,SAAO,IAAP,GAAY,CAAC,SAAS,CAAC,MAAV,GAAiB,CAAlB,CA/G9B;AAAA,IA0HA,cAAc,GA1Hd;AAAA,IA8HA,QAAQ,IAAE,eAAF,GAAkB,YAAU,CAA5B,GAAgC,WA9HxC;AAAA,IA+HA,QAAQ,IAAI,iBAAJ,GAAwB,CA/HhC;AAAA,IAiIA,OAAO,IAAE,YAAF,GAAe,oBAAkB,CAjIxC;AAAA,IAkIA,OAAO,IAAI,eAlIX;AAAA,IAoIA,SAAS,IAAE,eAAF,GAAkB,YAAU,CAA5B,GAAgC,WApIzC;AAAA,IAqIA,SAAS,IAAI,oBAAkB,CAAtB,GAA0B,YAA1B,GAAyC,aAAzC,GAAyD,WAAzD,GAAuE,CArIhF;AAAA,IAsIA,UAAU,CAAC,IAAC,IAAF,EAAO,IAAC,KAAR,EAAc,IAAC,KAAf,EAAqB,IAAC,KAAtB,CAtIV;AAwIA,SAAS,oGAAT;AAEE,mBAAa,QAAQ,CAAC,eAAT,CAAyB,MAAzB,EAAiC,OAAjC,CAAb;AAAA,MACA,UAAU,CAAC,cAAX,CAA0B,IAA1B,EAAgC,GAAhC,EAAqC,KAArC,CADA;AAAA,MAEA,UAAU,CAAC,cAAX,CAA0B,IAA1B,EAAgC,GAAhC,EAAqC,KAArC,CAFA;AAAA,MAGA,UAAU,CAAC,cAAX,CAA0B,IAA1B,EAAgC,IAAhC,EAAsC,gBAAc,CAApD,CAHA;AAAA,MAIA,eAAe,QAAQ,CAAC,cAAT,CAAwB,SAAU,GAAG,GAArC,CAJf;AAAA,MAKA,UAAU,CAAC,WAAX,CAAuB,YAAvB,CALA;AAAA,MAMA,QAAQ,CAAC,WAAT,CAAqB,UAArB,CANA;AASA,UAAG,gBAAe,CAAf,IAAoB,YAAY,CAAC,MAAO,GAAE,CAAC,SAAvB,KAAoC,CAA3D;AACE,mBAAW,CAAX,CADF;OAAA;AAGE,mBAAW,YAAY,CAAC,MAAO,GAAE,CAAC,SAAvB,GAAmC,WAAnC,GAAiD,WAA5D,CAHF;OATA;AAAA,MAaA,IAAC,KAAD,GAAQ,IAAC,MAAK,CAAC,IAAP,CAAY,IAAZ,EAAkB,IAAlB,EAAwB,QAAxB,EAAkC,SAAlC,EAA6C,CAA7C,CAbR;AAAA,MAcA,IAAC,KAAI,CAAC,IAAN,CAAW,QAAX,EAAqB,SAArB,CAdA;AAAA,MAeA,IAAC,KAAI,CAAC,IAAN,CAAW,MAAX,EAAmB,SAAnB,CAfA;AAAA,MAgBA,IAAC,KAAI,CAAC,IAAN,CAAW,cAAX,EAA2B,WAAW,gBAAgB,CAAhB,CAAX,CAA3B,CAhBA;AAAA,MAiBA,OAAO,CAAC,IAAR,CAAa,IAAC,KAAd,CAjBA;AAAA,MAoBA,aAAa,QAAQ,CAAC,eAAT,CAAyB,MAAzB,EAAiC,OAAjC,CApBb;AAAA,MAqBA,UAAU,CAAC,cAAX,CAA0B,IAA1B,EAAgC,GAAhC,EAAqC,MAArC,CArBA;AAAA,MAsBA,UAAU,CAAC,cAAX,CAA0B,IAA1B,EAAgC,GAAhC,EAAqC,MAArC,CAtBA;AAAA,MAuBA,UAAU,CAAC,cAAX,CAA0B,IAA1B,EAAgC,IAAhC,EAAsC,gBAAc,CAApD,CAvBA;AAAA,MAwBA,eAAe,QAAQ,CAAC,cAAT,CAAwB,SAAU,GAAG,GAArC,CAxBf;AAAA,MAyBA,UAAU,CAAC,WAAX,CAAuB,YAAvB,CAzBA;AAAA,MA0BA,SAAS,CAAC,WAAV,CAAsB,UAAtB,CA1BA;AAAA,MA6BA,OAAO,OAAO,SAAP,GAAmB,eA7B1B;AAAA,MA8BA,QAAQ,QAAQ,SAAR,GAAoB,eA9B5B;AAAA,MA+BA,SAAS,SAAS,SAAT,GAAqB,eA/B9B,CAFF;AAAA,KAxIA;AAAA,IA4KA,IAAC,KAAD,GAAQ,IAAC,MAAK,CAAC,IAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,EAAlB,CA5KR;AAAA,IA6KA,IAAC,KAAI,CAAC,IAAN,CACE;AAAA,cAAQ,SAAR;AAAA,MACA,eAAe,OADf;AAAA,MAEA,aAAa,YAFb;KADF,CA7KA;AAAA,IAiLA,aAAa,IAAC,KAAI,CAAC,IAjLnB;AAkLA,WAAM,wBAAgB,UAAU,CAAC,aAAX,EAAtB;AACE,gBAAU,CAAC,WAAX,CAAuB,UAAU,CAAC,UAAlC,EADF;IAAA,CAlLA;AAAA,IAsLA,mBAAmB,IAAE,YAAF,GAAe,oBAAkB,CAtLpD;AAAA,IAuLA,sBAAsB,mBAAmB,WAAS,CAA5B,GAAgC,iBAAhC,GAAoD,gBAAc,CAvLxF;AAAA,IAwLA,YAAY,IAAI,eAAJ,GAAsB,WAxLlC;AAAA,IAyLA,QAAQ,OAzLR;AA4LA,SAAS,oGAAT;AACE,UAAG,gBAAe,CAAf,IAAoB,YAAY,CAAC,MAAO,GAAE,CAAC,SAAvB,KAAoC,CAA3D;AACE,mBAAW,CAAX,CADF;OAAA;AAGE,mBAAW,YAAY,CAAC,MAAO,GAAE,CAAC,SAAvB,GAAmC,WAAnC,GAAiD,WAA5D,CAHF;OAAA;AAIA,UAAG,WAAW,gBAAgB,CAA9B;AACE,oBAAY,mBAAZ;AAAA,QACA,QAAQ,SADR,CADF;OAAA;AAIE,oBAAY,gBAAZ;AAAA,QACA,QAAQ,OADR,CAJF;OAJA;AAAA,MAWA,aAAa,QAAQ,CAAC,eAAT,CAAyB,MAAzB,EAAiC,OAAjC,CAXb;AAAA,MAYA,UAAU,CAAC,cAAX,CAA0B,IAA1B,EAAgC,GAAhC,EAAqC,YAAY,WAAS,CAA1D,CAZA;AAAA,MAaA,UAAU,CAAC,cAAX,CAA0B,IAA1B,EAAgC,GAAhC,EAAqC,YAAY,YAAU,CAA3D,CAbA;AAAA,MAcA,UAAU,CAAC,cAAX,CAA0B,IAA1B,EAAgC,IAAhC,EAAsC,gBAAc,CAApD,CAdA;AAAA,MAeA,UAAU,CAAC,cAAX,CAA0B,IAA1B,EAAgC,MAAhC,EAAwC,KAAxC,CAfA;AAAA,MAgBA,eAAe,QAAQ,CAAC,cAAT,CAAwB,YAAY,CAAC,MAAO,GAAE,CAAC,SAA/C,CAhBf;AAAA,MAiBA,UAAU,CAAC,WAAX,CAAuB,YAAvB,CAjBA;AAAA,MAkBA,UAAU,CAAC,WAAX,CAAuB,UAAvB,CAlBA;AAAA,MAmBA,YAAY,YAAY,SAAZ,GAAwB,eAnBpC,CADF;AAAA,KA5LA;AAAA,IAkNA,OAAO,CAAC,IAAR,CAAa,IAAC,KAAd,CAlNA;WAmNA,QArNI;EAAA,CAhBN;;AAAA,gCAyOA,SAAQ,SAAC,YAAD,IAzOR;;6BAAA;;GADiC,oBAAnC;;AAAA,qBA4OA,GAAwB,SAAC,SAAD,EAAY,YAAZ,EAA0B,KAA1B,EAAiC,MAAjC,EAAyC,CAAzC,EAA4C,CAA5C;AACpB;AAAA,mBAAiB,EAAjB;AAAA,EAGA,eAAe,QAAM,CAHrB;AAAA,EAIA,gBAAgB,SAAO,IAAP,wBAAY,SAAS,CAAE,gBAJvC;AAAA,EAOA,OAAO,IAPP;AAQA,SAAM,IAAN;AACE,WAAO,KAAP;AACA,SAAS,+FAAT;AACE,WAAS,uGAAT;AACE,eAAO,oBAAoB,SAAU,GAAG,GAAjC,EAAqC,YAArC,CAAP;AAAA,QACA,YAAY,IAAK,GADjB;AAAA,QAEA,aAAa,IAAK,GAFlB;AAGA,YAAG,YAAY,YAAZ,IAA4B,aAAa,aAA5C;AACE,0BAAgB,CAAhB;AAAA,UACA,OAAO,IADP,CADF;SAJF;AAAA,OADF;AAAA,KAFF;EAAA,CARA;AAAA,EAkBA,cAAc,CAAC,IAAf,CAAoB,YAApB,CAlBA;AAAA,EAqBA,eAAe,CArBf;AAAA,EAsBA,gBAAgB,CAtBhB;AAAA,EAuBA,gBAAgB,CAvBhB;AAwBA;wBAAA;AACE,WAAO,oBAAoB,IAAK,GAAzB,EAA6B,YAA7B,CAAP;AAAA,IACA,YAAY,IAAK,GADjB;AAAA,IAEA,aAAa,IAAK,GAFlB;AAGA,QAAG,YAAY,YAAf;AACE,qBAAe,SAAf,CADF;KAHA;AAKA,QAAG,aAAa,aAAhB;AACE,sBAAgB,UAAhB,CADF;KALA;AAAA,IAOA,OAAO,oBAAoB,IAAK,GAAzB,EAA6B,YAA7B,CAPP;AAAA,IAQA,YAAY,IAAK,GARjB;AAAA,IASA,aAAa,IAAK,GATlB;AAUA,QAAG,YAAY,aAAf;AACE,sBAAgB,SAAhB,CADF;KAVA;AAYA,QAAG,aAAa,aAAhB;AACE,sBAAgB,UAAhB,CADF;KAbF;AAAA,GAxBA;AAAA,EAwCA,OAAO,oBAAoB,GAApB,EAAyB,YAAzB,CAxCP;AAAA,EAyCA,YAAY,IAAK,GAzCjB;AAAA,EA0CA,aAAa,IAAK,GA1ClB;AAAA,EA2CA,gBAAgB,SA3ChB;AAAA,EA4CA,cAAc,CAAC,IAAf,CAAoB,YAApB,EAAkC,aAAlC,EAAiD,aAAjD,EAAgE,aAAhE,CA5CA;SA6CA,eA9CoB;AAAA,CA5OxB;;AAAA,mBA6RE,GAAsB,SAAC,MAAD,EAAS,QAAT;AACpB;AAAA,UAAQ,QAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAR;AAAA,EACA,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,UAAnB,GAAgC,QADhC;AAAA,EAEA,KAAK,KAAK,CAAC,IAAN,CAAW,CAAX,EAAc,CAAd,EAAiB,MAAjB,CAFL;AAAA,EAGA,EAAE,CAAC,IAAH,CAAQ,aAAR,EAAuB,OAAvB,CAHA;AAAA,EAIA,EAAE,CAAC,IAAH,CAAQ,WAAR,EAAqB,QAArB,CAJA;AAAA,EAKA,OAAO,EAAE,CAAC,OAAH,EALP;AAAA,EAMA,KAAK,CAAC,MAAN,EANA;AAAA,EAOA,YAAY,EAPZ;AAAA,EAQA,SAAS,CAAC,IAAV,CAAe,IAAI,CAAC,KAApB,CARA;AAAA,EASA,SAAS,CAAC,IAAV,CAAe,IAAI,CAAC,MAApB,CATA;AAAA,EAUA,KAAK,CAAC,MAAN,EAVA;SAWA,UAZoB;AAAA,CA7RxB","file":"/client/whiteboard_models/whiteboard_poll.coffee.js","sourcesContent":["# A poll in the whiteboard\r\nclass @WhiteboardPollModel extends WhiteboardToolModel\r\n  constructor: (@paper) ->\r\n    super @paper\r\n\r\n    # the defintion of this shape, kept so we can redraw the shape whenever needed\r\n    # format: x1, y1, x2, y2, stroke color, thickness, fill\r\n    @definition = [0, 0, 0, 0, \"#333333\", \"2px\", \"#ffffff\"]\r\n    @paper\r\n\r\n  # Creates a polling in the paper\r\n  # @param  {number} x1                the x value of the top left corner\r\n  # @param  {number} y1                the y value of the top left corner\r\n  # @param  {number} x2                the x value of the bottom right corner\r\n  # @param  {number} y2                the y value of the bottom right corner\r\n  # @param  {number} thickness         the thickness of the object's line(s)\r\n  # @param  {string} backgroundColor   the background color of the base poll rectangle\r\n  # @param  {number} calcFontSize      the default font-size of the text objects\r\n  make: (startingData) =>\r\n    #data needed to create the first base rectangle filled with white color\r\n    x1 = startingData.points[0]\r\n    y1 = startingData.points[1]\r\n    x2 = startingData.points[2] + startingData.points[0] - 0.001\r\n    y2 = startingData.points[3] + startingData.points[1] - 0.001\r\n    thickness = 2\r\n    backgroundColor = \"#ffffff\"\r\n    verticalPadding = 0\r\n    horizontalPadding = 0\r\n    calcFontSize = 30\r\n    votesTotal = 0\r\n    maxNumVotes = 0\r\n    textArray = []\r\n\r\n    #creating an array of text objects for the labels, percentages and number inside line bars\r\n    if startingData.result?\r\n      #counting the total number of votes and finding the biggest number of votes\r\n      for i in [0..startingData.result.length-1]\r\n        votesTotal += startingData.result[i].num_votes\r\n        if maxNumVotes < startingData.result[i].num_votes\r\n          maxNumVotes = startingData.result[i].num_votes\r\n        textArray[i] = []\r\n      #filling the array with proper text objects to display\r\n      for i in [0..startingData.result.length-1]\r\n        textArray[i].push(startingData.result[i].key, startingData.result[i].num_votes+\"\")\r\n        if votesTotal is 0\r\n          textArray[i].push(\"0%\")\r\n        else\r\n          percResult = startingData.result[i].num_votes/votesTotal*100;\r\n          textArray[i].push(Math.round(percResult) + \"%\")\r\n\r\n    #if coordinates are reversed - change them back\r\n    if x2 < x1\r\n        [x1, x2] = [x2, x1]\r\n    if y2 < y1\r\n      [y1, y2] = [y2, y1]\r\n\r\n    #Params:\r\n    #x      - the actual calculated x value of the top left corner of the polling area\r\n    #y      - the actual calculated y value of the top left corner of the polling area\r\n    #width  - the width of the polling area\r\n    #height - the height of the polling area\r\n    x = x1 * @gw + @xOffset\r\n    y = y1 * @gh + @yOffset\r\n    width = (x2 * @gw + @xOffset) - x\r\n    height = (y2 * @gh + @yOffset) - y\r\n\r\n    #creating a base outer rectangle\r\n    @obj = @paper.rect(x, y, width, height, 0)\r\n    @obj.attr \"fill\", backgroundColor\r\n    @obj.attr \"stroke-width\", 0\r\n    @definition =\r\n      shape: \"poll_result\"\r\n      data: [x1, y1, x2, y2, @obj.attrs[\"stroke\"], @obj.attrs[\"stroke-width\"], @obj.attrs[\"fill\"]]\r\n\r\n    #recalculated coordinates, width and height for the inner rectangle\r\n    width = width*0.95\r\n    height = height - width*0.05\r\n    x = x+width*0.025\r\n    y = y+width*0.025\r\n\r\n    #creating a base inner rectangle\r\n    @obj1 = @paper.rect(x, y, width, height, 0)\r\n    @obj1.attr \"stroke\", \"#333333\"\r\n    @obj1.attr \"fill\", backgroundColor\r\n    @obj1.attr \"stroke-width\", zoomStroke(formatThickness(thickness))\r\n    @definition =\r\n      shape: \"poll_result\"\r\n      data: [x1, y1, x2, y2, @obj.attrs[\"stroke\"], @obj1.attrs[\"stroke-width\"], @obj1.attrs[\"fill\"]]\r\n\r\n    #Calculating a proper font-size, and the maximum widht and height of the objects\r\n    calculatedData = calculateFontAndWidth(textArray, calcFontSize, width, height, x, y)\r\n    calcFontSize = calculatedData[0]\r\n    maxLeftWidth = calculatedData[1]\r\n    maxRightWidth = calculatedData[2]\r\n    maxLineHeight = calculatedData[3]\r\n    maxDigitWidth = calculatedData[4]\r\n    maxBarWidth = width*0.9-maxLeftWidth-maxRightWidth\r\n    barHeight = height*0.75/textArray.length\r\n    svgNSi = \"http://www.w3.org/2000/svg\"\r\n\r\n    #Initializing a text element for further calculations and for the left column of keys\r\n    @obj2 = @paper.text(x, y, \"\")\r\n    @obj2.attr\r\n      \"fill\": \"#333333\"\r\n      \"font-family\": \"Arial\"\r\n      \"font-size\": calcFontSize\r\n    @obj2.node.style[\"text-anchor\"] = \"start\" # force left align\r\n    @obj2.node.style[\"textAnchor\"] = \"start\"  # for firefox, 'cause they like to be different\r\n    leftCell = @obj2.node\r\n    while leftCell? and leftCell.hasChildNodes()\r\n      leftCell.removeChild(leftCell.firstChild)\r\n\r\n    #Initializing a text element for the right column of percentages\r\n    @obj3 = @paper.text(x, y, \"\")\r\n    @obj3.attr\r\n      \"fill\": \"#333333\"\r\n      \"font-family\": \"Arial\"\r\n      \"font-size\": calcFontSize\r\n    @obj3.node.style[\"text-anchor\"] = \"end\" # force right align\r\n    @obj3.node.style[\"textAnchor\"] = \"end\"  # for firefox, 'cause they like to be different\r\n    rightCell = @obj3.node\r\n    while rightCell? and rightCell.hasChildNodes()\r\n      rightCell.removeChild(rightCell.firstChild)\r\n\r\n\r\n    #setting a font size for the text elements on the left and on the right\r\n    leftCell.style['font-size'] = calcFontSize\r\n    rightCell.style['font-size'] = calcFontSize\r\n    #Horizontal padding\r\n    horizontalPadding = width*0.1/4\r\n    #Vertical padding\r\n    verticalPadding = height*0.25/(textArray.length+1)\r\n\r\n    #*****************************************************************************************************\r\n    #******************************************MAGIC NUMBER***********************************************\r\n    #There is no automatic vertical centering in SVG.\r\n    #To center the text element we have to move it down by the half of its height.\r\n    #But every text element has its own padding by default.\r\n    #The height we receive by calling getBBox() includes padding, but the anchor point doesn't consider it.\r\n    #This way the text element is moved down a little bit too much and we have to move it up a bit.\r\n    #Number 3.5 seems to work fine.\r\n    # Oleksandr Zhurbenko. August 19, 2015\r\n    magicNumber = 3.5\r\n    #*****************************************************************************************************\r\n\r\n    #Initial coordinates of the key column\r\n    yLeft = y+verticalPadding+barHeight/2 - magicNumber\r\n    xLeft = x + horizontalPadding + 1\r\n    #Initial coordinates of the line bar column\r\n    xBar = x+maxLeftWidth+horizontalPadding*2\r\n    yBar = y + verticalPadding\r\n    #Initial coordinates of the percentage column\r\n    yRight = y+verticalPadding+barHeight/2 - magicNumber\r\n    xRight = x + horizontalPadding*3 + maxLeftWidth + maxRightWidth + maxBarWidth + 1\r\n    objects = [@obj, @obj1, @obj2, @obj3]\r\n\r\n    for i in [0..textArray.length-1]\r\n      #Adding an element to the left column\r\n      tempSpanEl = document.createElementNS(svgNSi, \"tspan\")\r\n      tempSpanEl.setAttributeNS null, \"x\", xLeft\r\n      tempSpanEl.setAttributeNS null, \"y\", yLeft\r\n      tempSpanEl.setAttributeNS null, \"dy\", maxLineHeight/2\r\n      tempTextNode = document.createTextNode(textArray[i][0])\r\n      tempSpanEl.appendChild tempTextNode\r\n      leftCell.appendChild tempSpanEl\r\n\r\n      #drawing a black graph bar\r\n      if maxNumVotes is 0 or startingData.result[i].num_votes is 0\r\n        barWidth = 2\r\n      else\r\n        barWidth = startingData.result[i].num_votes / maxNumVotes * maxBarWidth\r\n      @obj4 = @paper.rect(xBar, yBar, barWidth, barHeight, 0)\r\n      @obj4.attr \"stroke\", \"#333333\"\r\n      @obj4.attr \"fill\", \"#333333\"\r\n      @obj4.attr \"stroke-width\", zoomStroke(formatThickness(0))\r\n      objects.push @obj4\r\n\r\n      #Adding an element to the right column\r\n      tempSpanEl = document.createElementNS(svgNSi, \"tspan\")\r\n      tempSpanEl.setAttributeNS null, \"x\", xRight\r\n      tempSpanEl.setAttributeNS null, \"y\", yRight\r\n      tempSpanEl.setAttributeNS null, \"dy\", maxLineHeight/2\r\n      tempTextNode = document.createTextNode(textArray[i][2])\r\n      tempSpanEl.appendChild tempTextNode\r\n      rightCell.appendChild tempSpanEl\r\n\r\n      #changing the Y coordinate for all the objects\r\n      yBar = yBar + barHeight + verticalPadding\r\n      yLeft = yLeft + barHeight + verticalPadding\r\n      yRight = yRight + barHeight + verticalPadding\r\n\r\n    #Initializing a text element for the number of votes text field inside the line bar\r\n    @obj5 = @paper.text(x, y, \"\")\r\n    @obj5.attr\r\n      \"fill\": \"#333333\"\r\n      \"font-family\": \"Arial\"\r\n      \"font-size\": calcFontSize\r\n    centerCell = @obj5.node\r\n    while centerCell? and centerCell.hasChildNodes()\r\n      centerCell.removeChild(centerCell.firstChild)\r\n\r\n    #Initial coordinates of the text inside the bar column\r\n    xNumVotesDefault = x+maxLeftWidth+horizontalPadding*2\r\n    xNumVotesMovedRight = xNumVotesDefault + barWidth/2 + horizontalPadding + maxDigitWidth/2\r\n    yNumVotes = y + verticalPadding - magicNumber\r\n    color = \"white\"\r\n    #Drawing the text element with the number of votes inside of the black line bars\r\n    #Or outside if a line bar is too small\r\n    for i in [0..textArray.length-1]\r\n      if maxNumVotes is 0 or startingData.result[i].num_votes is 0\r\n        barWidth = 2\r\n      else\r\n        barWidth = startingData.result[i].num_votes / maxNumVotes * maxBarWidth\r\n      if barWidth < maxDigitWidth + 8\r\n        xNumVotes = xNumVotesMovedRight\r\n        color = \"#333333\"\r\n      else\r\n        xNumVotes = xNumVotesDefault\r\n        color = \"white\"\r\n\r\n      tempSpanEl = document.createElementNS(svgNSi, \"tspan\")\r\n      tempSpanEl.setAttributeNS null, \"x\", xNumVotes + barWidth/2\r\n      tempSpanEl.setAttributeNS null, \"y\", yNumVotes + barHeight/2\r\n      tempSpanEl.setAttributeNS null, \"dy\", maxLineHeight/2\r\n      tempSpanEl.setAttributeNS null, \"fill\", color\r\n      tempTextNode = document.createTextNode(startingData.result[i].num_votes)\r\n      tempSpanEl.appendChild tempTextNode\r\n      centerCell.appendChild tempSpanEl\r\n      yNumVotes = yNumVotes + barHeight + verticalPadding\r\n\r\n    objects.push @obj5\r\n    objects\r\n\r\n\r\n  # Update the poll dimensions. Does nothing.\r\n  update: (startingData) ->\r\n\r\ncalculateFontAndWidth = (textArray, calcFontSize, width, height, x, y) ->\r\n    calculatedData = []\r\n    #maximum line width can be either 1/3 of the line or 40px\r\n    #maximum line height is 75% of the initial size of the box divided by the number of lines\r\n    maxLineWidth = width/3\r\n    maxLineHeight = height*0.75/textArray?.length\r\n\r\n    #calculating a proper font-size\r\n    flag = true\r\n    while flag\r\n      flag = false\r\n      for i in [0..textArray.length-1]\r\n        for j in [0..textArray[i].length-1]\r\n          test = getRenderedTextSize(textArray[i][j], calcFontSize)\r\n          spanWidth = test[0]\r\n          spanHeight = test[1]\r\n          if spanWidth > maxLineWidth or spanHeight > maxLineHeight\r\n            calcFontSize -= 1\r\n            flag = true\r\n    calculatedData.push calcFontSize\r\n\r\n    #looking for a maximum width and height of the left and right text elements\r\n    maxLeftWidth = 0\r\n    maxRightWidth = 0\r\n    maxLineHeight = 0\r\n    for line in textArray\r\n      test = getRenderedTextSize(line[0], calcFontSize)\r\n      spanWidth = test[0]\r\n      spanHeight = test[1]\r\n      if spanWidth > maxLeftWidth\r\n        maxLeftWidth = spanWidth\r\n      if spanHeight > maxLineHeight\r\n        maxLineHeight = spanHeight\r\n      test = getRenderedTextSize(line[2], calcFontSize)\r\n      spanWidth = test[0]\r\n      spanHeight = test[1]\r\n      if spanWidth > maxRightWidth\r\n        maxRightWidth = spanWidth\r\n      if spanHeight > maxLineHeight\r\n        maxLineHeight = spanHeight\r\n\r\n    test = getRenderedTextSize(\"0\", calcFontSize)\r\n    spanWidth = test[0]\r\n    spanHeight = test[1]\r\n    maxDigitWidth = spanWidth\r\n    calculatedData.push maxLeftWidth, maxRightWidth, maxLineHeight, maxDigitWidth\r\n    calculatedData\r\n\r\n\r\n  getRenderedTextSize = (string, fontSize) ->\r\n    paper = Raphael(0, 0, 0, 0)\r\n    paper.canvas.style.visibility = 'hidden'\r\n    el = paper.text(0, 0, string)\r\n    el.attr \"font-family\", \"Arial\"\r\n    el.attr \"font-size\", fontSize\r\n    bBox = el.getBBox()\r\n    paper.remove()\r\n    arrayTest = []\r\n    arrayTest.push bBox.width\r\n    arrayTest.push bBox.height\r\n    paper.remove()\r\n    arrayTest\r\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/whiteboard_models/whiteboard_rect.coffee.js                  //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;                                         //\n                                                                       //\nthis.WhiteboardRectModel = (function(superClass) {                     // 2\n  extend(WhiteboardRectModel, superClass);                             // 3\n                                                                       //\n  function WhiteboardRectModel(paper) {                                // 3\n    this.paper = paper;                                                // 4\n    this.make = bind(this.make, this);                                 // 4\n    WhiteboardRectModel.__super__.constructor.call(this, this.paper);  // 4\n    this.definition = [0, 0, 0, 0, \"#000\", \"0px\"];                     // 4\n    this.paper;                                                        // 4\n  }                                                                    //\n                                                                       //\n  WhiteboardRectModel.prototype.make = function(startingData) {        // 3\n    var color, thickness, x, y;                                        // 17\n    x = startingData.points[0];                                        // 17\n    y = startingData.points[1];                                        // 17\n    color = startingData.color;                                        // 17\n    thickness = startingData.thickness;                                // 17\n    this.obj = this.paper.rect(x * this.gw + this.xOffset, y * this.gh + this.yOffset, 0, 0, 1);\n    this.obj.attr(\"stroke\", formatColor(color));                       // 17\n    this.obj.attr(\"stroke-width\", zoomStroke(formatThickness(thickness)));\n    this.definition = {                                                // 17\n      shape: \"rect\",                                                   // 26\n      data: [x, y, 0, 0, this.obj.attrs[\"stroke\"], this.obj.attrs[\"stroke-width\"]]\n    };                                                                 //\n    return this.obj;                                                   //\n  };                                                                   //\n                                                                       //\n  WhiteboardRectModel.prototype.update = function(startingData) {      // 3\n    var height, ref, ref1, reversed, square, width, x, x1, x2, y, y1, y2;\n    x1 = startingData.points[0];                                       // 38\n    y1 = startingData.points[1];                                       // 38\n    x2 = startingData.points[2];                                       // 38\n    y2 = startingData.points[3];                                       // 38\n    square = startingData.square;                                      // 38\n    if (this.obj != null) {                                            // 44\n      if (x2 < x1) {                                                   // 45\n        ref = [x2, x1], x1 = ref[0], x2 = ref[1];                      // 45\n      }                                                                //\n      if (y2 < y1) {                                                   // 47\n        ref1 = [y2, y1], y1 = ref1[0], y2 = ref1[1];                   // 48\n        reversed = true;                                               // 48\n      }                                                                //\n      if (square) {                                                    // 51\n        if (reversed) {                                                // 52\n          y1 = y2 - (x2 - x1) * this.gw / this.gh;                     // 53\n        } else {                                                       //\n          y2 = y1 + (x2 - x1) * this.gw / this.gh;                     // 55\n        }                                                              //\n      }                                                                //\n      x = x1 * this.gw + this.xOffset;                                 // 45\n      y = y1 * this.gh + this.yOffset;                                 // 45\n      width = (x2 * this.gw + this.xOffset) - x;                       // 45\n      height = (y2 * this.gh + this.yOffset) - y;                      // 45\n      this.obj.attr({                                                  // 45\n        x: x,                                                          // 63\n        y: y,                                                          // 63\n        width: width,                                                  // 63\n        height: height                                                 // 63\n      });                                                              //\n                                                                       // 67\n      /*else                                                           // 67\n        @obj.attr                                                      //\n          x: x                                                         //\n          y: y                                                         //\n          width: width                                                 //\n          height: width                                                //\n       */                                                              //\n      this.definition.data[0] = x1;                                    // 45\n      this.definition.data[1] = y1;                                    // 45\n      this.definition.data[2] = x2;                                    // 45\n      return this.definition.data[3] = y2;                             //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardRectModel.prototype.draw = function(x1, y1, x2, y2, colour, thickness) {\n    var r, ref, ref1, x, y;                                            // 88\n    if (x2 < x1) {                                                     // 88\n      ref = [x2, x1], x1 = ref[0], x2 = ref[1];                        // 88\n    }                                                                  //\n    if (y2 < y1) {                                                     // 89\n      ref1 = [y2, y1], y1 = ref1[0], y2 = ref1[1];                     // 89\n    }                                                                  //\n    x = x1 * this.gw;                                                  // 88\n    y = y1 * this.gh;                                                  // 88\n    r = this.paper.rect(x + this.xOffset, y + this.yOffset, (x2 * this.gw) - x, (y2 * this.gh) - y, 1);\n    r.attr(Meteor.call(\"strokeAndThickness\", colour, thickness));      // 88\n    return r;                                                          //\n  };                                                                   //\n                                                                       //\n  WhiteboardRectModel.prototype.dragOnStart = function(x, y) {};       // 3\n                                                                       //\n  WhiteboardRectModel.prototype.dragOnMove = function(dx, dy, x, y, e) {};\n                                                                       //\n  WhiteboardRectModel.prototype.dragOnEnd = function(e) {};            // 3\n                                                                       //\n  return WhiteboardRectModel;                                          //\n                                                                       //\n})(WhiteboardToolModel);                                               //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/whiteboard_models/whiteboard_rect.coffee.js","sourceMap":{"version":3,"sources":["/client/whiteboard_models/whiteboard_rect.coffee"],"names":[],"mappings":"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","file":"/client/whiteboard_models/whiteboard_rect.coffee.js","sourcesContent":["# A rectangle in the whiteboard\nclass @WhiteboardRectModel extends WhiteboardToolModel\n  constructor: (@paper) ->\n    super @paper\n\n    # the defintion of this shape, kept so we can redraw the shape whenever needed\n    # format: x1, y1, x2, y2, stroke color, thickness\n    @definition = [0, 0, 0, 0, \"#000\", \"0px\"]\n    @paper\n\n  # Creates a rectangle in the paper\n  # @param  {number} x         the x value of the top left corner\n  # @param  {number} y         the y value of the top left corner\n  # @param  {string} colour    the colour of the object\n  # @param  {number} thickness the thickness of the object's line(s)\n  make: (startingData) =>\n    x = startingData.points[0]\n    y = startingData.points[1]\n    color = startingData.color\n    thickness = startingData.thickness\n\n    @obj = @paper.rect(x * @gw + @xOffset, y * @gh + @yOffset, 0, 0, 1)\n    @obj.attr \"stroke\", formatColor(color)\n    @obj.attr \"stroke-width\", zoomStroke(formatThickness(thickness))\n    @definition =\n      shape: \"rect\"\n      data: [x, y, 0, 0, @obj.attrs[\"stroke\"], @obj.attrs[\"stroke-width\"]]\n    @obj\n\n  # Update the rectangle dimensions\n  # @param  {number} x1 the x value of the top left corner\n  # @param  {number} y1 the y value of the top left corner\n  # @param  {number} x2 the x value of the bottom right corner\n  # @param  {number} y2 the y value of the bottom right corner\n  # @param  {boolean} square (draw a square or not)\n  update: (startingData) ->\n\n    x1 = startingData.points[0]\n    y1 = startingData.points[1]\n    x2 = startingData.points[2]\n    y2 = startingData.points[3]\n\n    square = startingData.square\n    if @obj?\n      [x1, x2] = [x2, x1] if x2 < x1\n\n      if y2 < y1\n          [y1, y2] = [y2, y1]\n          reversed = true\n\n      if square\n          if reversed #if reveresed, the y1 coordinate gets updated, not the y2 coordinate\n              y1 = y2 - (x2 - x1) * @gw / @gh\n          else\n              y2 = y1 + (x2 - x1) * @gw / @gh\n\n      x = x1 * @gw + @xOffset\n      y = y1 * @gh + @yOffset\n      width = (x2 * @gw + @xOffset) - x\n      height = (y2 * @gh + @yOffset) - y\n      #if !square\n      @obj.attr\n        x: x\n        y: y\n        width: width\n        height: height\n      ###else\n        @obj.attr\n          x: x\n          y: y\n          width: width\n          height: width###\n\n      # we need to update all these values, specially for when shapes are drawn backwards\n      @definition.data[0] = x1\n      @definition.data[1] = y1\n      @definition.data[2] = x2\n      @definition.data[3] = y2\n\n  # Draw a rectangle on the paper\n  # @param  {number} x1        the x value of the top left corner\n  # @param  {number} y1        the y value of the top left corner\n  # @param  {number} x2        the x value of the bottom right corner\n  # @param  {number} y2        the y value of the bottom right corner\n  # @param  {string} colour    the colour of the object\n  # @param  {number} thickness the thickness of the object's line(s)\n  draw: (x1, y1, x2, y2, colour, thickness) ->\n    [x1, x2] = [x2, x1] if x2 < x1\n    [y1, y2] = [y2, y1] if y2 < y1\n\n    x = x1 * @gw\n    y = y1 * @gh\n    r = @paper.rect(x + @xOffset, y + @yOffset, (x2 * @gw) - x, (y2 * @gh) - y, 1)\n    r.attr Meteor.call(\"strokeAndThickness\", colour, thickness)\n    r\n\n  # Creating a rectangle has started\n  # @param  {number} x the x value of cursor at the time in relation to the left side of the browser\n  # @param  {number} y the y value of cursor at the time in relation to the top of the browser\n  # TODO: moved here but not finished\n  dragOnStart: (x, y) ->\n    # sx = (@paperWidth - @gw) / 2\n    # sy = (@paperHeight - @gh) / 2\n    # # find the x and y values in relation to the whiteboard\n    # @cx2 = (x - @containerOffsetLeft - sx + @xOffset) / @paperWidth\n    # @cy2 = (y - @containerOffsetTop - sy + @yOffset) / @paperHeight\n    # globals.connection.emitMakeShape \"rect\",\n    #   [ @cx2, @cy2, @currentColour, @currentThickness ]\n\n  # Adjusting rectangle continues\n  # @param  {number} dx the difference in the x value at the start as opposed to the x value now\n  # @param  {number} dy the difference in the y value at the start as opposed to the y value now\n  # @param  {number} x the x value of cursor at the time in relation to the left side of the browser\n  # @param  {number} y the y value of cursor at the time in relation to the top of the browser\n  # @param  {Event} e  the mouse event\n  # TODO: moved here but not finished\n  dragOnMove: (dx, dy, x, y, e) ->\n    # # if shift is pressed, make it a square\n    # dy = dx if @shiftPressed\n    # dx = dx / @paperWidth\n    # dy = dy / @paperHeight\n    # # adjust for negative values as well\n    # if dx >= 0\n    #   x1 = @cx2\n    # else\n    #   x1 = @cx2 + dx\n    #   dx = -dx\n    # if dy >= 0\n    #   y1 = @cy2\n    # else\n    #   y1 = @cy2 + dy\n    #   dy = -dy\n    # globals.connection.emitUpdateShape \"rect\", [ x1, y1, dx, dy ]\n\n  # When rectangle finished being drawn\n  # @param  {Event} e the mouse event\n  # TODO: moved here but not finished\n  dragOnEnd: (e) ->\n    # if @obj?\n    #   attrs = @obj.attrs\n    #   if attrs?\n    #     globals.connection.emitPublishShape \"rect\",\n    #       [ attrs.x / @gw, attrs.y / @gh, attrs.width / @gw, attrs.height / @gh,\n    #         @currentColour, @currentThickness ]\n    # @obj = null\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/whiteboard_models/whiteboard_slide.coffee.js                 //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nthis.WhiteboardSlideModel = (function() {                              // 2\n  function WhiteboardSlideModel(id, url, img, originalWidth, originalHeight, displayWidth, displayHeight, xOffset, yOffset) {\n    this.id = id;                                                      // 5\n    this.url = url;                                                    // 5\n    this.img = img;                                                    // 5\n    this.originalWidth = originalWidth;                                // 5\n    this.originalHeight = originalHeight;                              // 5\n    this.displayWidth = displayWidth;                                  // 5\n    this.displayHeight = displayHeight;                                // 5\n    this.xOffset = xOffset != null ? xOffset : 0;                      // 5\n    this.yOffset = yOffset != null ? yOffset : 0;                      // 5\n  }                                                                    //\n                                                                       //\n  WhiteboardSlideModel.prototype.getWidth = function() {               // 5\n    return this.displayWidth;                                          //\n  };                                                                   //\n                                                                       //\n  WhiteboardSlideModel.prototype.getHeight = function() {              // 5\n    return this.displayHeight;                                         //\n  };                                                                   //\n                                                                       //\n  WhiteboardSlideModel.prototype.getOriginalWidth = function() {       // 5\n    return this.originalWidth;                                         //\n  };                                                                   //\n                                                                       //\n  WhiteboardSlideModel.prototype.getOriginalHeight = function() {      // 5\n    return this.originalHeight;                                        //\n  };                                                                   //\n                                                                       //\n  WhiteboardSlideModel.prototype.getId = function() {                  // 5\n    return this.id;                                                    //\n  };                                                                   //\n                                                                       //\n  WhiteboardSlideModel.prototype.getDimensions = function() {          // 5\n    return [this.getWidth(), this.getHeight()];                        //\n  };                                                                   //\n                                                                       //\n  WhiteboardSlideModel.prototype.getOriginalDimensions = function() {  // 5\n    return [this.getOriginalWidth(), this.getOriginalHeight()];        //\n  };                                                                   //\n                                                                       //\n  WhiteboardSlideModel.prototype.getOffsets = function() {             // 5\n    return [this.xOffset, this.yOffset];                               //\n  };                                                                   //\n                                                                       //\n  return WhiteboardSlideModel;                                         //\n                                                                       //\n})();                                                                  //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/whiteboard_models/whiteboard_slide.coffee.js","sourceMap":{"version":3,"sources":["/client/whiteboard_models/whiteboard_slide.coffee"],"names":[],"mappings":";;;;;;;;;AACA,IAAO;AAGQ,gCAAC,EAAD,EAAM,GAAN,EAAY,GAAZ,EAAkB,aAAlB,EAAkC,cAAlC,EAAmD,YAAnD,EAAkE,aAAlE,EAAkF,OAAlF,EAA8F,OAA9F;AAA2G,IAA1G,IAAC,MAAD,EAA0G;AAAA,IAArG,IAAC,OAAD,GAAqG;AAAA,IAA/F,IAAC,OAAD,GAA+F;AAAA,IAAzF,IAAC,iBAAD,aAAyF;AAAA,IAAzE,IAAC,kBAAD,cAAyE;AAAA,IAAxD,IAAC,gBAAD,YAAwD;AAAA,IAAzC,IAAC,iBAAD,aAAyC;AAAA,IAAzB,IAAC,6BAAD,UAAS,CAAgB;AAAA,IAAb,IAAC,6BAAD,UAAS,CAAI,CAA3G;EAAA,CAAb;;AAAA,iCAEA,WAAU;WAAG,IAAC,cAAJ;EAAA,CAFV;;AAAA,iCAIA,YAAW;WAAG,IAAC,eAAJ;EAAA,CAJX;;AAAA,iCAMA,mBAAkB;WAAG,IAAC,eAAJ;EAAA,CANlB;;AAAA,iCAQA,oBAAmB;WAAG,IAAC,gBAAJ;EAAA,CARnB;;AAAA,iCAUA,QAAO;WAAG,IAAC,IAAJ;EAAA,CAVP;;AAAA,iCAYA,gBAAe;WAAG,CAAC,IAAC,SAAD,EAAD,EAAc,IAAC,UAAD,EAAd,EAAH;EAAA,CAZf;;AAAA,iCAcA,wBAAuB;WAAG,CAAC,IAAC,iBAAD,EAAD,EAAsB,IAAC,kBAAD,EAAtB,EAAH;EAAA,CAdvB;;AAAA,iCAgBA,aAAY;WAAG,CAAC,IAAC,QAAF,EAAW,IAAC,QAAZ,EAAH;EAAA,CAhBZ;;8BAAA;;IAHF","file":"/client/whiteboard_models/whiteboard_slide.coffee.js","sourcesContent":["# A slide in the whiteboard\nclass @WhiteboardSlideModel\n\n  # TODO: check if we really need original and display width and heights separate or if they can be the same\n  constructor: (@id, @url, @img, @originalWidth, @originalHeight, @displayWidth, @displayHeight, @xOffset=0, @yOffset=0) ->\n\n  getWidth: -> @displayWidth\n\n  getHeight: -> @displayHeight\n\n  getOriginalWidth: -> @originalWidth\n\n  getOriginalHeight: -> @originalHeight\n\n  getId: -> @id\n\n  getDimensions: -> [@getWidth(), @getHeight()]\n\n  getOriginalDimensions: -> [@getOriginalWidth(), @getOriginalHeight()]\n\n  getOffsets: -> [@xOffset, @yOffset]\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/whiteboard_models/whiteboard_text.coffee.js                  //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;                                         //\n                                                                       //\nthis.WhiteboardTextModel = (function(superClass) {                     // 2\n  var checkDashPosition, checkWidth;                                   // 4\n                                                                       //\n  extend(WhiteboardTextModel, superClass);                             // 4\n                                                                       //\n  function WhiteboardTextModel(paper) {                                // 4\n    this.paper = paper;                                                // 5\n    WhiteboardTextModel.__super__.constructor.call(this, this.paper);  // 5\n    this.definition = [0, 0, 0, 0, \"#000\", 0, 0, \"\"];                  // 5\n  }                                                                    //\n                                                                       //\n  WhiteboardTextModel.prototype.make = function(startingData) {        // 4\n    var calcFontSize, colour, fontSize, height, text, width, x, y;     // 14\n    x = startingData.x;                                                // 14\n    y = startingData.y;                                                // 14\n    width = startingData.textBoxWidth;                                 // 14\n    height = startingData.textBoxHeight;                               // 14\n    colour = formatColor(startingData.fontColor);                      // 14\n    fontSize = startingData.fontSize;                                  // 14\n    calcFontSize = startingData.calcedFontSize;                        // 14\n    text = startingData.text;                                          // 14\n    this.definition = {                                                // 14\n      shape: \"text\",                                                   // 24\n      data: [x, y, width, height, colour, fontSize, calcFontSize, text]\n    };                                                                 //\n    x = (x * this.gw) + this.xOffset;                                  // 14\n    y = (y * this.gh) + this.yOffset + calcFontSize;                   // 14\n    width = width / 100 * this.gw;                                     // 14\n    this.obj = this.paper.text(x / 100, y / 100, \"\");                  // 14\n    this.obj.attr({                                                    // 14\n      \"fill\": colour,                                                  // 34\n      \"font-family\": \"Arial\",                                          // 34\n      \"font-size\": calcFontSize                                        // 34\n    });                                                                //\n    this.obj.node.style[\"text-anchor\"] = \"start\";                      // 14\n    this.obj.node.style[\"textAnchor\"] = \"start\";                       // 14\n    return this.obj;                                                   //\n  };                                                                   //\n                                                                       //\n  WhiteboardTextModel.prototype.update = function(startingData) {      // 4\n    var calcFontSize, cell, colour, computedTextLength, cumulY, curNumChars, dashArray, dashFound, dy, fontSize, height, i, indexPos, line, maxWidth, myText, myTextNode, result, svgNS, tempText, tspanEl, word, words, x, y;\n    x = startingData.x;                                                // 46\n    y = startingData.y;                                                // 46\n    maxWidth = startingData.textBoxWidth;                              // 46\n    height = startingData.textBoxHeight;                               // 46\n    colour = formatColor(startingData.fontColor);                      // 46\n    fontSize = startingData.fontSize;                                  // 46\n    calcFontSize = startingData.calcedFontSize;                        // 46\n    myText = startingData.text;                                        // 46\n    if (this.obj != null) {                                            // 55\n      this.definition.data = [x, y, maxWidth, height, colour, fontSize, calcFontSize, myText];\n      calcFontSize = calcFontSize / 100 * this.gh;                     // 56\n      x = (x * this.gw) / 100 + this.xOffset;                          // 56\n      maxWidth = maxWidth / 100 * this.gw;                             // 56\n      this.obj.attr({                                                  // 56\n        \"fill\": colour,                                                // 63\n        \"font-family\": \"Arial\",                                        // 63\n        \"font-size\": calcFontSize                                      // 63\n      });                                                              //\n      cell = this.obj.node;                                            // 56\n      while ((cell != null) && cell.hasChildNodes()) {                 // 67\n        cell.removeChild(cell.firstChild);                             // 68\n      }                                                                //\n      dashArray = new Array();                                         // 56\n      dashFound = true;                                                // 56\n      indexPos = 0;                                                    // 56\n      cumulY = 0;                                                      // 56\n      svgNS = \"http://www.w3.org/2000/svg\";                            // 56\n      while (dashFound === true) {                                     // 79\n        result = myText.indexOf(\"-\", indexPos);                        // 80\n        if (result === -1) {                                           // 81\n          dashFound = false;                                           // 83\n        } else {                                                       //\n          dashArray.push(result);                                      // 85\n          indexPos = result + 1;                                       // 85\n        }                                                              //\n      }                                                                //\n      words = myText.split(/[\\s-]/);                                   // 56\n      line = \"\";                                                       // 56\n      dy = 0;                                                          // 56\n      curNumChars = 0;                                                 // 56\n      computedTextLength = 0;                                          // 56\n      myTextNode = void 0;                                             // 56\n      tspanEl = void 0;                                                // 56\n      i = 0;                                                           // 56\n      words = checkWidth(words, maxWidth, x, dy, cell);                // 56\n      while (i < words.length) {                                       // 100\n        word = words[i];                                               // 101\n        curNumChars += word.length + 1;                                // 101\n        if (computedTextLength > maxWidth || i === 0) {                // 103\n          if (computedTextLength > maxWidth) {                         // 104\n            tempText = tspanEl.firstChild.nodeValue;                   // 105\n            tempText = tempText.slice(0, tempText.length - words[i - 1].length - 2);\n            tspanEl.firstChild.nodeValue = tempText;                   // 105\n          }                                                            //\n          if (i === 0) {                                               // 109\n            dy = calcFontSize;                                         // 110\n            cumulY += dy;                                              // 110\n          }                                                            //\n          tspanEl = document.createElementNS(svgNS, \"tspan\");          // 104\n          tspanEl.setAttributeNS(null, \"x\", x);                        // 104\n          tspanEl.setAttributeNS(null, \"dy\", dy);                      // 104\n          myTextNode = document.createTextNode(line);                  // 104\n          tspanEl.appendChild(myTextNode);                             // 104\n          cell.appendChild(tspanEl);                                   // 104\n          if (checkDashPosition(dashArray, curNumChars - 1)) {         // 119\n            line = word + \"-\";                                         // 120\n          } else {                                                     //\n            line = word + \" \";                                         // 122\n          }                                                            //\n          if (i !== 0) {                                               // 123\n            line = words[i - 1] + \" \" + line;                          // 123\n          }                                                            //\n          dy = calcFontSize;                                           // 104\n          cumulY += dy;                                                // 104\n        } else {                                                       //\n          if (checkDashPosition(dashArray, curNumChars - 1)) {         // 127\n            line += word + \"-\";                                        // 128\n          } else {                                                     //\n            line += word + \" \";                                        // 130\n          }                                                            //\n        }                                                              //\n        tspanEl.firstChild.nodeValue = line;                           // 101\n        computedTextLength = tspanEl.getComputedTextLength() + 10;     // 101\n        if (i === words.length - 1) {                                  // 133\n          if (computedTextLength > maxWidth) {                         // 134\n            tempText = tspanEl.firstChild.nodeValue;                   // 135\n            tspanEl.firstChild.nodeValue = tempText.slice(0, tempText.length - words[i].length - 1);\n            tspanEl = document.createElementNS(svgNS, \"tspan\");        // 135\n            tspanEl.setAttributeNS(null, \"x\", x);                      // 135\n            tspanEl.setAttributeNS(null, \"dy\", dy);                    // 135\n            myTextNode = document.createTextNode(words[i]);            // 135\n            tspanEl.appendChild(myTextNode);                           // 135\n            cell.appendChild(tspanEl);                                 // 135\n          }                                                            //\n        }                                                              //\n        i++;                                                           // 101\n      }                                                                //\n      return cumulY;                                                   //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  checkDashPosition = function(dashArray, pos) {                       // 4\n    var i, result;                                                     // 149\n    result = false;                                                    // 149\n    i = 0;                                                             // 149\n    while (i < dashArray.length) {                                     // 151\n      if (dashArray[i] === pos) {                                      // 152\n        result = true;                                                 // 152\n      }                                                                //\n      i++;                                                             // 152\n    }                                                                  //\n    return result;                                                     //\n  };                                                                   //\n                                                                       //\n  checkWidth = function(words, maxWidth, x, dy, cell) {                // 4\n    var count, num, partWord, start, str, svgNSi, temp, temp3, tempArray, tempSpanEl, tempTextNode, tempWord;\n    count = 0;                                                         // 158\n    temp = words;                                                      // 158\n    temp3 = [];                                                        // 158\n    str = \"\";                                                          // 158\n    svgNSi = \"http://www.w3.org/2000/svg\";                             // 158\n    tempSpanEl = document.createElementNS(svgNSi, \"tspan\");            // 158\n    tempSpanEl.setAttributeNS(null, \"x\", x);                           // 158\n    tempSpanEl.setAttributeNS(null, \"dy\", dy);                         // 158\n    tempTextNode = document.createTextNode(str);                       // 158\n    tempSpanEl.appendChild(tempTextNode);                              // 158\n    num = 0;                                                           // 158\n    while (num < temp.length) {                                        // 171\n      tempSpanEl.firstChild.nodeValue = temp[num];                     // 173\n      cell.appendChild(tempSpanEl);                                    // 173\n      if (tempSpanEl.getComputedTextLength() + 10 > maxWidth) {        // 176\n        tempWord = temp[num];                                          // 177\n        cell.removeChild(cell.firstChild);                             // 177\n        count = 1;                                                     // 177\n        start = 0;                                                     // 177\n        partWord = \"\" + tempWord[0];                                   // 177\n        tempArray = [];                                                // 177\n        while (count < tempWord.length) {                              // 186\n          partWord += tempWord[count];                                 // 187\n          tempSpanEl.firstChild.nodeValue = partWord;                  // 187\n          cell.appendChild(tempSpanEl);                                // 187\n          if (tempSpanEl.getComputedTextLength() + 10 > maxWidth) {    // 190\n            temp3.push(partWord.substring(0, partWord.length - 1));    // 191\n            partWord = \"\";                                             // 191\n            partWord += tempWord[count];                               // 191\n          }                                                            //\n          if (count === tempWord.length - 1) {                         // 194\n            temp3.push(partWord);                                      // 195\n          }                                                            //\n          while ((cell != null) && cell.hasChildNodes()) {             // 196\n            cell.removeChild(cell.firstChild);                         // 197\n          }                                                            //\n          count++;                                                     // 187\n        }                                                              //\n      } else {                                                         //\n        temp3.push(temp[num]);                                         // 200\n      }                                                                //\n      while ((cell != null) && cell.hasChildNodes()) {                 // 201\n        cell.removeChild(cell.firstChild);                             // 202\n      }                                                                //\n      num++;                                                           // 173\n    }                                                                  //\n    while ((cell != null) && cell.hasChildNodes()) {                   // 205\n      cell.removeChild(cell.firstChild);                               // 206\n    }                                                                  //\n    return temp3;                                                      //\n  };                                                                   //\n                                                                       //\n  return WhiteboardTextModel;                                          //\n                                                                       //\n})(WhiteboardToolModel);                                               //\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/whiteboard_models/whiteboard_text.coffee.js","sourceMap":{"version":3,"sources":["/client/whiteboard_models/whiteboard_text.coffee"],"names":[],"mappings":"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","file":"/client/whiteboard_models/whiteboard_text.coffee.js","sourcesContent":["# A text in the whiteboard\nclass @WhiteboardTextModel extends WhiteboardToolModel\n\n  constructor: (@paper) ->\n    super @paper\n    # the defintion of this shape, kept so we can redraw the shape whenever needed\n    # format: x, y, width, height, colour, fontSize, calcFontSize, text\n    @definition = [0, 0, 0, 0, \"#000\", 0, 0, \"\"]\n\n  # Make a text on the whiteboard\n  make: (startingData) ->\n    #console.log \"making text:\" + JSON.stringify startingData\n\n    x = startingData.x\n    y = startingData.y\n    width = startingData.textBoxWidth\n    height = startingData.textBoxHeight\n    colour = formatColor(startingData.fontColor)\n    fontSize = startingData.fontSize\n    calcFontSize = startingData.calcedFontSize\n    text = startingData.text\n\n    @definition =\n      shape: \"text\"\n      data: [x, y, width, height, colour, fontSize, calcFontSize, text]\n\n    #calcFontSize = (calcFontSize/100 * @gh)\n    x = (x * @gw) + @xOffset\n    y = (y * @gh) + @yOffset + calcFontSize\n    width = width/100 * @gw\n\n    @obj = @paper.text(x/100, y/100, \"\")\n    @obj.attr\n      \"fill\": colour\n      \"font-family\": \"Arial\" # TODO: make dynamic\n      \"font-size\": calcFontSize\n    @obj.node.style[\"text-anchor\"] = \"start\" # force left align\n    @obj.node.style[\"textAnchor\"] = \"start\"  # for firefox, 'cause they like to be different\n    @obj\n\n  # Update text shape drawn\n  # @param  {object} the object containing the shape info\n  update: (startingData) ->\n    #console.log \"updating text\" + JSON.stringify startingData\n\n    x = startingData.x\n    y = startingData.y\n    maxWidth = startingData.textBoxWidth\n    height = startingData.textBoxHeight\n    colour = formatColor(startingData.fontColor)\n    fontSize = startingData.fontSize\n    calcFontSize = startingData.calcedFontSize\n    myText = startingData.text\n\n    if @obj?\n      @definition.data = [x, y, maxWidth, height, colour, fontSize, calcFontSize, myText]\n\n      calcFontSize = (calcFontSize/100 * @gh)\n      x = (x * @gw)/100 + @xOffset\n      maxWidth = maxWidth/100 * @gw\n\n      @obj.attr\n        \"fill\": colour\n        \"font-family\": \"Arial\" # TODO: make dynamic\n        \"font-size\": calcFontSize\n      cell = @obj.node\n      while cell? and cell.hasChildNodes()\n        cell.removeChild(cell.firstChild)\n\n      # used code from textFlow lib http://www.carto.net/papers/svg/textFlow/\n      # but had to merge it here because \"cell\" was bigger than what the stack could take\n\n      #extract and add line breaks for start\n      dashArray = new Array()\n      dashFound = true\n      indexPos = 0\n      cumulY = 0\n      svgNS = \"http://www.w3.org/2000/svg\"\n      while dashFound is true\n        result = myText.indexOf(\"-\", indexPos)\n        if result is -1\n          #could not find a dash\n          dashFound = false\n        else\n          dashArray.push result\n          indexPos = result + 1\n      #split the text at all spaces and dashes\n      words = myText.split(/[\\s-]/)\n      line = \"\"\n      dy = 0\n      curNumChars = 0\n      computedTextLength = 0\n      myTextNode = undefined\n      tspanEl = undefined\n      i = 0\n\n      #checking if any of the words exceed the width of a textBox\n      words = checkWidth(words, maxWidth, x, dy, cell)\n\n      while i < words.length\n        word = words[i]\n        curNumChars += word.length + 1\n        if computedTextLength > maxWidth or i is 0\n          if computedTextLength > maxWidth\n            tempText = tspanEl.firstChild.nodeValue\n            tempText = tempText.slice(0, (tempText.length - words[i - 1].length - 2)) #the -2 is because we also strip off white space\n            tspanEl.firstChild.nodeValue = tempText\n          #setting up coordinates for the first line of text\n          if i is 0\n            dy = calcFontSize\n            cumulY += dy\n          #alternatively one could use textLength and lengthAdjust, however, currently this is not too well supported in SVG UA's\n          tspanEl = document.createElementNS(svgNS, \"tspan\")\n          tspanEl.setAttributeNS null, \"x\", x\n          tspanEl.setAttributeNS null, \"dy\", dy\n          myTextNode = document.createTextNode(line)\n          tspanEl.appendChild myTextNode\n          cell.appendChild tspanEl\n          if checkDashPosition(dashArray, curNumChars - 1)\n            line = word + \"-\"\n          else\n            line = word + \" \"\n          line = words[i - 1] + \" \" + line  unless i is 0\n          dy = calcFontSize\n          cumulY += dy\n        else\n          if checkDashPosition(dashArray, curNumChars - 1)\n            line += word + \"-\"\n          else\n            line += word + \" \"\n        tspanEl.firstChild.nodeValue = line\n        computedTextLength = tspanEl.getComputedTextLength()+10\n        if i is words.length - 1\n          if computedTextLength > maxWidth\n            tempText = tspanEl.firstChild.nodeValue\n            tspanEl.firstChild.nodeValue = tempText.slice(0, (tempText.length - words[i].length - 1))\n            tspanEl = document.createElementNS(svgNS, \"tspan\")\n            tspanEl.setAttributeNS null, \"x\", x\n            tspanEl.setAttributeNS null, \"dy\", dy\n            myTextNode = document.createTextNode(words[i])\n            tspanEl.appendChild myTextNode\n            cell.appendChild tspanEl\n        i++\n      cumulY\n\n\n  #this function checks if there should be a dash at the given position, instead of a blank\n  checkDashPosition = (dashArray, pos) ->\n    result = false\n    i = 0\n    while i < dashArray.length\n      result = true  if dashArray[i] is pos\n      i++\n    result\n  #this function checks the width of the word and adds a \" \" if the width of the word exceeds the width of the textbox\n  #in order for the word to be split and shown properly\n  checkWidth = (words, maxWidth, x, dy, cell) ->\n    count = 0\n    temp = words\n    temp3 = []\n    str = \"\"\n\n    svgNSi = \"http://www.w3.org/2000/svg\"\n    tempSpanEl = document.createElementNS(svgNSi, \"tspan\")\n    tempSpanEl.setAttributeNS null, \"x\", x\n    tempSpanEl.setAttributeNS null, \"dy\", dy\n    tempTextNode = document.createTextNode(str)\n    tempSpanEl.appendChild tempTextNode\n\n    num = 0\n    while num < temp.length\n      #creating a textNode and adding it to the cell to check the width\n      tempSpanEl.firstChild.nodeValue = temp[num]\n      cell.appendChild tempSpanEl\n      #if width is bigger than maxWidth + whitespace between textBox borders and a word\n      if tempSpanEl.getComputedTextLength()+10 > maxWidth\n        tempWord = temp[num]\n        cell.removeChild(cell.firstChild)\n\n        #initializing temp variables\n        count = 1\n        start = 0\n        partWord = \"\" + tempWord[0]\n        tempArray = []\n        #check the width by increasing the word character by character\n        while count < tempWord.length\n          partWord += tempWord[count]\n          tempSpanEl.firstChild.nodeValue = partWord\n          cell.appendChild tempSpanEl\n          if tempSpanEl.getComputedTextLength()+10 > maxWidth\n            temp3.push partWord.substring(0, partWord.length-1)\n            partWord = \"\"\n            partWord += tempWord[count]\n          if count is tempWord.length-1\n            temp3.push partWord\n          while cell? and cell.hasChildNodes()\n            cell.removeChild(cell.firstChild)\n          count++\n      else\n        temp3.push temp[num]\n      while cell? and cell.hasChildNodes()\n        cell.removeChild(cell.firstChild)\n      num++\n\n    while cell? and cell.hasChildNodes()\n      cell.removeChild(cell.firstChild)\n    temp3"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/whiteboard_models/whiteboard_triangle.coffee.js              //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;                                         //\n                                                                       //\nthis.WhiteboardTriangleModel = (function(superClass) {                 // 2\n  extend(WhiteboardTriangleModel, superClass);                         // 4\n                                                                       //\n  function WhiteboardTriangleModel(paper) {                            // 4\n    this.paper = paper;                                                // 5\n    WhiteboardTriangleModel.__super__.constructor.call(this, this.paper);\n    this.definition = [0, 0, 0, 0, \"#000\", \"0px\"];                     // 5\n  }                                                                    //\n                                                                       //\n  WhiteboardTriangleModel.prototype.make = function(info) {            // 4\n    var color, path, thickness, x, y;                                  // 17\n    if ((info != null ? info.points : void 0) != null) {               // 17\n      x = info.points[0];                                              // 18\n      y = info.points[1];                                              // 18\n      color = info.color;                                              // 18\n      thickness = info.thickness;                                      // 18\n      path = this._buildPath(x, y, x, y, x, y);                        // 18\n      this.obj = this.paper.path(path);                                // 18\n      this.obj.attr(\"stroke\", formatColor(color));                     // 18\n      this.obj.attr(\"stroke-width\", zoomStroke(formatThickness(thickness)));\n      this.obj.attr({                                                  // 18\n        \"stroke-linejoin\": \"round\"                                     // 27\n      });                                                              //\n      this.definition = [x, y, x, y, this.obj.attrs[\"stroke\"], this.obj.attrs[\"stroke-width\"]];\n    }                                                                  //\n    return this.obj;                                                   //\n  };                                                                   //\n                                                                       //\n  WhiteboardTriangleModel.prototype.update = function(info) {          // 4\n    var path, ref, x1, x2, xBottomLeft, xBottomRight, xTop, y1, y2, yBottomLeft, yBottomRight, yTop;\n    if ((info != null ? info.points : void 0) != null) {               // 39\n      x1 = info.points[0];                                             // 40\n      y1 = info.points[1];                                             // 40\n      x2 = info.points[2];                                             // 40\n      y2 = info.points[3];                                             // 40\n      if (this.obj != null) {                                          // 45\n        ref = this._getCornersFromPoints(x1, y1, x2, y2), xTop = ref[0], yTop = ref[1], xBottomLeft = ref[2], yBottomLeft = ref[3], xBottomRight = ref[4], yBottomRight = ref[5];\n        path = this._buildPath(xTop * this.gw + this.xOffset, yTop * this.gh + this.yOffset, xBottomLeft * this.gw + this.xOffset, yBottomLeft * this.gh + this.yOffset, xBottomRight * this.gw + this.xOffset, yBottomRight * this.gh + this.yOffset);\n        this.obj.attr({                                                // 46\n          path: path                                                   // 51\n        });                                                            //\n        this.definition[0] = x1;                                       // 46\n        this.definition[1] = y1;                                       // 46\n        this.definition[2] = x2;                                       // 46\n        return this.definition[3] = y2;                                //\n      }                                                                //\n    }                                                                  //\n  };                                                                   //\n                                                                       //\n  WhiteboardTriangleModel.prototype.draw = function(x1, y1, x2, y2, colour, thickness) {\n    var path, ref, triangle, xBottomLeft, xBottomRight, xTop, yBottomLeft, yBottomRight, yTop;\n    ref = this._getCornersFromPoints(x1, y1, x2, y2), xTop = ref[0], yTop = ref[1], xBottomLeft = ref[2], yBottomLeft = ref[3], xBottomRight = ref[4], yBottomRight = ref[5];\n    path = this._buildPath(xTop, yTop, xBottomLeft, yBottomLeft, xBottomRight, yBottomRight);\n    path = this._scaleTrianglePath(path, this.gw, this.gh, this.xOffset, this.yOffset);\n    triangle = this.paper.path(path);                                  // 66\n    triangle.attr(Utils.strokeAndThickness(colour, thickness));        // 66\n    triangle.attr({                                                    // 66\n      \"stroke-linejoin\": \"round\"                                       // 71\n    });                                                                //\n    return triangle;                                                   //\n  };                                                                   //\n                                                                       //\n  WhiteboardTriangleModel.prototype._getCornersFromPoints = function(x1, y1, x2, y2) {\n    var xBottomLeft, xBottomRight, xTop, yBottomLeft, yBottomRight, yTop;\n    xTop = ((x2 - x1) / 2) + x1;                                       // 75\n    yTop = y1;                                                         // 75\n    xBottomLeft = x1;                                                  // 75\n    yBottomLeft = y2;                                                  // 75\n    xBottomRight = x2;                                                 // 75\n    yBottomRight = y2;                                                 // 75\n    return [xTop, yTop, xBottomLeft, yBottomLeft, xBottomRight, yBottomRight];\n  };                                                                   //\n                                                                       //\n  WhiteboardTriangleModel.prototype._buildPath = function(xTop, yTop, xBottomLeft, yBottomLeft, xBottomRight, yBottomRight) {\n    return \"M\" + xTop + \",\" + yTop + \",\" + xBottomLeft + \",\" + yBottomLeft + \",\" + xBottomRight + \",\" + yBottomRight + \"z\";\n  };                                                                   //\n                                                                       //\n  WhiteboardTriangleModel.prototype._scaleTrianglePath = function(string, w, h, xOffset, yOffset) {\n    var j, len, path, points;                                          // 91\n    if (xOffset == null) {                                             //\n      xOffset = 0;                                                     //\n    }                                                                  //\n    if (yOffset == null) {                                             //\n      yOffset = 0;                                                     //\n    }                                                                  //\n    path = null;                                                       // 91\n    points = string.match(/(\\d+[.]?\\d*)/g);                            // 91\n    len = points.length;                                               // 91\n    j = 0;                                                             // 91\n    path = \"M\";                                                        // 91\n    while (j < len) {                                                  // 98\n      if (j !== 0) {                                                   // 99\n        path += \",\";                                                   // 99\n      }                                                                //\n      path += \"\" + (points[j] * w + xOffset) + \",\" + (points[j + 1] * h + yOffset);\n      j += 2;                                                          // 99\n    }                                                                  //\n    return path + \"z\";                                                 //\n  };                                                                   //\n                                                                       //\n  return WhiteboardTriangleModel;                                      //\n                                                                       //\n})(WhiteboardToolModel);                                               //\n                                                                       //\nWhiteboardTriangleModel;                                               // 2\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/whiteboard_models/whiteboard_triangle.coffee.js","sourceMap":{"version":3,"sources":["/client/whiteboard_models/whiteboard_triangle.coffee"],"names":[],"mappings":"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","file":"/client/whiteboard_models/whiteboard_triangle.coffee.js","sourcesContent":["# A triangle in the whiteboard\nclass @WhiteboardTriangleModel extends WhiteboardToolModel\n\n  constructor: (@paper) ->\n    super @paper\n\n    # the defintion of this shape, kept so we can redraw the shape whenever needed\n    # format: x1, y1, x2, y2, stroke color, thickness\n    @definition = [0, 0, 0, 0, \"#000\", \"0px\"]\n\n  # Make a triangle on the whiteboard\n  # @param  {[type]} x         the x value of the top left corner\n  # @param  {[type]} y         the y value of the top left corner\n  # @param  {string} colour    the colour of the object\n  # @param  {number} thickness the thickness of the object's line(s)\n  make: (info) ->\n    if info?.points?\n      x = info.points[0]\n      y = info.points[1]\n      color = info.color\n      thickness = info.thickness\n\n      path = @_buildPath(x, y, x, y, x, y)\n      @obj = @paper.path(path)\n      @obj.attr \"stroke\", formatColor(color)\n      @obj.attr \"stroke-width\", zoomStroke(formatThickness(thickness))\n      @obj.attr({\"stroke-linejoin\": \"round\"})\n\n      @definition = [x, y, x, y, @obj.attrs[\"stroke\"], @obj.attrs[\"stroke-width\"]]\n\n    @obj\n\n  # Update triangle drawn\n  # @param  {number} x1 the x value of the top left corner\n  # @param  {number} y1 the y value of the top left corner\n  # @param  {number} x2 the x value of the bottom right corner\n  # @param  {number} y2 the y value of the bottom right corner\n  update: (info) ->\n    if info?.points?\n      x1 = info.points[0]\n      y1 = info.points[1]\n      x2 = info.points[2]\n      y2 = info.points[3]\n\n      if @obj?\n        [xTop, yTop, xBottomLeft, yBottomLeft, xBottomRight, yBottomRight] = @_getCornersFromPoints(x1, y1, x2, y2)\n\n        path = @_buildPath(xTop * @gw + @xOffset, yTop * @gh + @yOffset,\n                           xBottomLeft * @gw + @xOffset, yBottomLeft * @gh + @yOffset,\n                           xBottomRight * @gw + @xOffset, yBottomRight * @gh + @yOffset)\n        @obj.attr path: path\n\n        @definition[0] = x1\n        @definition[1] = y1\n        @definition[2] = x2\n        @definition[3] = y2\n\n  # Draw a triangle on the whiteboard\n  # @param  {number} x1 the x value of the top left corner\n  # @param  {number} y1 the y value of the top left corner\n  # @param  {number} x2 the x value of the bottom right corner\n  # @param  {number} y2 the y value of the bottom right corner\n  # @param  {string} colour    the colour of the object\n  # @param  {number} thickness the thickness of the object's line(s)\n  draw: (x1, y1, x2, y2, colour, thickness) ->\n    [xTop, yTop, xBottomLeft, yBottomLeft, xBottomRight, yBottomRight] = @_getCornersFromPoints(x1, y1, x2, y2)\n    path = @_buildPath(xTop, yTop, xBottomLeft, yBottomLeft, xBottomRight, yBottomRight)\n    path = @_scaleTrianglePath(path, @gw, @gh, @xOffset, @yOffset)\n    triangle = @paper.path(path)\n    triangle.attr Utils.strokeAndThickness(colour, thickness)\n    triangle.attr({\"stroke-linejoin\": \"round\"})\n    triangle\n\n  _getCornersFromPoints: (x1, y1, x2, y2) ->\n    xTop = (((x2 - x1) / 2) + x1)\n    yTop = y1\n    xBottomLeft = x1\n    yBottomLeft = y2\n    xBottomRight = x2\n    yBottomRight = y2\n    [xTop, yTop, xBottomLeft, yBottomLeft, xBottomRight, yBottomRight]\n\n  _buildPath: (xTop, yTop, xBottomLeft, yBottomLeft, xBottomRight, yBottomRight) ->\n    \"M#{xTop},#{yTop},#{xBottomLeft},#{yBottomLeft},#{xBottomRight},#{yBottomRight}z\"\n\n  # Scales a triangle path string to fit within a width and height of the new paper size\n  # @param  {number} w width of the shape as a percentage of the original width\n  # @param  {number} h height of the shape as a percentage of the original height\n  # @return {string}   the path string after being manipulated to new paper size\n  _scaleTrianglePath: (string, w, h, xOffset=0, yOffset=0) ->\n    path = null\n    points = string.match(/(\\d+[.]?\\d*)/g)\n    len = points.length\n    j = 0\n\n    # go through each point and multiply it by the new height and width\n    path = \"M\"\n    while j < len\n      path += \",\" unless j is 0\n      path += \"\" + (points[j] * w + xOffset) + \",\" + (points[j + 1] * h + yOffset)\n      j += 2\n    path + \"z\"\n\nWhiteboardTriangleModel\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/NotificationControl.coffee.js                                //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nthis.NotificationControl = (function() {                               // 2\n  var container, notifications;                                        // 3\n                                                                       //\n  container = '';                                                      // 3\n                                                                       //\n  notifications = {};                                                  // 3\n                                                                       //\n  function NotificationControl(c) {                                    // 6\n    container = c[0] === '#' ? c.substr(1) : c;                        // 7\n    $(\"#whiteboard\").prepend('<!-- Drawing area for notifications. Must have \"data-alert\" atrribute, I do not know why, typically only for actual notifications -->' + (\"<div id=\\\"\" + container + \"\\\" data-alert></div>\"));\n  }                                                                    //\n                                                                       //\n  NotificationControl.prototype.create = function(id, type, content, nDuration, nFadeTime) {\n    var elementId;                                                     // 18\n    elementId = id[0] === '#' ? id.substr(1) : id;                     // 18\n    notifications[elementId] = {};                                     // 18\n    notifications[elementId].element = '';                             // 18\n    notifications[elementId].element += \"<div id=\\\"\" + elementId + \"\\\" data-alert class='bbbNotification alert-box \" + type + \"' tabindex='0' aria-live='assertive' role='dialogalert'>\";\n    notifications[elementId].element += \"\" + content;                  // 18\n    notifications[elementId].element += '<button href=\"#\" tabindex=\"0\" class=\"close\" aria-label=\"Close Alert\">&times;</button>';\n    notifications[elementId].element += '</div>';                      // 18\n    notifications[elementId].duration = nDuration || -1;               // 18\n    notifications[elementId].fadeTime = nFadeTime || 1000;             // 18\n    return this;                                                       //\n  };                                                                   //\n                                                                       //\n  NotificationControl.prototype.registerShow = function(elementId, nShowNotification) {\n    notifications[elementId].showNotification = nShowNotification;     // 30\n    return this;                                                       //\n  };                                                                   //\n                                                                       //\n  NotificationControl.prototype.registerHide = function(elementId, nHideNotification) {\n    notifications[elementId].hideNotification = nHideNotification;     // 34\n    return this;                                                       //\n  };                                                                   //\n                                                                       //\n  NotificationControl.prototype.display = function(elementId) {        // 3\n    var base;                                                          // 38\n    $('#' + container).append(notifications[elementId].element);       // 38\n    if (typeof (base = notifications[elementId]).showNotification === \"function\") {\n      base.showNotification();                                         //\n    }                                                                  //\n    setTimeout((function(_this) {                                      // 38\n      return function() {                                              //\n        var base1;                                                     // 43\n        if (notifications[elementId].duration > 0) {                   // 43\n          _this.hideANotification(elementId);                          // 43\n        }                                                              //\n        if (typeof (base1 = notifications[elementId]).hideNotification === \"function\") {\n          base1.hideNotification();                                    //\n        }                                                              //\n        return notifications[elementId] = {};                          //\n      };                                                               //\n    })(this), notifications[elementId].duration);                      //\n    return this;                                                       //\n  };                                                                   //\n                                                                       //\n  NotificationControl.prototype.hideANotification = function(elementId) {\n    var base;                                                          // 51\n    $('#' + elementId).fadeOut(notifications[elementId].fadeTime, function() {\n      return $('#' + elementId).remove();                              //\n    });                                                                //\n    if (typeof (base = notifications[elementId]).hideNotification === \"function\") {\n      base.hideNotification();                                         //\n    }                                                                  //\n    return notifications[elementId] = {};                              //\n  };                                                                   //\n                                                                       //\n  NotificationControl.icons = {                                        // 3\n    'settings_IconPath': 'M17.41,20.395l-0.778-2.723c0.228-0.2,0.442-0.414,0.644-0.643l2.721,0.778c0.287-0.418,0.534-0.862,0.755-1.323l-2.025-1.96c0.097-0.288,0.181-0.581,0.241-0.883l2.729-0.684c0.02-0.252,0.039-0.505,0.039-0.763s-0.02-0.51-0.039-0.762l-2.729-0.684c-0.061-0.302-0.145-0.595-0.241-0.883l2.026-1.96c-0.222-0.46-0.469-0.905-0.756-1.323l-2.721,0.777c-0.201-0.228-0.416-0.442-0.644-0.643l0.778-2.722c-0.418-0.286-0.863-0.534-1.324-0.755l-1.96,2.026c-0.287-0.097-0.581-0.18-0.883-0.241l-0.683-2.73c-0.253-0.019-0.505-0.039-0.763-0.039s-0.51,0.02-0.762,0.039l-0.684,2.73c-0.302,0.061-0.595,0.144-0.883,0.241l-1.96-2.026C7.048,3.463,6.604,3.71,6.186,3.997l0.778,2.722C6.736,6.919,6.521,7.134,6.321,7.361L3.599,6.583C3.312,7.001,3.065,7.446,2.844,7.907l2.026,1.96c-0.096,0.288-0.18,0.581-0.241,0.883l-2.73,0.684c-0.019,0.252-0.039,0.505-0.039,0.762s0.02,0.51,0.039,0.763l2.73,0.684c0.061,0.302,0.145,0.595,0.241,0.883l-2.026,1.96c0.221,0.46,0.468,0.905,0.755,1.323l2.722-0.778c0.2,0.229,0.415,0.442,0.643,0.643l-0.778,2.723c0.418,0.286,0.863,0.533,1.323,0.755l1.96-2.026c0.288,0.097,0.581,0.181,0.883,0.241l0.684,2.729c0.252,0.02,0.505,0.039,0.763,0.039s0.51-0.02,0.763-0.039l0.683-2.729c0.302-0.061,0.596-0.145,0.883-0.241l1.96,2.026C16.547,20.928,16.992,20.681,17.41,20.395zM11.798,15.594c-1.877,0-3.399-1.522-3.399-3.399s1.522-3.398,3.399-3.398s3.398,1.521,3.398,3.398S13.675,15.594,11.798,15.594zM27.29,22.699c0.019-0.547-0.06-1.104-0.23-1.654l1.244-1.773c-0.188-0.35-0.4-0.682-0.641-0.984l-2.122,0.445c-0.428-0.364-0.915-0.648-1.436-0.851l-0.611-2.079c-0.386-0.068-0.777-0.105-1.173-0.106l-0.974,1.936c-0.279,0.054-0.558,0.128-0.832,0.233c-0.257,0.098-0.497,0.22-0.727,0.353L17.782,17.4c-0.297,0.262-0.568,0.545-0.813,0.852l0.907,1.968c-0.259,0.495-0.437,1.028-0.519,1.585l-1.891,1.06c0.019,0.388,0.076,0.776,0.164,1.165l2.104,0.519c0.231,0.524,0.541,0.993,0.916,1.393l-0.352,2.138c0.32,0.23,0.66,0.428,1.013,0.6l1.715-1.32c0.536,0.141,1.097,0.195,1.662,0.15l1.452,1.607c0.2-0.057,0.399-0.118,0.596-0.193c0.175-0.066,0.34-0.144,0.505-0.223l0.037-2.165c0.455-0.339,0.843-0.747,1.152-1.206l2.161-0.134c0.152-0.359,0.279-0.732,0.368-1.115L27.29,22.699zM23.127,24.706c-1.201,0.458-2.545-0.144-3.004-1.345s0.143-2.546,1.344-3.005c1.201-0.458,2.547,0.144,3.006,1.345C24.931,22.902,24.328,24.247,23.127,24.706z',\n    'Safari_IconPath': 'M16.154,5.135c-0.504,0-1,0.031-1.488,0.089l-0.036-0.18c-0.021-0.104-0.06-0.198-0.112-0.283c0.381-0.308,0.625-0.778,0.625-1.306c0-0.927-0.751-1.678-1.678-1.678s-1.678,0.751-1.678,1.678c0,0.745,0.485,1.376,1.157,1.595c-0.021,0.105-0.021,0.216,0,0.328l0.033,0.167C7.645,6.95,3.712,11.804,3.712,17.578c0,6.871,5.571,12.441,12.442,12.441c6.871,0,12.441-5.57,12.441-12.441C28.596,10.706,23.025,5.135,16.154,5.135zM16.369,8.1c4.455,0,8.183,3.116,9.123,7.287l-0.576,0.234c-0.148-0.681-0.755-1.191-1.48-1.191c-0.837,0-1.516,0.679-1.516,1.516c0,0.075,0.008,0.148,0.018,0.221l-2.771-0.028c-0.054-0.115-0.114-0.226-0.182-0.333l3.399-5.11l0.055-0.083l-4.766,4.059c-0.352-0.157-0.74-0.248-1.148-0.256l0.086-0.018l-1.177-2.585c0.64-0.177,1.111-0.763,1.111-1.459c0-0.837-0.678-1.515-1.516-1.515c-0.075,0-0.147,0.007-0.219,0.018l0.058-0.634C15.357,8.141,15.858,8.1,16.369,8.1zM12.146,3.455c0-0.727,0.591-1.318,1.318-1.318c0.727,0,1.318,0.591,1.318,1.318c0,0.425-0.203,0.802-0.516,1.043c-0.183-0.123-0.413-0.176-0.647-0.13c-0.226,0.045-0.413,0.174-0.535,0.349C12.542,4.553,12.146,4.049,12.146,3.455zM7.017,17.452c0-4.443,3.098-8.163,7.252-9.116l0.297,0.573c-0.61,0.196-1.051,0.768-1.051,1.442c0,0.837,0.678,1.516,1.515,1.516c0.068,0,0.135-0.006,0.2-0.015l-0.058,2.845l0.052-0.011c-0.442,0.204-0.824,0.513-1.116,0.895l0.093-0.147l-1.574-0.603l1.172,1.239l0.026-0.042c-0.19,0.371-0.306,0.788-0.324,1.229l-0.003-0.016l-2.623,1.209c-0.199-0.604-0.767-1.041-1.438-1.041c-0.837,0-1.516,0.678-1.516,1.516c0,0.064,0.005,0.128,0.013,0.191l-0.783-0.076C7.063,18.524,7.017,17.994,7.017,17.452zM16.369,26.805c-4.429,0-8.138-3.078-9.106-7.211l0.691-0.353c0.146,0.686,0.753,1.2,1.482,1.2c0.837,0,1.515-0.679,1.515-1.516c0-0.105-0.011-0.207-0.031-0.307l2.858,0.03c0.045,0.095,0.096,0.187,0.15,0.276l-3.45,5.277l0.227-0.195l4.529-3.92c0.336,0.153,0.705,0.248,1.094,0.266l-0.019,0.004l1.226,2.627c-0.655,0.166-1.142,0.76-1.142,1.468c0,0.837,0.678,1.515,1.516,1.515c0.076,0,0.151-0.007,0.225-0.018l0.004,0.688C17.566,26.746,16.975,26.805,16.369,26.805zM18.662,26.521l-0.389-0.6c0.661-0.164,1.152-0.759,1.152-1.47c0-0.837-0.68-1.516-1.516-1.516c-0.066,0-0.13,0.005-0.193,0.014v-2.86l-0.025,0.004c0.409-0.185,0.77-0.459,1.055-0.798l1.516,0.659l-1.104-1.304c0.158-0.335,0.256-0.704,0.278-1.095l2.552-1.164c0.19,0.618,0.766,1.068,1.447,1.068c0.838,0,1.516-0.679,1.516-1.516c0-0.069-0.006-0.137-0.016-0.204l0.65,0.12c0.089,0.517,0.136,1.049,0.136,1.591C25.722,21.826,22.719,25.499,18.662,26.521z',\n    'IE_IconPath': 'M27.998,2.266c-2.12-1.91-6.925,0.382-9.575,1.93c-0.76-0.12-1.557-0.185-2.388-0.185c-3.349,0-6.052,0.985-8.106,2.843c-2.336,2.139-3.631,4.94-3.631,8.177c0,0.028,0.001,0.056,0.001,0.084c3.287-5.15,8.342-7.79,9.682-8.487c0.212-0.099,0.338,0.155,0.141,0.253c-0.015,0.042-0.015,0,0,0c-2.254,1.35-6.434,5.259-9.146,10.886l-0.003-0.007c-1.717,3.547-3.167,8.529-0.267,10.358c2.197,1.382,6.13-0.248,9.295-2.318c0.764,0.108,1.567,0.165,2.415,0.165c5.84,0,9.937-3.223,11.399-7.924l-8.022-0.014c-0.337,1.661-1.464,2.548-3.223,2.548c-2.21,0-3.729-1.211-3.828-4.012l15.228-0.014c0.028-0.578-0.042-0.985-0.042-1.436c0-5.251-3.143-9.355-8.255-10.663c2.081-1.294,5.974-3.209,7.848-1.681c1.407,1.14,0.633,3.533,0.295,4.518c-0.056,0.254,0.24,0.296,0.296,0.057C28.814,5.573,29.026,3.194,27.998,2.266zM13.272,25.676c-2.469,1.475-5.873,2.539-7.539,1.289c-1.243-0.935-0.696-3.468,0.398-5.938c0.664,0.992,1.495,1.886,2.473,2.63C9.926,24.651,11.479,25.324,13.272,25.676zM12.714,13.046c0.042-2.435,1.787-3.49,3.617-3.49c1.928,0,3.49,1.112,3.49,3.49H12.714z'\n  };                                                                   //\n                                                                       //\n  return NotificationControl;                                          //\n                                                                       //\n})();                                                                  //\n                                                                       //\nthis.notification_WebRTCAudioExited = function() {                     // 2\n  return Meteor.NotificationControl.create(\"webRTC_AudioExited\", ' ', 'You have exited audio', 2500).display(\"webRTC_AudioExited\");\n};                                                                     // 65\n                                                                       //\nthis.notification_WebRTCAudioJoining = function() {                    // 2\n  Meteor.NotificationControl.create(\"webRTC_AudioJoining\", '', 'Connecting to the audio call...', -1).registerShow(\"webRTC_AudioJoining\", function() {}).display(\"webRTC_AudioJoining\");\n  if (!BBB.amIInAudio()) {                                             // 74\n    return Tracker.autorun(function(comp) {                            //\n      if (BBB.amIInAudio()) {                                          // 76\n        comp.stop();                                                   // 77\n        return Meteor.NotificationControl.create(\"webRTC_AudioJoined\", 'success ', '', 2500).registerShow(\"webRTC_AudioJoined\", function() {\n          Meteor.NotificationControl.hideANotification('webRTC_AudioJoining');\n          return $(\"#webRTC_AudioJoined\").prepend(\"You've joined the \" + (BBB.amIListenOnlyAudio() ? 'Listen Only' : '') + \" audio\");\n        }).display(\"webRTC_AudioJoined\");                              //\n      }                                                                //\n    });                                                                //\n  }                                                                    //\n};                                                                     // 68\n                                                                       //\nthis.notification_WebRTCNotSupported = function() {                    // 2\n  return Meteor.NotificationControl.create(\"webRTC_NotSupported\", 'alert', '', -1).registerShow(\"webRTC_NotSupported\", function() {\n    var browserName, ref;                                              // 88\n    if (((ref = (browserName = getBrowserName())) === 'Safari' || ref === 'IE') || (browserName = \"settings\")) {\n      $(\"#webRTC_NotSupported\").prepend('<div id=\"browser-icon-container\"></div>' + (\"Sorry,<br/>\" + (browserName !== 'settings' ? browserName : 'your browser') + \" doesn't support WebRTC\"));\n      return (new Raphael('browser-icon-container', 35, 35)).path(NotificationControl.icons[browserName + \"_IconPath\"]).attr({\n        fill: \"#FFF\",                                                  // 91\n        stroke: \"none\"                                                 // 91\n      });                                                              //\n    }                                                                  //\n  }).display(\"webRTC_NotSupported\");                                   //\n};                                                                     // 84\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/NotificationControl.coffee.js","sourceMap":{"version":3,"sources":["/client/NotificationControl.coffee"],"names":[],"mappings":"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","file":"/client/NotificationControl.coffee.js","sourcesContent":["# Methods return a reference to itself to allow chaining\r\nclass @NotificationControl\r\n  container = '' # holds where the alerts will go\r\n  notifications = {}\r\n\r\n  constructor: (c) ->\r\n    container = if c[0] is '#' then c.substr(1) else c # prepend '#' to the identifier\r\n    $(\"#whiteboard\").prepend( # create container for notifications\r\n      '<!-- Drawing area for notifications. Must have \"data-alert\" atrribute, I do not know why, typically only for actual notifications -->' +\r\n      \"<div id=\\\"#{container}\\\" data-alert></div>\")\r\n\r\n  # id: name of the notification\r\n  # type: optional style classes\r\n  # content: the notification's message\r\n  # nDuration: how many milliseconds the notification will stay (less than 1 implies permanent)\r\n  # nFadeTime: how many milliseconds it takes the notification to be removed\r\n  create: (id, type, content, nDuration, nFadeTime) ->\r\n    elementId = if id[0] is '#' then id.substr(1) else id # remove prepended '#' from the identifier\r\n    notifications[elementId] = {}\r\n    notifications[elementId].element = ''\r\n    notifications[elementId].element += \"<div id=\\\"#{elementId}\\\" data-alert class='bbbNotification alert-box #{type}' tabindex='0' aria-live='assertive' role='dialogalert'>\"\r\n    notifications[elementId].element += \"#{content}\"\r\n    notifications[elementId].element += '<button href=\"#\" tabindex=\"0\" class=\"close\" aria-label=\"Close Alert\">&times;</button>'\r\n    notifications[elementId].element += '</div>'\r\n    notifications[elementId].duration = nDuration or -1 # if no time is specified, it must be dismissed by the user\r\n    notifications[elementId].fadeTime = nFadeTime or 1000\r\n    @\r\n\r\n  registerShow: (elementId, nShowNotification) -> # register the method to be called when showing the notification\r\n    notifications[elementId].showNotification = nShowNotification\r\n    @\r\n\r\n  registerHide: (elementId, nHideNotification) -> # register the method called when hiding the notification\r\n    notifications[elementId].hideNotification = nHideNotification\r\n    @\r\n\r\n  display: (elementId) -> # called the registered methods\r\n    $('#'+container).append(notifications[elementId].element) # display the notification\r\n    notifications[elementId].showNotification?()\r\n\r\n    setTimeout () =>\r\n      # remove the notification if the user selected to\r\n      @hideANotification(elementId) if notifications[elementId].duration > 0\r\n      notifications[elementId].hideNotification?()\r\n      notifications[elementId] = {} # delete all notification data\r\n    , notifications[elementId].duration\r\n    @\r\n\r\n  # hides a notification that may have been left over\r\n  hideANotification: (elementId) ->\r\n    ($('#'+elementId).fadeOut notifications[elementId].fadeTime, -> $('#'+elementId).remove())\r\n    notifications[elementId].hideNotification?()\r\n    notifications[elementId] = {}\r\n\r\n  # static icon members\r\n  @icons = {\r\n    # RaphaelJS \"settings\" icon\r\n    'settings_IconPath': 'M17.41,20.395l-0.778-2.723c0.228-0.2,0.442-0.414,0.644-0.643l2.721,0.778c0.287-0.418,0.534-0.862,0.755-1.323l-2.025-1.96c0.097-0.288,0.181-0.581,0.241-0.883l2.729-0.684c0.02-0.252,0.039-0.505,0.039-0.763s-0.02-0.51-0.039-0.762l-2.729-0.684c-0.061-0.302-0.145-0.595-0.241-0.883l2.026-1.96c-0.222-0.46-0.469-0.905-0.756-1.323l-2.721,0.777c-0.201-0.228-0.416-0.442-0.644-0.643l0.778-2.722c-0.418-0.286-0.863-0.534-1.324-0.755l-1.96,2.026c-0.287-0.097-0.581-0.18-0.883-0.241l-0.683-2.73c-0.253-0.019-0.505-0.039-0.763-0.039s-0.51,0.02-0.762,0.039l-0.684,2.73c-0.302,0.061-0.595,0.144-0.883,0.241l-1.96-2.026C7.048,3.463,6.604,3.71,6.186,3.997l0.778,2.722C6.736,6.919,6.521,7.134,6.321,7.361L3.599,6.583C3.312,7.001,3.065,7.446,2.844,7.907l2.026,1.96c-0.096,0.288-0.18,0.581-0.241,0.883l-2.73,0.684c-0.019,0.252-0.039,0.505-0.039,0.762s0.02,0.51,0.039,0.763l2.73,0.684c0.061,0.302,0.145,0.595,0.241,0.883l-2.026,1.96c0.221,0.46,0.468,0.905,0.755,1.323l2.722-0.778c0.2,0.229,0.415,0.442,0.643,0.643l-0.778,2.723c0.418,0.286,0.863,0.533,1.323,0.755l1.96-2.026c0.288,0.097,0.581,0.181,0.883,0.241l0.684,2.729c0.252,0.02,0.505,0.039,0.763,0.039s0.51-0.02,0.763-0.039l0.683-2.729c0.302-0.061,0.596-0.145,0.883-0.241l1.96,2.026C16.547,20.928,16.992,20.681,17.41,20.395zM11.798,15.594c-1.877,0-3.399-1.522-3.399-3.399s1.522-3.398,3.399-3.398s3.398,1.521,3.398,3.398S13.675,15.594,11.798,15.594zM27.29,22.699c0.019-0.547-0.06-1.104-0.23-1.654l1.244-1.773c-0.188-0.35-0.4-0.682-0.641-0.984l-2.122,0.445c-0.428-0.364-0.915-0.648-1.436-0.851l-0.611-2.079c-0.386-0.068-0.777-0.105-1.173-0.106l-0.974,1.936c-0.279,0.054-0.558,0.128-0.832,0.233c-0.257,0.098-0.497,0.22-0.727,0.353L17.782,17.4c-0.297,0.262-0.568,0.545-0.813,0.852l0.907,1.968c-0.259,0.495-0.437,1.028-0.519,1.585l-1.891,1.06c0.019,0.388,0.076,0.776,0.164,1.165l2.104,0.519c0.231,0.524,0.541,0.993,0.916,1.393l-0.352,2.138c0.32,0.23,0.66,0.428,1.013,0.6l1.715-1.32c0.536,0.141,1.097,0.195,1.662,0.15l1.452,1.607c0.2-0.057,0.399-0.118,0.596-0.193c0.175-0.066,0.34-0.144,0.505-0.223l0.037-2.165c0.455-0.339,0.843-0.747,1.152-1.206l2.161-0.134c0.152-0.359,0.279-0.732,0.368-1.115L27.29,22.699zM23.127,24.706c-1.201,0.458-2.545-0.144-3.004-1.345s0.143-2.546,1.344-3.005c1.201-0.458,2.547,0.144,3.006,1.345C24.931,22.902,24.328,24.247,23.127,24.706z'\r\n    # RaphaelJS \"Safari\" icon\r\n    'Safari_IconPath':'M16.154,5.135c-0.504,0-1,0.031-1.488,0.089l-0.036-0.18c-0.021-0.104-0.06-0.198-0.112-0.283c0.381-0.308,0.625-0.778,0.625-1.306c0-0.927-0.751-1.678-1.678-1.678s-1.678,0.751-1.678,1.678c0,0.745,0.485,1.376,1.157,1.595c-0.021,0.105-0.021,0.216,0,0.328l0.033,0.167C7.645,6.95,3.712,11.804,3.712,17.578c0,6.871,5.571,12.441,12.442,12.441c6.871,0,12.441-5.57,12.441-12.441C28.596,10.706,23.025,5.135,16.154,5.135zM16.369,8.1c4.455,0,8.183,3.116,9.123,7.287l-0.576,0.234c-0.148-0.681-0.755-1.191-1.48-1.191c-0.837,0-1.516,0.679-1.516,1.516c0,0.075,0.008,0.148,0.018,0.221l-2.771-0.028c-0.054-0.115-0.114-0.226-0.182-0.333l3.399-5.11l0.055-0.083l-4.766,4.059c-0.352-0.157-0.74-0.248-1.148-0.256l0.086-0.018l-1.177-2.585c0.64-0.177,1.111-0.763,1.111-1.459c0-0.837-0.678-1.515-1.516-1.515c-0.075,0-0.147,0.007-0.219,0.018l0.058-0.634C15.357,8.141,15.858,8.1,16.369,8.1zM12.146,3.455c0-0.727,0.591-1.318,1.318-1.318c0.727,0,1.318,0.591,1.318,1.318c0,0.425-0.203,0.802-0.516,1.043c-0.183-0.123-0.413-0.176-0.647-0.13c-0.226,0.045-0.413,0.174-0.535,0.349C12.542,4.553,12.146,4.049,12.146,3.455zM7.017,17.452c0-4.443,3.098-8.163,7.252-9.116l0.297,0.573c-0.61,0.196-1.051,0.768-1.051,1.442c0,0.837,0.678,1.516,1.515,1.516c0.068,0,0.135-0.006,0.2-0.015l-0.058,2.845l0.052-0.011c-0.442,0.204-0.824,0.513-1.116,0.895l0.093-0.147l-1.574-0.603l1.172,1.239l0.026-0.042c-0.19,0.371-0.306,0.788-0.324,1.229l-0.003-0.016l-2.623,1.209c-0.199-0.604-0.767-1.041-1.438-1.041c-0.837,0-1.516,0.678-1.516,1.516c0,0.064,0.005,0.128,0.013,0.191l-0.783-0.076C7.063,18.524,7.017,17.994,7.017,17.452zM16.369,26.805c-4.429,0-8.138-3.078-9.106-7.211l0.691-0.353c0.146,0.686,0.753,1.2,1.482,1.2c0.837,0,1.515-0.679,1.515-1.516c0-0.105-0.011-0.207-0.031-0.307l2.858,0.03c0.045,0.095,0.096,0.187,0.15,0.276l-3.45,5.277l0.227-0.195l4.529-3.92c0.336,0.153,0.705,0.248,1.094,0.266l-0.019,0.004l1.226,2.627c-0.655,0.166-1.142,0.76-1.142,1.468c0,0.837,0.678,1.515,1.516,1.515c0.076,0,0.151-0.007,0.225-0.018l0.004,0.688C17.566,26.746,16.975,26.805,16.369,26.805zM18.662,26.521l-0.389-0.6c0.661-0.164,1.152-0.759,1.152-1.47c0-0.837-0.68-1.516-1.516-1.516c-0.066,0-0.13,0.005-0.193,0.014v-2.86l-0.025,0.004c0.409-0.185,0.77-0.459,1.055-0.798l1.516,0.659l-1.104-1.304c0.158-0.335,0.256-0.704,0.278-1.095l2.552-1.164c0.19,0.618,0.766,1.068,1.447,1.068c0.838,0,1.516-0.679,1.516-1.516c0-0.069-0.006-0.137-0.016-0.204l0.65,0.12c0.089,0.517,0.136,1.049,0.136,1.591C25.722,21.826,22.719,25.499,18.662,26.521z'\r\n    # RaphaelJS \"Internet Explorer\" icon\r\n    'IE_IconPath': 'M27.998,2.266c-2.12-1.91-6.925,0.382-9.575,1.93c-0.76-0.12-1.557-0.185-2.388-0.185c-3.349,0-6.052,0.985-8.106,2.843c-2.336,2.139-3.631,4.94-3.631,8.177c0,0.028,0.001,0.056,0.001,0.084c3.287-5.15,8.342-7.79,9.682-8.487c0.212-0.099,0.338,0.155,0.141,0.253c-0.015,0.042-0.015,0,0,0c-2.254,1.35-6.434,5.259-9.146,10.886l-0.003-0.007c-1.717,3.547-3.167,8.529-0.267,10.358c2.197,1.382,6.13-0.248,9.295-2.318c0.764,0.108,1.567,0.165,2.415,0.165c5.84,0,9.937-3.223,11.399-7.924l-8.022-0.014c-0.337,1.661-1.464,2.548-3.223,2.548c-2.21,0-3.729-1.211-3.828-4.012l15.228-0.014c0.028-0.578-0.042-0.985-0.042-1.436c0-5.251-3.143-9.355-8.255-10.663c2.081-1.294,5.974-3.209,7.848-1.681c1.407,1.14,0.633,3.533,0.295,4.518c-0.056,0.254,0.24,0.296,0.296,0.057C28.814,5.573,29.026,3.194,27.998,2.266zM13.272,25.676c-2.469,1.475-5.873,2.539-7.539,1.289c-1.243-0.935-0.696-3.468,0.398-5.938c0.664,0.992,1.495,1.886,2.473,2.63C9.926,24.651,11.479,25.324,13.272,25.676zM12.714,13.046c0.042-2.435,1.787-3.49,3.617-3.49c1.928,0,3.49,1.112,3.49,3.49H12.714z'\r\n  }\r\n\r\n@notification_WebRTCAudioExited = -> # used when the user can join audio\r\n  Meteor.NotificationControl.create(\"webRTC_AudioExited\", ' ', 'You have exited audio', 2500).display(\"webRTC_AudioExited\")\r\n\r\n@notification_WebRTCAudioJoining = -> # used when the user can join audio\r\n  # display joining notification\r\n  Meteor.NotificationControl.create(\"webRTC_AudioJoining\", '', 'Connecting to the audio call...', -1)\r\n  .registerShow(\"webRTC_AudioJoining\", ->\r\n  ).display(\"webRTC_AudioJoining\")\r\n  # joined. Displayed joined notification and hide the joining notification\r\n  if !BBB.amIInAudio()\r\n    Tracker.autorun (comp) -> # wait until user is in\r\n      if BBB.amIInAudio() # display notification when you are in audio\r\n        comp.stop() # prevents computation from running twice (which can happen occassionally)\r\n        Meteor.NotificationControl.create(\"webRTC_AudioJoined\", 'success ', '', 2500)\r\n        .registerShow(\"webRTC_AudioJoined\", ->\r\n          Meteor.NotificationControl.hideANotification('webRTC_AudioJoining')\r\n          $(\"#webRTC_AudioJoined\").prepend(\"You've joined the #{if BBB.amIListenOnlyAudio() then 'Listen Only' else ''} audio\")\r\n        ).display(\"webRTC_AudioJoined\")\r\n\r\n@notification_WebRTCNotSupported = -> # shown when the user's browser does not support WebRTC\r\n  # create a new notification at the audio button they clicked to trigger the event\r\n  Meteor.NotificationControl.create(\"webRTC_NotSupported\", 'alert', '', -1)\r\n  .registerShow(\"webRTC_NotSupported\", ->\r\n    if ((browserName=getBrowserName()) in ['Safari', 'IE']) or browserName=\"settings\" # show either the browser icon or cog gears\r\n      $(\"#webRTC_NotSupported\").prepend('<div id=\"browser-icon-container\"></div>' +\r\n        \"Sorry,<br/>#{if browserName isnt 'settings' then browserName else 'your browser'} doesn't support WebRTC\")\r\n      (new Raphael('browser-icon-container', 35, 35)).path(NotificationControl.icons[\"#{browserName}_IconPath\"]).attr({fill: \"#FFF\", stroke: \"none\"})\r\n  ).display(\"webRTC_NotSupported\")\r\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/globals.coffee.js                                            //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nthis.getBuildInformation = function() {                                // 1\n  var copyrightYear, defaultWelcomeMessage, defaultWelcomeMessageFooter, html5ClientBuild, link, ref, ref1, ref2, ref3;\n  copyrightYear = ((ref = Meteor.config) != null ? ref.copyrightYear : void 0) || \"DATE\";\n  html5ClientBuild = ((ref1 = Meteor.config) != null ? ref1.html5ClientBuild : void 0) || \"VERSION\";\n  defaultWelcomeMessage = ((ref2 = Meteor.config) != null ? ref2.defaultWelcomeMessage : void 0) || \"WELCOME MESSAGE\";\n  defaultWelcomeMessageFooter = ((ref3 = Meteor.config) != null ? ref3.defaultWelcomeMessageFooter : void 0) || \"WELCOME MESSAGE\";\n  link = \"<a href='http://bigbluebutton.org/' target='_blank'>http://bigbluebutton.org</a>\";\n  return {                                                             //\n    'copyrightYear': copyrightYear,                                    // 8\n    'html5ClientBuild': html5ClientBuild,                              // 8\n    'defaultWelcomeMessage': defaultWelcomeMessage,                    // 8\n    'defaultWelcomeMessageFooter': defaultWelcomeMessageFooter,        // 8\n    'link': link                                                       // 8\n  };                                                                   //\n};                                                                     // 1\n                                                                       //\nthis.colourToHex = function(value) {                                   // 1\n  var hex;                                                             // 18\n  hex = parseInt(value).toString(16);                                  // 18\n  while (hex.length < 6) {                                             // 19\n    hex = \"0\" + hex;                                                   // 19\n  }                                                                    //\n  return \"#\" + hex;                                                    //\n};                                                                     // 17\n                                                                       //\nthis.formatColor = function(color) {                                   // 1\n  if (color == null) {                                                 //\n    color = \"0\";                                                       //\n  }                                                                    //\n  if (!color.toString().match(/\\#.*/)) {                               // 25\n    color = colourToHex(color);                                        // 26\n  }                                                                    //\n  return color;                                                        //\n};                                                                     // 23\n                                                                       //\nthis.getCurrentSlideDoc = function() {                                 // 1\n  return BBB.getCurrentSlide();                                        //\n};                                                                     // 29\n                                                                       //\nthis.getInSession = function(k) {                                      // 1\n  return SessionAmplify.get(k);                                        //\n};                                                                     // 32\n                                                                       //\nthis.getTime = function() {                                            // 1\n  return (new Date).valueOf();                                         //\n};                                                                     // 34\n                                                                       //\nthis.isPanHorizontal = function(event) {                               // 1\n  return Math.abs(event.deltaX) > Math.abs(event.deltaY);              //\n};                                                                     // 38\n                                                                       //\nHandlebars.registerHelper(\"amIInAudio\", function() {                   // 1\n  return BBB.amIInAudio();                                             //\n});                                                                    // 42\n                                                                       //\nHandlebars.registerHelper(\"amIListenOnlyAudio\", function() {           // 1\n  return BBB.amIListenOnlyAudio();                                     //\n});                                                                    // 46\n                                                                       //\nHandlebars.registerHelper(\"isMyMicLocked\", function() {                // 1\n  return BBB.isMyMicLocked();                                          //\n});                                                                    // 50\n                                                                       //\nHandlebars.registerHelper(\"colourToHex\", (function(_this) {            // 1\n  return function(value) {                                             //\n    return _this.window.colourToHex(value);                            //\n  };                                                                   //\n})(this));                                                             // 53\n                                                                       //\nHandlebars.registerHelper('equals', function(a, b) {                   // 1\n  return a === b;                                                      //\n});                                                                    // 56\n                                                                       //\nHandlebars.registerHelper(\"getCurrentMeeting\", function() {            // 1\n  return Meteor.Meetings.findOne();                                    //\n});                                                                    // 59\n                                                                       //\nHandlebars.registerHelper(\"getCurrentSlide\", function() {              // 1\n  return getCurrentSlideDoc();                                         //\n});                                                                    // 62\n                                                                       //\nHandlebars.registerHelper(\"getInSession\", function(k) {                // 1\n  return SessionAmplify.get(k);                                        //\n});                                                                    // 66\n                                                                       //\nHandlebars.registerHelper(\"getMeetingName\", function() {               // 1\n  return BBB.getMeetingName();                                         //\n});                                                                    // 68\n                                                                       //\nHandlebars.registerHelper(\"getShapesForSlide\", function() {            // 1\n  var currentSlide, ref;                                               // 72\n  currentSlide = getCurrentSlideDoc();                                 // 72\n  return Meteor.Shapes.find({                                          //\n    whiteboardId: currentSlide != null ? (ref = currentSlide.slide) != null ? ref.id : void 0 : void 0\n  });                                                                  //\n});                                                                    // 71\n                                                                       //\nHandlebars.registerHelper(\"getUsersInMeeting\", function() {            // 1\n  var users;                                                           // 79\n  users = Meteor.Users.find().fetch();                                 // 79\n  if ((users != null ? users.length : void 0) > 1) {                   // 80\n    return getSortedUserList(users);                                   //\n  } else {                                                             //\n    return users;                                                      //\n  }                                                                    //\n});                                                                    // 78\n                                                                       //\nHandlebars.registerHelper(\"getWhiteboardTitle\", function() {           // 1\n  return BBB.currentPresentationName() || \"Loading presentation...\";   //\n});                                                                    // 85\n                                                                       //\nHandlebars.registerHelper(\"getCurrentUserEmojiStatus\", function() {    // 1\n  var ref, ref1;                                                       // 89\n  return (ref = BBB.getCurrentUser()) != null ? (ref1 = ref.user) != null ? ref1.emoji_status : void 0 : void 0;\n});                                                                    // 88\n                                                                       //\nHandlebars.registerHelper(\"isCurrentUser\", function(userId) {          // 1\n  var ref;                                                             // 92\n  return userId === null || userId === ((ref = BBB.getCurrentUser()) != null ? ref.userId : void 0);\n});                                                                    // 91\n                                                                       //\nHandlebars.registerHelper(\"isCurrentUserMuted\", function() {           // 1\n  return BBB.amIMuted();                                               //\n});                                                                    // 94\n                                                                       //\nHandlebars.registerHelper(\"privateChatName\", function() {              // 1\n  var obj, ref;                                                        // 99\n  obj = Meteor.Users.findOne({                                         // 99\n    userId: getInSession(\"inChatWith\")                                 // 99\n  });                                                                  //\n  if (obj != null) {                                                   // 100\n    return obj != null ? (ref = obj.user) != null ? ref.name : void 0 : void 0;\n  }                                                                    //\n});                                                                    // 98\n                                                                       //\nHandlebars.registerHelper(\"isCurrentUserEmojiStatusSet\", function() {  // 1\n  return BBB.isCurrentUserEmojiStatusSet();                            //\n});                                                                    // 103\n                                                                       //\nHandlebars.registerHelper(\"isCurrentUserSharingVideo\", function() {    // 1\n  return BBB.amISharingVideo();                                        //\n});                                                                    // 106\n                                                                       //\nHandlebars.registerHelper(\"isCurrentUserTalking\", function() {         // 1\n  return BBB.amITalking();                                             //\n});                                                                    // 109\n                                                                       //\nHandlebars.registerHelper(\"isCurrentUserPresenter\", function() {       // 1\n  return BBB.isUserPresenter(getInSession('userId'));                  //\n});                                                                    // 112\n                                                                       //\nHandlebars.registerHelper(\"isDisconnected\", function() {               // 1\n  return !Meteor.status().connected;                                   // 116\n});                                                                    // 115\n                                                                       //\nHandlebars.registerHelper(\"isUserInAudio\", function(userId) {          // 1\n  return BBB.isUserInAudio(userId);                                    //\n});                                                                    // 118\n                                                                       //\nHandlebars.registerHelper(\"isUserListenOnlyAudio\", function(userId) {  // 1\n  return BBB.isUserListenOnlyAudio(userId);                            //\n});                                                                    // 121\n                                                                       //\nHandlebars.registerHelper(\"isUserMuted\", function(userId) {            // 1\n  return BBB.isUserMuted(userId);                                      //\n});                                                                    // 124\n                                                                       //\nHandlebars.registerHelper(\"isUserSharingVideo\", function(userId) {     // 1\n  return BBB.isUserSharingWebcam(userId);                              //\n});                                                                    // 127\n                                                                       //\nHandlebars.registerHelper(\"isUserTalking\", function(userId) {          // 1\n  return BBB.isUserTalking(userId);                                    //\n});                                                                    // 130\n                                                                       //\nHandlebars.registerHelper('isMobile', function() {                     // 1\n  return isMobile();                                                   //\n});                                                                    // 133\n                                                                       //\nHandlebars.registerHelper('isPortraitMobile', function() {             // 1\n  return isPortraitMobile();                                           //\n});                                                                    // 136\n                                                                       //\nHandlebars.registerHelper('isMobileChromeOrFirefox', function() {      // 1\n  return isMobile() && ((getBrowserName() === 'Chrome') || (getBrowserName() === 'Firefox'));\n});                                                                    // 139\n                                                                       //\nHandlebars.registerHelper(\"meetingIsRecording\", function() {           // 1\n  return BBB.isMeetingRecording();                                     //\n});                                                                    // 142\n                                                                       //\nHandlebars.registerHelper(\"messageFontSize\", function() {              // 1\n  return {                                                             //\n    style: \"font-size: \" + (getInSession(\"messageFontSize\")) + \"px;\"   // 146\n  };                                                                   //\n});                                                                    // 145\n                                                                       //\nHandlebars.registerHelper(\"pointerLocation\", function() {              // 1\n  var currentPresentation, currentSlideDoc, pointer, presentationId, ref;\n  currentPresentation = Meteor.Presentations.findOne({                 // 149\n    \"presentation.current\": true                                       // 149\n  });                                                                  //\n  presentationId = currentPresentation != null ? (ref = currentPresentation.presentation) != null ? ref.id : void 0 : void 0;\n  currentSlideDoc = Meteor.Slides.findOne({                            // 149\n    \"presentationId\": presentationId,                                  // 151\n    \"slide.current\": true                                              // 151\n  });                                                                  //\n  pointer = currentPresentation != null ? currentPresentation.pointer : void 0;\n  pointer.x = (-currentSlideDoc.slide.x_offset * 2 + currentSlideDoc.slide.width_ratio * pointer.x) / 100;\n  pointer.y = (-currentSlideDoc.slide.y_offset * 2 + currentSlideDoc.slide.height_ratio * pointer.y) / 100;\n  return pointer;                                                      //\n});                                                                    // 148\n                                                                       //\nHandlebars.registerHelper(\"safeName\", function(str) {                  // 1\n  return safeString(str);                                              //\n});                                                                    // 157\n                                                                       //\n                                                                       // 160\n/*Handlebars.registerHelper \"visibility\", (section) ->                 // 160\n  if getInSession \"display_#{section}\"                                 //\n    style: 'display:block;'                                            //\n  else                                                                 //\n    style: 'display:none;'                                             //\n */                                                                    //\n                                                                       //\nHandlebars.registerHelper(\"visibility\", function(section) {            // 1\n  return {                                                             //\n    style: 'display:block;'                                            // 167\n  };                                                                   //\n});                                                                    // 166\n                                                                       //\nHandlebars.registerHelper('containerPosition', function(section) {     // 1\n  if (getInSession('display_usersList')) {                             // 170\n    return 'moved-to-right';                                           // 171\n  } else if (getInSession('display_menu')) {                           //\n    return 'moved-to-left';                                            // 173\n  } else {                                                             //\n    return '';                                                         // 175\n  }                                                                    //\n});                                                                    // 169\n                                                                       //\nHandlebars.registerHelper('whiteboardSize', function(section) {        // 1\n  if (BBB.isUserPresenter(getInSession('userId'))) {                   // 179\n    return 'presenter-whiteboard';                                     // 180\n  } else {                                                             //\n    if (BBB.isPollGoing(getInSession('userId'))) {                     // 182\n      return 'poll-whiteboard';                                        // 183\n    } else {                                                           //\n      return 'viewer-whiteboard';                                      // 185\n    }                                                                  //\n  }                                                                    //\n});                                                                    // 178\n                                                                       //\nHandlebars.registerHelper(\"getPollQuestions\", function() {             // 1\n  var answer, buttonStyle, j, len, marginStyle, number, polls, ref, widthStyle;\n  polls = BBB.getCurrentPoll(getInSession('userId'));                  // 188\n  if ((polls != null) && polls !== void 0) {                           // 189\n    number = polls.poll_info.poll.answers.length;                      // 190\n    widthStyle = \"width: calc(75%/\" + number + \");\";                   // 190\n    marginStyle = \"margin-left: calc(25%/\" + (number * 2) + \");\" + \"margin-right: calc(25%/\" + (number * 2) + \");\";\n    buttonStyle = widthStyle + marginStyle;                            // 190\n    ref = polls.poll_info.poll.answers;                                // 194\n    for (j = 0, len = ref.length; j < len; j++) {                      // 194\n      answer = ref[j];                                                 //\n      answer.style = buttonStyle;                                      // 195\n    }                                                                  // 194\n    return polls.poll_info.poll.answers;                               // 196\n  }                                                                    //\n});                                                                    // 187\n                                                                       //\nthis.getSortedUserList = function(users) {                             // 1\n  if ((users != null ? users.length : void 0) > 1) {                   // 199\n    users.sort(function(a, b) {                                        // 200\n      var aTime, bTime;                                                // 201\n      if (a.user.role === \"MODERATOR\" && b.user.role === \"MODERATOR\") {\n        if (a.user.set_emoji_time && b.user.set_emoji_time) {          // 202\n          aTime = a.user.set_emoji_time.getTime();                     // 203\n          bTime = b.user.set_emoji_time.getTime();                     // 203\n          if (aTime < bTime) {                                         // 205\n            return -1;                                                 // 206\n          } else {                                                     //\n            return 1;                                                  // 208\n          }                                                            //\n        } else if (a.user.set_emoji_time) {                            //\n          return -1;                                                   // 210\n        } else if (b.user.set_emoji_time) {                            //\n          return 1;                                                    // 212\n        }                                                              //\n      } else if (a.user.role === \"MODERATOR\") {                        //\n        return -1;                                                     // 214\n      } else if (b.user.role === \"MODERATOR\") {                        //\n        return 1;                                                      // 216\n      } else if (a.user.set_emoji_time && b.user.set_emoji_time) {     //\n        aTime = a.user.set_emoji_time.getTime();                       // 218\n        bTime = b.user.set_emoji_time.getTime();                       // 218\n        if (aTime < bTime) {                                           // 220\n          return -1;                                                   // 221\n        } else {                                                       //\n          return 1;                                                    // 223\n        }                                                              //\n      } else if (a.user.set_emoji_time) {                              //\n        return -1;                                                     // 225\n      } else if (b.user.set_emoji_time) {                              //\n        return 1;                                                      // 227\n      } else if (!a.user.phone_user && !b.user.phone_user) {           //\n                                                                       // 228\n      } else if (!a.user.phone_user) {                                 //\n        return -1;                                                     // 231\n      } else if (!b.user.phone_user) {                                 //\n        return 1;                                                      // 233\n      }                                                                //\n      if (a.user._sort_name < b.user._sort_name) {                     // 239\n        return -1;                                                     // 240\n      } else if (a.user._sort_name > b.user._sort_name) {              //\n        return 1;                                                      // 242\n      } else if (a.user.userid.toLowerCase() > b.user.userid.toLowerCase()) {\n        return -1;                                                     // 244\n      } else if (a.user.userid.toLowerCase() < b.user.userid.toLowerCase()) {\n        return 1;                                                      // 246\n      }                                                                //\n    });                                                                //\n  }                                                                    //\n  return users;                                                        //\n};                                                                     // 198\n                                                                       //\nthis.linkify = function(str) {                                         // 1\n  return str = str.replace(re_weburl, \"<a href='event:$&'><u>$&</u></a>\");\n};                                                                     // 251\n                                                                       //\nthis.setInSession = function(k, v) {                                   // 1\n  return SessionAmplify.set(k, v);                                     //\n};                                                                     // 254\n                                                                       //\nthis.safeString = function(str) {                                      // 1\n  if (typeof str === 'string') {                                       // 257\n    return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n  }                                                                    //\n};                                                                     // 256\n                                                                       //\nthis.toggleCam = function(event) {};                                   // 1\n                                                                       //\nthis.toggleChatbar = function() {                                      // 1\n  setInSession(\"display_chatbar\", !getInSession(\"display_chatbar\"));   // 265\n  if (!getInSession(\"display_chatbar\")) {                              // 266\n    $('#whiteboard').css('width', '100%');                             // 267\n    $('#whiteboard .ui-resizable-handle').css('display', 'none');      // 267\n  } else {                                                             //\n    $('#whiteboard').css('width', '');                                 // 270\n    $('#whiteboard .ui-resizable-handle').css('display', '');          // 270\n  }                                                                    //\n  return setTimeout(scaleWhiteboard, 0);                               //\n};                                                                     // 264\n                                                                       //\nthis.toggleMic = function(event) {                                     // 1\n  return BBB.toggleMyMic();                                            //\n};                                                                     // 274\n                                                                       //\nthis.toggleUsersList = function() {                                    // 1\n  if ($('.userlistMenu').hasClass('hiddenInLandscape')) {              // 278\n    $('.userlistMenu').removeClass('hiddenInLandscape');               // 279\n  } else {                                                             //\n    $('.userlistMenu').addClass('hiddenInLandscape');                  // 281\n  }                                                                    //\n  return setTimeout(scaleWhiteboard, 0);                               //\n};                                                                     // 277\n                                                                       //\nthis.populateNotifications = function(msg) {                           // 1\n  var chat, chats, initChats, j, l, len, len1, myPrivateChats, myUserId, new_msg_userid, results, u, uniqueArray, users;\n  myUserId = getInSession(\"userId\");                                   // 285\n  users = Meteor.Users.find().fetch();                                 // 285\n  myPrivateChats = Meteor.Chat.find({                                  // 285\n    'message.chat_type': 'PRIVATE_CHAT'                                // 289\n  }).fetch();                                                          //\n  uniqueArray = [];                                                    // 285\n  for (j = 0, len = myPrivateChats.length; j < len; j++) {             // 292\n    chat = myPrivateChats[j];                                          //\n    if (chat.message.to_userid === myUserId) {                         // 293\n      uniqueArray.push({                                               // 294\n        userId: chat.message.from_userid,                              // 294\n        username: chat.message.from_username                           // 294\n      });                                                              //\n    }                                                                  //\n    if (chat.message.from_userid === myUserId) {                       // 295\n      uniqueArray.push({                                               // 296\n        userId: chat.message.to_userid,                                // 296\n        username: chat.message.to_username                             // 296\n      });                                                              //\n    }                                                                  //\n  }                                                                    // 292\n  uniqueArray = uniqueArray.filter(function(itm, i, a) {               // 285\n    return i === a.indexOf(itm);                                       //\n  });                                                                  //\n  if (msg.message.to_userid === myUserId) {                            // 303\n    new_msg_userid = msg.message.from_userid;                          // 304\n  }                                                                    //\n  if (msg.message.from_userid === myUserId) {                          // 305\n    new_msg_userid = msg.message.to_userid;                            // 306\n  }                                                                    //\n  chats = getInSession('chats');                                       // 285\n  if (chats === void 0) {                                              // 309\n    initChats = [                                                      // 310\n      {                                                                //\n        userId: \"PUBLIC_CHAT\",                                         // 311\n        gotMail: false,                                                // 311\n        number: 0                                                      // 311\n      }                                                                //\n    ];                                                                 //\n    setInSession('chats', initChats);                                  // 310\n  }                                                                    //\n  results = [];                                                        // 318\n  for (l = 0, len1 = uniqueArray.length; l < len1; l++) {              //\n    u = uniqueArray[l];                                                //\n    chats = getInSession('chats');                                     // 319\n    if (chats.filter(function(chat) {                                  // 320\n      return chat.userId === u.userId;                                 //\n    }).length === 0 && u.userId === new_msg_userid) {                  //\n      chats.push({                                                     // 321\n        userId: u.userId,                                              // 321\n        gotMail: false,                                                // 321\n        number: 0                                                      // 321\n      });                                                              //\n      results.push(setInSession('chats', chats));                      // 321\n    } else {                                                           //\n      results.push(void 0);                                            //\n    }                                                                  //\n  }                                                                    // 318\n  return results;                                                      //\n};                                                                     // 284\n                                                                       //\nthis.toggleShield = function() {                                       // 1\n  if (parseFloat($('.shield').css('opacity')) === 0.5) {               // 325\n    $('.shield').css('opacity', '');                                   // 326\n  }                                                                    //\n  if (!$('.shield').hasClass('darken') && !$('.shield').hasClass('animatedShield')) {\n    return $('.shield').addClass('darken');                            //\n  } else {                                                             //\n    $('.shield').removeClass('darken');                                // 331\n    return $('.shield').removeClass('animatedShield');                 //\n  }                                                                    //\n};                                                                     // 324\n                                                                       //\nthis.removeFullscreenStyles = function() {                             // 1\n  $('#whiteboard-paper').removeClass('vertically-centered');           // 335\n  $('#chat').removeClass('invisible');                                 // 335\n  $('#users').removeClass('invisible');                                // 335\n  $('#navbar').removeClass('invisible');                               // 335\n  $('.FABTriggerButton').removeClass('invisible');                     // 335\n  $('.fullscreenButton').removeClass('exitFullscreenButton');          // 335\n  $('.fullscreenButton').addClass('whiteboardFullscreenButton');       // 335\n  $('.fullscreenButton i').removeClass('ion-arrow-shrink');            // 335\n  return $('.fullscreenButton i').addClass('ion-arrow-expand');        //\n};                                                                     // 334\n                                                                       //\nthis.enterWhiteboardFullscreen = function() {                          // 1\n  var element;                                                         // 346\n  element = document.getElementById('whiteboard');                     // 346\n  if (element.requestFullscreen) {                                     // 347\n    element.requestFullscreen();                                       // 348\n  } else if (element.mozRequestFullScreen) {                           //\n    element.mozRequestFullScreen();                                    // 350\n    $('.fullscreenButton').addClass('iconFirefox');                    // 350\n  } else if (element.webkitRequestFullscreen) {                        //\n    element.webkitRequestFullscreen();                                 // 353\n    $('.fullscreenButton').addClass('iconChrome');                     // 353\n  } else if (element.msRequestFullscreen) {                            //\n    element.msRequestFullscreen();                                     // 356\n  }                                                                    //\n  $('#chat').addClass('invisible');                                    // 346\n  $('#users').addClass('invisible');                                   // 346\n  $('#navbar').addClass('invisible');                                  // 346\n  $('.FABTriggerButton').addClass('invisible');                        // 346\n  $('.fullscreenButton').removeClass('whiteboardFullscreenButton');    // 346\n  $('.fullscreenButton').addClass('exitFullscreenButton');             // 346\n  $('.fullscreenButton i').removeClass('ion-arrow-expand');            // 346\n  $('.fullscreenButton i').addClass('ion-arrow-shrink');               // 346\n  $('#whiteboard-paper').addClass('vertically-centered');              // 346\n  $('#whiteboard').bind('webkitfullscreenchange', function(e) {        // 346\n    if (document.webkitFullscreenElement === null) {                   // 367\n      $('#whiteboard').unbind('webkitfullscreenchange');               // 368\n      $('.fullscreenButton').removeClass('iconChrome');                // 368\n      removeFullscreenStyles();                                        // 368\n      return scaleWhiteboard();                                        //\n    }                                                                  //\n  });                                                                  //\n  return $(document).bind('mozfullscreenchange', function(e) {         //\n    if (document.mozFullScreenElement === null) {                      // 373\n      $(document).unbind('mozfullscreenchange');                       // 374\n      $('.fullscreenButton').removeClass('iconFirefox');               // 374\n      removeFullscreenStyles();                                        // 374\n      return scaleWhiteboard();                                        //\n    }                                                                  //\n  });                                                                  //\n};                                                                     // 345\n                                                                       //\nthis.closeMenus = function() {                                         // 1\n  if ($('.userlistMenu').hasClass('menuOut')) {                        // 380\n    toggleUserlistMenu();                                              // 381\n    return toggleLeftHamburderIcon();                                  //\n  } else if ($('.settingsMenu').hasClass('menuOut')) {                 //\n    toggleSettingsMenu();                                              // 384\n    return toggleRightHamburderIcon();                                 //\n  }                                                                    //\n};                                                                     // 379\n                                                                       //\nthis.exitVoiceCall = function(event) {                                 // 1\n  var checkToHangupCall, hangupCallback;                               // 391\n  hangupCallback = function() {                                        // 391\n    return console.log(\"Exiting Voice Conference\");                    //\n  };                                                                   //\n  getInSession(\"triedHangup\", false);                                  // 391\n  (checkToHangupCall = function(context) {                             // 391\n    if (BBB.getCallStatus() !== null && !getInSession(\"triedHangup\")) {\n      console.log(\"Attempting to hangup on WebRTC call\");              // 402\n      if (BBB.amIListenOnlyAudio()) {                                  // 403\n        Meteor.call('listenOnlyRequestToggle', BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"authToken\"), false);\n      }                                                                //\n      BBB.leaveVoiceConference(hangupCallback);                        // 402\n      getInSession(\"triedHangup\", true);                               // 402\n      return notification_WebRTCAudioExited();                         //\n    } else {                                                           //\n      console.log(\"RETRYING hangup on WebRTC call in \" + Meteor.config.app.WebRTCHangupRetryInterval + \" ms\");\n      return setTimeout(checkToHangupCall, Meteor.config.app.WebRTCHangupRetryInterval);\n    }                                                                  //\n  })(this);                                                            //\n  return false;                                                        // 412\n};                                                                     // 389\n                                                                       //\nthis.joinVoiceCall = function(event, arg) {                            // 1\n  var isListenOnly, joinCallback;                                      // 416\n  isListenOnly = (arg != null ? arg : {}).isListenOnly;                // 416\n  if (!isWebRTCAvailable()) {                                          // 416\n    notification_WebRTCNotSupported();                                 // 417\n    return;                                                            // 418\n  }                                                                    //\n  if (isListenOnly == null) {                                          //\n    isListenOnly = true;                                               //\n  }                                                                    //\n  joinCallback = function(message) {                                   // 416\n    return console.log(\"Beginning WebRTC Conference Call\");            //\n  };                                                                   //\n  notification_WebRTCAudioJoining();                                   // 416\n  if (isListenOnly) {                                                  // 427\n    Meteor.call('listenOnlyRequestToggle', BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"authToken\"), true);\n  }                                                                    //\n  BBB.joinVoiceConference(joinCallback, isListenOnly);                 // 416\n  return false;                                                        // 431\n};                                                                     // 415\n                                                                       //\nthis.userLogout = function(meeting, user) {                            // 1\n  Meteor.call(\"userLogout\", meeting, user, getInSession(\"authToken\"));\n  console.log(\"logging out\");                                          // 437\n  return clearSessionVar(document.location = getInSession('logoutURL'));\n};                                                                     // 436\n                                                                       //\nthis.clearSessionVar = function(callback) {                            // 1\n  amplify.store('authToken', null);                                    // 443\n  amplify.store('bbbServerVersion', null);                             // 443\n  amplify.store('chats', null);                                        // 443\n  amplify.store('dateOfBuild', null);                                  // 443\n  amplify.store('display_chatPane', null);                             // 443\n  amplify.store('display_chatbar', null);                              // 443\n  amplify.store('display_navbar', null);                               // 443\n  amplify.store('display_usersList', null);                            // 443\n  amplify.store('display_whiteboard', null);                           // 443\n  amplify.store('inChatWith', null);                                   // 443\n  amplify.store('logoutURL', null);                                    // 443\n  amplify.store('meetingId', null);                                    // 443\n  amplify.store('messageFontSize', null);                              // 443\n  amplify.store('tabsRenderedTime', null);                             // 443\n  amplify.store('userId', null);                                       // 443\n  amplify.store('display_menu', null);                                 // 443\n  if (callback != null) {                                              // 459\n    return callback();                                                 //\n  }                                                                    //\n};                                                                     // 442\n                                                                       //\nthis.setDefaultSettings = function() {                                 // 1\n  var initChats;                                                       // 464\n  setInSession(\"display_navbar\", true);                                // 464\n  setInSession(\"display_chatbar\", true);                               // 464\n  setInSession(\"display_whiteboard\", true);                            // 464\n  setInSession(\"display_chatPane\", true);                              // 464\n  if (isPortraitMobile() || isLandscapeMobile()) {                     // 470\n    setInSession(\"messageFontSize\", Meteor.config.app.mobileFont);     // 471\n  } else {                                                             //\n    setInSession(\"messageFontSize\", Meteor.config.app.desktopFont);    // 474\n  }                                                                    //\n  setInSession('display_slidingMenu', false);                          // 464\n  setInSession('display_hiddenNavbarSection', false);                  // 464\n  if (isLandscape()) {                                                 // 477\n    setInSession('display_usersList', true);                           // 478\n  } else {                                                             //\n    setInSession('display_usersList', false);                          // 480\n  }                                                                    //\n  setInSession('display_menu', false);                                 // 464\n  setInSession('chatInputMinHeight', 0);                               // 464\n  if (loginOrRefresh()) {                                              // 486\n    initChats = [                                                      // 487\n      {                                                                //\n        userId: \"PUBLIC_CHAT\",                                         // 488\n        gotMail: false,                                                // 488\n        number: 0                                                      // 488\n      }                                                                //\n    ];                                                                 //\n    setInSession('chats', initChats);                                  // 487\n    setInSession(\"inChatWith\", 'PUBLIC_CHAT');                         // 487\n  }                                                                    //\n  return TimeSync.loggingEnabled = false;                              //\n};                                                                     // 463\n                                                                       //\nthis.loginOrRefresh = function() {                                     // 1\n  var checkId, userId;                                                 // 499\n  userId = getInSession('userId');                                     // 499\n  checkId = getInSession('checkId');                                   // 499\n  if (checkId === void 0) {                                            // 501\n    setInSession('checkId', userId);                                   // 502\n    return true;                                                       // 503\n  } else if (userId !== checkId) {                                     //\n    setInSession('checkId', userId);                                   // 505\n    return true;                                                       // 506\n  } else {                                                             //\n    return false;                                                      // 508\n  }                                                                    //\n};                                                                     // 498\n                                                                       //\nthis.onLoadComplete = function() {                                     // 1\n  var ref;                                                             // 511\n  document.title = \"BigBlueButton \" + ((ref = BBB.getMeetingName()) != null ? ref : 'HTML5');\n  setDefaultSettings();                                                // 511\n  return Meteor.Users.find().observe({                                 //\n    removed: function(oldDocument) {                                   // 514\n      if (oldDocument.userId === getInSession('userId')) {             // 516\n        return document.location = getInSession('logoutURL');          //\n      }                                                                //\n    }                                                                  //\n  });                                                                  //\n};                                                                     // 510\n                                                                       //\nthis.isMobile = function() {                                           // 1\n  return navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/iPhone|iPad|iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i) || navigator.userAgent.match(/IEMobile/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/webOS/i);\n};                                                                     // 521\n                                                                       //\nthis.isLandscape = function() {                                        // 1\n  return !isMobile() && window.matchMedia('(orientation: landscape)').matches && window.matchMedia('(min-device-aspect-ratio: 1/1)').matches;\n};                                                                     // 530\n                                                                       //\nthis.isPortrait = function() {                                         // 1\n  return !isMobile() && window.matchMedia('(orientation: portrait)').matches && window.matchMedia('(min-device-aspect-ratio: 1/1)').matches;\n};                                                                     // 535\n                                                                       //\nthis.isPortraitMobile = function() {                                   // 1\n  return isMobile() && window.matchMedia('(orientation: portrait)').matches && window.matchMedia('(max-device-aspect-ratio: 1/1)').matches;\n};                                                                     // 541\n                                                                       //\nthis.isLandscapeMobile = function() {                                  // 1\n  return isMobile() && window.matchMedia('(orientation: landscape)').matches && window.matchMedia('(min-device-aspect-ratio: 1/1)').matches;\n};                                                                     // 547\n                                                                       //\nthis.isLandscapePhone = function() {                                   // 1\n  return window.matchMedia('(orientation: landscape)').matches && window.matchMedia('(min-device-aspect-ratio: 1/1)').matches && window.matchMedia('(max-device-width: 959px)').matches;\n};                                                                     // 552\n                                                                       //\nthis.isPortraitPhone = function() {                                    // 1\n  return (window.matchMedia('(orientation: portrait)').matches && window.matchMedia('(max-device-aspect-ratio: 1/1)').matches && window.matchMedia('(max-device-width: 480px)').matches) || (window.matchMedia('(orientation: landscape)').matches && window.matchMedia('(max-device-aspect-ratio: 1/1)').matches && window.matchMedia('(max-device-width: 480px)').matches);\n};                                                                     // 558\n                                                                       //\nthis.isPhone = function() {                                            // 1\n  return isLandscapePhone() || isPortraitPhone();                      //\n};                                                                     // 568\n                                                                       //\nthis.orientationBecameLandscape = function() {                         // 1\n  return adjustChatInputHeight();                                      //\n};                                                                     // 572\n                                                                       //\nthis.orientationBecamePortrait = function() {                          // 1\n  return adjustChatInputHeight();                                      //\n};                                                                     // 575\n                                                                       //\nthis.isOnlyOnePanelOpen = function() {                                 // 1\n  return getInSession(\"display_usersList\") + getInSession(\"display_whiteboard\") + getInSession(\"display_chatbar\") === 1;\n};                                                                     // 578\n                                                                       //\nthis.getBrowserName = function() {                                     // 1\n  if (navigator.userAgent.match(/Chrome/i)) {                          // 584\n    return 'Chrome';                                                   // 585\n  } else if (navigator.userAgent.match(/Firefox/i)) {                  //\n    return 'Firefox';                                                  // 587\n  } else if (navigator.userAgent.match(/Safari/i)) {                   //\n    return 'Safari';                                                   // 589\n  } else if (navigator.userAgent.match(/Trident/i)) {                  //\n    return 'IE';                                                       // 591\n  } else {                                                             //\n    return null;                                                       // 593\n  }                                                                    //\n};                                                                     // 583\n                                                                       //\nthis.scrollChatDown = function() {                                     // 1\n  var ref;                                                             // 596\n  return $('#chatbody').scrollTop((ref = $('#chatbody')[0]) != null ? ref.scrollHeight : void 0);\n};                                                                     // 595\n                                                                       //\nthis.adjustChatInputHeight = function() {                              // 1\n  var projectedHeight, ref;                                            // 600\n  if (isLandscape()) {                                                 // 600\n    $('#newMessageInput').css('height', 'auto');                       // 601\n    projectedHeight = $('#newMessageInput')[0].scrollHeight + 23;      // 601\n    if (projectedHeight !== $('.panel-footer').height() && projectedHeight >= getInSession('chatInputMinHeight')) {\n      $('#newMessageInput').css('overflow', 'hidden');                 // 605\n      $('.panel-footer').css('top', -(projectedHeight - 70) + 'px');   // 605\n      $('.panel-footer').css('height', projectedHeight + 'px');        // 605\n      $('#newMessageInput').height($('#newMessageInput')[0].scrollHeight);\n      $('#chatbody').height($('#chat').height() - projectedHeight - 45);\n      $('#chatbody').scrollTop((ref = $('#chatbody')[0]) != null ? ref.scrollHeight : void 0);\n    }                                                                  //\n    return $('#newMessageInput').css('height', '');                    //\n  } else if (isPortrait()) {                                           //\n    $('.panel-footer').attr('style', '');                              // 618\n    $('#chatbody').attr('style', '');                                  // 618\n    return $('#newMessageInput').attr('style', '');                    //\n  }                                                                    //\n};                                                                     // 599\n                                                                       //\nthis.toggleEmojisFAB = function() {                                    // 1\n  if ($('.FABContainer').hasClass('openedFAB')) {                      // 623\n    $('.FABContainer > button:nth-child(2)').css('opacity', $('.FABContainer > button:nth-child(2)').css('opacity'));\n    $('.FABContainer > button:nth-child(3)').css('opacity', $('.FABContainer > button:nth-child(3)').css('opacity'));\n    $('.FABContainer > button:nth-child(4)').css('opacity', $('.FABContainer > button:nth-child(4)').css('opacity'));\n    $('.FABContainer > button:nth-child(5)').css('opacity', $('.FABContainer > button:nth-child(5)').css('opacity'));\n    $('.FABContainer > button:nth-child(6)').css('opacity', $('.FABContainer > button:nth-child(6)').css('opacity'));\n    $('.FABContainer > button:nth-child(7)').css('opacity', $('.FABContainer > button:nth-child(7)').css('opacity'));\n    $('.FABContainer').removeClass('openedFAB');                       // 624\n    return $('.FABContainer').addClass('closedFAB');                   //\n  } else {                                                             //\n    $('.FABContainer > button:nth-child(2)').css('opacity', $('.FABContainer > button:nth-child(2)').css('opacity'));\n    $('.FABContainer > button:nth-child(3)').css('opacity', $('.FABContainer > button:nth-child(3)').css('opacity'));\n    $('.FABContainer > button:nth-child(4)').css('opacity', $('.FABContainer > button:nth-child(4)').css('opacity'));\n    $('.FABContainer > button:nth-child(5)').css('opacity', $('.FABContainer > button:nth-child(5)').css('opacity'));\n    $('.FABContainer > button:nth-child(6)').css('opacity', $('.FABContainer > button:nth-child(6)').css('opacity'));\n    $('.FABContainer > button:nth-child(7)').css('opacity', $('.FABContainer > button:nth-child(7)').css('opacity'));\n    $('.FABContainer').removeClass('closedFAB');                       // 633\n    return $('.FABContainer').addClass('openedFAB');                   //\n  }                                                                    //\n};                                                                     // 622\n                                                                       //\nthis.toggleLeftHamburderIcon = function() {                            // 1\n  if ($('.leftHamburgerButton').hasClass('hamburgerToggledOn')) {      // 643\n    return $('.leftHamburgerButton').removeClass('hamburgerToggledOn');\n  } else {                                                             //\n    return $('.leftHamburgerButton').addClass('hamburgerToggledOn');   //\n  }                                                                    //\n};                                                                     // 642\n                                                                       //\nthis.toggleRightHamburderIcon = function() {                           // 1\n  if ($('.rightHamburgerButton').hasClass('hamburgerToggledOn')) {     // 649\n    return $('.rightHamburgerButton').removeClass('hamburgerToggledOn');\n  } else {                                                             //\n    return $('.rightHamburgerButton').addClass('hamburgerToggledOn');  //\n  }                                                                    //\n};                                                                     // 648\n                                                                       //\nthis.toggleUserlistMenu = function() {                                 // 1\n  if ($('.userlistMenu').hasClass('menuOut')) {                        // 655\n    return $('.userlistMenu').removeClass('menuOut');                  //\n  } else {                                                             //\n    return $('.userlistMenu').addClass('menuOut');                     //\n  }                                                                    //\n};                                                                     // 654\n                                                                       //\nthis.toggleSettingsMenu = function() {                                 // 1\n  if ($('.settingsMenu').hasClass('menuOut')) {                        // 661\n    return $('.settingsMenu').removeClass('menuOut');                  //\n  } else {                                                             //\n    return $('.settingsMenu').addClass('menuOut');                     //\n  }                                                                    //\n};                                                                     // 660\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/globals.coffee.js","sourceMap":{"version":3,"sources":["/client/globals.coffee"],"names":[],"mappings":"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","file":"/client/globals.coffee.js","sourcesContent":["@getBuildInformation = ->\r\n  copyrightYear = Meteor.config?.copyrightYear or \"DATE\"\r\n  html5ClientBuild = Meteor.config?.html5ClientBuild or \"VERSION\"\r\n  defaultWelcomeMessage = Meteor.config?.defaultWelcomeMessage or \"WELCOME MESSAGE\"\r\n  defaultWelcomeMessageFooter = Meteor.config?.defaultWelcomeMessageFooter or \"WELCOME MESSAGE\"\r\n  link = \"<a href='http://bigbluebutton.org/' target='_blank'>http://bigbluebutton.org</a>\"\r\n\r\n  {\r\n    'copyrightYear': copyrightYear\r\n    'html5ClientBuild': html5ClientBuild\r\n    'defaultWelcomeMessage': defaultWelcomeMessage\r\n    'defaultWelcomeMessageFooter': defaultWelcomeMessageFooter\r\n    'link': link\r\n  }\r\n\r\n# Convert a color `value` as integer to a hex color (e.g. 255 to #0000ff)\r\n@colourToHex = (value) ->\r\n  hex = parseInt(value).toString(16)\r\n  hex = \"0\" + hex while hex.length < 6\r\n  \"##{hex}\"\r\n\r\n# color can be a number (a hex converted to int) or a string (e.g. \"#ffff00\")\r\n@formatColor = (color) ->\r\n  color ?= \"0\" # default value\r\n  if !color.toString().match(/\\#.*/)\r\n    color = colourToHex(color)\r\n  color\r\n\r\n@getCurrentSlideDoc = -> # returns only one document\r\n  BBB.getCurrentSlide()\r\n\r\n@getInSession = (k) -> SessionAmplify.get k\r\n\r\n@getTime = -> # returns epoch in ms\r\n  (new Date).valueOf()\r\n\r\n# checks if the pan gesture is mostly horizontal\r\n@isPanHorizontal = (event) ->\r\n  Math.abs(event.deltaX) > Math.abs(event.deltaY)\r\n\r\n# helper to determine whether user has joined any type of audio\r\nHandlebars.registerHelper \"amIInAudio\", ->\r\n  BBB.amIInAudio()\r\n\r\n# helper to determine whether the user is in the listen only audio stream\r\nHandlebars.registerHelper \"amIListenOnlyAudio\", ->\r\n  BBB.amIListenOnlyAudio()\r\n\r\n# helper to determine whether the user is in the listen only audio stream\r\nHandlebars.registerHelper \"isMyMicLocked\", ->\r\n  BBB.isMyMicLocked()\r\n\r\nHandlebars.registerHelper \"colourToHex\", (value) =>\r\n  @window.colourToHex(value)\r\n\r\nHandlebars.registerHelper 'equals', (a, b) -> # equals operator was dropped in Meteor's migration from Handlebars to Spacebars\r\n  a is b\r\n\r\nHandlebars.registerHelper \"getCurrentMeeting\", ->\r\n  Meteor.Meetings.findOne()\r\n\r\nHandlebars.registerHelper \"getCurrentSlide\", ->\r\n  getCurrentSlideDoc()\r\n\r\n# Allow access through all templates\r\nHandlebars.registerHelper \"getInSession\", (k) -> SessionAmplify.get k\r\n\r\nHandlebars.registerHelper \"getMeetingName\", ->\r\n  BBB.getMeetingName()\r\n\r\nHandlebars.registerHelper \"getShapesForSlide\", ->\r\n  currentSlide = getCurrentSlideDoc()\r\n\r\n  # try to reuse the lines above\r\n  Meteor.Shapes.find({whiteboardId: currentSlide?.slide?.id})\r\n\r\n# retrieves all users in the meeting\r\nHandlebars.registerHelper \"getUsersInMeeting\", ->\r\n  users = Meteor.Users.find().fetch()\r\n  if users?.length > 1\r\n    getSortedUserList(users)\r\n  else\r\n    users\r\n\r\nHandlebars.registerHelper \"getWhiteboardTitle\", ->\r\n  (BBB.currentPresentationName() or \"Loading presentation...\")\r\n\r\nHandlebars.registerHelper \"getCurrentUserEmojiStatus\", ->\r\n  BBB.getCurrentUser()?.user?.emoji_status\r\n\r\nHandlebars.registerHelper \"isCurrentUser\", (userId) ->\r\n  userId is null or userId is BBB.getCurrentUser()?.userId\r\n\r\nHandlebars.registerHelper \"isCurrentUserMuted\", ->\r\n  BBB.amIMuted()\r\n\r\n#Retreives a username for a private chat tab from the database if it exists\r\nHandlebars.registerHelper \"privateChatName\", ->\r\n  obj = Meteor.Users.findOne({ userId: getInSession \"inChatWith\" })\r\n  if obj?\r\n    obj?.user?.name\r\n\r\nHandlebars.registerHelper \"isCurrentUserEmojiStatusSet\", ->\r\n  BBB.isCurrentUserEmojiStatusSet()\r\n\r\nHandlebars.registerHelper \"isCurrentUserSharingVideo\", ->\r\n  BBB.amISharingVideo()\r\n\r\nHandlebars.registerHelper \"isCurrentUserTalking\", ->\r\n  BBB.amITalking()\r\n\r\nHandlebars.registerHelper \"isCurrentUserPresenter\", ->\r\n  BBB.isUserPresenter(getInSession('userId'))\r\n\r\nHandlebars.registerHelper \"isDisconnected\", ->\r\n  return !Meteor.status().connected\r\n\r\nHandlebars.registerHelper \"isUserInAudio\", (userId) ->\r\n  BBB.isUserInAudio(userId)\r\n\r\nHandlebars.registerHelper \"isUserListenOnlyAudio\", (userId) ->\r\n  BBB.isUserListenOnlyAudio(userId)\r\n\r\nHandlebars.registerHelper \"isUserMuted\", (userId) ->\r\n  BBB.isUserMuted(userId)\r\n\r\nHandlebars.registerHelper \"isUserSharingVideo\", (userId) ->\r\n  BBB.isUserSharingWebcam(userId)\r\n\r\nHandlebars.registerHelper \"isUserTalking\", (userId) ->\r\n  BBB.isUserTalking(userId)\r\n\r\nHandlebars.registerHelper 'isMobile', () ->\r\n  isMobile()\r\n\r\nHandlebars.registerHelper 'isPortraitMobile', () ->\r\n  isPortraitMobile()\r\n\r\nHandlebars.registerHelper 'isMobileChromeOrFirefox', () ->\r\n  isMobile() and ((getBrowserName() is 'Chrome') or (getBrowserName() is 'Firefox'))\r\n\r\nHandlebars.registerHelper \"meetingIsRecording\", ->\r\n  BBB.isMeetingRecording()\r\n\r\nHandlebars.registerHelper \"messageFontSize\", ->\r\n  style: \"font-size: #{getInSession(\"messageFontSize\")}px;\"\r\n\r\nHandlebars.registerHelper \"pointerLocation\", ->\r\n  currentPresentation = Meteor.Presentations.findOne({\"presentation.current\": true})\r\n  presentationId = currentPresentation?.presentation?.id\r\n  currentSlideDoc = Meteor.Slides.findOne({\"presentationId\": presentationId, \"slide.current\": true})\r\n  pointer = currentPresentation?.pointer\r\n  pointer.x = (- currentSlideDoc.slide.x_offset * 2 + currentSlideDoc.slide.width_ratio * pointer.x) / 100\r\n  pointer.y = (- currentSlideDoc.slide.y_offset * 2 + currentSlideDoc.slide.height_ratio * pointer.y) / 100\r\n  pointer\r\n\r\nHandlebars.registerHelper \"safeName\", (str) ->\r\n  safeString(str)\r\n\r\n###Handlebars.registerHelper \"visibility\", (section) ->\r\n  if getInSession \"display_#{section}\"\r\n    style: 'display:block;'\r\n  else\r\n    style: 'display:none;'###\r\n\r\nHandlebars.registerHelper \"visibility\", (section) ->\r\n  style: 'display:block;'\r\n\r\nHandlebars.registerHelper 'containerPosition', (section) ->\r\n  if getInSession 'display_usersList'\r\n    return 'moved-to-right'\r\n  else if getInSession 'display_menu'\r\n    return 'moved-to-left'\r\n  else\r\n    return ''\r\n\r\n# vertically shrinks the whiteboard if the slide navigation controllers are present\r\nHandlebars.registerHelper 'whiteboardSize', (section) ->\r\n  if BBB.isUserPresenter(getInSession('userId'))\r\n    return 'presenter-whiteboard'\r\n  else\r\n    if BBB.isPollGoing(getInSession('userId'))\r\n      return 'poll-whiteboard'\r\n    else\r\n      return 'viewer-whiteboard'\r\n\r\nHandlebars.registerHelper \"getPollQuestions\", ->\r\n  polls = BBB.getCurrentPoll(getInSession('userId'))\r\n  if polls? and polls isnt undefined\r\n    number = polls.poll_info.poll.answers.length\r\n    widthStyle = \"width: calc(75%/\" + number + \");\"\r\n    marginStyle = \"margin-left: calc(25%/\" + (number*2) + \");\" + \"margin-right: calc(25%/\" + (number*2) + \");\"\r\n    buttonStyle = widthStyle + marginStyle\r\n    for answer in polls.poll_info.poll.answers\r\n      answer.style = buttonStyle\r\n    return polls.poll_info.poll.answers\r\n\r\n@getSortedUserList = (users) ->\r\n  if users?.length > 1\r\n    users.sort (a, b) ->\r\n      if a.user.role is \"MODERATOR\" and b.user.role is \"MODERATOR\"\r\n        if a.user.set_emoji_time and b.user.set_emoji_time\r\n          aTime = a.user.set_emoji_time.getTime()\r\n          bTime = b.user.set_emoji_time.getTime()\r\n          if aTime < bTime\r\n            return -1\r\n          else\r\n            return 1\r\n        else if a.user.set_emoji_time\r\n          return -1\r\n        else if b.user.set_emoji_time\r\n          return 1\r\n      else if a.user.role is \"MODERATOR\"\r\n        return -1\r\n      else if b.user.role is \"MODERATOR\"\r\n        return 1\r\n      else if a.user.set_emoji_time and b.user.set_emoji_time\r\n        aTime = a.user.set_emoji_time.getTime()\r\n        bTime = b.user.set_emoji_time.getTime()\r\n        if aTime < bTime\r\n          return -1\r\n        else\r\n          return 1\r\n      else if a.user.set_emoji_time\r\n        return -1\r\n      else if b.user.set_emoji_time\r\n        return 1\r\n      else if not a.user.phone_user and not b.user.phone_user\r\n\r\n      else if not a.user.phone_user\r\n        return -1\r\n      else if not b.user.phone_user\r\n        return 1\r\n\r\n      #Check name (case-insensitive) in the event of a tie up above. If the name\r\n      #is the same then use userID which should be unique making the order the same\r\n      #across all clients.\r\n\r\n      if a.user._sort_name < b.user._sort_name\r\n        return -1\r\n      else if a.user._sort_name > b.user._sort_name\r\n        return 1\r\n      else if a.user.userid.toLowerCase() > b.user.userid.toLowerCase()\r\n        return -1\r\n      else if a.user.userid.toLowerCase() < b.user.userid.toLowerCase()\r\n        return 1\r\n\r\n  users\r\n\r\n# transform plain text links into HTML tags compatible with Flash client\r\n@linkify = (str) ->\r\n  str = str.replace re_weburl, \"<a href='event:$&'><u>$&</u></a>\"\r\n\r\n@setInSession = (k, v) -> SessionAmplify.set k, v\r\n\r\n@safeString = (str) ->\r\n  if typeof str is 'string'\r\n    str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\r\n\r\n@toggleCam = (event) ->\r\n  # Meteor.Users.update {_id: context._id} , {$set:{\"user.sharingVideo\": !context.sharingVideo}}\r\n  # Meteor.call('userToggleCam', context._id, !context.sharingVideo)\r\n\r\n@toggleChatbar = ->\r\n  setInSession \"display_chatbar\", !getInSession \"display_chatbar\"\r\n  if !getInSession(\"display_chatbar\")\r\n    $('#whiteboard').css('width', '100%')\r\n    $('#whiteboard .ui-resizable-handle').css('display', 'none')\r\n  else\r\n    $('#whiteboard').css('width', '')\r\n    $('#whiteboard .ui-resizable-handle').css('display', '')\r\n  setTimeout(scaleWhiteboard, 0)\r\n\r\n@toggleMic = (event) ->\r\n  BBB.toggleMyMic()\r\n\r\n@toggleUsersList = ->\r\n  if $('.userlistMenu').hasClass('hiddenInLandscape')\r\n    $('.userlistMenu').removeClass('hiddenInLandscape')\r\n  else\r\n    $('.userlistMenu').addClass('hiddenInLandscape')\r\n  setTimeout(scaleWhiteboard, 0)\r\n\r\n@populateNotifications = (msg) ->\r\n  myUserId = getInSession \"userId\"\r\n  users = Meteor.Users.find().fetch()\r\n\r\n  # assuming that I only have access only to private messages where I am the sender or the recipient\r\n  myPrivateChats = Meteor.Chat.find({'message.chat_type': 'PRIVATE_CHAT'}).fetch()\r\n\r\n  uniqueArray = []\r\n  for chat in myPrivateChats\r\n    if chat.message.to_userid is myUserId\r\n      uniqueArray.push({userId: chat.message.from_userid, username: chat.message.from_username})\r\n    if chat.message.from_userid is myUserId\r\n      uniqueArray.push({userId: chat.message.to_userid, username: chat.message.to_username})\r\n\r\n  #keep unique entries only\r\n  uniqueArray = uniqueArray.filter((itm, i, a) ->\r\n      i is a.indexOf(itm)\r\n    )\r\n\r\n  if msg.message.to_userid is myUserId\r\n    new_msg_userid = msg.message.from_userid\r\n  if msg.message.from_userid is myUserId\r\n    new_msg_userid = msg.message.to_userid\r\n\r\n  chats = getInSession('chats')\r\n  if chats is undefined\r\n    initChats = [\r\n      userId: \"PUBLIC_CHAT\"\r\n      gotMail: false\r\n      number: 0;\r\n    ]\r\n    setInSession 'chats', initChats\r\n\r\n  #insert the unique entries in the collection\r\n  for u in uniqueArray\r\n    chats = getInSession('chats')\r\n    if chats.filter((chat) -> chat.userId == u.userId).length is 0 and u.userId is new_msg_userid\r\n      chats.push {userId: u.userId, gotMail: false, number: 0}\r\n      setInSession 'chats', chats\r\n\r\n@toggleShield = ->\r\n  if parseFloat($('.shield').css('opacity')) is 0.5 # triggered during a pan gesture\r\n    $('.shield').css('opacity', '')\r\n\r\n  if !$('.shield').hasClass('darken') and !$('.shield').hasClass('animatedShield')\r\n    $('.shield').addClass('darken')\r\n  else\r\n    $('.shield').removeClass('darken')\r\n    $('.shield').removeClass('animatedShield')\r\n\r\n@removeFullscreenStyles = ->\r\n  $('#whiteboard-paper').removeClass('vertically-centered')\r\n  $('#chat').removeClass('invisible')\r\n  $('#users').removeClass('invisible')\r\n  $('#navbar').removeClass('invisible')\r\n  $('.FABTriggerButton').removeClass('invisible')\r\n  $('.fullscreenButton').removeClass('exitFullscreenButton')\r\n  $('.fullscreenButton').addClass('whiteboardFullscreenButton')\r\n  $('.fullscreenButton i').removeClass('ion-arrow-shrink')\r\n  $('.fullscreenButton i').addClass('ion-arrow-expand')\r\n\r\n@enterWhiteboardFullscreen = ->\r\n  element = document.getElementById('whiteboard')\r\n  if element.requestFullscreen\r\n    element.requestFullscreen()\r\n  else if element.mozRequestFullScreen\r\n    element.mozRequestFullScreen()\r\n    $('.fullscreenButton').addClass('iconFirefox') # browser-specific icon sizing\r\n  else if element.webkitRequestFullscreen\r\n    element.webkitRequestFullscreen()\r\n    $('.fullscreenButton').addClass('iconChrome') # browser-specific icon sizing\r\n  else if element.msRequestFullscreen\r\n    element.msRequestFullscreen()\r\n  $('#chat').addClass('invisible')\r\n  $('#users').addClass('invisible')\r\n  $('#navbar').addClass('invisible')\r\n  $('.FABTriggerButton').addClass('invisible')\r\n  $('.fullscreenButton').removeClass('whiteboardFullscreenButton')\r\n  $('.fullscreenButton').addClass('exitFullscreenButton')\r\n  $('.fullscreenButton i').removeClass('ion-arrow-expand')\r\n  $('.fullscreenButton i').addClass('ion-arrow-shrink')\r\n  $('#whiteboard-paper').addClass('vertically-centered')\r\n  $('#whiteboard').bind 'webkitfullscreenchange', (e) ->\r\n    if document.webkitFullscreenElement is null\r\n      $('#whiteboard').unbind('webkitfullscreenchange')\r\n      $('.fullscreenButton').removeClass('iconChrome')\r\n      removeFullscreenStyles()\r\n      scaleWhiteboard()\r\n  $(document).bind 'mozfullscreenchange', (e) -> # target is always the document in Firefox\r\n    if document.mozFullScreenElement is null\r\n      $(document).unbind('mozfullscreenchange')\r\n      $('.fullscreenButton').removeClass('iconFirefox')\r\n      removeFullscreenStyles()\r\n      scaleWhiteboard()\r\n\r\n@closeMenus = ->\r\n  if $('.userlistMenu').hasClass('menuOut')\r\n    toggleUserlistMenu()\r\n    toggleLeftHamburderIcon()\r\n  else if $('.settingsMenu').hasClass('menuOut')\r\n    toggleSettingsMenu()\r\n    toggleRightHamburderIcon()\r\n\r\n# Periodically check the status of the WebRTC call, when a call has been established attempt to hangup,\r\n# retry if a call is in progress, send the leave voice conference message to BBB\r\n@exitVoiceCall = (event) ->\r\n  # To be called when the hangup is initiated\r\n  hangupCallback = ->\r\n    console.log \"Exiting Voice Conference\"\r\n\r\n  # Checks periodically until a call is established so we can successfully end the call\r\n  # clean state\r\n  getInSession(\"triedHangup\", false)\r\n  # function to initiate call\r\n  (checkToHangupCall = (context) ->\r\n    # if an attempt to hang up the call is made when the current session is not yet finished, the request has no effect\r\n    # keep track in the session if we haven't tried a hangup\r\n    if BBB.getCallStatus() isnt null and !getInSession(\"triedHangup\")\r\n      console.log \"Attempting to hangup on WebRTC call\"\r\n      if BBB.amIListenOnlyAudio() # notify BBB-apps we are leaving the call call if we are listen only\r\n        Meteor.call('listenOnlyRequestToggle', BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"authToken\"), false)\r\n      BBB.leaveVoiceConference hangupCallback\r\n      getInSession(\"triedHangup\", true) # we have hung up, prevent retries\r\n      notification_WebRTCAudioExited()\r\n    else\r\n      console.log \"RETRYING hangup on WebRTC call in #{Meteor.config.app.WebRTCHangupRetryInterval} ms\"\r\n      setTimeout checkToHangupCall, Meteor.config.app.WebRTCHangupRetryInterval # try again periodically\r\n  )(@) # automatically run function\r\n  return false\r\n\r\n# close the daudio UI, then join the conference. If listen only send the request to the server\r\n@joinVoiceCall = (event, {isListenOnly} = {}) ->\r\n  if !isWebRTCAvailable()\r\n    notification_WebRTCNotSupported()\r\n    return\r\n\r\n  isListenOnly ?= true\r\n\r\n  # create voice call params\r\n  joinCallback = (message) ->\r\n    console.log \"Beginning WebRTC Conference Call\"\r\n\r\n  notification_WebRTCAudioJoining()\r\n  if isListenOnly\r\n    Meteor.call('listenOnlyRequestToggle', BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"authToken\"), true)\r\n  BBB.joinVoiceConference joinCallback, isListenOnly # make the call #TODO should we apply role permissions to this action?\r\n\r\n  return false\r\n\r\n# Starts the entire logout procedure.\r\n# meeting: the meeting the user is in\r\n# the user's userId\r\n@userLogout = (meeting, user) ->\r\n  Meteor.call(\"userLogout\", meeting, user, getInSession(\"authToken\"))\r\n  console.log \"logging out\"\r\n  clearSessionVar(document.location = getInSession 'logoutURL') # navigate to logout\r\n\r\n# Clear the local user session\r\n@clearSessionVar = (callback) ->\r\n  amplify.store('authToken', null)\r\n  amplify.store('bbbServerVersion', null)\r\n  amplify.store('chats', null)\r\n  amplify.store('dateOfBuild', null)\r\n  amplify.store('display_chatPane', null)\r\n  amplify.store('display_chatbar', null)\r\n  amplify.store('display_navbar', null)\r\n  amplify.store('display_usersList', null)\r\n  amplify.store('display_whiteboard', null)\r\n  amplify.store('inChatWith', null)\r\n  amplify.store('logoutURL', null)\r\n  amplify.store('meetingId', null)\r\n  amplify.store('messageFontSize', null)\r\n  amplify.store('tabsRenderedTime', null)\r\n  amplify.store('userId', null)\r\n  amplify.store('display_menu', null)\r\n  if callback?\r\n    callback()\r\n\r\n# assign the default values for the Session vars\r\n@setDefaultSettings = ->\r\n  setInSession \"display_navbar\", true\r\n  setInSession \"display_chatbar\", true\r\n  setInSession \"display_whiteboard\", true\r\n  setInSession \"display_chatPane\", true\r\n\r\n  #if it is a desktop version of the client\r\n  if isPortraitMobile() or isLandscapeMobile()\r\n    setInSession \"messageFontSize\", Meteor.config.app.mobileFont\r\n  #if this is a mobile version of the client\r\n  else\r\n    setInSession \"messageFontSize\", Meteor.config.app.desktopFont\r\n  setInSession 'display_slidingMenu', false\r\n  setInSession 'display_hiddenNavbarSection', false\r\n  if isLandscape()\r\n    setInSession 'display_usersList', true\r\n  else\r\n    setInSession 'display_usersList', false\r\n  setInSession 'display_menu', false\r\n  setInSession 'chatInputMinHeight', 0\r\n\r\n  #keep notifications and an opened private chat tab if page was refreshed\r\n  #reset to default if that's a new user\r\n  if loginOrRefresh()\r\n    initChats = [\r\n      userId: \"PUBLIC_CHAT\"\r\n      gotMail: false\r\n      number: 0\r\n    ]\r\n    setInSession 'chats', initChats\r\n    setInSession \"inChatWith\", 'PUBLIC_CHAT'\r\n\r\n  TimeSync.loggingEnabled = false # suppresses the log messages from timesync\r\n\r\n#true if it is a new user, false if the client was just refreshed\r\n@loginOrRefresh = ->\r\n  userId = getInSession 'userId'\r\n  checkId = getInSession 'checkId'\r\n  if checkId is undefined\r\n    setInSession 'checkId', userId\r\n    return true\r\n  else if userId isnt checkId\r\n    setInSession 'checkId', userId\r\n    return true\r\n  else\r\n    return false\r\n\r\n@onLoadComplete = ->\r\n  document.title = \"BigBlueButton #{BBB.getMeetingName() ? 'HTML5'}\"\r\n  setDefaultSettings()\r\n\r\n  Meteor.Users.find().observe({\r\n  removed: (oldDocument) ->\r\n    if oldDocument.userId is getInSession 'userId'\r\n      document.location = getInSession 'logoutURL'\r\n  })\r\n\r\n# Detects a mobile device\r\n@isMobile = ->\r\n  navigator.userAgent.match(/Android/i) or\r\n  navigator.userAgent.match(/iPhone|iPad|iPod/i) or\r\n  navigator.userAgent.match(/BlackBerry/i) or\r\n  navigator.userAgent.match(/Windows Phone/i) or\r\n  navigator.userAgent.match(/IEMobile/i) or\r\n  navigator.userAgent.match(/BlackBerry/i) or\r\n  navigator.userAgent.match(/webOS/i)\r\n\r\n@isLandscape = ->\r\n  not isMobile() and\r\n  window.matchMedia('(orientation: landscape)').matches and      # browser is landscape\r\n  window.matchMedia('(min-device-aspect-ratio: 1/1)').matches    # device is landscape\r\n\r\n@isPortrait = ->\r\n  not isMobile() and\r\n  window.matchMedia('(orientation: portrait)').matches and       # browser is portrait\r\n  window.matchMedia('(min-device-aspect-ratio: 1/1)').matches    # device is landscape\r\n\r\n# Checks if the view is portrait and a mobile device is being used\r\n@isPortraitMobile = () ->\r\n isMobile() and\r\n window.matchMedia('(orientation: portrait)').matches and        # browser is portrait\r\n window.matchMedia('(max-device-aspect-ratio: 1/1)').matches     # device is portrait\r\n\r\n# Checks if the view is landscape and mobile device is being used\r\n@isLandscapeMobile = () ->\r\n  isMobile() and\r\n  window.matchMedia('(orientation: landscape)').matches and      # browser is landscape\r\n  window.matchMedia('(min-device-aspect-ratio: 1/1)').matches    # device is landscape\r\n\r\n@isLandscapePhone = () ->\r\n  # @phone-landscape media query:\r\n  window.matchMedia('(orientation: landscape)').matches and\r\n  window.matchMedia('(min-device-aspect-ratio: 1/1)').matches and\r\n  window.matchMedia('(max-device-width: 959px)').matches\r\n\r\n@isPortraitPhone = () ->\r\n  # @phone-portrait media query:\r\n  (window.matchMedia('(orientation: portrait)').matches and\r\n  window.matchMedia('(max-device-aspect-ratio: 1/1)').matches and\r\n  window.matchMedia('(max-device-width: 480px)').matches) or\r\n  # @phone-portrait-with-keyboard media query:\r\n  (window.matchMedia('(orientation: landscape)').matches and\r\n  window.matchMedia('(max-device-aspect-ratio: 1/1)').matches and\r\n  window.matchMedia('(max-device-width: 480px)').matches)\r\n\r\n@isPhone = () ->\r\n  isLandscapePhone() or isPortraitPhone()\r\n\r\n# The webpage orientation is now landscape\r\n@orientationBecameLandscape = ->\r\n  adjustChatInputHeight()\r\n# The webpage orientation is now portrait\r\n@orientationBecamePortrait = ->\r\n  adjustChatInputHeight()\r\n# Checks if only one panel (userlist/whiteboard/chatbar) is currently open\r\n@isOnlyOnePanelOpen = () ->\r\n  #(getInSession \"display_usersList\" ? 1 : 0) + (getInSession \"display_whiteboard\" ? 1 : 0) + (getInSession \"display_chatbar\" ? 1 : 0) is 1\r\n  getInSession(\"display_usersList\") + getInSession(\"display_whiteboard\") + getInSession(\"display_chatbar\") is 1\r\n\r\n# determines which browser is being used\r\n@getBrowserName = () ->\r\n  if navigator.userAgent.match(/Chrome/i)\r\n    return 'Chrome'\r\n  else if navigator.userAgent.match(/Firefox/i)\r\n    return 'Firefox'\r\n  else if navigator.userAgent.match(/Safari/i)\r\n    return 'Safari'\r\n  else if navigator.userAgent.match(/Trident/i)\r\n    return 'IE'\r\n  else\r\n    return null\r\n\r\n@scrollChatDown = () ->\r\n  $('#chatbody').scrollTop($('#chatbody')[0]?.scrollHeight)\r\n\r\n# changes the height of the chat input area if needed (based on the textarea content)\r\n@adjustChatInputHeight = () ->\r\n  if isLandscape()\r\n    $('#newMessageInput').css('height', 'auto')\r\n    projectedHeight = $('#newMessageInput')[0].scrollHeight + 23\r\n    if projectedHeight isnt $('.panel-footer').height() and\r\n    projectedHeight >= getInSession('chatInputMinHeight')\r\n      $('#newMessageInput').css('overflow', 'hidden') # prevents a scroll bar\r\n\r\n      # resizes the chat input area\r\n      $('.panel-footer').css('top', - (projectedHeight - 70) + 'px')\r\n      $('.panel-footer').css('height', projectedHeight + 'px')\r\n\r\n      $('#newMessageInput').height($('#newMessageInput')[0].scrollHeight)\r\n\r\n      # resizes the chat messages container\r\n      $('#chatbody').height($('#chat').height() - projectedHeight - 45)\r\n      $('#chatbody').scrollTop($('#chatbody')[0]?.scrollHeight)\r\n    $('#newMessageInput').css('height', '')\r\n  else if isPortrait()\r\n    $('.panel-footer').attr('style','')\r\n    $('#chatbody').attr('style','')\r\n    $('#newMessageInput').attr('style','')\r\n\r\n@toggleEmojisFAB = () ->\r\n  if $('.FABContainer').hasClass('openedFAB')\r\n    $('.FABContainer > button:nth-child(2)').css('opacity', $('.FABContainer > button:nth-child(2)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(3)').css('opacity', $('.FABContainer > button:nth-child(3)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(4)').css('opacity', $('.FABContainer > button:nth-child(4)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(5)').css('opacity', $('.FABContainer > button:nth-child(5)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(6)').css('opacity', $('.FABContainer > button:nth-child(6)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(7)').css('opacity', $('.FABContainer > button:nth-child(7)').css('opacity'))\r\n    $('.FABContainer').removeClass('openedFAB')\r\n    $('.FABContainer').addClass('closedFAB')\r\n  else\r\n    $('.FABContainer > button:nth-child(2)').css('opacity', $('.FABContainer > button:nth-child(2)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(3)').css('opacity', $('.FABContainer > button:nth-child(3)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(4)').css('opacity', $('.FABContainer > button:nth-child(4)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(5)').css('opacity', $('.FABContainer > button:nth-child(5)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(6)').css('opacity', $('.FABContainer > button:nth-child(6)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(7)').css('opacity', $('.FABContainer > button:nth-child(7)').css('opacity'))\r\n    $('.FABContainer').removeClass('closedFAB')\r\n    $('.FABContainer').addClass('openedFAB')\r\n\r\n@toggleLeftHamburderIcon = () ->\r\n  if $('.leftHamburgerButton').hasClass('hamburgerToggledOn')\r\n    $('.leftHamburgerButton').removeClass('hamburgerToggledOn')\r\n  else\r\n    $('.leftHamburgerButton').addClass('hamburgerToggledOn')\r\n\r\n@toggleRightHamburderIcon = () ->\r\n  if $('.rightHamburgerButton').hasClass('hamburgerToggledOn')\r\n    $('.rightHamburgerButton').removeClass('hamburgerToggledOn')\r\n  else\r\n    $('.rightHamburgerButton').addClass('hamburgerToggledOn')\r\n\r\n@toggleUserlistMenu = () ->\r\n  if $('.userlistMenu').hasClass('menuOut')\r\n    $('.userlistMenu').removeClass('menuOut')\r\n  else\r\n    $('.userlistMenu').addClass('menuOut')\r\n\r\n@toggleSettingsMenu = () ->\r\n  if $('.settingsMenu').hasClass('menuOut')\r\n    $('.settingsMenu').removeClass('menuOut')\r\n  else\r\n    $('.settingsMenu').addClass('menuOut')\r\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// collections/collections.coffee.js                                   //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nMeteor.Users = new Meteor.Collection(\"bbb_users\");                     // 1\n                                                                       //\nMeteor.Chat = new Meteor.Collection(\"bbb_chat\");                       // 1\n                                                                       //\nMeteor.Meetings = new Meteor.Collection(\"meetings\");                   // 1\n                                                                       //\nMeteor.Presentations = new Meteor.Collection(\"presentations\");         // 1\n                                                                       //\nMeteor.Shapes = new Meteor.Collection(\"shapes\");                       // 1\n                                                                       //\nMeteor.Slides = new Meteor.Collection(\"slides\");                       // 1\n                                                                       //\nMeteor.Polls = new Meteor.Collection(\"bbb_poll\");                      // 1\n                                                                       //\nMeteor.WhiteboardCleanStatus = new Meteor.Collection(\"whiteboard-clean-status\");\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/collections/collections.coffee.js","sourceMap":{"version":3,"sources":["/collections/collections.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,MAAM,CAAC,KAAP,GAAmB,UAAM,CAAC,UAAP,CAAkB,WAAlB,CAAnB;;AAAA,MACM,CAAC,IAAP,GAAkB,UAAM,CAAC,UAAP,CAAkB,UAAlB,CADlB;;AAAA,MAEM,CAAC,QAAP,GAAsB,UAAM,CAAC,UAAP,CAAkB,UAAlB,CAFtB;;AAAA,MAGM,CAAC,aAAP,GAA2B,UAAM,CAAC,UAAP,CAAkB,eAAlB,CAH3B;;AAAA,MAIM,CAAC,MAAP,GAAoB,UAAM,CAAC,UAAP,CAAkB,QAAlB,CAJpB;;AAAA,MAKM,CAAC,MAAP,GAAoB,UAAM,CAAC,UAAP,CAAkB,QAAlB,CALpB;;AAAA,MAMM,CAAC,KAAP,GAAmB,UAAM,CAAC,UAAP,CAAkB,UAAlB,CANnB;;AAAA,MAQM,CAAC,qBAAP,GAAmC,UAAM,CAAC,UAAP,CAAkB,yBAAlB,CARnC","file":"/collections/collections.coffee.js","sourcesContent":["Meteor.Users = new Meteor.Collection(\"bbb_users\")\r\nMeteor.Chat = new Meteor.Collection(\"bbb_chat\")\r\nMeteor.Meetings = new Meteor.Collection(\"meetings\")\r\nMeteor.Presentations = new Meteor.Collection(\"presentations\")\r\nMeteor.Shapes = new Meteor.Collection(\"shapes\")\r\nMeteor.Slides = new Meteor.Collection(\"slides\")\r\nMeteor.Polls = new Meteor.Collection(\"bbb_poll\")\r\n\r\nMeteor.WhiteboardCleanStatus = new Meteor.Collection(\"whiteboard-clean-status\")"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// config.coffee.js                                                    //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar config, file, ref, transports, winston;                            // 4\n                                                                       //\nconfig = {};                                                           // 4\n                                                                       //\nconfig.appName = 'BigBlueButton HTML5 Client';                         // 4\n                                                                       //\nconfig.bbbServerVersion = '1.0-beta';                                  // 4\n                                                                       //\nconfig.copyrightYear = '2015';                                         // 4\n                                                                       //\nconfig.html5ClientBuild = 'NNNN';                                      // 4\n                                                                       //\nconfig.defaultWelcomeMessage = 'Welcome to %%CONFNAME%%!\\r\\rFor help on using BigBlueButton see these (short) <a href=\"event:http://www.bigbluebutton.org/content/videos\"><u>tutorial videos</u></a>.\\r\\rTo join the audio bridge click the gear icon (upper-right hand corner).  Use a headset to avoid causing background noise for others.\\r\\r\\r';\n                                                                       //\nconfig.defaultWelcomeMessageFooter = \"This server is running a build of <a href='http://docs.bigbluebutton.org/1.0/10overview.html' target='_blank'><u>BigBlueButton \" + config.bbbServerVersion + \"</u></a>.\";\n                                                                       //\nconfig.maxUsernameLength = 30;                                         // 4\n                                                                       //\nconfig.maxChatLength = 140;                                            // 4\n                                                                       //\nconfig.lockOnJoin = true;                                              // 4\n                                                                       //\nconfig.app = {};                                                       // 4\n                                                                       //\nconfig.app.mobileFont = 16;                                            // 4\n                                                                       //\nconfig.app.desktopFont = 14;                                           // 4\n                                                                       //\nconfig.app.autoJoinAudio = false;                                      // 4\n                                                                       //\nconfig.app.WebRTCHangupRetryInterval = 2000;                           // 4\n                                                                       //\nconfig.redis = {};                                                     // 4\n                                                                       //\nconfig.redis.host = \"127.0.0.1\";                                       // 4\n                                                                       //\nconfig.redis.post = \"6379\";                                            // 4\n                                                                       //\nconfig.redis.timeout = 5000;                                           // 4\n                                                                       //\nconfig.redis.channels = {};                                            // 4\n                                                                       //\nconfig.redis.channels.fromBBBApps = \"bigbluebutton:from-bbb-apps:*\";   // 4\n                                                                       //\nconfig.redis.channels.toBBBApps = {};                                  // 4\n                                                                       //\nconfig.redis.channels.toBBBApps.pattern = \"bigbluebutton:to-bbb-apps:*\";\n                                                                       //\nconfig.redis.channels.toBBBApps.chat = \"bigbluebutton:to-bbb-apps:chat\";\n                                                                       //\nconfig.redis.channels.toBBBApps.meeting = \"bigbluebutton:to-bbb-apps:meeting\";\n                                                                       //\nconfig.redis.channels.toBBBApps.presentation = \"bigbluebutton:to-bbb-apps:presentation\";\n                                                                       //\nconfig.redis.channels.toBBBApps.users = \"bigbluebutton:to-bbb-apps:users\";\n                                                                       //\nconfig.redis.channels.toBBBApps.voice = \"bigbluebutton:to-bbb-apps:voice\";\n                                                                       //\nconfig.redis.channels.toBBBApps.whiteboard = \"bigbluebutton:to-bbb-apps:whiteboard\";\n                                                                       //\nconfig.redis.channels.toBBBApps.polling = \"bigbluebutton:to-bbb-apps:polling\";\n                                                                       //\nconfig.log = {};                                                       // 4\n                                                                       //\nif (Meteor.isServer) {                                                 // 51\n  config.log.path = (typeof process !== \"undefined\" && process !== null ? (ref = process.env) != null ? ref.NODE_ENV : void 0 : void 0) === \"production\" ? \"/var/log/bigbluebutton/bbbnode.log\" : process.env.PWD + '/../log/development.log';\n  winston = Winston;                                                   // 52\n  file = config.log.path;                                              // 52\n  transports = [                                                       // 52\n    new winston.transports.Console(), new winston.transports.File({    //\n      filename: file                                                   // 61\n    })                                                                 //\n  ];                                                                   //\n  Meteor.log = new winston.Logger({                                    // 52\n    transports: transports                                             // 64\n  });                                                                  //\n}                                                                      //\n                                                                       //\nMeteor.config = config;                                                // 4\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/config.coffee.js","sourceMap":{"version":3,"sources":["/config.coffee"],"names":[],"mappings":";;;;;;;;;AAGA;;AAAA,SAAS,EAAT;;AAAA,MAGM,CAAC,OAAP,GAAiB,4BAHjB;;AAAA,MAIM,CAAC,gBAAP,GAA0B,UAJ1B;;AAAA,MAKM,CAAC,aAAP,GAAuB,MALvB;;AAAA,MAMM,CAAC,gBAAP,GAA0B,MAN1B;;AAAA,MAOM,CAAC,qBAAP,GAA+B,qTAP/B;;AAAA,MAQM,CAAC,2BAAP,GAAqC,oIAAkI,MAAM,CAAC,gBAAzI,GAA0J,WAR/L;;AAAA,MAUM,CAAC,iBAAP,GAA2B,EAV3B;;AAAA,MAWM,CAAC,aAAP,GAAuB,GAXvB;;AAAA,MAaM,CAAC,UAAP,GAAoB,IAbpB;;AAAA,MAgBM,CAAC,GAAP,GAAa,EAhBb;;AAAA,MAmBM,CAAC,GAAG,CAAC,UAAX,GAAsB,EAnBtB;;AAAA,MAoBM,CAAC,GAAG,CAAC,WAAX,GAAuB,EApBvB;;AAAA,MAuBM,CAAC,GAAG,CAAC,aAAX,GAA2B,KAvB3B;;AAAA,MAyBM,CAAC,GAAG,CAAC,yBAAX,GAAuC,IAzBvC;;AAAA,MA4BM,CAAC,KAAP,GAAe,EA5Bf;;AAAA,MA6BM,CAAC,KAAK,CAAC,IAAb,GAAoB,WA7BpB;;AAAA,MA8BM,CAAC,KAAK,CAAC,IAAb,GAAoB,MA9BpB;;AAAA,MA+BM,CAAC,KAAK,CAAC,OAAb,GAAuB,IA/BvB;;AAAA,MAgCM,CAAC,KAAK,CAAC,QAAb,GAAwB,EAhCxB;;AAAA,MAiCM,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAtB,GAAoC,+BAjCpC;;AAAA,MAkCM,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAtB,GAAkC,EAlClC;;AAAA,MAmCM,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAhC,GAA0C,6BAnC1C;;AAAA,MAoCM,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAhC,GAAuC,gCApCvC;;AAAA,MAqCM,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAhC,GAA0C,mCArC1C;;AAAA,MAsCM,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAhC,GAA+C,wCAtC/C;;AAAA,MAuCM,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,KAAhC,GAAwC,iCAvCxC;;AAAA,MAwCM,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,KAAhC,GAAwC,iCAxCxC;;AAAA,MAyCM,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAhC,GAA6C,sCAzC7C;;AAAA,MA0CM,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAhC,GAA0C,mCA1C1C;;AAAA,MA6CM,CAAC,GAAP,GAAa,EA7Cb;;AA+CA,IAAG,MAAM,CAAC,QAAV;AACE,QAAM,CAAC,GAAG,CAAC,IAAX,0FAAiC,CAAE,2BAAd,KAA0B,YAA7B,GAChB,oCADgB,GAIf,OAAO,CAAC,GAAG,CAAC,GAAZ,GAAkB,yBAJrB;AAAA,EAOA,UAAU,OAPV;AAAA,EAQA,OAAO,MAAM,CAAC,GAAG,CAAC,IARlB;AAAA,EASA,aAAa;IAAM,WAAO,CAAC,UAAU,CAAC,OAAnB,EAAN,EAAwC,WAAO,CAAC,UAAU,CAAC,IAAnB,CAAwB;AAAA,MAAE,UAAU,IAAZ;KAAxB,CAAxC;GATb;AAAA,EAWA,MAAM,CAAC,GAAP,GAAiB,WAAO,CAAC,MAAR,CACf;AAAA,gBAAY,UAAZ;GADe,CAXjB,CADF;CA/CA;;AAAA,MA8DM,CAAC,MAAP,GAAgB,MA9DhB","file":"/config.coffee.js","sourcesContent":["# TODO: should be split on server and client side\n# # Global configurations file\n\nconfig = {}\n\n# Default global variables\nconfig.appName = 'BigBlueButton HTML5 Client'\nconfig.bbbServerVersion = '1.0-beta'\nconfig.copyrightYear = '2015'\nconfig.html5ClientBuild = 'NNNN'\nconfig.defaultWelcomeMessage = 'Welcome to %%CONFNAME%%!\\r\\rFor help on using BigBlueButton see these (short) <a href=\"event:http://www.bigbluebutton.org/content/videos\"><u>tutorial videos</u></a>.\\r\\rTo join the audio bridge click the gear icon (upper-right hand corner).  Use a headset to avoid causing background noise for others.\\r\\r\\r'\nconfig.defaultWelcomeMessageFooter = \"This server is running a build of <a href='http://docs.bigbluebutton.org/1.0/10overview.html' target='_blank'><u>BigBlueButton #{config.bbbServerVersion}</u></a>.\"\n\nconfig.maxUsernameLength = 30\nconfig.maxChatLength = 140\n\nconfig.lockOnJoin = true\n\n## Application configurations\nconfig.app = {}\n\n#default font sizes for mobile / desktop\nconfig.app.mobileFont=16\nconfig.app.desktopFont=14\n\n# Will offer the user to join the audio when entering the meeting\nconfig.app.autoJoinAudio = false\n# The amount of time the client will wait before making another call to successfully hangup the WebRTC conference call\nconfig.app.WebRTCHangupRetryInterval = 2000\n\n# Configs for redis\nconfig.redis = {}\nconfig.redis.host = \"127.0.0.1\"\nconfig.redis.post = \"6379\"\nconfig.redis.timeout = 5000\nconfig.redis.channels = {}\nconfig.redis.channels.fromBBBApps = \"bigbluebutton:from-bbb-apps:*\"\nconfig.redis.channels.toBBBApps = {}\nconfig.redis.channels.toBBBApps.pattern = \"bigbluebutton:to-bbb-apps:*\"\nconfig.redis.channels.toBBBApps.chat = \"bigbluebutton:to-bbb-apps:chat\"\nconfig.redis.channels.toBBBApps.meeting = \"bigbluebutton:to-bbb-apps:meeting\"\nconfig.redis.channels.toBBBApps.presentation = \"bigbluebutton:to-bbb-apps:presentation\"\nconfig.redis.channels.toBBBApps.users = \"bigbluebutton:to-bbb-apps:users\"\nconfig.redis.channels.toBBBApps.voice = \"bigbluebutton:to-bbb-apps:voice\"\nconfig.redis.channels.toBBBApps.whiteboard = \"bigbluebutton:to-bbb-apps:whiteboard\"\nconfig.redis.channels.toBBBApps.polling = \"bigbluebutton:to-bbb-apps:polling\"\n\n# Logging\nconfig.log = {}\n\nif Meteor.isServer\n  config.log.path = if process?.env?.NODE_ENV is \"production\"\n    \"/var/log/bigbluebutton/bbbnode.log\"\n  else\n    # logs in the directory immediatly before the meteor app\n     process.env.PWD + '/../log/development.log'\n\n  # Setting up a logger in Meteor.log\n  winston = Winston #Meteor.require 'winston'\n  file = config.log.path\n  transports = [ new winston.transports.Console(), new winston.transports.File { filename: file } ]\n\n  Meteor.log = new winston.Logger\n    transports: transports\n\nMeteor.config = config\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// client/main.coffee.js                                               //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar loadLib;                                                           // 2\n                                                                       //\nloadLib = function(libname) {                                          // 2\n  var retryMessageCallback, successCallback;                           // 3\n  successCallback = function() {};                                     // 3\n  retryMessageCallback = function(param) {                             // 3\n    return console.log(\"Failed to load library\", param);               //\n  };                                                                   //\n  return Meteor.Loader.loadJs(window.location.origin + \"/client/lib/\" + libname, successCallback, 10000).fail(retryMessageCallback);\n};                                                                     // 2\n                                                                       //\nMeteor.startup(function() {                                            // 2\n  loadLib('sip.js');                                                   // 14\n  loadLib('bbb_webrtc_bridge_sip.js');                                 // 14\n  loadLib('bbblogger.js');                                             // 14\n  return this.SessionAmplify = _.extend({}, Session, {                 //\n    keys: _.object(_.map(amplify.store.sessionStorage(), function(value, key) {\n      return [key, JSON.stringify(value)];                             //\n    })),                                                               //\n    set: function(key, value) {                                        // 19\n      Session.set.apply(this, arguments);                              // 26\n      amplify.store.sessionStorage(key, value);                        // 26\n    }                                                                  //\n  });                                                                  //\n});                                                                    // 12\n                                                                       //\nTemplate.header.events({                                               // 2\n  \"click .chatBarIcon\": function(event) {                              // 32\n    $(\".tooltip\").hide();                                              // 33\n    return toggleChatbar();                                            //\n  },                                                                   //\n  \"click .hideNavbarIcon\": function(event) {                           // 32\n    $(\".tooltip\").hide();                                              // 37\n    return toggleNavbar();                                             //\n  },                                                                   //\n  \"click .leaveAudioButton\": function(event) {                         // 32\n    return exitVoiceCall(event);                                       //\n  },                                                                   //\n  \"click .muteIcon\": function(event) {                                 // 32\n    $(\".tooltip\").hide();                                              // 44\n    return toggleMic(this);                                            //\n  },                                                                   //\n  \"click .hideNavbarIcon\": function(event) {                           // 32\n    $(\".tooltip\").hide();                                              // 48\n    return toggleNavbar();                                             //\n  },                                                                   //\n  \"click .videoFeedIcon\": function(event) {                            // 32\n    $(\".tooltip\").hide();                                              // 52\n    return toggleCam(this);                                            //\n  },                                                                   //\n  \"click .toggleUserlistButton\": function(event) {                     // 32\n    if (isLandscape() || isLandscapeMobile()) {                        // 56\n      return toggleUsersList();                                        //\n    } else {                                                           //\n      if ($('.settingsMenu').hasClass('menuOut')) {                    // 59\n        toggleSettingsMenu();                                          // 60\n        toggleRightHamburderIcon();                                    // 60\n      } else {                                                         //\n        toggleShield();                                                // 63\n      }                                                                //\n      toggleUserlistMenu();                                            // 59\n      return toggleLeftHamburderIcon();                                //\n    }                                                                  //\n  },                                                                   //\n  \"click .toggleMenuButton\": function(event) {                         // 32\n    if ($('.userlistMenu').hasClass('menuOut')) {                      // 68\n      toggleUserlistMenu();                                            // 69\n      toggleLeftHamburderIcon();                                       // 69\n    } else {                                                           //\n      toggleShield();                                                  // 72\n    }                                                                  //\n    toggleSettingsMenu();                                              // 68\n    return toggleRightHamburderIcon();                                 //\n  },                                                                   //\n  \"click .btn\": function(event) {                                      // 32\n    return $(\".ui-tooltip\").hide();                                    //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.menu.events({                                                 // 2\n  'click .slideButton': function(event) {                              // 80\n    toggleShield();                                                    // 81\n    toggleSettingsMenu();                                              // 81\n    toggleRightHamburderIcon();                                        // 81\n    return $('.slideButton').blur();                                   //\n  },                                                                   //\n  'click .toggleChatButton': function(event) {                         // 80\n    return toggleChatbar();                                            //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.main.rendered = function() {                                  // 2\n  var lastOrientationWasLandscape;                                     // 90\n  $(\"#dialog\").dialog({                                                // 90\n    modal: true,                                                       // 91\n    draggable: false,                                                  // 91\n    resizable: false,                                                  // 91\n    autoOpen: false,                                                   // 91\n    dialogClass: 'no-close logout-dialog',                             // 91\n    buttons: [                                                         // 91\n      {                                                                //\n        text: 'Yes',                                                   // 97\n        click: function() {                                            // 97\n          userLogout(BBB.getMeetingId(), getInSession(\"userId\"), true);\n          return $(this).dialog(\"close\");                              //\n        },                                                             //\n        \"class\": 'btn btn-xs btn-primary active'                       // 97\n      }, {                                                             //\n        text: 'No',                                                    // 104\n        click: function() {                                            // 104\n          $(this).dialog(\"close\");                                     // 107\n          return $(\".tooltip\").hide();                                 //\n        },                                                             //\n        \"class\": 'btn btn-xs btn-default'                              // 104\n      }                                                                //\n    ],                                                                 //\n    open: function(event, ui) {                                        // 91\n      return $('.ui-widget-overlay').bind('click', function() {        //\n        if (isMobile()) {                                              // 114\n          return $(\"#dialog\").dialog('close');                         //\n        }                                                              //\n      });                                                              //\n    },                                                                 //\n    position: {                                                        // 91\n      my: 'right top',                                                 // 117\n      at: 'right bottom',                                              // 117\n      of: '.signOutIcon'                                               // 117\n    }                                                                  //\n  });                                                                  //\n  lastOrientationWasLandscape = isLandscape();                         // 90\n  $(window).resize(function() {                                        // 90\n    $('#dialog').dialog('close');                                      // 125\n    if (isLandscape() && !lastOrientationWasLandscape) {               // 128\n      orientationBecameLandscape();                                    // 129\n      return lastOrientationWasLandscape = true;                       //\n    } else if (isPortrait() && lastOrientationWasLandscape) {          //\n      orientationBecamePortrait();                                     // 132\n      return lastOrientationWasLandscape = false;                      //\n    }                                                                  //\n  });                                                                  //\n  $('#shield').click(function() {                                      // 90\n    return toggleSlidingMenu();                                        //\n  });                                                                  //\n  if (Meteor.config.app.autoJoinAudio) {                               // 139\n    return onAudioJoinHelper();                                        //\n  }                                                                    //\n};                                                                     // 89\n                                                                       //\nTemplate.main.events({                                                 // 2\n  'click .shield': function(event) {                                   // 143\n    $(\".tooltip\").hide();                                              // 144\n    toggleShield();                                                    // 144\n    return closeMenus();                                               //\n  },                                                                   //\n  'click .settingsIcon': function(event) {                             // 143\n    return $(\"#settingsModal\").foundation('reveal', 'open');           //\n  },                                                                   //\n  'click .signOutIcon': function(event) {                              // 143\n    $('.signOutIcon').blur();                                          // 152\n    return $(\"#logoutModal\").foundation('reveal', 'open');             //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.main.gestures({                                               // 2\n  'panstart #container': function(event, template) {                   // 156\n    var initTransformValue, menuPanned, panIsValid, screenWidth;       // 157\n    if (isPortraitMobile() && isPanHorizontal(event)) {                // 157\n      panIsValid = getInSession('panIsValid');                         // 158\n      initTransformValue = getInSession('initTransform');              // 158\n      menuPanned = getInSession('menuPanned');                         // 158\n      screenWidth = $('#container').width();                           // 158\n      setInSession('panStarted', true);                                // 158\n      if (panIsValid && menuPanned === 'left' && initTransformValue + event.deltaX >= 0 && initTransformValue + event.deltaX <= $('.left-drawer').width()) {\n        return $('.left-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)');\n      } else if (panIsValid && menuPanned === 'right' && initTransformValue + event.deltaX >= screenWidth - $('.right-drawer').width() && initTransformValue + event.deltaX <= screenWidth) {\n        return $('.right-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)');\n      }                                                                //\n    }                                                                  //\n  },                                                                   //\n  'panend #container': function(event, template) {                     // 156\n    var leftDrawerWidth, menuPanned, panIsValid, screenWidth;          // 178\n    if (isPortraitMobile()) {                                          // 178\n      panIsValid = getInSession('panIsValid');                         // 179\n      menuPanned = getInSession('menuPanned');                         // 179\n      leftDrawerWidth = $('.left-drawer').width();                     // 179\n      screenWidth = $('#container').width();                           // 179\n      setInSession('panStarted', false);                               // 179\n      if (panIsValid && menuPanned === 'left' && $('.left-drawer').css('transform') !== 'none') {\n        if (parseInt($('.left-drawer').css('transform').split(',')[4]) < leftDrawerWidth / 2) {\n          $('.shield').removeClass('animatedShield');                  // 191\n          $('.shield').css('opacity', '');                             // 191\n          $('.left-drawer').removeClass('menuOut');                    // 191\n          $('.left-drawer').css('transform', '');                      // 191\n          $('.toggleUserlistButton').removeClass('hamburgerToggledOn');\n          $('.shield').removeClass('darken');                          // 191\n        } else {                                                       //\n          $('.left-drawer').css('transform', 'translateX(' + leftDrawerWidth + 'px)');\n          $('.shield').css('opacity', 0.5);                            // 198\n          $('.left-drawer').addClass('menuOut');                       // 198\n          $('.left-drawer').css('transform', '');                      // 198\n          $('.toggleUserlistButton').addClass('hamburgerToggledOn');   // 198\n        }                                                              //\n      }                                                                //\n      if (panIsValid && menuPanned === 'right' && parseInt($('.right-drawer').css('transform').split(',')[4]) !== leftDrawerWidth) {\n        if (parseInt($('.right-drawer').css('transform').split(',')[4]) > screenWidth - $('.right-drawer').width() / 2) {\n          $('.shield').removeClass('animatedShield');                  // 209\n          $('.shield').css('opacity', '');                             // 209\n          $('.right-drawer').css('transform', 'translateX(' + screenWidth + 'px)');\n          $('.right-drawer').removeClass('menuOut');                   // 209\n          $('.right-drawer').css('transform', '');                     // 209\n          $('.toggleMenuButton').removeClass('hamburgerToggledOn');    // 209\n          $('.shield').removeClass('darken');                          // 209\n        } else {                                                       //\n          $('.shield').css('opacity', 0.5);                            // 217\n          $('.right-drawer').css('transform', 'translateX(' + (screenWidth - $('.right-drawer').width()) + 'px)');\n          $('.right-drawer').addClass('menuOut');                      // 217\n          $('.right-drawer').css('transform', '');                     // 217\n          $('.toggleMenuButton').addClass('hamburgerToggledOn');       // 217\n        }                                                              //\n      }                                                                //\n      $('.left-drawer').addClass('userlistMenu');                      // 179\n      $('.userlistMenu').removeClass('left-drawer');                   // 179\n      $('.right-drawer').addClass('settingsMenu');                     // 179\n      return $('.settingsMenu').removeClass('right-drawer');           //\n    }                                                                  //\n  },                                                                   //\n  'panright #container, panleft #container': function(event, template) {\n    var initTransformValue, leftDrawerWidth, menuPanned, panIsValid, rightDrawerWidth, screenWidth;\n    if (isPortraitMobile() && isPanHorizontal(event)) {                // 230\n      if (!getInSession('panStarted')) {                               // 233\n        if (event.type === 'panright' && event.center.x <= $('#container').width() * 0.1) {\n          setInSession('panIsValid', true);                            // 238\n          setInSession('menuPanned', 'left');                          // 238\n        } else if (event.type === 'panleft' && event.center.x < $('#container').width() * 0.9) {\n          setInSession('panIsValid', true);                            // 244\n          setInSession('menuPanned', 'left');                          // 244\n        } else if (event.type === 'panleft' && event.center.x >= $('#container').width() * 0.9) {\n          setInSession('panIsValid', true);                            // 250\n          setInSession('menuPanned', 'right');                         // 250\n        } else if (event.type === 'panright' && event.center.x > $('#container').width() * 0.1) {\n          setInSession('panIsValid', true);                            // 256\n          setInSession('menuPanned', 'right');                         // 256\n        } else {                                                       //\n          setInSession('panIsValid', false);                           // 260\n        }                                                              //\n        setInSession('eventType', event.type);                         // 236\n        if (getInSession('menuPanned') === 'left') {                   // 264\n          if ($('.userlistMenu').css('transform') !== 'none') {        // 265\n            setInSession('initTransform', parseInt($('.userlistMenu').css('transform').split(',')[4]));\n          } else if ($('.userlistMenu').hasClass('menuOut')) {         //\n            setInSession('initTransform', $('.userlistMenu').width());\n          } else {                                                     //\n            setInSession('initTransform', 0);                          // 270\n          }                                                            //\n          $('.userlistMenu').addClass('left-drawer');                  // 265\n          $('.left-drawer').removeClass('userlistMenu');               // 265\n        } else if (getInSession('menuPanned') === 'right') {           //\n          if ($('.settingsMenu').css('transform') !== 'none') {        // 275\n            setInSession('initTransform', parseInt($('.settingsMenu').css('transform').split(',')[4]));\n          } else if ($('.settingsMenu').hasClass('menuOut')) {         //\n            setInSession('initTransform', $('.settingsMenu').width());\n          } else {                                                     //\n            setInSession('initTransform', 0);                          // 280\n          }                                                            //\n          $('.settingsMenu').addClass('right-drawer');                 // 275\n          $('.right-drawer').removeClass('settingsMenu');              // 275\n        }                                                              //\n      }                                                                //\n      initTransformValue = getInSession('initTransform');              // 233\n      panIsValid = getInSession('panIsValid');                         // 233\n      menuPanned = getInSession('menuPanned');                         // 233\n      leftDrawerWidth = $('.left-drawer').width();                     // 233\n      rightDrawerWidth = $('.right-drawer').width();                   // 233\n      screenWidth = $('#container').width();                           // 233\n      if (panIsValid && menuPanned === 'left' && initTransformValue + event.deltaX >= 0 && initTransformValue + event.deltaX <= leftDrawerWidth) {\n        if ($('.settingsMenu').hasClass('menuOut')) {                  // 297\n          toggleSettingsMenu();                                        // 298\n          toggleRightHamburderIcon();                                  // 298\n        }                                                              //\n        $('.left-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)');\n        if (!getInSession('panStarted')) {                             // 303\n          $('.shield').addClass('animatedShield');                     // 304\n        }                                                              //\n        return $('.shield').css('opacity', 0.5 * (initTransformValue + event.deltaX) / leftDrawerWidth);\n      } else if (panIsValid && menuPanned === 'right' && initTransformValue + event.deltaX >= screenWidth - rightDrawerWidth && initTransformValue + event.deltaX <= screenWidth) {\n        if ($('.userlistMenu').hasClass('menuOut')) {                  // 314\n          toggleUserlistMenu();                                        // 315\n          toggleLeftHamburderIcon();                                   // 315\n        }                                                              //\n        $('.right-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)');\n        if (!getInSession('panStarted')) {                             // 320\n          $('.shield').addClass('animatedShield');                     // 321\n        }                                                              //\n        return $('.shield').css('opacity', 0.5 * (screenWidth - initTransformValue - event.deltaX) / rightDrawerWidth);\n      }                                                                //\n    }                                                                  //\n  }                                                                    //\n});                                                                    //\n                                                                       //\nTemplate.makeButton.rendered = function() {                            // 2\n  return $('button[rel=tooltip]').tooltip();                           //\n};                                                                     // 325\n                                                                       //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/client/main.coffee.js","sourceMap":{"version":3,"sources":["/client/main.coffee"],"names":[],"mappings":"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","file":"/client/main.coffee.js","sourcesContent":["# Helper to load javascript libraries from the BBB server\r\nloadLib = (libname) ->\r\n  successCallback = ->\r\n\r\n  retryMessageCallback = (param) ->\r\n    #Meteor.log.info \"Failed to load library\", param\r\n    console.log \"Failed to load library\", param\r\n\r\n  Meteor.Loader.loadJs(\"#{window.location.origin}/client/lib/#{libname}\", successCallback, 10000).fail(retryMessageCallback)\r\n\r\n# These settings can just be stored locally in session, created at start up\r\nMeteor.startup ->\r\n  # Load SIP libraries before the application starts\r\n  loadLib('sip.js')\r\n  loadLib('bbb_webrtc_bridge_sip.js')\r\n  loadLib('bbblogger.js')\r\n\r\n  @SessionAmplify = _.extend({}, Session,\r\n    keys: _.object(_.map(amplify.store.sessionStorage(), (value, key) ->\r\n      [\r\n        key\r\n        JSON.stringify(value)\r\n      ]\r\n    ))\r\n    set: (key, value) ->\r\n      Session.set.apply this, arguments\r\n      amplify.store.sessionStorage key, value\r\n      return\r\n  )\r\n#\r\nTemplate.header.events\r\n  \"click .chatBarIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleChatbar()\r\n\r\n  \"click .hideNavbarIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleNavbar()\r\n\r\n  \"click .leaveAudioButton\": (event) ->\r\n    exitVoiceCall event\r\n\r\n  \"click .muteIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleMic @\r\n\r\n  \"click .hideNavbarIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleNavbar()\r\n\r\n  \"click .videoFeedIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleCam @\r\n\r\n  \"click .toggleUserlistButton\": (event) ->\r\n    if isLandscape() or isLandscapeMobile()\r\n      toggleUsersList()\r\n    else\r\n      if $('.settingsMenu').hasClass('menuOut')\r\n        toggleSettingsMenu()\r\n        toggleRightHamburderIcon()\r\n      else\r\n        toggleShield()\r\n      toggleUserlistMenu()\r\n      toggleLeftHamburderIcon()\r\n\r\n  \"click .toggleMenuButton\": (event) ->\r\n    if $('.userlistMenu').hasClass('menuOut')\r\n      toggleUserlistMenu()\r\n      toggleLeftHamburderIcon()\r\n    else\r\n      toggleShield()\r\n    toggleSettingsMenu()\r\n    toggleRightHamburderIcon()\r\n\r\n  \"click .btn\": (event) ->\r\n    $(\".ui-tooltip\").hide()\r\n\r\nTemplate.menu.events\r\n  'click .slideButton': (event) ->\r\n    toggleShield()\r\n    toggleSettingsMenu()\r\n    toggleRightHamburderIcon()\r\n    $('.slideButton').blur()\r\n\r\n  'click .toggleChatButton': (event) ->\r\n    toggleChatbar()\r\n\r\nTemplate.main.rendered = ->\r\n  $(\"#dialog\").dialog(\r\n    modal: true\r\n    draggable: false\r\n    resizable: false\r\n    autoOpen: false\r\n    dialogClass: 'no-close logout-dialog'\r\n    buttons: [\r\n      {\r\n        text: 'Yes'\r\n        click: () ->\r\n          userLogout BBB.getMeetingId(), getInSession(\"userId\"), true\r\n          $(this).dialog(\"close\")\r\n        class: 'btn btn-xs btn-primary active'\r\n      }\r\n      {\r\n        text: 'No'\r\n        click: () ->\r\n          $(this).dialog(\"close\")\r\n          $(\".tooltip\").hide()\r\n        class: 'btn btn-xs btn-default'\r\n      }\r\n    ]\r\n    open: (event, ui) ->\r\n      $('.ui-widget-overlay').bind 'click', () ->\r\n        if isMobile()\r\n          $(\"#dialog\").dialog('close')\r\n    position:\r\n      my: 'right top'\r\n      at: 'right bottom'\r\n      of: '.signOutIcon'\r\n  )\r\n\r\n  # keep track of the last orientation\r\n  lastOrientationWasLandscape = isLandscape()\r\n  $(window).resize( ->\r\n    $('#dialog').dialog('close')\r\n\r\n    # when the orientation switches call the handler\r\n    if isLandscape() and not lastOrientationWasLandscape\r\n        orientationBecameLandscape()\r\n        lastOrientationWasLandscape = true\r\n    else if isPortrait() and lastOrientationWasLandscape\r\n        orientationBecamePortrait()\r\n        lastOrientationWasLandscape = false\r\n  )\r\n\r\n  $('#shield').click () ->\r\n    toggleSlidingMenu()\r\n\r\n  if Meteor.config.app.autoJoinAudio\r\n    onAudioJoinHelper()\r\n\r\nTemplate.main.events\r\n  'click .shield': (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleShield()\r\n    closeMenus()\r\n\r\n  'click .settingsIcon': (event) ->\r\n    $(\"#settingsModal\").foundation('reveal', 'open');\r\n\r\n  'click .signOutIcon': (event) ->\r\n    $('.signOutIcon').blur()\r\n    $(\"#logoutModal\").foundation('reveal', 'open');\r\n\r\nTemplate.main.gestures\r\n  'panstart #container': (event, template) ->\r\n    if isPortraitMobile() and isPanHorizontal(event)\r\n      panIsValid = getInSession('panIsValid')\r\n      initTransformValue = getInSession('initTransform')\r\n      menuPanned = getInSession('menuPanned')\r\n      screenWidth = $('#container').width()\r\n\r\n      setInSession 'panStarted', true\r\n\r\n      if panIsValid and\r\n      menuPanned is 'left' and\r\n      initTransformValue + event.deltaX >= 0 and\r\n      initTransformValue + event.deltaX <= $('.left-drawer').width()\r\n        $('.left-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n      else if panIsValid and\r\n      menuPanned is 'right' and\r\n      initTransformValue + event.deltaX >= screenWidth - $('.right-drawer').width() and\r\n      initTransformValue + event.deltaX <= screenWidth\r\n        $('.right-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n  'panend #container': (event, template) ->\r\n    if isPortraitMobile()\r\n      panIsValid = getInSession('panIsValid')\r\n      menuPanned = getInSession('menuPanned')\r\n      leftDrawerWidth = $('.left-drawer').width()\r\n      screenWidth = $('#container').width()\r\n\r\n      setInSession 'panStarted', false\r\n\r\n      if panIsValid and\r\n      menuPanned is 'left' and\r\n      $('.left-drawer').css('transform') isnt 'none'\r\n\r\n        if parseInt($('.left-drawer').css('transform').split(',')[4]) < leftDrawerWidth / 2\r\n          $('.shield').removeClass('animatedShield')\r\n          $('.shield').css('opacity', '')\r\n          $('.left-drawer').removeClass('menuOut')\r\n          $('.left-drawer').css('transform', '')\r\n          $('.toggleUserlistButton').removeClass('hamburgerToggledOn')\r\n          $('.shield').removeClass('darken') # in case it was opened by clicking a button\r\n        else\r\n          $('.left-drawer').css('transform', 'translateX(' + leftDrawerWidth + 'px)')\r\n          $('.shield').css('opacity', 0.5)\r\n          $('.left-drawer').addClass('menuOut')\r\n          $('.left-drawer').css('transform', '')\r\n          $('.toggleUserlistButton').addClass('hamburgerToggledOn')\r\n\r\n      if panIsValid and\r\n      menuPanned is 'right' and\r\n      parseInt($('.right-drawer').css('transform').split(',')[4]) isnt leftDrawerWidth\r\n\r\n        if parseInt($('.right-drawer').css('transform').split(',')[4]) > screenWidth - $('.right-drawer').width() / 2\r\n          $('.shield').removeClass('animatedShield')\r\n          $('.shield').css('opacity', '')\r\n          $('.right-drawer').css('transform', 'translateX(' + screenWidth + 'px)')\r\n          $('.right-drawer').removeClass('menuOut')\r\n          $('.right-drawer').css('transform', '')\r\n          $('.toggleMenuButton').removeClass('hamburgerToggledOn')\r\n          $('.shield').removeClass('darken') # in case it was opened by clicking a button\r\n        else\r\n          $('.shield').css('opacity', 0.5)\r\n          $('.right-drawer').css('transform', 'translateX(' + (screenWidth - $('.right-drawer').width()) + 'px)')\r\n          $('.right-drawer').addClass('menuOut')\r\n          $('.right-drawer').css('transform', '')\r\n          $('.toggleMenuButton').addClass('hamburgerToggledOn')\r\n\r\n      $('.left-drawer').addClass('userlistMenu')\r\n      $('.userlistMenu').removeClass('left-drawer')\r\n\r\n      $('.right-drawer').addClass('settingsMenu')\r\n      $('.settingsMenu').removeClass('right-drawer')\r\n\r\n  'panright #container, panleft #container': (event, template) ->\r\n    if isPortraitMobile() and isPanHorizontal(event)\r\n\r\n      # panright/panleft is always triggered once right before panstart\r\n      if !getInSession('panStarted')\r\n\r\n        # opening the left-hand menu\r\n        if event.type is 'panright' and\r\n        event.center.x <= $('#container').width() * 0.1\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'left'\r\n\r\n        # closing the left-hand menu\r\n        else if event.type is 'panleft' and\r\n        event.center.x < $('#container').width() * 0.9\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'left'\r\n\r\n        # opening the right-hand menu\r\n        else if event.type is 'panleft' and\r\n        event.center.x >= $('#container').width() * 0.9\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'right'\r\n\r\n        # closing the right-hand menu\r\n        else if event.type is 'panright' and\r\n        event.center.x > $('#container').width() * 0.1\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'right'\r\n\r\n        else\r\n          setInSession 'panIsValid', false\r\n\r\n        setInSession 'eventType', event.type\r\n\r\n        if getInSession('menuPanned') is 'left'\r\n          if $('.userlistMenu').css('transform') isnt 'none' # menu is already transformed\r\n            setInSession 'initTransform', parseInt($('.userlistMenu').css('transform').split(',')[4]) # translateX value\r\n          else if $('.userlistMenu').hasClass('menuOut')\r\n            setInSession 'initTransform', $('.userlistMenu').width()\r\n          else\r\n            setInSession 'initTransform', 0\r\n          $('.userlistMenu').addClass('left-drawer')\r\n          $('.left-drawer').removeClass('userlistMenu') # to prevent animations from Sled library\r\n\r\n        else if getInSession('menuPanned') is 'right'\r\n          if $('.settingsMenu').css('transform') isnt 'none' # menu is already transformed\r\n            setInSession 'initTransform', parseInt($('.settingsMenu').css('transform').split(',')[4]) # translateX value\r\n          else if $('.settingsMenu').hasClass('menuOut')\r\n            setInSession 'initTransform', $('.settingsMenu').width()\r\n          else\r\n            setInSession 'initTransform', 0\r\n          $('.settingsMenu').addClass('right-drawer')\r\n          $('.right-drawer').removeClass('settingsMenu') # to prevent animations from Sled library\r\n\r\n      initTransformValue = getInSession('initTransform')\r\n      panIsValid = getInSession('panIsValid')\r\n      menuPanned = getInSession('menuPanned')\r\n      leftDrawerWidth = $('.left-drawer').width()\r\n      rightDrawerWidth = $('.right-drawer').width()\r\n      screenWidth = $('#container').width()\r\n\r\n      # moving the left-hand menu\r\n      if panIsValid and\r\n      menuPanned is 'left' and\r\n      initTransformValue + event.deltaX >= 0 and\r\n      initTransformValue + event.deltaX <= leftDrawerWidth\r\n\r\n        if $('.settingsMenu').hasClass('menuOut')\r\n          toggleSettingsMenu()\r\n          toggleRightHamburderIcon()\r\n\r\n        $('.left-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n        if !getInSession('panStarted')\r\n          $('.shield').addClass('animatedShield')\r\n        $('.shield').css('opacity',\r\n          0.5 * (initTransformValue + event.deltaX) / leftDrawerWidth)\r\n\r\n      # moving the right-hand menu\r\n      else if panIsValid and\r\n      menuPanned is 'right' and\r\n      initTransformValue + event.deltaX >= screenWidth - rightDrawerWidth and\r\n      initTransformValue + event.deltaX <= screenWidth\r\n\r\n        if $('.userlistMenu').hasClass('menuOut')\r\n          toggleUserlistMenu()\r\n          toggleLeftHamburderIcon()\r\n\r\n        $('.right-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n        if !getInSession('panStarted')\r\n          $('.shield').addClass('animatedShield')\r\n        $('.shield').css('opacity',\r\n          0.5 * (screenWidth - initTransformValue - event.deltaX) / rightDrawerWidth)\r\n\r\nTemplate.makeButton.rendered = ->\r\n  $('button[rel=tooltip]').tooltip()\r\n"]}}]