{"source":"__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nthis.getBuildInformation = function() {\n  var copyrightYear, defaultWelcomeMessage, defaultWelcomeMessageFooter, html5ClientBuild, link, ref, ref1, ref2, ref3;\n  copyrightYear = ((ref = Meteor.config) != null ? ref.copyrightYear : void 0) || \"DATE\";\n  html5ClientBuild = ((ref1 = Meteor.config) != null ? ref1.html5ClientBuild : void 0) || \"VERSION\";\n  defaultWelcomeMessage = ((ref2 = Meteor.config) != null ? ref2.defaultWelcomeMessage : void 0) || \"WELCOME MESSAGE\";\n  defaultWelcomeMessageFooter = ((ref3 = Meteor.config) != null ? ref3.defaultWelcomeMessageFooter : void 0) || \"WELCOME MESSAGE\";\n  link = \"<a href='http://bigbluebutton.org/' target='_blank'>http://bigbluebutton.org</a>\";\n  return {\n    'copyrightYear': copyrightYear,\n    'html5ClientBuild': html5ClientBuild,\n    'defaultWelcomeMessage': defaultWelcomeMessage,\n    'defaultWelcomeMessageFooter': defaultWelcomeMessageFooter,\n    'link': link\n  };\n};\n\nthis.colourToHex = function(value) {\n  var hex;\n  hex = parseInt(value).toString(16);\n  while (hex.length < 6) {\n    hex = \"0\" + hex;\n  }\n  return \"#\" + hex;\n};\n\nthis.formatColor = function(color) {\n  if (color == null) {\n    color = \"0\";\n  }\n  if (!color.toString().match(/\\#.*/)) {\n    color = colourToHex(color);\n  }\n  return color;\n};\n\nthis.getCurrentSlideDoc = function() {\n  return BBB.getCurrentSlide();\n};\n\nthis.getInSession = function(k) {\n  return SessionAmplify.get(k);\n};\n\nthis.getTime = function() {\n  return (new Date).valueOf();\n};\n\nthis.isPanHorizontal = function(event) {\n  return Math.abs(event.deltaX) > Math.abs(event.deltaY);\n};\n\nHandlebars.registerHelper(\"amIInAudio\", function() {\n  return BBB.amIInAudio();\n});\n\nHandlebars.registerHelper(\"amIListenOnlyAudio\", function() {\n  return BBB.amIListenOnlyAudio();\n});\n\nHandlebars.registerHelper(\"isMyMicLocked\", function() {\n  return BBB.isMyMicLocked();\n});\n\nHandlebars.registerHelper(\"colourToHex\", (function(_this) {\n  return function(value) {\n    return _this.window.colourToHex(value);\n  };\n})(this));\n\nHandlebars.registerHelper('equals', function(a, b) {\n  return a === b;\n});\n\nHandlebars.registerHelper(\"getCurrentMeeting\", function() {\n  return Meteor.Meetings.findOne();\n});\n\nHandlebars.registerHelper(\"getCurrentSlide\", function() {\n  return getCurrentSlideDoc();\n});\n\nHandlebars.registerHelper(\"getInSession\", function(k) {\n  return SessionAmplify.get(k);\n});\n\nHandlebars.registerHelper(\"getMeetingName\", function() {\n  return BBB.getMeetingName();\n});\n\nHandlebars.registerHelper(\"getShapesForSlide\", function() {\n  var currentSlide, ref;\n  currentSlide = getCurrentSlideDoc();\n  return Meteor.Shapes.find({\n    whiteboardId: currentSlide != null ? (ref = currentSlide.slide) != null ? ref.id : void 0 : void 0\n  });\n});\n\nHandlebars.registerHelper(\"getUsersInMeeting\", function() {\n  var users;\n  users = Meteor.Users.find().fetch();\n  if ((users != null ? users.length : void 0) > 1) {\n    return getSortedUserList(users);\n  } else {\n    return users;\n  }\n});\n\nHandlebars.registerHelper(\"getWhiteboardTitle\", function() {\n  return BBB.currentPresentationName() || \"Loading presentation...\";\n});\n\nHandlebars.registerHelper(\"getCurrentUserEmojiStatus\", function() {\n  var ref, ref1;\n  return (ref = BBB.getCurrentUser()) != null ? (ref1 = ref.user) != null ? ref1.emoji_status : void 0 : void 0;\n});\n\nHandlebars.registerHelper(\"isCurrentUser\", function(userId) {\n  var ref;\n  return userId === null || userId === ((ref = BBB.getCurrentUser()) != null ? ref.userId : void 0);\n});\n\nHandlebars.registerHelper(\"isCurrentUserMuted\", function() {\n  return BBB.amIMuted();\n});\n\nHandlebars.registerHelper(\"privateChatName\", function() {\n  var obj, ref;\n  obj = Meteor.Users.findOne({\n    userId: getInSession(\"inChatWith\")\n  });\n  if (obj != null) {\n    return obj != null ? (ref = obj.user) != null ? ref.name : void 0 : void 0;\n  }\n});\n\nHandlebars.registerHelper(\"isCurrentUserEmojiStatusSet\", function() {\n  return BBB.isCurrentUserEmojiStatusSet();\n});\n\nHandlebars.registerHelper(\"isCurrentUserSharingVideo\", function() {\n  return BBB.amISharingVideo();\n});\n\nHandlebars.registerHelper(\"isCurrentUserTalking\", function() {\n  return BBB.amITalking();\n});\n\nHandlebars.registerHelper(\"isCurrentUserPresenter\", function() {\n  return BBB.isUserPresenter(getInSession('userId'));\n});\n\nHandlebars.registerHelper(\"isDisconnected\", function() {\n  return !Meteor.status().connected;\n});\n\nHandlebars.registerHelper(\"isUserInAudio\", function(userId) {\n  return BBB.isUserInAudio(userId);\n});\n\nHandlebars.registerHelper(\"isUserListenOnlyAudio\", function(userId) {\n  return BBB.isUserListenOnlyAudio(userId);\n});\n\nHandlebars.registerHelper(\"isUserMuted\", function(userId) {\n  return BBB.isUserMuted(userId);\n});\n\nHandlebars.registerHelper(\"isUserSharingVideo\", function(userId) {\n  return BBB.isUserSharingWebcam(userId);\n});\n\nHandlebars.registerHelper(\"isUserTalking\", function(userId) {\n  return BBB.isUserTalking(userId);\n});\n\nHandlebars.registerHelper('isMobile', function() {\n  return isMobile();\n});\n\nHandlebars.registerHelper('isPortraitMobile', function() {\n  return isPortraitMobile();\n});\n\nHandlebars.registerHelper('isMobileChromeOrFirefox', function() {\n  return isMobile() && ((getBrowserName() === 'Chrome') || (getBrowserName() === 'Firefox'));\n});\n\nHandlebars.registerHelper(\"meetingIsRecording\", function() {\n  return BBB.isMeetingRecording();\n});\n\nHandlebars.registerHelper(\"messageFontSize\", function() {\n  return {\n    style: \"font-size: \" + (getInSession(\"messageFontSize\")) + \"px;\"\n  };\n});\n\nHandlebars.registerHelper(\"pointerLocation\", function() {\n  var currentPresentation, currentSlideDoc, pointer, presentationId, ref;\n  currentPresentation = Meteor.Presentations.findOne({\n    \"presentation.current\": true\n  });\n  presentationId = currentPresentation != null ? (ref = currentPresentation.presentation) != null ? ref.id : void 0 : void 0;\n  currentSlideDoc = Meteor.Slides.findOne({\n    \"presentationId\": presentationId,\n    \"slide.current\": true\n  });\n  pointer = currentPresentation != null ? currentPresentation.pointer : void 0;\n  pointer.x = (-currentSlideDoc.slide.x_offset * 2 + currentSlideDoc.slide.width_ratio * pointer.x) / 100;\n  pointer.y = (-currentSlideDoc.slide.y_offset * 2 + currentSlideDoc.slide.height_ratio * pointer.y) / 100;\n  return pointer;\n});\n\nHandlebars.registerHelper(\"safeName\", function(str) {\n  return safeString(str);\n});\n\n\n/*Handlebars.registerHelper \"visibility\", (section) ->\n  if getInSession \"display_#{section}\"\n    style: 'display:block;'\n  else\n    style: 'display:none;'\n */\n\nHandlebars.registerHelper(\"visibility\", function(section) {\n  return {\n    style: 'display:block;'\n  };\n});\n\nHandlebars.registerHelper('containerPosition', function(section) {\n  if (getInSession('display_usersList')) {\n    return 'moved-to-right';\n  } else if (getInSession('display_menu')) {\n    return 'moved-to-left';\n  } else {\n    return '';\n  }\n});\n\nHandlebars.registerHelper('whiteboardSize', function(section) {\n  if (BBB.isUserPresenter(getInSession('userId'))) {\n    return 'presenter-whiteboard';\n  } else {\n    if (BBB.isPollGoing(getInSession('userId'))) {\n      return 'poll-whiteboard';\n    } else {\n      return 'viewer-whiteboard';\n    }\n  }\n});\n\nHandlebars.registerHelper(\"getPollQuestions\", function() {\n  var answer, buttonStyle, j, len, marginStyle, number, polls, ref, widthStyle;\n  polls = BBB.getCurrentPoll(getInSession('userId'));\n  if ((polls != null) && polls !== void 0) {\n    number = polls.poll_info.poll.answers.length;\n    widthStyle = \"width: calc(75%/\" + number + \");\";\n    marginStyle = \"margin-left: calc(25%/\" + (number * 2) + \");\" + \"margin-right: calc(25%/\" + (number * 2) + \");\";\n    buttonStyle = widthStyle + marginStyle;\n    ref = polls.poll_info.poll.answers;\n    for (j = 0, len = ref.length; j < len; j++) {\n      answer = ref[j];\n      answer.style = buttonStyle;\n    }\n    return polls.poll_info.poll.answers;\n  }\n});\n\nthis.getSortedUserList = function(users) {\n  if ((users != null ? users.length : void 0) > 1) {\n    users.sort(function(a, b) {\n      var aTime, bTime;\n      if (a.user.role === \"MODERATOR\" && b.user.role === \"MODERATOR\") {\n        if (a.user.set_emoji_time && b.user.set_emoji_time) {\n          aTime = a.user.set_emoji_time.getTime();\n          bTime = b.user.set_emoji_time.getTime();\n          if (aTime < bTime) {\n            return -1;\n          } else {\n            return 1;\n          }\n        } else if (a.user.set_emoji_time) {\n          return -1;\n        } else if (b.user.set_emoji_time) {\n          return 1;\n        }\n      } else if (a.user.role === \"MODERATOR\") {\n        return -1;\n      } else if (b.user.role === \"MODERATOR\") {\n        return 1;\n      } else if (a.user.set_emoji_time && b.user.set_emoji_time) {\n        aTime = a.user.set_emoji_time.getTime();\n        bTime = b.user.set_emoji_time.getTime();\n        if (aTime < bTime) {\n          return -1;\n        } else {\n          return 1;\n        }\n      } else if (a.user.set_emoji_time) {\n        return -1;\n      } else if (b.user.set_emoji_time) {\n        return 1;\n      } else if (!a.user.phone_user && !b.user.phone_user) {\n\n      } else if (!a.user.phone_user) {\n        return -1;\n      } else if (!b.user.phone_user) {\n        return 1;\n      }\n      if (a.user._sort_name < b.user._sort_name) {\n        return -1;\n      } else if (a.user._sort_name > b.user._sort_name) {\n        return 1;\n      } else if (a.user.userid.toLowerCase() > b.user.userid.toLowerCase()) {\n        return -1;\n      } else if (a.user.userid.toLowerCase() < b.user.userid.toLowerCase()) {\n        return 1;\n      }\n    });\n  }\n  return users;\n};\n\nthis.linkify = function(str) {\n  return str = str.replace(re_weburl, \"<a href='event:$&'><u>$&</u></a>\");\n};\n\nthis.setInSession = function(k, v) {\n  return SessionAmplify.set(k, v);\n};\n\nthis.safeString = function(str) {\n  if (typeof str === 'string') {\n    return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n  }\n};\n\nthis.toggleCam = function(event) {};\n\nthis.toggleChatbar = function() {\n  setInSession(\"display_chatbar\", !getInSession(\"display_chatbar\"));\n  if (!getInSession(\"display_chatbar\")) {\n    $('#whiteboard').css('width', '100%');\n    $('#whiteboard .ui-resizable-handle').css('display', 'none');\n  } else {\n    $('#whiteboard').css('width', '');\n    $('#whiteboard .ui-resizable-handle').css('display', '');\n  }\n  return setTimeout(scaleWhiteboard, 0);\n};\n\nthis.toggleMic = function(event) {\n  return BBB.toggleMyMic();\n};\n\nthis.toggleUsersList = function() {\n  if ($('.userlistMenu').hasClass('hiddenInLandscape')) {\n    $('.userlistMenu').removeClass('hiddenInLandscape');\n  } else {\n    $('.userlistMenu').addClass('hiddenInLandscape');\n  }\n  return setTimeout(scaleWhiteboard, 0);\n};\n\nthis.populateNotifications = function(msg) {\n  var chat, chats, initChats, j, l, len, len1, myPrivateChats, myUserId, new_msg_userid, results, u, uniqueArray, users;\n  myUserId = getInSession(\"userId\");\n  users = Meteor.Users.find().fetch();\n  myPrivateChats = Meteor.Chat.find({\n    'message.chat_type': 'PRIVATE_CHAT'\n  }).fetch();\n  uniqueArray = [];\n  for (j = 0, len = myPrivateChats.length; j < len; j++) {\n    chat = myPrivateChats[j];\n    if (chat.message.to_userid === myUserId) {\n      uniqueArray.push({\n        userId: chat.message.from_userid,\n        username: chat.message.from_username\n      });\n    }\n    if (chat.message.from_userid === myUserId) {\n      uniqueArray.push({\n        userId: chat.message.to_userid,\n        username: chat.message.to_username\n      });\n    }\n  }\n  uniqueArray = uniqueArray.filter(function(itm, i, a) {\n    return i === a.indexOf(itm);\n  });\n  if (msg.message.to_userid === myUserId) {\n    new_msg_userid = msg.message.from_userid;\n  }\n  if (msg.message.from_userid === myUserId) {\n    new_msg_userid = msg.message.to_userid;\n  }\n  chats = getInSession('chats');\n  if (chats === void 0) {\n    initChats = [\n      {\n        userId: \"PUBLIC_CHAT\",\n        gotMail: false,\n        number: 0\n      }\n    ];\n    setInSession('chats', initChats);\n  }\n  results = [];\n  for (l = 0, len1 = uniqueArray.length; l < len1; l++) {\n    u = uniqueArray[l];\n    chats = getInSession('chats');\n    if (chats.filter(function(chat) {\n      return chat.userId === u.userId;\n    }).length === 0 && u.userId === new_msg_userid) {\n      chats.push({\n        userId: u.userId,\n        gotMail: false,\n        number: 0\n      });\n      results.push(setInSession('chats', chats));\n    } else {\n      results.push(void 0);\n    }\n  }\n  return results;\n};\n\nthis.toggleShield = function() {\n  if (parseFloat($('.shield').css('opacity')) === 0.5) {\n    $('.shield').css('opacity', '');\n  }\n  if (!$('.shield').hasClass('darken') && !$('.shield').hasClass('animatedShield')) {\n    return $('.shield').addClass('darken');\n  } else {\n    $('.shield').removeClass('darken');\n    return $('.shield').removeClass('animatedShield');\n  }\n};\n\nthis.removeFullscreenStyles = function() {\n  $('#whiteboard-paper').removeClass('vertically-centered');\n  $('#chat').removeClass('invisible');\n  $('#users').removeClass('invisible');\n  $('#navbar').removeClass('invisible');\n  $('.FABTriggerButton').removeClass('invisible');\n  $('.fullscreenButton').removeClass('exitFullscreenButton');\n  $('.fullscreenButton').addClass('whiteboardFullscreenButton');\n  $('.fullscreenButton i').removeClass('ion-arrow-shrink');\n  return $('.fullscreenButton i').addClass('ion-arrow-expand');\n};\n\nthis.enterWhiteboardFullscreen = function() {\n  var element;\n  element = document.getElementById('whiteboard');\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen();\n    $('.fullscreenButton').addClass('iconFirefox');\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n    $('.fullscreenButton').addClass('iconChrome');\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen();\n  }\n  $('#chat').addClass('invisible');\n  $('#users').addClass('invisible');\n  $('#navbar').addClass('invisible');\n  $('.FABTriggerButton').addClass('invisible');\n  $('.fullscreenButton').removeClass('whiteboardFullscreenButton');\n  $('.fullscreenButton').addClass('exitFullscreenButton');\n  $('.fullscreenButton i').removeClass('ion-arrow-expand');\n  $('.fullscreenButton i').addClass('ion-arrow-shrink');\n  $('#whiteboard-paper').addClass('vertically-centered');\n  $('#whiteboard').bind('webkitfullscreenchange', function(e) {\n    if (document.webkitFullscreenElement === null) {\n      $('#whiteboard').unbind('webkitfullscreenchange');\n      $('.fullscreenButton').removeClass('iconChrome');\n      removeFullscreenStyles();\n      return scaleWhiteboard();\n    }\n  });\n  return $(document).bind('mozfullscreenchange', function(e) {\n    if (document.mozFullScreenElement === null) {\n      $(document).unbind('mozfullscreenchange');\n      $('.fullscreenButton').removeClass('iconFirefox');\n      removeFullscreenStyles();\n      return scaleWhiteboard();\n    }\n  });\n};\n\nthis.closeMenus = function() {\n  if ($('.userlistMenu').hasClass('menuOut')) {\n    toggleUserlistMenu();\n    return toggleLeftHamburderIcon();\n  } else if ($('.settingsMenu').hasClass('menuOut')) {\n    toggleSettingsMenu();\n    return toggleRightHamburderIcon();\n  }\n};\n\nthis.exitVoiceCall = function(event) {\n  var checkToHangupCall, hangupCallback;\n  hangupCallback = function() {\n    return console.log(\"Exiting Voice Conference\");\n  };\n  getInSession(\"triedHangup\", false);\n  (checkToHangupCall = function(context) {\n    if (BBB.getCallStatus() !== null && !getInSession(\"triedHangup\")) {\n      console.log(\"Attempting to hangup on WebRTC call\");\n      if (BBB.amIListenOnlyAudio()) {\n        Meteor.call('listenOnlyRequestToggle', BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"authToken\"), false);\n      }\n      BBB.leaveVoiceConference(hangupCallback);\n      getInSession(\"triedHangup\", true);\n      return notification_WebRTCAudioExited();\n    } else {\n      console.log(\"RETRYING hangup on WebRTC call in \" + Meteor.config.app.WebRTCHangupRetryInterval + \" ms\");\n      return setTimeout(checkToHangupCall, Meteor.config.app.WebRTCHangupRetryInterval);\n    }\n  })(this);\n  return false;\n};\n\nthis.joinVoiceCall = function(event, arg) {\n  var isListenOnly, joinCallback;\n  isListenOnly = (arg != null ? arg : {}).isListenOnly;\n  if (!isWebRTCAvailable()) {\n    notification_WebRTCNotSupported();\n    return;\n  }\n  if (isListenOnly == null) {\n    isListenOnly = true;\n  }\n  joinCallback = function(message) {\n    return console.log(\"Beginning WebRTC Conference Call\");\n  };\n  notification_WebRTCAudioJoining();\n  if (isListenOnly) {\n    Meteor.call('listenOnlyRequestToggle', BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"authToken\"), true);\n  }\n  BBB.joinVoiceConference(joinCallback, isListenOnly);\n  return false;\n};\n\nthis.userLogout = function(meeting, user) {\n  Meteor.call(\"userLogout\", meeting, user, getInSession(\"authToken\"));\n  console.log(\"logging out\");\n  return clearSessionVar(document.location = getInSession('logoutURL'));\n};\n\nthis.clearSessionVar = function(callback) {\n  amplify.store('authToken', null);\n  amplify.store('bbbServerVersion', null);\n  amplify.store('chats', null);\n  amplify.store('dateOfBuild', null);\n  amplify.store('display_chatPane', null);\n  amplify.store('display_chatbar', null);\n  amplify.store('display_navbar', null);\n  amplify.store('display_usersList', null);\n  amplify.store('display_whiteboard', null);\n  amplify.store('inChatWith', null);\n  amplify.store('logoutURL', null);\n  amplify.store('meetingId', null);\n  amplify.store('messageFontSize', null);\n  amplify.store('tabsRenderedTime', null);\n  amplify.store('userId', null);\n  amplify.store('display_menu', null);\n  if (callback != null) {\n    return callback();\n  }\n};\n\nthis.setDefaultSettings = function() {\n  var initChats;\n  setInSession(\"display_navbar\", true);\n  setInSession(\"display_chatbar\", true);\n  setInSession(\"display_whiteboard\", true);\n  setInSession(\"display_chatPane\", true);\n  if (isPortraitMobile() || isLandscapeMobile()) {\n    setInSession(\"messageFontSize\", Meteor.config.app.mobileFont);\n  } else {\n    setInSession(\"messageFontSize\", Meteor.config.app.desktopFont);\n  }\n  setInSession('display_slidingMenu', false);\n  setInSession('display_hiddenNavbarSection', false);\n  if (isLandscape()) {\n    setInSession('display_usersList', true);\n  } else {\n    setInSession('display_usersList', false);\n  }\n  setInSession('display_menu', false);\n  setInSession('chatInputMinHeight', 0);\n  if (loginOrRefresh()) {\n    initChats = [\n      {\n        userId: \"PUBLIC_CHAT\",\n        gotMail: false,\n        number: 0\n      }\n    ];\n    setInSession('chats', initChats);\n    setInSession(\"inChatWith\", 'PUBLIC_CHAT');\n  }\n  return TimeSync.loggingEnabled = false;\n};\n\nthis.loginOrRefresh = function() {\n  var checkId, userId;\n  userId = getInSession('userId');\n  checkId = getInSession('checkId');\n  if (checkId === void 0) {\n    setInSession('checkId', userId);\n    return true;\n  } else if (userId !== checkId) {\n    setInSession('checkId', userId);\n    return true;\n  } else {\n    return false;\n  }\n};\n\nthis.onLoadComplete = function() {\n  var ref;\n  document.title = \"BigBlueButton \" + ((ref = BBB.getMeetingName()) != null ? ref : 'HTML5');\n  setDefaultSettings();\n  return Meteor.Users.find().observe({\n    removed: function(oldDocument) {\n      if (oldDocument.userId === getInSession('userId')) {\n        return document.location = getInSession('logoutURL');\n      }\n    }\n  });\n};\n\nthis.isMobile = function() {\n  return navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/iPhone|iPad|iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i) || navigator.userAgent.match(/IEMobile/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/webOS/i);\n};\n\nthis.isLandscape = function() {\n  return !isMobile() && window.matchMedia('(orientation: landscape)').matches && window.matchMedia('(min-device-aspect-ratio: 1/1)').matches;\n};\n\nthis.isPortrait = function() {\n  return !isMobile() && window.matchMedia('(orientation: portrait)').matches && window.matchMedia('(min-device-aspect-ratio: 1/1)').matches;\n};\n\nthis.isPortraitMobile = function() {\n  return isMobile() && window.matchMedia('(orientation: portrait)').matches && window.matchMedia('(max-device-aspect-ratio: 1/1)').matches;\n};\n\nthis.isLandscapeMobile = function() {\n  return isMobile() && window.matchMedia('(orientation: landscape)').matches && window.matchMedia('(min-device-aspect-ratio: 1/1)').matches;\n};\n\nthis.isLandscapePhone = function() {\n  return window.matchMedia('(orientation: landscape)').matches && window.matchMedia('(min-device-aspect-ratio: 1/1)').matches && window.matchMedia('(max-device-width: 959px)').matches;\n};\n\nthis.isPortraitPhone = function() {\n  return (window.matchMedia('(orientation: portrait)').matches && window.matchMedia('(max-device-aspect-ratio: 1/1)').matches && window.matchMedia('(max-device-width: 480px)').matches) || (window.matchMedia('(orientation: landscape)').matches && window.matchMedia('(max-device-aspect-ratio: 1/1)').matches && window.matchMedia('(max-device-width: 480px)').matches);\n};\n\nthis.isPhone = function() {\n  return isLandscapePhone() || isPortraitPhone();\n};\n\nthis.orientationBecameLandscape = function() {\n  return adjustChatInputHeight();\n};\n\nthis.orientationBecamePortrait = function() {\n  return adjustChatInputHeight();\n};\n\nthis.isOnlyOnePanelOpen = function() {\n  return getInSession(\"display_usersList\") + getInSession(\"display_whiteboard\") + getInSession(\"display_chatbar\") === 1;\n};\n\nthis.getBrowserName = function() {\n  if (navigator.userAgent.match(/Chrome/i)) {\n    return 'Chrome';\n  } else if (navigator.userAgent.match(/Firefox/i)) {\n    return 'Firefox';\n  } else if (navigator.userAgent.match(/Safari/i)) {\n    return 'Safari';\n  } else if (navigator.userAgent.match(/Trident/i)) {\n    return 'IE';\n  } else {\n    return null;\n  }\n};\n\nthis.scrollChatDown = function() {\n  var ref;\n  return $('#chatbody').scrollTop((ref = $('#chatbody')[0]) != null ? ref.scrollHeight : void 0);\n};\n\nthis.adjustChatInputHeight = function() {\n  var projectedHeight, ref;\n  if (isLandscape()) {\n    $('#newMessageInput').css('height', 'auto');\n    projectedHeight = $('#newMessageInput')[0].scrollHeight + 23;\n    if (projectedHeight !== $('.panel-footer').height() && projectedHeight >= getInSession('chatInputMinHeight')) {\n      $('#newMessageInput').css('overflow', 'hidden');\n      $('.panel-footer').css('top', -(projectedHeight - 70) + 'px');\n      $('.panel-footer').css('height', projectedHeight + 'px');\n      $('#newMessageInput').height($('#newMessageInput')[0].scrollHeight);\n      $('#chatbody').height($('#chat').height() - projectedHeight - 45);\n      $('#chatbody').scrollTop((ref = $('#chatbody')[0]) != null ? ref.scrollHeight : void 0);\n    }\n    return $('#newMessageInput').css('height', '');\n  } else if (isPortrait()) {\n    $('.panel-footer').attr('style', '');\n    $('#chatbody').attr('style', '');\n    return $('#newMessageInput').attr('style', '');\n  }\n};\n\nthis.toggleEmojisFAB = function() {\n  if ($('.FABContainer').hasClass('openedFAB')) {\n    $('.FABContainer > button:nth-child(2)').css('opacity', $('.FABContainer > button:nth-child(2)').css('opacity'));\n    $('.FABContainer > button:nth-child(3)').css('opacity', $('.FABContainer > button:nth-child(3)').css('opacity'));\n    $('.FABContainer > button:nth-child(4)').css('opacity', $('.FABContainer > button:nth-child(4)').css('opacity'));\n    $('.FABContainer > button:nth-child(5)').css('opacity', $('.FABContainer > button:nth-child(5)').css('opacity'));\n    $('.FABContainer > button:nth-child(6)').css('opacity', $('.FABContainer > button:nth-child(6)').css('opacity'));\n    $('.FABContainer > button:nth-child(7)').css('opacity', $('.FABContainer > button:nth-child(7)').css('opacity'));\n    $('.FABContainer').removeClass('openedFAB');\n    return $('.FABContainer').addClass('closedFAB');\n  } else {\n    $('.FABContainer > button:nth-child(2)').css('opacity', $('.FABContainer > button:nth-child(2)').css('opacity'));\n    $('.FABContainer > button:nth-child(3)').css('opacity', $('.FABContainer > button:nth-child(3)').css('opacity'));\n    $('.FABContainer > button:nth-child(4)').css('opacity', $('.FABContainer > button:nth-child(4)').css('opacity'));\n    $('.FABContainer > button:nth-child(5)').css('opacity', $('.FABContainer > button:nth-child(5)').css('opacity'));\n    $('.FABContainer > button:nth-child(6)').css('opacity', $('.FABContainer > button:nth-child(6)').css('opacity'));\n    $('.FABContainer > button:nth-child(7)').css('opacity', $('.FABContainer > button:nth-child(7)').css('opacity'));\n    $('.FABContainer').removeClass('closedFAB');\n    return $('.FABContainer').addClass('openedFAB');\n  }\n};\n\nthis.toggleLeftHamburderIcon = function() {\n  if ($('.leftHamburgerButton').hasClass('hamburgerToggledOn')) {\n    return $('.leftHamburgerButton').removeClass('hamburgerToggledOn');\n  } else {\n    return $('.leftHamburgerButton').addClass('hamburgerToggledOn');\n  }\n};\n\nthis.toggleRightHamburderIcon = function() {\n  if ($('.rightHamburgerButton').hasClass('hamburgerToggledOn')) {\n    return $('.rightHamburgerButton').removeClass('hamburgerToggledOn');\n  } else {\n    return $('.rightHamburgerButton').addClass('hamburgerToggledOn');\n  }\n};\n\nthis.toggleUserlistMenu = function() {\n  if ($('.userlistMenu').hasClass('menuOut')) {\n    return $('.userlistMenu').removeClass('menuOut');\n  } else {\n    return $('.userlistMenu').addClass('menuOut');\n  }\n};\n\nthis.toggleSettingsMenu = function() {\n  if ($('.settingsMenu').hasClass('menuOut')) {\n    return $('.settingsMenu').removeClass('menuOut');\n  } else {\n    return $('.settingsMenu').addClass('menuOut');\n  }\n};\n","sourceMap":{"version":3,"file":"/client/globals.coffee.js","sourceRoot":"","sources":["/client/globals.coffee"],"names":[],"mappings":"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","sourcesContent":["@getBuildInformation = ->\r\n  copyrightYear = Meteor.config?.copyrightYear or \"DATE\"\r\n  html5ClientBuild = Meteor.config?.html5ClientBuild or \"VERSION\"\r\n  defaultWelcomeMessage = Meteor.config?.defaultWelcomeMessage or \"WELCOME MESSAGE\"\r\n  defaultWelcomeMessageFooter = Meteor.config?.defaultWelcomeMessageFooter or \"WELCOME MESSAGE\"\r\n  link = \"<a href='http://bigbluebutton.org/' target='_blank'>http://bigbluebutton.org</a>\"\r\n\r\n  {\r\n    'copyrightYear': copyrightYear\r\n    'html5ClientBuild': html5ClientBuild\r\n    'defaultWelcomeMessage': defaultWelcomeMessage\r\n    'defaultWelcomeMessageFooter': defaultWelcomeMessageFooter\r\n    'link': link\r\n  }\r\n\r\n# Convert a color `value` as integer to a hex color (e.g. 255 to #0000ff)\r\n@colourToHex = (value) ->\r\n  hex = parseInt(value).toString(16)\r\n  hex = \"0\" + hex while hex.length < 6\r\n  \"##{hex}\"\r\n\r\n# color can be a number (a hex converted to int) or a string (e.g. \"#ffff00\")\r\n@formatColor = (color) ->\r\n  color ?= \"0\" # default value\r\n  if !color.toString().match(/\\#.*/)\r\n    color = colourToHex(color)\r\n  color\r\n\r\n@getCurrentSlideDoc = -> # returns only one document\r\n  BBB.getCurrentSlide()\r\n\r\n@getInSession = (k) -> SessionAmplify.get k\r\n\r\n@getTime = -> # returns epoch in ms\r\n  (new Date).valueOf()\r\n\r\n# checks if the pan gesture is mostly horizontal\r\n@isPanHorizontal = (event) ->\r\n  Math.abs(event.deltaX) > Math.abs(event.deltaY)\r\n\r\n# helper to determine whether user has joined any type of audio\r\nHandlebars.registerHelper \"amIInAudio\", ->\r\n  BBB.amIInAudio()\r\n\r\n# helper to determine whether the user is in the listen only audio stream\r\nHandlebars.registerHelper \"amIListenOnlyAudio\", ->\r\n  BBB.amIListenOnlyAudio()\r\n\r\n# helper to determine whether the user is in the listen only audio stream\r\nHandlebars.registerHelper \"isMyMicLocked\", ->\r\n  BBB.isMyMicLocked()\r\n\r\nHandlebars.registerHelper \"colourToHex\", (value) =>\r\n  @window.colourToHex(value)\r\n\r\nHandlebars.registerHelper 'equals', (a, b) -> # equals operator was dropped in Meteor's migration from Handlebars to Spacebars\r\n  a is b\r\n\r\nHandlebars.registerHelper \"getCurrentMeeting\", ->\r\n  Meteor.Meetings.findOne()\r\n\r\nHandlebars.registerHelper \"getCurrentSlide\", ->\r\n  getCurrentSlideDoc()\r\n\r\n# Allow access through all templates\r\nHandlebars.registerHelper \"getInSession\", (k) -> SessionAmplify.get k\r\n\r\nHandlebars.registerHelper \"getMeetingName\", ->\r\n  BBB.getMeetingName()\r\n\r\nHandlebars.registerHelper \"getShapesForSlide\", ->\r\n  currentSlide = getCurrentSlideDoc()\r\n\r\n  # try to reuse the lines above\r\n  Meteor.Shapes.find({whiteboardId: currentSlide?.slide?.id})\r\n\r\n# retrieves all users in the meeting\r\nHandlebars.registerHelper \"getUsersInMeeting\", ->\r\n  users = Meteor.Users.find().fetch()\r\n  if users?.length > 1\r\n    getSortedUserList(users)\r\n  else\r\n    users\r\n\r\nHandlebars.registerHelper \"getWhiteboardTitle\", ->\r\n  (BBB.currentPresentationName() or \"Loading presentation...\")\r\n\r\nHandlebars.registerHelper \"getCurrentUserEmojiStatus\", ->\r\n  BBB.getCurrentUser()?.user?.emoji_status\r\n\r\nHandlebars.registerHelper \"isCurrentUser\", (userId) ->\r\n  userId is null or userId is BBB.getCurrentUser()?.userId\r\n\r\nHandlebars.registerHelper \"isCurrentUserMuted\", ->\r\n  BBB.amIMuted()\r\n\r\n#Retreives a username for a private chat tab from the database if it exists\r\nHandlebars.registerHelper \"privateChatName\", ->\r\n  obj = Meteor.Users.findOne({ userId: getInSession \"inChatWith\" })\r\n  if obj?\r\n    obj?.user?.name\r\n\r\nHandlebars.registerHelper \"isCurrentUserEmojiStatusSet\", ->\r\n  BBB.isCurrentUserEmojiStatusSet()\r\n\r\nHandlebars.registerHelper \"isCurrentUserSharingVideo\", ->\r\n  BBB.amISharingVideo()\r\n\r\nHandlebars.registerHelper \"isCurrentUserTalking\", ->\r\n  BBB.amITalking()\r\n\r\nHandlebars.registerHelper \"isCurrentUserPresenter\", ->\r\n  BBB.isUserPresenter(getInSession('userId'))\r\n\r\nHandlebars.registerHelper \"isDisconnected\", ->\r\n  return !Meteor.status().connected\r\n\r\nHandlebars.registerHelper \"isUserInAudio\", (userId) ->\r\n  BBB.isUserInAudio(userId)\r\n\r\nHandlebars.registerHelper \"isUserListenOnlyAudio\", (userId) ->\r\n  BBB.isUserListenOnlyAudio(userId)\r\n\r\nHandlebars.registerHelper \"isUserMuted\", (userId) ->\r\n  BBB.isUserMuted(userId)\r\n\r\nHandlebars.registerHelper \"isUserSharingVideo\", (userId) ->\r\n  BBB.isUserSharingWebcam(userId)\r\n\r\nHandlebars.registerHelper \"isUserTalking\", (userId) ->\r\n  BBB.isUserTalking(userId)\r\n\r\nHandlebars.registerHelper 'isMobile', () ->\r\n  isMobile()\r\n\r\nHandlebars.registerHelper 'isPortraitMobile', () ->\r\n  isPortraitMobile()\r\n\r\nHandlebars.registerHelper 'isMobileChromeOrFirefox', () ->\r\n  isMobile() and ((getBrowserName() is 'Chrome') or (getBrowserName() is 'Firefox'))\r\n\r\nHandlebars.registerHelper \"meetingIsRecording\", ->\r\n  BBB.isMeetingRecording()\r\n\r\nHandlebars.registerHelper \"messageFontSize\", ->\r\n  style: \"font-size: #{getInSession(\"messageFontSize\")}px;\"\r\n\r\nHandlebars.registerHelper \"pointerLocation\", ->\r\n  currentPresentation = Meteor.Presentations.findOne({\"presentation.current\": true})\r\n  presentationId = currentPresentation?.presentation?.id\r\n  currentSlideDoc = Meteor.Slides.findOne({\"presentationId\": presentationId, \"slide.current\": true})\r\n  pointer = currentPresentation?.pointer\r\n  pointer.x = (- currentSlideDoc.slide.x_offset * 2 + currentSlideDoc.slide.width_ratio * pointer.x) / 100\r\n  pointer.y = (- currentSlideDoc.slide.y_offset * 2 + currentSlideDoc.slide.height_ratio * pointer.y) / 100\r\n  pointer\r\n\r\nHandlebars.registerHelper \"safeName\", (str) ->\r\n  safeString(str)\r\n\r\n###Handlebars.registerHelper \"visibility\", (section) ->\r\n  if getInSession \"display_#{section}\"\r\n    style: 'display:block;'\r\n  else\r\n    style: 'display:none;'###\r\n\r\nHandlebars.registerHelper \"visibility\", (section) ->\r\n  style: 'display:block;'\r\n\r\nHandlebars.registerHelper 'containerPosition', (section) ->\r\n  if getInSession 'display_usersList'\r\n    return 'moved-to-right'\r\n  else if getInSession 'display_menu'\r\n    return 'moved-to-left'\r\n  else\r\n    return ''\r\n\r\n# vertically shrinks the whiteboard if the slide navigation controllers are present\r\nHandlebars.registerHelper 'whiteboardSize', (section) ->\r\n  if BBB.isUserPresenter(getInSession('userId'))\r\n    return 'presenter-whiteboard'\r\n  else\r\n    if BBB.isPollGoing(getInSession('userId'))\r\n      return 'poll-whiteboard'\r\n    else\r\n      return 'viewer-whiteboard'\r\n\r\nHandlebars.registerHelper \"getPollQuestions\", ->\r\n  polls = BBB.getCurrentPoll(getInSession('userId'))\r\n  if polls? and polls isnt undefined\r\n    number = polls.poll_info.poll.answers.length\r\n    widthStyle = \"width: calc(75%/\" + number + \");\"\r\n    marginStyle = \"margin-left: calc(25%/\" + (number*2) + \");\" + \"margin-right: calc(25%/\" + (number*2) + \");\"\r\n    buttonStyle = widthStyle + marginStyle\r\n    for answer in polls.poll_info.poll.answers\r\n      answer.style = buttonStyle\r\n    return polls.poll_info.poll.answers\r\n\r\n@getSortedUserList = (users) ->\r\n  if users?.length > 1\r\n    users.sort (a, b) ->\r\n      if a.user.role is \"MODERATOR\" and b.user.role is \"MODERATOR\"\r\n        if a.user.set_emoji_time and b.user.set_emoji_time\r\n          aTime = a.user.set_emoji_time.getTime()\r\n          bTime = b.user.set_emoji_time.getTime()\r\n          if aTime < bTime\r\n            return -1\r\n          else\r\n            return 1\r\n        else if a.user.set_emoji_time\r\n          return -1\r\n        else if b.user.set_emoji_time\r\n          return 1\r\n      else if a.user.role is \"MODERATOR\"\r\n        return -1\r\n      else if b.user.role is \"MODERATOR\"\r\n        return 1\r\n      else if a.user.set_emoji_time and b.user.set_emoji_time\r\n        aTime = a.user.set_emoji_time.getTime()\r\n        bTime = b.user.set_emoji_time.getTime()\r\n        if aTime < bTime\r\n          return -1\r\n        else\r\n          return 1\r\n      else if a.user.set_emoji_time\r\n        return -1\r\n      else if b.user.set_emoji_time\r\n        return 1\r\n      else if not a.user.phone_user and not b.user.phone_user\r\n\r\n      else if not a.user.phone_user\r\n        return -1\r\n      else if not b.user.phone_user\r\n        return 1\r\n\r\n      #Check name (case-insensitive) in the event of a tie up above. If the name\r\n      #is the same then use userID which should be unique making the order the same\r\n      #across all clients.\r\n\r\n      if a.user._sort_name < b.user._sort_name\r\n        return -1\r\n      else if a.user._sort_name > b.user._sort_name\r\n        return 1\r\n      else if a.user.userid.toLowerCase() > b.user.userid.toLowerCase()\r\n        return -1\r\n      else if a.user.userid.toLowerCase() < b.user.userid.toLowerCase()\r\n        return 1\r\n\r\n  users\r\n\r\n# transform plain text links into HTML tags compatible with Flash client\r\n@linkify = (str) ->\r\n  str = str.replace re_weburl, \"<a href='event:$&'><u>$&</u></a>\"\r\n\r\n@setInSession = (k, v) -> SessionAmplify.set k, v\r\n\r\n@safeString = (str) ->\r\n  if typeof str is 'string'\r\n    str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\r\n\r\n@toggleCam = (event) ->\r\n  # Meteor.Users.update {_id: context._id} , {$set:{\"user.sharingVideo\": !context.sharingVideo}}\r\n  # Meteor.call('userToggleCam', context._id, !context.sharingVideo)\r\n\r\n@toggleChatbar = ->\r\n  setInSession \"display_chatbar\", !getInSession \"display_chatbar\"\r\n  if !getInSession(\"display_chatbar\")\r\n    $('#whiteboard').css('width', '100%')\r\n    $('#whiteboard .ui-resizable-handle').css('display', 'none')\r\n  else\r\n    $('#whiteboard').css('width', '')\r\n    $('#whiteboard .ui-resizable-handle').css('display', '')\r\n  setTimeout(scaleWhiteboard, 0)\r\n\r\n@toggleMic = (event) ->\r\n  BBB.toggleMyMic()\r\n\r\n@toggleUsersList = ->\r\n  if $('.userlistMenu').hasClass('hiddenInLandscape')\r\n    $('.userlistMenu').removeClass('hiddenInLandscape')\r\n  else\r\n    $('.userlistMenu').addClass('hiddenInLandscape')\r\n  setTimeout(scaleWhiteboard, 0)\r\n\r\n@populateNotifications = (msg) ->\r\n  myUserId = getInSession \"userId\"\r\n  users = Meteor.Users.find().fetch()\r\n\r\n  # assuming that I only have access only to private messages where I am the sender or the recipient\r\n  myPrivateChats = Meteor.Chat.find({'message.chat_type': 'PRIVATE_CHAT'}).fetch()\r\n\r\n  uniqueArray = []\r\n  for chat in myPrivateChats\r\n    if chat.message.to_userid is myUserId\r\n      uniqueArray.push({userId: chat.message.from_userid, username: chat.message.from_username})\r\n    if chat.message.from_userid is myUserId\r\n      uniqueArray.push({userId: chat.message.to_userid, username: chat.message.to_username})\r\n\r\n  #keep unique entries only\r\n  uniqueArray = uniqueArray.filter((itm, i, a) ->\r\n      i is a.indexOf(itm)\r\n    )\r\n\r\n  if msg.message.to_userid is myUserId\r\n    new_msg_userid = msg.message.from_userid\r\n  if msg.message.from_userid is myUserId\r\n    new_msg_userid = msg.message.to_userid\r\n\r\n  chats = getInSession('chats')\r\n  if chats is undefined\r\n    initChats = [\r\n      userId: \"PUBLIC_CHAT\"\r\n      gotMail: false\r\n      number: 0;\r\n    ]\r\n    setInSession 'chats', initChats\r\n\r\n  #insert the unique entries in the collection\r\n  for u in uniqueArray\r\n    chats = getInSession('chats')\r\n    if chats.filter((chat) -> chat.userId == u.userId).length is 0 and u.userId is new_msg_userid\r\n      chats.push {userId: u.userId, gotMail: false, number: 0}\r\n      setInSession 'chats', chats\r\n\r\n@toggleShield = ->\r\n  if parseFloat($('.shield').css('opacity')) is 0.5 # triggered during a pan gesture\r\n    $('.shield').css('opacity', '')\r\n\r\n  if !$('.shield').hasClass('darken') and !$('.shield').hasClass('animatedShield')\r\n    $('.shield').addClass('darken')\r\n  else\r\n    $('.shield').removeClass('darken')\r\n    $('.shield').removeClass('animatedShield')\r\n\r\n@removeFullscreenStyles = ->\r\n  $('#whiteboard-paper').removeClass('vertically-centered')\r\n  $('#chat').removeClass('invisible')\r\n  $('#users').removeClass('invisible')\r\n  $('#navbar').removeClass('invisible')\r\n  $('.FABTriggerButton').removeClass('invisible')\r\n  $('.fullscreenButton').removeClass('exitFullscreenButton')\r\n  $('.fullscreenButton').addClass('whiteboardFullscreenButton')\r\n  $('.fullscreenButton i').removeClass('ion-arrow-shrink')\r\n  $('.fullscreenButton i').addClass('ion-arrow-expand')\r\n\r\n@enterWhiteboardFullscreen = ->\r\n  element = document.getElementById('whiteboard')\r\n  if element.requestFullscreen\r\n    element.requestFullscreen()\r\n  else if element.mozRequestFullScreen\r\n    element.mozRequestFullScreen()\r\n    $('.fullscreenButton').addClass('iconFirefox') # browser-specific icon sizing\r\n  else if element.webkitRequestFullscreen\r\n    element.webkitRequestFullscreen()\r\n    $('.fullscreenButton').addClass('iconChrome') # browser-specific icon sizing\r\n  else if element.msRequestFullscreen\r\n    element.msRequestFullscreen()\r\n  $('#chat').addClass('invisible')\r\n  $('#users').addClass('invisible')\r\n  $('#navbar').addClass('invisible')\r\n  $('.FABTriggerButton').addClass('invisible')\r\n  $('.fullscreenButton').removeClass('whiteboardFullscreenButton')\r\n  $('.fullscreenButton').addClass('exitFullscreenButton')\r\n  $('.fullscreenButton i').removeClass('ion-arrow-expand')\r\n  $('.fullscreenButton i').addClass('ion-arrow-shrink')\r\n  $('#whiteboard-paper').addClass('vertically-centered')\r\n  $('#whiteboard').bind 'webkitfullscreenchange', (e) ->\r\n    if document.webkitFullscreenElement is null\r\n      $('#whiteboard').unbind('webkitfullscreenchange')\r\n      $('.fullscreenButton').removeClass('iconChrome')\r\n      removeFullscreenStyles()\r\n      scaleWhiteboard()\r\n  $(document).bind 'mozfullscreenchange', (e) -> # target is always the document in Firefox\r\n    if document.mozFullScreenElement is null\r\n      $(document).unbind('mozfullscreenchange')\r\n      $('.fullscreenButton').removeClass('iconFirefox')\r\n      removeFullscreenStyles()\r\n      scaleWhiteboard()\r\n\r\n@closeMenus = ->\r\n  if $('.userlistMenu').hasClass('menuOut')\r\n    toggleUserlistMenu()\r\n    toggleLeftHamburderIcon()\r\n  else if $('.settingsMenu').hasClass('menuOut')\r\n    toggleSettingsMenu()\r\n    toggleRightHamburderIcon()\r\n\r\n# Periodically check the status of the WebRTC call, when a call has been established attempt to hangup,\r\n# retry if a call is in progress, send the leave voice conference message to BBB\r\n@exitVoiceCall = (event) ->\r\n  # To be called when the hangup is initiated\r\n  hangupCallback = ->\r\n    console.log \"Exiting Voice Conference\"\r\n\r\n  # Checks periodically until a call is established so we can successfully end the call\r\n  # clean state\r\n  getInSession(\"triedHangup\", false)\r\n  # function to initiate call\r\n  (checkToHangupCall = (context) ->\r\n    # if an attempt to hang up the call is made when the current session is not yet finished, the request has no effect\r\n    # keep track in the session if we haven't tried a hangup\r\n    if BBB.getCallStatus() isnt null and !getInSession(\"triedHangup\")\r\n      console.log \"Attempting to hangup on WebRTC call\"\r\n      if BBB.amIListenOnlyAudio() # notify BBB-apps we are leaving the call call if we are listen only\r\n        Meteor.call('listenOnlyRequestToggle', BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"authToken\"), false)\r\n      BBB.leaveVoiceConference hangupCallback\r\n      getInSession(\"triedHangup\", true) # we have hung up, prevent retries\r\n      notification_WebRTCAudioExited()\r\n    else\r\n      console.log \"RETRYING hangup on WebRTC call in #{Meteor.config.app.WebRTCHangupRetryInterval} ms\"\r\n      setTimeout checkToHangupCall, Meteor.config.app.WebRTCHangupRetryInterval # try again periodically\r\n  )(@) # automatically run function\r\n  return false\r\n\r\n# close the daudio UI, then join the conference. If listen only send the request to the server\r\n@joinVoiceCall = (event, {isListenOnly} = {}) ->\r\n  if !isWebRTCAvailable()\r\n    notification_WebRTCNotSupported()\r\n    return\r\n\r\n  isListenOnly ?= true\r\n\r\n  # create voice call params\r\n  joinCallback = (message) ->\r\n    console.log \"Beginning WebRTC Conference Call\"\r\n\r\n  notification_WebRTCAudioJoining()\r\n  if isListenOnly\r\n    Meteor.call('listenOnlyRequestToggle', BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"authToken\"), true)\r\n  BBB.joinVoiceConference joinCallback, isListenOnly # make the call #TODO should we apply role permissions to this action?\r\n\r\n  return false\r\n\r\n# Starts the entire logout procedure.\r\n# meeting: the meeting the user is in\r\n# the user's userId\r\n@userLogout = (meeting, user) ->\r\n  Meteor.call(\"userLogout\", meeting, user, getInSession(\"authToken\"))\r\n  console.log \"logging out\"\r\n  clearSessionVar(document.location = getInSession 'logoutURL') # navigate to logout\r\n\r\n# Clear the local user session\r\n@clearSessionVar = (callback) ->\r\n  amplify.store('authToken', null)\r\n  amplify.store('bbbServerVersion', null)\r\n  amplify.store('chats', null)\r\n  amplify.store('dateOfBuild', null)\r\n  amplify.store('display_chatPane', null)\r\n  amplify.store('display_chatbar', null)\r\n  amplify.store('display_navbar', null)\r\n  amplify.store('display_usersList', null)\r\n  amplify.store('display_whiteboard', null)\r\n  amplify.store('inChatWith', null)\r\n  amplify.store('logoutURL', null)\r\n  amplify.store('meetingId', null)\r\n  amplify.store('messageFontSize', null)\r\n  amplify.store('tabsRenderedTime', null)\r\n  amplify.store('userId', null)\r\n  amplify.store('display_menu', null)\r\n  if callback?\r\n    callback()\r\n\r\n# assign the default values for the Session vars\r\n@setDefaultSettings = ->\r\n  setInSession \"display_navbar\", true\r\n  setInSession \"display_chatbar\", true\r\n  setInSession \"display_whiteboard\", true\r\n  setInSession \"display_chatPane\", true\r\n\r\n  #if it is a desktop version of the client\r\n  if isPortraitMobile() or isLandscapeMobile()\r\n    setInSession \"messageFontSize\", Meteor.config.app.mobileFont\r\n  #if this is a mobile version of the client\r\n  else\r\n    setInSession \"messageFontSize\", Meteor.config.app.desktopFont\r\n  setInSession 'display_slidingMenu', false\r\n  setInSession 'display_hiddenNavbarSection', false\r\n  if isLandscape()\r\n    setInSession 'display_usersList', true\r\n  else\r\n    setInSession 'display_usersList', false\r\n  setInSession 'display_menu', false\r\n  setInSession 'chatInputMinHeight', 0\r\n\r\n  #keep notifications and an opened private chat tab if page was refreshed\r\n  #reset to default if that's a new user\r\n  if loginOrRefresh()\r\n    initChats = [\r\n      userId: \"PUBLIC_CHAT\"\r\n      gotMail: false\r\n      number: 0\r\n    ]\r\n    setInSession 'chats', initChats\r\n    setInSession \"inChatWith\", 'PUBLIC_CHAT'\r\n\r\n  TimeSync.loggingEnabled = false # suppresses the log messages from timesync\r\n\r\n#true if it is a new user, false if the client was just refreshed\r\n@loginOrRefresh = ->\r\n  userId = getInSession 'userId'\r\n  checkId = getInSession 'checkId'\r\n  if checkId is undefined\r\n    setInSession 'checkId', userId\r\n    return true\r\n  else if userId isnt checkId\r\n    setInSession 'checkId', userId\r\n    return true\r\n  else\r\n    return false\r\n\r\n@onLoadComplete = ->\r\n  document.title = \"BigBlueButton #{BBB.getMeetingName() ? 'HTML5'}\"\r\n  setDefaultSettings()\r\n\r\n  Meteor.Users.find().observe({\r\n  removed: (oldDocument) ->\r\n    if oldDocument.userId is getInSession 'userId'\r\n      document.location = getInSession 'logoutURL'\r\n  })\r\n\r\n# Detects a mobile device\r\n@isMobile = ->\r\n  navigator.userAgent.match(/Android/i) or\r\n  navigator.userAgent.match(/iPhone|iPad|iPod/i) or\r\n  navigator.userAgent.match(/BlackBerry/i) or\r\n  navigator.userAgent.match(/Windows Phone/i) or\r\n  navigator.userAgent.match(/IEMobile/i) or\r\n  navigator.userAgent.match(/BlackBerry/i) or\r\n  navigator.userAgent.match(/webOS/i)\r\n\r\n@isLandscape = ->\r\n  not isMobile() and\r\n  window.matchMedia('(orientation: landscape)').matches and      # browser is landscape\r\n  window.matchMedia('(min-device-aspect-ratio: 1/1)').matches    # device is landscape\r\n\r\n@isPortrait = ->\r\n  not isMobile() and\r\n  window.matchMedia('(orientation: portrait)').matches and       # browser is portrait\r\n  window.matchMedia('(min-device-aspect-ratio: 1/1)').matches    # device is landscape\r\n\r\n# Checks if the view is portrait and a mobile device is being used\r\n@isPortraitMobile = () ->\r\n isMobile() and\r\n window.matchMedia('(orientation: portrait)').matches and        # browser is portrait\r\n window.matchMedia('(max-device-aspect-ratio: 1/1)').matches     # device is portrait\r\n\r\n# Checks if the view is landscape and mobile device is being used\r\n@isLandscapeMobile = () ->\r\n  isMobile() and\r\n  window.matchMedia('(orientation: landscape)').matches and      # browser is landscape\r\n  window.matchMedia('(min-device-aspect-ratio: 1/1)').matches    # device is landscape\r\n\r\n@isLandscapePhone = () ->\r\n  # @phone-landscape media query:\r\n  window.matchMedia('(orientation: landscape)').matches and\r\n  window.matchMedia('(min-device-aspect-ratio: 1/1)').matches and\r\n  window.matchMedia('(max-device-width: 959px)').matches\r\n\r\n@isPortraitPhone = () ->\r\n  # @phone-portrait media query:\r\n  (window.matchMedia('(orientation: portrait)').matches and\r\n  window.matchMedia('(max-device-aspect-ratio: 1/1)').matches and\r\n  window.matchMedia('(max-device-width: 480px)').matches) or\r\n  # @phone-portrait-with-keyboard media query:\r\n  (window.matchMedia('(orientation: landscape)').matches and\r\n  window.matchMedia('(max-device-aspect-ratio: 1/1)').matches and\r\n  window.matchMedia('(max-device-width: 480px)').matches)\r\n\r\n@isPhone = () ->\r\n  isLandscapePhone() or isPortraitPhone()\r\n\r\n# The webpage orientation is now landscape\r\n@orientationBecameLandscape = ->\r\n  adjustChatInputHeight()\r\n# The webpage orientation is now portrait\r\n@orientationBecamePortrait = ->\r\n  adjustChatInputHeight()\r\n# Checks if only one panel (userlist/whiteboard/chatbar) is currently open\r\n@isOnlyOnePanelOpen = () ->\r\n  #(getInSession \"display_usersList\" ? 1 : 0) + (getInSession \"display_whiteboard\" ? 1 : 0) + (getInSession \"display_chatbar\" ? 1 : 0) is 1\r\n  getInSession(\"display_usersList\") + getInSession(\"display_whiteboard\") + getInSession(\"display_chatbar\") is 1\r\n\r\n# determines which browser is being used\r\n@getBrowserName = () ->\r\n  if navigator.userAgent.match(/Chrome/i)\r\n    return 'Chrome'\r\n  else if navigator.userAgent.match(/Firefox/i)\r\n    return 'Firefox'\r\n  else if navigator.userAgent.match(/Safari/i)\r\n    return 'Safari'\r\n  else if navigator.userAgent.match(/Trident/i)\r\n    return 'IE'\r\n  else\r\n    return null\r\n\r\n@scrollChatDown = () ->\r\n  $('#chatbody').scrollTop($('#chatbody')[0]?.scrollHeight)\r\n\r\n# changes the height of the chat input area if needed (based on the textarea content)\r\n@adjustChatInputHeight = () ->\r\n  if isLandscape()\r\n    $('#newMessageInput').css('height', 'auto')\r\n    projectedHeight = $('#newMessageInput')[0].scrollHeight + 23\r\n    if projectedHeight isnt $('.panel-footer').height() and\r\n    projectedHeight >= getInSession('chatInputMinHeight')\r\n      $('#newMessageInput').css('overflow', 'hidden') # prevents a scroll bar\r\n\r\n      # resizes the chat input area\r\n      $('.panel-footer').css('top', - (projectedHeight - 70) + 'px')\r\n      $('.panel-footer').css('height', projectedHeight + 'px')\r\n\r\n      $('#newMessageInput').height($('#newMessageInput')[0].scrollHeight)\r\n\r\n      # resizes the chat messages container\r\n      $('#chatbody').height($('#chat').height() - projectedHeight - 45)\r\n      $('#chatbody').scrollTop($('#chatbody')[0]?.scrollHeight)\r\n    $('#newMessageInput').css('height', '')\r\n  else if isPortrait()\r\n    $('.panel-footer').attr('style','')\r\n    $('#chatbody').attr('style','')\r\n    $('#newMessageInput').attr('style','')\r\n\r\n@toggleEmojisFAB = () ->\r\n  if $('.FABContainer').hasClass('openedFAB')\r\n    $('.FABContainer > button:nth-child(2)').css('opacity', $('.FABContainer > button:nth-child(2)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(3)').css('opacity', $('.FABContainer > button:nth-child(3)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(4)').css('opacity', $('.FABContainer > button:nth-child(4)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(5)').css('opacity', $('.FABContainer > button:nth-child(5)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(6)').css('opacity', $('.FABContainer > button:nth-child(6)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(7)').css('opacity', $('.FABContainer > button:nth-child(7)').css('opacity'))\r\n    $('.FABContainer').removeClass('openedFAB')\r\n    $('.FABContainer').addClass('closedFAB')\r\n  else\r\n    $('.FABContainer > button:nth-child(2)').css('opacity', $('.FABContainer > button:nth-child(2)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(3)').css('opacity', $('.FABContainer > button:nth-child(3)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(4)').css('opacity', $('.FABContainer > button:nth-child(4)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(5)').css('opacity', $('.FABContainer > button:nth-child(5)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(6)').css('opacity', $('.FABContainer > button:nth-child(6)').css('opacity'))\r\n    $('.FABContainer > button:nth-child(7)').css('opacity', $('.FABContainer > button:nth-child(7)').css('opacity'))\r\n    $('.FABContainer').removeClass('closedFAB')\r\n    $('.FABContainer').addClass('openedFAB')\r\n\r\n@toggleLeftHamburderIcon = () ->\r\n  if $('.leftHamburgerButton').hasClass('hamburgerToggledOn')\r\n    $('.leftHamburgerButton').removeClass('hamburgerToggledOn')\r\n  else\r\n    $('.leftHamburgerButton').addClass('hamburgerToggledOn')\r\n\r\n@toggleRightHamburderIcon = () ->\r\n  if $('.rightHamburgerButton').hasClass('hamburgerToggledOn')\r\n    $('.rightHamburgerButton').removeClass('hamburgerToggledOn')\r\n  else\r\n    $('.rightHamburgerButton').addClass('hamburgerToggledOn')\r\n\r\n@toggleUserlistMenu = () ->\r\n  if $('.userlistMenu').hasClass('menuOut')\r\n    $('.userlistMenu').removeClass('menuOut')\r\n  else\r\n    $('.userlistMenu').addClass('menuOut')\r\n\r\n@toggleSettingsMenu = () ->\r\n  if $('.settingsMenu').hasClass('menuOut')\r\n    $('.settingsMenu').removeClass('menuOut')\r\n  else\r\n    $('.settingsMenu').addClass('menuOut')\r\n"]}}