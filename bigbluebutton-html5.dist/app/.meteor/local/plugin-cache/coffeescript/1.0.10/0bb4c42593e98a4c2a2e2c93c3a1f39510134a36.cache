{"source":"__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nthis.WhiteboardCursorModel = (function() {\n  function WhiteboardCursorModel(paper, radius, color) {\n    this.paper = paper;\n    this.radius = radius != null ? radius : null;\n    this.color = color != null ? color : null;\n    this.draw = bind(this.draw, this);\n    if (this.radius == null) {\n      this.radius = 6;\n    }\n    if (this.color == null) {\n      this.color = \"#ff6666\";\n    }\n    this.cursor = null;\n    this.paper;\n  }\n\n  WhiteboardCursorModel.prototype.draw = function() {\n    this.cursor = this.paper.circle(0, 0, this.radius);\n    this.cursor.attr({\n      \"fill\": this.color,\n      \"stroke\": this.color,\n      \"opacity\": \"0.8\"\n    });\n    return $(this.cursor.node).on(\"mousewheel\", _.bind(this._onMouseWheel, this));\n  };\n\n  WhiteboardCursorModel.prototype.toFront = function() {\n    if (this.cursor != null) {\n      return this.cursor.toFront();\n    }\n  };\n\n  WhiteboardCursorModel.prototype.setRadius = function(value) {\n    if (this.cursor != null) {\n      return this.cursor.attr({\n        r: value\n      });\n    }\n  };\n\n  WhiteboardCursorModel.prototype.setPosition = function(x, y) {\n    if (this.cursor != null) {\n      return this.cursor.attr({\n        cx: x,\n        cy: y\n      });\n    }\n  };\n\n  WhiteboardCursorModel.prototype.undrag = function() {\n    if (this.cursor != null) {\n      return this.cursor.undrag();\n    }\n  };\n\n  WhiteboardCursorModel.prototype.drag = function(onMove, onStart, onEnd, target) {\n    if (target == null) {\n      target = null;\n    }\n    if (this.cursor != null) {\n      target || (target = this);\n      return this.cursor.drag(_.bind(onMove, target), _.bind(onStart, target), _.bind(onEnd, target));\n    }\n  };\n\n  WhiteboardCursorModel.prototype._onMouseWheel = function(e, delta) {\n    return this.trigger(\"cursor:mousewheel\", e, delta);\n  };\n\n  WhiteboardCursorModel.prototype.remove = function() {\n    return this.cursor.remove();\n  };\n\n  return WhiteboardCursorModel;\n\n})();\n","sourceMap":{"version":3,"file":"/client/whiteboard_models/whiteboard_cursor.coffee.js","sourceRoot":"","sources":["/client/whiteboard_models/whiteboard_cursor.coffee"],"names":[],"mappings":";AACA,IAAA,gFAAA;;AAAA,IAAO,CAAA;AAEQ,EAAA,+BAAC,KAAD,EAAS,MAAT,EAAuB,KAAvB,GAAA;AACX,IADY,IAAC,CAAA,QAAD,KACZ,CAAA;AAAA,IADoB,IAAC,CAAA,0BAAD,SAAQ,IAC5B,CAAA;AAAA,IADkC,IAAC,CAAA,wBAAD,QAAO,IACzC,CAAA;AAAA,qCAAA,CAAA;;MAAA,IAAC,CAAA,SAAU;KAAX;;MACA,IAAC,CAAA,QAAS;KADV;AAAA,IAEA,IAAC,CAAA,MAAD,GAAU,IAFV,CAAA;AAAA,IAGA,IAAC,CAAA,KAHD,CADW;EAAA,CAAb;;AAAA,kCAMA,IAAA,GAAM,SAAA,GAAA;AACJ,IAAA,IAAC,CAAA,MAAD,GAAU,IAAC,CAAA,KAAK,CAAC,MAAP,CAAc,CAAd,EAAiB,CAAjB,EAAoB,IAAC,CAAA,MAArB,CAAV,CAAA;AAAA,IACA,IAAC,CAAA,MAAM,CAAC,IAAR,CACE;AAAA,MAAA,MAAA,EAAQ,IAAC,CAAA,KAAT;AAAA,MACA,QAAA,EAAU,IAAC,CAAA,KADX;AAAA,MAEA,SAAA,EAAW,KAFX;KADF,CADA,CAAA;WAKA,CAAA,CAAE,IAAC,CAAA,MAAM,CAAC,IAAV,CAAe,CAAC,EAAhB,CAAmB,YAAnB,EAAiC,CAAC,CAAC,IAAF,CAAO,IAAC,CAAA,aAAR,EAAuB,IAAvB,CAAjC,EANI;EAAA,CANN,CAAA;;AAAA,kCAcA,OAAA,GAAS,SAAA,GAAA;AACP,IAAA,IAAqB,mBAArB;aAAA,IAAC,CAAA,MAAM,CAAC,OAAR,CAAA,EAAA;KADO;EAAA,CAdT,CAAA;;AAAA,kCAiBA,SAAA,GAAW,SAAC,KAAD,GAAA;AACT,IAAA,IAAG,mBAAH;aACE,IAAC,CAAA,MAAM,CAAC,IAAR,CAAa;AAAA,QAAA,CAAA,EAAG,KAAH;OAAb,EADF;KADS;EAAA,CAjBX,CAAA;;AAAA,kCAqBA,WAAA,GAAa,SAAC,CAAD,EAAI,CAAJ,GAAA;AACX,IAAA,IAAG,mBAAH;aACE,IAAC,CAAA,MAAM,CAAC,IAAR,CACE;AAAA,QAAA,EAAA,EAAI,CAAJ;AAAA,QACA,EAAA,EAAI,CADJ;OADF,EADF;KADW;EAAA,CArBb,CAAA;;AAAA,kCA2BA,MAAA,GAAQ,SAAA,GAAA;AACN,IAAA,IAAoB,mBAApB;aAAA,IAAC,CAAA,MAAM,CAAC,MAAR,CAAA,EAAA;KADM;EAAA,CA3BR,CAAA;;AAAA,kCA8BA,IAAA,GAAM,SAAC,MAAD,EAAS,OAAT,EAAkB,KAAlB,EAAyB,MAAzB,GAAA;;MAAyB,SAAO;KACpC;AAAA,IAAA,IAAG,mBAAH;AACE,MAAA,WAAA,SAAW,KAAX,CAAA;aACA,IAAC,CAAA,MAAM,CAAC,IAAR,CAAa,CAAC,CAAC,IAAF,CAAO,MAAP,EAAe,MAAf,CAAb,EAAqC,CAAC,CAAC,IAAF,CAAO,OAAP,EAAgB,MAAhB,CAArC,EAA8D,CAAC,CAAC,IAAF,CAAO,KAAP,EAAc,MAAd,CAA9D,EAFF;KADI;EAAA,CA9BN,CAAA;;AAAA,kCAmCA,aAAA,GAAe,SAAC,CAAD,EAAI,KAAJ,GAAA;WACb,IAAC,CAAA,OAAD,CAAS,mBAAT,EAA8B,CAA9B,EAAiC,KAAjC,EADa;EAAA,CAnCf,CAAA;;AAAA,kCAsCA,MAAA,GAAQ,SAAA,GAAA;WACN,IAAC,CAAA,MAAM,CAAC,MAAR,CAAA,EADM;EAAA,CAtCR,CAAA;;+BAAA;;IAFF,CAAA","sourcesContent":["# The cursor/pointer in the whiteboard\nclass @WhiteboardCursorModel\n\n  constructor: (@paper, @radius=null, @color=null) ->\n    @radius ?= 6\n    @color ?= \"#ff6666\" # a pinkish red\n    @cursor = null\n    @paper\n\n  draw: () =>\n    @cursor = @paper.circle(0, 0, @radius)\n    @cursor.attr\n      \"fill\": @color\n      \"stroke\": @color\n      \"opacity\": \"0.8\"\n    $(@cursor.node).on \"mousewheel\", _.bind(@_onMouseWheel, @)\n\n  toFront: () ->\n    @cursor.toFront() if @cursor?\n\n  setRadius: (value) ->\n    if @cursor?\n      @cursor.attr r: value\n\n  setPosition: (x, y) ->\n    if @cursor?\n      @cursor.attr\n        cx: x\n        cy: y\n\n  undrag: () ->\n    @cursor.undrag() if @cursor?\n\n  drag: (onMove, onStart, onEnd, target=null) ->\n    if @cursor?\n      target or= @\n      @cursor.drag _.bind(onMove, target), _.bind(onStart, target), _.bind(onEnd, target)\n\n  _onMouseWheel: (e, delta) ->\n    @trigger(\"cursor:mousewheel\", e, delta)\n\n  remove: () ->\n    @cursor.remove()"]}}