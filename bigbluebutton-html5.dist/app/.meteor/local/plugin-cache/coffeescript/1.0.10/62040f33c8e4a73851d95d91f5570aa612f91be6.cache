{"source":"__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\n\n/*\nThis file contains the BigBlueButton client APIs that will allow 3rd-party applications\nto embed the HTML5 client and interact with it through Javascript.\n\nHOW TO USE:\nSome APIs allow synchronous and asynchronous calls. When using asynchronous, the 3rd-party\nJS should register as listener for events listed at the bottom of this file. For synchronous,\n3rd-party JS should pass in a callback function when calling the API.\n\nFor an example on how to use these APIs, see:\n\nhttps://github.com/bigbluebutton/bigbluebutton/blob/master/bigbluebutton-client/resources/prod/lib/3rd-party.js\nhttps://github.com/bigbluebutton/bigbluebutton/blob/master/bigbluebutton-client/resources/prod/3rd-party.html\n */\nthis.BBB = (function() {\n  var BBB, listeners, returnOrCallback;\n  BBB = {};\n  returnOrCallback = function(res, callback) {\n    if ((callback != null) && typeof callback === \"function\") {\n      return callback(res);\n    } else {\n      return res;\n    }\n  };\n  BBB.isPollGoing = function(userId) {\n    if (userId !== void 0 && Meteor.Polls.findOne({\n      \"poll_info.users\": userId\n    })) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  BBB.getCurrentPoll = function(userId) {\n    if (userId !== void 0 && Meteor.Polls.findOne({\n      \"poll_info.users\": userId\n    })) {\n      return Meteor.Polls.findOne({\n        \"poll_info.users\": userId\n      });\n    }\n  };\n  BBB.sendPollResponseMessage = function(key, pollAnswerId) {\n    return Meteor.call(\"publishVoteMessage\", BBB.getMeetingId(), pollAnswerId, getInSession(\"userId\"), getInSession(\"authToken\"));\n  };\n  BBB.getMeetingId = function() {\n    var ref;\n    return (ref = Meteor.Meetings.findOne()) != null ? ref.meetingId : void 0;\n  };\n  BBB.getInternalMeetingId = function(callback) {};\n\n  /*\n    Queryies the user object via it's id\n   */\n  BBB.getUser = function(userId) {\n    return Meteor.Users.findOne({\n      userId: userId\n    });\n  };\n  BBB.getCurrentUser = function() {\n    return BBB.getUser(getInSession(\"userId\"));\n  };\n\n  /*\n  Query if the current user is sharing webcam.\n  \n  Param:\n  callback - function to return the result\n  \n  If you want to instead receive an event with the result, register a listener\n  for AM_I_SHARING_CAM_RESP (see below).\n   */\n  BBB.amISharingWebcam = function(callback) {\n    return false;\n  };\n\n  /*\n  \n  Query if another user is sharing her camera.\n  \n  Param:\n  userID : the id of the user that may be sharing the camera\n  callback: function if you want to be informed synchronously. Don't pass a function\n  if you want to be informed through an event. You have to register for\n  IS_USER_PUBLISHING_CAM_RESP (see below).\n   */\n  BBB.isUserSharingWebcam = function(userId, callback) {\n    return false;\n  };\n  BBB.amIInAudio = function(callback) {\n    var ref, ref1, ref2, user;\n    user = BBB.getCurrentUser();\n    return (user != null ? (ref = user.user) != null ? ref.listenOnly : void 0 : void 0) || (user != null ? (ref1 = user.user) != null ? (ref2 = ref1.voiceUser) != null ? ref2.joined : void 0 : void 0 : void 0);\n  };\n  BBB.amIListenOnlyAudio = function(callback) {\n    var ref, ref1;\n    return (ref = BBB.getCurrentUser()) != null ? (ref1 = ref.user) != null ? ref1.listenOnly : void 0 : void 0;\n  };\n  BBB.amISharingAudio = function(callback) {\n    var ref;\n    return BBB.isUserSharingAudio((ref = BBB.getCurrentUser()) != null ? ref.userId : void 0);\n  };\n  BBB.amITalking = function(callback) {\n    var ref;\n    return BBB.isUserTalking((ref = BBB.getCurrentUser()) != null ? ref.userId : void 0);\n  };\n  BBB.isUserInAudio = function(userId, callback) {\n    var ref, ref1, ref2, user;\n    user = BBB.getUser(userId);\n    return (user != null ? (ref = user.user) != null ? ref.listenOnly : void 0 : void 0) || (user != null ? (ref1 = user.user) != null ? (ref2 = ref1.voiceUser) != null ? ref2.joined : void 0 : void 0 : void 0);\n  };\n  BBB.isUserListenOnlyAudio = function(userId, callback) {\n    var ref, ref1;\n    return (ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? ref1.listenOnly : void 0 : void 0;\n  };\n  BBB.isUserSharingAudio = function(userId, callback) {\n    var ref, ref1, ref2;\n    return (ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? (ref2 = ref1.voiceUser) != null ? ref2.joined : void 0 : void 0 : void 0;\n  };\n  BBB.isUserTalking = function(userId, callback) {\n    var ref, ref1, ref2;\n    return (ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? (ref2 = ref1.voiceUser) != null ? ref2.talking : void 0 : void 0 : void 0;\n  };\n  BBB.isUserPresenter = function(userId, callback) {\n    var ref, ref1;\n    return (ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? ref1.presenter : void 0 : void 0;\n  };\n  BBB.amILocked = function() {\n    var ref;\n    return (ref = BBB.getCurrentUser()) != null ? ref.user.locked : void 0;\n  };\n  BBB.isMyMicLocked = function() {\n    var lockedMicForRoom, ref;\n    lockedMicForRoom = (ref = Meteor.Meetings.findOne()) != null ? ref.roomLockSettings.disableMic : void 0;\n    return lockedMicForRoom && BBB.amILocked();\n  };\n  BBB.getCurrentSlide = function() {\n    var currentPresentation, currentSlide, presentationId, ref;\n    currentPresentation = Meteor.Presentations.findOne({\n      \"presentation.current\": true\n    });\n    presentationId = currentPresentation != null ? (ref = currentPresentation.presentation) != null ? ref.id : void 0 : void 0;\n    return currentSlide = Meteor.Slides.findOne({\n      \"presentationId\": presentationId,\n      \"slide.current\": true\n    });\n  };\n  BBB.getMeetingName = function() {\n    var ref;\n    return ((ref = Meteor.Meetings.findOne()) != null ? ref.meetingName : void 0) || null;\n  };\n  BBB.getNumberOfUsers = function() {\n    return Meteor.Users.find().count();\n  };\n  BBB.currentPresentationName = function() {\n    var ref, ref1;\n    return (ref = Meteor.Presentations.findOne({\n      \"presentation.current\": true\n    })) != null ? (ref1 = ref.presentation) != null ? ref1.name : void 0 : void 0;\n  };\n\n  /*\n  Raise user's hand.\n  Param:\n   */\n  BBB.lowerHand = function(meetingId, toUserId, byUserId, byAuthToken) {\n    return Meteor.call('userLowerHand', meetingId, toUserId, byUserId, byAuthToken);\n  };\n  BBB.raiseHand = function(meetingId, toUserId, byUserId, byAuthToken) {\n    return Meteor.call('userRaiseHand', meetingId, toUserId, byUserId, byAuthToken);\n  };\n  BBB.setEmojiStatus = function(meetingId, toUserId, byUserId, byAuthToken, status) {\n    return Meteor.call('userSetEmoji', meetingId, toUserId, byUserId, byAuthToken, status);\n  };\n  BBB.isUserEmojiStatusSet = function(userId) {\n    var ref, ref1, ref2, ref3;\n    return ((ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? ref1.emoji_status : void 0 : void 0) !== \"none\" && ((ref2 = BBB.getUser(userId)) != null ? (ref3 = ref2.user) != null ? ref3.emoji_status : void 0 : void 0) !== void 0;\n  };\n  BBB.isCurrentUserEmojiStatusSet = function() {\n    var ref;\n    return BBB.isUserEmojiStatusSet((ref = BBB.getCurrentUser()) != null ? ref.userId : void 0);\n  };\n  BBB.isMeetingRecording = function() {\n    var ref;\n    return (ref = MEteor.Meetings.findOne()) != null ? ref.recorded : void 0;\n  };\n\n  /*\n  Issue a switch presenter command.\n  \n  Param:\n  newPresenterUserID - the user id of the new presenter\n  \n  3rd-party JS must listen for SWITCHED_PRESENTER (see below) to get notified\n  of switch presenter events.\n   */\n  BBB.switchPresenter = function(newPresenterUserID) {};\n\n  /*\n  Query if current user is presenter.\n  \n  Params:\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for AM_I_PRESENTER_RESP (see below).\n   */\n  BBB.amIPresenter = function(callback) {\n    return returnOrCallback(false, callback);\n  };\n\n  /*\n  Eject a user.\n  \n  Params:\n  userID - userID of the user you want to eject.\n   */\n  BBB.ejectUser = function(userID) {};\n\n  /*\n  Query who is presenter.\n  \n  Params:\n  callback - function that gets executed for the response.\n   */\n  BBB.getPresenterUserID = function(callback) {};\n\n  /*\n  Query the current user's role.\n  Params:\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for GET_MY_ROLE_RESP (see below).\n   */\n  BBB.getMyRole = function(callback) {\n    return returnOrCallback(\"VIEWER\", callback);\n  };\n\n  /*\n  Query the current user's id.\n  \n  Params:\n  callback - function that gets executed for the response.\n   */\n  BBB.getMyUserID = function(callback) {\n    return returnOrCallback(getInSession(\"userId\"), callback);\n  };\n  BBB.getMyDBID = function(callback) {\n    var ref;\n    return returnOrCallback((ref = Meteor.Users.findOne({\n      userId: getInSession(\"userId\")\n    })) != null ? ref._id : void 0, callback);\n  };\n  BBB.getMyUserName = function(callback) {\n    var ref;\n    return BBB.getUserName((ref = BBB.getCurrentUser()) != null ? ref.userId : void 0);\n  };\n  BBB.getMyVoiceBridge = function(callback) {\n    var res;\n    res = Meteor.Meetings.findOne({}).voiceConf;\n    return returnOrCallback(res, callback);\n  };\n  BBB.getUserName = function(userId, callback) {\n    var ref, ref1;\n    return returnOrCallback((ref = BBB.getUser(userId)) != null ? (ref1 = ref.user) != null ? ref1.name : void 0 : void 0, callback);\n  };\n\n  /*\n  Query the current user's role.\n  Params:\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for GET_MY_ROLE_RESP (see below).\n   */\n  BBB.getMyUserInfo = function(callback) {\n    var result;\n    result = {\n      myUserID: BBB.getMyUserID(),\n      myUsername: BBB.getMyUserName(),\n      myInternalUserID: BBB.getMyUserID(),\n      myAvatarURL: null,\n      myRole: BBB.getMyRole(),\n      amIPresenter: BBB.amIPresenter(),\n      voiceBridge: BBB.getMyVoiceBridge(),\n      dialNumber: null\n    };\n    return returnOrCallback(result, callback);\n  };\n\n  /*\n  Query the meeting id.\n  \n  Params:\n  callback - function that gets executed for the response.\n   */\n\n  /*\n  Join the voice conference.\n  isListenOnly: signifies whether the user joining the conference audio requests to join the listen only stream\n   */\n  BBB.joinVoiceConference = function(callback, isListenOnly) {\n    if (BBB.isMyMicLocked()) {\n      callIntoConference(BBB.getMyVoiceBridge(), callback, true);\n    }\n    return callIntoConference(BBB.getMyVoiceBridge(), callback, isListenOnly);\n  };\n\n  /*\n  Leave the voice conference.\n   */\n  BBB.leaveVoiceConference = function(callback) {\n    return webrtc_hangup(callback);\n  };\n\n  /*\n  Get a hold of the object containing the call information\n   */\n  BBB.getCallStatus = function() {\n    return getCallStatus();\n  };\n\n  /*\n  Share user's webcam.\n  \n  Params:\n  publishInClient : (DO NOT USE - Unimplemented)\n   */\n  BBB.shareVideoCamera = function(publishInClient) {};\n\n  /*\n  Stop share user's webcam.\n   */\n  BBB.stopSharingCamera = function() {};\n\n  /*\n    Indicates if a user is muted\n   */\n  BBB.isUserMuted = function(id) {\n    var ref, ref1, ref2;\n    return (ref = BBB.getUser(id)) != null ? (ref1 = ref.user) != null ? (ref2 = ref1.voiceUser) != null ? ref2.muted : void 0 : void 0 : void 0;\n  };\n\n  /*\n    Indicates if the current user is muted\n   */\n  BBB.amIMuted = function() {\n    return BBB.isUserMuted(BBB.getCurrentUser().userId);\n  };\n\n  /*\n  Mute the current user.\n   */\n  BBB.muteMe = function() {\n    return BBB.muteUser(getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"));\n  };\n\n  /*\n  Unmute the current user.\n   */\n  BBB.unmuteMe = function() {\n    return BBB.unmuteUser(getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"));\n  };\n  BBB.muteUser = function(meetingId, userId, toMuteId, requesterId, requestToken) {\n    return Meteor.call('muteUser', meetingId, toMuteId, requesterId, getInSession(\"authToken\"));\n  };\n  BBB.unmuteUser = function(meetingId, userId, toMuteId, requesterId, requestToken) {\n    return Meteor.call('unmuteUser', meetingId, toMuteId, requesterId, getInSession(\"authToken\"));\n  };\n  BBB.toggleMyMic = function() {\n    var request;\n    request = BBB.amIMuted() ? \"unmuteUser\" : \"muteUser\";\n    return Meteor.call(request, BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"));\n  };\n\n  /*\n  Mute all the users.\n   */\n  BBB.muteAll = function() {};\n\n  /*\n  Unmute all the users.\n   */\n  BBB.unmuteAll = function() {};\n\n  /*\n  Switch to a new layout.\n  \n  Param:\n  newLayout : name of the layout as defined in layout.xml (found in /var/www/bigbluebutton/client/conf/layout.xml)\n   */\n  BBB.switchLayout = function(newLayout) {};\n\n  /*\n  Lock the layout.\n  \n  Locking the layout means that users will have the same layout with the moderator that issued the lock command.\n  Other users won't be able to move or resize the different windows.\n   */\n  BBB.lockLayout = function(lock) {};\n\n  /*\n  Request to send a public chat\n  fromUserID - the external user id for the sender\n  fontColor  - the color of the font to display the message\n  localeLang - the 2-char locale code (e.g. en) for the sender\n  message    - the message to send\n   */\n  BBB.sendPublicChatMessage = function(fontColor, localeLang, message) {\n    var messageForServer;\n    messageForServer = {\n      \"message\": message,\n      \"chat_type\": \"PUBLIC_CHAT\",\n      \"from_userid\": getInSession(\"userId\"),\n      \"from_username\": BBB.getMyUserName(),\n      \"from_tz_offset\": \"240\",\n      \"to_username\": \"public_chat_username\",\n      \"to_userid\": \"public_chat_userid\",\n      \"from_lang\": localeLang,\n      \"from_time\": getTime(),\n      \"from_color\": fontColor\n    };\n    return Meteor.call(\"sendChatMessagetoServer\", BBB.getMeetingId(), messageForServer, getInSession(\"userId\"), getInSession(\"authToken\"));\n  };\n\n  /*\n  Request to send a private chat\n  fromUserID - the external user id for the sender\n  fontColor  - the color of the font to display the message\n  localeLang - the 2-char locale code (e.g. en) for the sender\n  message    - the message to send\n  toUserID   - the external user id of the receiver\n   */\n  BBB.sendPrivateChatMessage = function(fontColor, localeLang, message, toUserID, toUserName) {\n    var messageForServer;\n    messageForServer = {\n      \"message\": message,\n      \"chat_type\": \"PRIVATE_CHAT\",\n      \"from_userid\": getInSession(\"userId\"),\n      \"from_username\": BBB.getMyUserName(),\n      \"from_tz_offset\": \"240\",\n      \"to_username\": toUserName,\n      \"to_userid\": toUserID,\n      \"from_lang\": localeLang,\n      \"from_time\": getTime(),\n      \"from_color\": fontColor\n    };\n    return Meteor.call(\"sendChatMessagetoServer\", BBB.getMeetingId(), messageForServer, getInSession(\"userId\"), getInSession(\"authToken\"));\n  };\n\n  /*\n  Request to display a presentation.\n  presentationID - the presentation to display\n   */\n  BBB.displayPresentation = function(presentationID) {};\n\n  /*\n  Query the list of uploaded presentations.\n   */\n  BBB.queryListOfPresentations = function() {};\n\n  /*\n  Request to delete a presentation.\n  presentationID - the presentation to delete\n   */\n  BBB.deletePresentation = function(presentationID) {};\n  BBB.goToPreviousPage = function() {\n    return Meteor.call('publishSwitchToPreviousSlideMessage', getInSession('meetingId'), getInSession('userId'), getInSession('authToken'));\n  };\n  BBB.goToNextPage = function() {\n    return Meteor.call('publishSwitchToNextSlideMessage', getInSession('meetingId'), getInSession('userId'), getInSession('authToken'));\n  };\n  BBB.webRTCConferenceCallStarted = function() {};\n  BBB.webRTCConferenceCallConnecting = function() {};\n  BBB.webRTCConferenceCallEnded = function() {};\n  BBB.webRTCConferenceCallFailed = function(errorcode) {};\n  BBB.webRTCConferenceCallWaitingForICE = function() {};\n  BBB.webRTCCallProgressCallback = function(progress) {};\n  BBB.webRTCEchoTestStarted = function() {};\n  BBB.webRTCEchoTestConnecting = function() {};\n  BBB.webRTCEchoTestFailed = function(reason) {};\n  BBB.webRTCEchoTestWaitingForICE = function() {};\n  BBB.webRTCEchoTestEnded = function() {};\n  BBB.webRTCMediaRequest = function() {};\n  BBB.webRTCMediaSuccess = function() {};\n  BBB.webRTCMediaFail = function() {};\n  BBB.webRTCWebcamRequest = function() {};\n  BBB.webRTCWebcamRequestSuccess = function() {};\n  BBB.webRTCWebcamRequestFail = function(reason) {};\n\n  /*\n  Stores the 3rd-party app event listeners **\n   */\n  listeners = {};\n\n  /*\n  3rd-party apps should use this method to register to listen for events.\n   */\n  BBB.listen = function(eventName, handler) {};\n\n  /*\n  3rd-party app should use this method to unregister listener for a given event.\n   */\n  BBB.unlisten = function(eventName, handler) {};\n  BBB.init = function(callback) {};\n  return BBB;\n})();\n","sourceMap":{"version":3,"file":"/client/lib/bbb_api_bridge.coffee.js","sourceRoot":"","sources":["/client/lib/bbb_api_bridge.coffee"],"names":[],"mappings":"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","sourcesContent":["###\nThis file contains the BigBlueButton client APIs that will allow 3rd-party applications\nto embed the HTML5 client and interact with it through Javascript.\n\nHOW TO USE:\nSome APIs allow synchronous and asynchronous calls. When using asynchronous, the 3rd-party\nJS should register as listener for events listed at the bottom of this file. For synchronous,\n3rd-party JS should pass in a callback function when calling the API.\n\nFor an example on how to use these APIs, see:\n\nhttps://github.com/bigbluebutton/bigbluebutton/blob/master/bigbluebutton-client/resources/prod/lib/3rd-party.js\nhttps://github.com/bigbluebutton/bigbluebutton/blob/master/bigbluebutton-client/resources/prod/3rd-party.html\n###\n\n@BBB = (->\n\n  BBB = {}\n\n  returnOrCallback = (res, callback) ->\n    if callback? and typeof callback is \"function\"\n      callback res\n    else\n      res\n\n  BBB.isPollGoing = (userId) ->\n    if userId isnt undefined and Meteor.Polls.findOne({\"poll_info.users\": userId})\n      return true\n    else\n      return false\n\n  BBB.getCurrentPoll = (userId) ->\n    if userId isnt undefined and Meteor.Polls.findOne({\"poll_info.users\": userId})\n      return Meteor.Polls.findOne({\"poll_info.users\": userId})\n\n  BBB.sendPollResponseMessage = (key, pollAnswerId) ->\n    Meteor.call \"publishVoteMessage\", BBB.getMeetingId(), pollAnswerId, getInSession(\"userId\"), getInSession(\"authToken\")\n\n  BBB.getMeetingId = ->\n    Meteor.Meetings.findOne()?.meetingId\n\n  BBB.getInternalMeetingId = (callback) ->\n\n  ###\n    Queryies the user object via it's id\n  ###\n  BBB.getUser = (userId) ->\n    Meteor.Users.findOne({userId: userId})\n\n  BBB.getCurrentUser = () ->\n    BBB.getUser(getInSession(\"userId\"))\n\n  ###\n  Query if the current user is sharing webcam.\n\n  Param:\n  callback - function to return the result\n\n  If you want to instead receive an event with the result, register a listener\n  for AM_I_SHARING_CAM_RESP (see below).\n  ###\n  BBB.amISharingWebcam = (callback) ->\n    # BBB.isUserSharingWebcam BBB.getCurrentUser()?.userId\n    return false\n\n  ###\n\n  Query if another user is sharing her camera.\n\n  Param:\n  userID : the id of the user that may be sharing the camera\n  callback: function if you want to be informed synchronously. Don't pass a function\n  if you want to be informed through an event. You have to register for\n  IS_USER_PUBLISHING_CAM_RESP (see below).\n  ###\n  BBB.isUserSharingWebcam = (userId, callback) ->\n    # BBB.getUser(userId)?.user?.webcam_stream?.length isnt 0\n    return false\n\n\n  # returns whether the user has joined any type of audio\n  BBB.amIInAudio = (callback) ->\n    user = BBB.getCurrentUser()\n    user?.user?.listenOnly or user?.user?.voiceUser?.joined\n\n  # returns true if the user has joined the listen only audio stream\n  BBB.amIListenOnlyAudio = (callback) ->\n    BBB.getCurrentUser()?.user?.listenOnly\n\n  # returns whether the user has joined the voice conference and is sharing audio through a microphone\n  BBB.amISharingAudio = (callback) ->\n    BBB.isUserSharingAudio BBB.getCurrentUser()?.userId\n\n  # returns whether the user is currently talking\n  BBB.amITalking = (callback) ->\n    BBB.isUserTalking BBB.getCurrentUser()?.userId\n\n  BBB.isUserInAudio = (userId, callback) ->\n    user = BBB.getUser(userId)\n    user?.user?.listenOnly or user?.user?.voiceUser?.joined\n\n  BBB.isUserListenOnlyAudio = (userId, callback) ->\n    BBB.getUser(userId)?.user?.listenOnly\n\n  BBB.isUserSharingAudio = (userId, callback) ->\n    BBB.getUser(userId)?.user?.voiceUser?.joined\n\n  BBB.isUserTalking = (userId, callback) ->\n    BBB.getUser(userId)?.user?.voiceUser?.talking\n\n  BBB.isUserPresenter = (userId, callback) ->\n    BBB.getUser(userId)?.user?.presenter\n\n  # returns true if the current user is marked as locked\n  BBB.amILocked = ->\n    return BBB.getCurrentUser()?.user.locked\n\n  # check whether the user is locked AND the current lock settings for the room\n  # includes locking the microphone of viewers (listenOnly is still alowed)\n  BBB.isMyMicLocked = ->\n    lockedMicForRoom = Meteor.Meetings.findOne()?.roomLockSettings.disableMic\n    # note that voiceUser.locked is not used in BigBlueButton at this stage (April 2015)\n\n    return lockedMicForRoom and BBB.amILocked()\n\n  BBB.getCurrentSlide = ->\n    currentPresentation = Meteor.Presentations.findOne({\"presentation.current\": true})\n    presentationId = currentPresentation?.presentation?.id\n    currentSlide = Meteor.Slides.findOne({\"presentationId\": presentationId, \"slide.current\": true})\n\n  BBB.getMeetingName = ->\n    Meteor.Meetings.findOne()?.meetingName or null\n\n  BBB.getNumberOfUsers = ->\n    Meteor.Users.find().count()\n\n  BBB.currentPresentationName = ->\n    Meteor.Presentations.findOne({\"presentation.current\": true})?.presentation?.name\n\n  ###\n  Raise user's hand.\n  Param:\n\n  ###\n  BBB.lowerHand = (meetingId, toUserId, byUserId, byAuthToken) ->\n    Meteor.call('userLowerHand', meetingId, toUserId, byUserId, byAuthToken)\n\n  BBB.raiseHand = (meetingId, toUserId, byUserId, byAuthToken) ->\n    Meteor.call('userRaiseHand', meetingId, toUserId, byUserId, byAuthToken)\n\n  BBB.setEmojiStatus = (meetingId, toUserId, byUserId, byAuthToken, status) ->\n    Meteor.call('userSetEmoji', meetingId, toUserId, byUserId, byAuthToken, status)\n\n  BBB.isUserEmojiStatusSet = (userId) ->\n    BBB.getUser(userId)?.user?.emoji_status isnt \"none\" and BBB.getUser(userId)?.user?.emoji_status isnt undefined\n\n  BBB.isCurrentUserEmojiStatusSet = ->\n    BBB.isUserEmojiStatusSet(BBB.getCurrentUser()?.userId)\n\n  BBB.isMeetingRecording = ->\n    MEteor.Meetings.findOne()?.recorded\n\n\n  ###\n  Issue a switch presenter command.\n\n  Param:\n  newPresenterUserID - the user id of the new presenter\n\n  3rd-party JS must listen for SWITCHED_PRESENTER (see below) to get notified\n  of switch presenter events.\n  ###\n  BBB.switchPresenter = (newPresenterUserID) ->\n\n  ###\n  Query if current user is presenter.\n\n  Params:\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for AM_I_PRESENTER_RESP (see below).\n  ###\n  BBB.amIPresenter = (callback) ->\n    returnOrCallback false, callback\n\n  ###\n  Eject a user.\n\n  Params:\n  userID - userID of the user you want to eject.\n  ###\n  BBB.ejectUser = (userID) ->\n\n  ###\n  Query who is presenter.\n\n  Params:\n  callback - function that gets executed for the response.\n  ###\n  BBB.getPresenterUserID = (callback) ->\n\n  ###\n  Query the current user's role.\n  Params:\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for GET_MY_ROLE_RESP (see below).\n  ###\n  BBB.getMyRole = (callback) ->\n    returnOrCallback \"VIEWER\", callback\n\n  ###\n  Query the current user's id.\n\n  Params:\n  callback - function that gets executed for the response.\n  ###\n  BBB.getMyUserID = (callback) ->\n    returnOrCallback getInSession(\"userId\"), callback\n\n\n  BBB.getMyDBID = (callback) ->\n    returnOrCallback Meteor.Users.findOne({userId:getInSession(\"userId\")})?._id, callback\n\n\n  BBB.getMyUserName = (callback) ->\n    BBB.getUserName(BBB.getCurrentUser()?.userId)\n\n  BBB.getMyVoiceBridge = (callback) ->\n    res = Meteor.Meetings.findOne({}).voiceConf\n    returnOrCallback res, callback\n\n  BBB.getUserName = (userId, callback) ->\n    returnOrCallback BBB.getUser(userId)?.user?.name, callback\n\n  ###\n  Query the current user's role.\n  Params:\n  callback - function if you want a callback as response. Otherwise, you need to listen\n  for GET_MY_ROLE_RESP (see below).\n  ###\n  BBB.getMyUserInfo = (callback) ->\n    result =\n      myUserID: BBB.getMyUserID()\n      myUsername: BBB.getMyUserName()\n      myInternalUserID: BBB.getMyUserID()\n      myAvatarURL: null\n      myRole: BBB.getMyRole()\n      amIPresenter: BBB.amIPresenter()\n      voiceBridge: BBB.getMyVoiceBridge()\n      dialNumber: null\n\n    returnOrCallback(result, callback)\n\n  ###\n  Query the meeting id.\n\n  Params:\n  callback - function that gets executed for the response.\n  ###\n\n\n  ###\n  Join the voice conference.\n  isListenOnly: signifies whether the user joining the conference audio requests to join the listen only stream\n  ###\n  BBB.joinVoiceConference = (callback, isListenOnly) ->\n    if BBB.isMyMicLocked()\n      callIntoConference(BBB.getMyVoiceBridge(), callback, true) #true because we force isListenOnly mode\n    callIntoConference(BBB.getMyVoiceBridge(), callback, isListenOnly)\n\n  ###\n  Leave the voice conference.\n  ###\n  BBB.leaveVoiceConference = (callback) ->\n    webrtc_hangup callback # sign out of call\n\n  ###\n  Get a hold of the object containing the call information\n  ###\n  BBB.getCallStatus = ->\n    getCallStatus()\n\n  ###\n  Share user's webcam.\n\n  Params:\n  publishInClient : (DO NOT USE - Unimplemented)\n  ###\n  BBB.shareVideoCamera = (publishInClient) ->\n\n  ###\n  Stop share user's webcam.\n  ###\n  BBB.stopSharingCamera = ->\n\n  ###\n    Indicates if a user is muted\n  ###\n  BBB.isUserMuted = (id) ->\n    BBB.getUser(id)?.user?.voiceUser?.muted\n\n  ###\n    Indicates if the current user is muted\n  ###\n  BBB.amIMuted = ->\n    BBB.isUserMuted(BBB.getCurrentUser().userId)\n\n  ###\n  Mute the current user.\n  ###\n  BBB.muteMe = ->\n    BBB.muteUser(getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"))\n  ###\n  Unmute the current user.\n  ###\n  BBB.unmuteMe = ->\n    BBB.unmuteUser(getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"))\n\n  BBB.muteUser = (meetingId, userId, toMuteId, requesterId, requestToken) ->\n    Meteor.call('muteUser', meetingId, toMuteId, requesterId, getInSession(\"authToken\"))\n\n  BBB.unmuteUser = (meetingId, userId, toMuteId, requesterId, requestToken) ->\n    Meteor.call('unmuteUser', meetingId, toMuteId, requesterId, getInSession(\"authToken\"))\n\n  BBB.toggleMyMic = ->\n    request = if BBB.amIMuted() then \"unmuteUser\" else \"muteUser\"\n    Meteor.call(request, BBB.getMeetingId(), getInSession(\"userId\"), getInSession(\"userId\"), getInSession(\"authToken\"))\n\n  ###\n  Mute all the users.\n  ###\n  BBB.muteAll = ->\n\n  ###\n  Unmute all the users.\n  ###\n  BBB.unmuteAll = ->\n\n  ###\n  Switch to a new layout.\n\n  Param:\n  newLayout : name of the layout as defined in layout.xml (found in /var/www/bigbluebutton/client/conf/layout.xml)\n  ###\n  BBB.switchLayout = (newLayout) ->\n\n  ###\n  Lock the layout.\n\n  Locking the layout means that users will have the same layout with the moderator that issued the lock command.\n  Other users won't be able to move or resize the different windows.\n  ###\n  BBB.lockLayout = (lock) ->\n\n  ###\n  Request to send a public chat\n  fromUserID - the external user id for the sender\n  fontColor  - the color of the font to display the message\n  localeLang - the 2-char locale code (e.g. en) for the sender\n  message    - the message to send\n  ###\n  BBB.sendPublicChatMessage = (fontColor, localeLang, message) ->\n    messageForServer = { # construct message for server\n      \"message\": message\n      \"chat_type\": \"PUBLIC_CHAT\"\n      \"from_userid\": getInSession(\"userId\")\n      \"from_username\": BBB.getMyUserName()\n      \"from_tz_offset\": \"240\"\n      \"to_username\": \"public_chat_username\"\n      \"to_userid\": \"public_chat_userid\"\n      \"from_lang\": localeLang\n      \"from_time\": getTime()\n      \"from_color\": fontColor\n    }\n\n    Meteor.call \"sendChatMessagetoServer\", BBB.getMeetingId(), messageForServer, getInSession(\"userId\"), getInSession(\"authToken\")\n\n  ###\n  Request to send a private chat\n  fromUserID - the external user id for the sender\n  fontColor  - the color of the font to display the message\n  localeLang - the 2-char locale code (e.g. en) for the sender\n  message    - the message to send\n  toUserID   - the external user id of the receiver\n  ###\n  BBB.sendPrivateChatMessage = (fontColor, localeLang, message, toUserID, toUserName) ->\n    messageForServer = { # construct message for server\n      \"message\": message\n      \"chat_type\": \"PRIVATE_CHAT\"\n      \"from_userid\": getInSession(\"userId\")\n      \"from_username\": BBB.getMyUserName()\n      \"from_tz_offset\": \"240\"\n      \"to_username\": toUserName\n      \"to_userid\": toUserID\n      \"from_lang\": localeLang\n      \"from_time\": getTime()\n      \"from_color\": fontColor\n    }\n\n    Meteor.call \"sendChatMessagetoServer\", BBB.getMeetingId(), messageForServer, getInSession(\"userId\"), getInSession(\"authToken\")\n\n  ###\n  Request to display a presentation.\n  presentationID - the presentation to display\n  ###\n  BBB.displayPresentation = (presentationID) ->\n\n  ###\n  Query the list of uploaded presentations.\n  ###\n  BBB.queryListOfPresentations = ->\n\n  ###\n  Request to delete a presentation.\n  presentationID - the presentation to delete\n  ###\n  BBB.deletePresentation = (presentationID) ->\n\n  # Request to switch the presentation to the previous slide\n  BBB.goToPreviousPage = () ->\n    Meteor.call('publishSwitchToPreviousSlideMessage',\n      getInSession('meetingId'),\n      getInSession('userId'),\n      getInSession('authToken'))\n\n  # Request to switch the presentation to the next slide\n  BBB.goToNextPage = () ->\n    Meteor.call('publishSwitchToNextSlideMessage',\n      getInSession('meetingId'),\n      getInSession('userId'),\n      getInSession('authToken'))\n\n  BBB.webRTCConferenceCallStarted = ->\n\n  BBB.webRTCConferenceCallConnecting = ->\n\n  BBB.webRTCConferenceCallEnded = ->\n\n  BBB.webRTCConferenceCallFailed = (errorcode) ->\n\n  BBB.webRTCConferenceCallWaitingForICE = ->\n\n  BBB.webRTCCallProgressCallback = (progress) ->\n\n  BBB.webRTCEchoTestStarted = ->\n\n  BBB.webRTCEchoTestConnecting = ->\n\n  BBB.webRTCEchoTestFailed = (reason) ->\n\n  BBB.webRTCEchoTestWaitingForICE = ->\n\n  BBB.webRTCEchoTestEnded = ->\n\n  BBB.webRTCMediaRequest = ->\n\n  BBB.webRTCMediaSuccess = ->\n\n  BBB.webRTCMediaFail = ->\n\n  BBB.webRTCWebcamRequest = ->\n\n  BBB.webRTCWebcamRequestSuccess = ->\n\n  BBB.webRTCWebcamRequestFail = (reason) ->\n\n  # Third-party JS apps should use this to query if the BBB SWF file is ready to handle calls.\n\n  # ***********************************************************************************\n  # *       Broadcasting of events to 3rd-party apps.\n  # ************************************************************************************\n\n  ###\n  Stores the 3rd-party app event listeners **\n  ###\n  listeners = {}\n\n  ###\n  3rd-party apps should use this method to register to listen for events.\n  ###\n  BBB.listen = (eventName, handler) ->\n\n  ###\n  3rd-party app should use this method to unregister listener for a given event.\n  ###\n  BBB.unlisten = (eventName, handler) ->\n\n  BBB.init = (callback) ->\n\n  BBB\n)()\n"]}}