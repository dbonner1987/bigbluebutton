{"source":"__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar loadLib;\n\nloadLib = function(libname) {\n  var retryMessageCallback, successCallback;\n  successCallback = function() {};\n  retryMessageCallback = function(param) {\n    return console.log(\"Failed to load library\", param);\n  };\n  return Meteor.Loader.loadJs(window.location.origin + \"/client/lib/\" + libname, successCallback, 10000).fail(retryMessageCallback);\n};\n\nMeteor.startup(function() {\n  loadLib('sip.js');\n  loadLib('bbb_webrtc_bridge_sip.js');\n  loadLib('bbblogger.js');\n  return this.SessionAmplify = _.extend({}, Session, {\n    keys: _.object(_.map(amplify.store.sessionStorage(), function(value, key) {\n      return [key, JSON.stringify(value)];\n    })),\n    set: function(key, value) {\n      Session.set.apply(this, arguments);\n      amplify.store.sessionStorage(key, value);\n    }\n  });\n});\n\nTemplate.header.events({\n  \"click .chatBarIcon\": function(event) {\n    $(\".tooltip\").hide();\n    return toggleChatbar();\n  },\n  \"click .hideNavbarIcon\": function(event) {\n    $(\".tooltip\").hide();\n    return toggleNavbar();\n  },\n  \"click .leaveAudioButton\": function(event) {\n    return exitVoiceCall(event);\n  },\n  \"click .muteIcon\": function(event) {\n    $(\".tooltip\").hide();\n    return toggleMic(this);\n  },\n  \"click .hideNavbarIcon\": function(event) {\n    $(\".tooltip\").hide();\n    return toggleNavbar();\n  },\n  \"click .videoFeedIcon\": function(event) {\n    $(\".tooltip\").hide();\n    return toggleCam(this);\n  },\n  \"click .toggleUserlistButton\": function(event) {\n    if (isLandscape() || isLandscapeMobile()) {\n      return toggleUsersList();\n    } else {\n      if ($('.settingsMenu').hasClass('menuOut')) {\n        toggleSettingsMenu();\n        toggleRightHamburderIcon();\n      } else {\n        toggleShield();\n      }\n      toggleUserlistMenu();\n      return toggleLeftHamburderIcon();\n    }\n  },\n  \"click .toggleMenuButton\": function(event) {\n    if ($('.userlistMenu').hasClass('menuOut')) {\n      toggleUserlistMenu();\n      toggleLeftHamburderIcon();\n    } else {\n      toggleShield();\n    }\n    toggleSettingsMenu();\n    return toggleRightHamburderIcon();\n  },\n  \"click .btn\": function(event) {\n    return $(\".ui-tooltip\").hide();\n  }\n});\n\nTemplate.menu.events({\n  'click .slideButton': function(event) {\n    toggleShield();\n    toggleSettingsMenu();\n    toggleRightHamburderIcon();\n    return $('.slideButton').blur();\n  },\n  'click .toggleChatButton': function(event) {\n    return toggleChatbar();\n  }\n});\n\nTemplate.main.rendered = function() {\n  var lastOrientationWasLandscape;\n  $(\"#dialog\").dialog({\n    modal: true,\n    draggable: false,\n    resizable: false,\n    autoOpen: false,\n    dialogClass: 'no-close logout-dialog',\n    buttons: [\n      {\n        text: 'Yes',\n        click: function() {\n          userLogout(BBB.getMeetingId(), getInSession(\"userId\"), true);\n          return $(this).dialog(\"close\");\n        },\n        \"class\": 'btn btn-xs btn-primary active'\n      }, {\n        text: 'No',\n        click: function() {\n          $(this).dialog(\"close\");\n          return $(\".tooltip\").hide();\n        },\n        \"class\": 'btn btn-xs btn-default'\n      }\n    ],\n    open: function(event, ui) {\n      return $('.ui-widget-overlay').bind('click', function() {\n        if (isMobile()) {\n          return $(\"#dialog\").dialog('close');\n        }\n      });\n    },\n    position: {\n      my: 'right top',\n      at: 'right bottom',\n      of: '.signOutIcon'\n    }\n  });\n  lastOrientationWasLandscape = isLandscape();\n  $(window).resize(function() {\n    $('#dialog').dialog('close');\n    if (isLandscape() && !lastOrientationWasLandscape) {\n      orientationBecameLandscape();\n      return lastOrientationWasLandscape = true;\n    } else if (isPortrait() && lastOrientationWasLandscape) {\n      orientationBecamePortrait();\n      return lastOrientationWasLandscape = false;\n    }\n  });\n  $('#shield').click(function() {\n    return toggleSlidingMenu();\n  });\n  if (Meteor.config.app.autoJoinAudio) {\n    return onAudioJoinHelper();\n  }\n};\n\nTemplate.main.events({\n  'click .shield': function(event) {\n    $(\".tooltip\").hide();\n    toggleShield();\n    return closeMenus();\n  },\n  'click .settingsIcon': function(event) {\n    return $(\"#settingsModal\").foundation('reveal', 'open');\n  },\n  'click .signOutIcon': function(event) {\n    $('.signOutIcon').blur();\n    return $(\"#logoutModal\").foundation('reveal', 'open');\n  }\n});\n\nTemplate.main.gestures({\n  'panstart #container': function(event, template) {\n    var initTransformValue, menuPanned, panIsValid, screenWidth;\n    if (isPortraitMobile() && isPanHorizontal(event)) {\n      panIsValid = getInSession('panIsValid');\n      initTransformValue = getInSession('initTransform');\n      menuPanned = getInSession('menuPanned');\n      screenWidth = $('#container').width();\n      setInSession('panStarted', true);\n      if (panIsValid && menuPanned === 'left' && initTransformValue + event.deltaX >= 0 && initTransformValue + event.deltaX <= $('.left-drawer').width()) {\n        return $('.left-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)');\n      } else if (panIsValid && menuPanned === 'right' && initTransformValue + event.deltaX >= screenWidth - $('.right-drawer').width() && initTransformValue + event.deltaX <= screenWidth) {\n        return $('.right-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)');\n      }\n    }\n  },\n  'panend #container': function(event, template) {\n    var leftDrawerWidth, menuPanned, panIsValid, screenWidth;\n    if (isPortraitMobile()) {\n      panIsValid = getInSession('panIsValid');\n      menuPanned = getInSession('menuPanned');\n      leftDrawerWidth = $('.left-drawer').width();\n      screenWidth = $('#container').width();\n      setInSession('panStarted', false);\n      if (panIsValid && menuPanned === 'left' && $('.left-drawer').css('transform') !== 'none') {\n        if (parseInt($('.left-drawer').css('transform').split(',')[4]) < leftDrawerWidth / 2) {\n          $('.shield').removeClass('animatedShield');\n          $('.shield').css('opacity', '');\n          $('.left-drawer').removeClass('menuOut');\n          $('.left-drawer').css('transform', '');\n          $('.toggleUserlistButton').removeClass('hamburgerToggledOn');\n          $('.shield').removeClass('darken');\n        } else {\n          $('.left-drawer').css('transform', 'translateX(' + leftDrawerWidth + 'px)');\n          $('.shield').css('opacity', 0.5);\n          $('.left-drawer').addClass('menuOut');\n          $('.left-drawer').css('transform', '');\n          $('.toggleUserlistButton').addClass('hamburgerToggledOn');\n        }\n      }\n      if (panIsValid && menuPanned === 'right' && parseInt($('.right-drawer').css('transform').split(',')[4]) !== leftDrawerWidth) {\n        if (parseInt($('.right-drawer').css('transform').split(',')[4]) > screenWidth - $('.right-drawer').width() / 2) {\n          $('.shield').removeClass('animatedShield');\n          $('.shield').css('opacity', '');\n          $('.right-drawer').css('transform', 'translateX(' + screenWidth + 'px)');\n          $('.right-drawer').removeClass('menuOut');\n          $('.right-drawer').css('transform', '');\n          $('.toggleMenuButton').removeClass('hamburgerToggledOn');\n          $('.shield').removeClass('darken');\n        } else {\n          $('.shield').css('opacity', 0.5);\n          $('.right-drawer').css('transform', 'translateX(' + (screenWidth - $('.right-drawer').width()) + 'px)');\n          $('.right-drawer').addClass('menuOut');\n          $('.right-drawer').css('transform', '');\n          $('.toggleMenuButton').addClass('hamburgerToggledOn');\n        }\n      }\n      $('.left-drawer').addClass('userlistMenu');\n      $('.userlistMenu').removeClass('left-drawer');\n      $('.right-drawer').addClass('settingsMenu');\n      return $('.settingsMenu').removeClass('right-drawer');\n    }\n  },\n  'panright #container, panleft #container': function(event, template) {\n    var initTransformValue, leftDrawerWidth, menuPanned, panIsValid, rightDrawerWidth, screenWidth;\n    if (isPortraitMobile() && isPanHorizontal(event)) {\n      if (!getInSession('panStarted')) {\n        if (event.type === 'panright' && event.center.x <= $('#container').width() * 0.1) {\n          setInSession('panIsValid', true);\n          setInSession('menuPanned', 'left');\n        } else if (event.type === 'panleft' && event.center.x < $('#container').width() * 0.9) {\n          setInSession('panIsValid', true);\n          setInSession('menuPanned', 'left');\n        } else if (event.type === 'panleft' && event.center.x >= $('#container').width() * 0.9) {\n          setInSession('panIsValid', true);\n          setInSession('menuPanned', 'right');\n        } else if (event.type === 'panright' && event.center.x > $('#container').width() * 0.1) {\n          setInSession('panIsValid', true);\n          setInSession('menuPanned', 'right');\n        } else {\n          setInSession('panIsValid', false);\n        }\n        setInSession('eventType', event.type);\n        if (getInSession('menuPanned') === 'left') {\n          if ($('.userlistMenu').css('transform') !== 'none') {\n            setInSession('initTransform', parseInt($('.userlistMenu').css('transform').split(',')[4]));\n          } else if ($('.userlistMenu').hasClass('menuOut')) {\n            setInSession('initTransform', $('.userlistMenu').width());\n          } else {\n            setInSession('initTransform', 0);\n          }\n          $('.userlistMenu').addClass('left-drawer');\n          $('.left-drawer').removeClass('userlistMenu');\n        } else if (getInSession('menuPanned') === 'right') {\n          if ($('.settingsMenu').css('transform') !== 'none') {\n            setInSession('initTransform', parseInt($('.settingsMenu').css('transform').split(',')[4]));\n          } else if ($('.settingsMenu').hasClass('menuOut')) {\n            setInSession('initTransform', $('.settingsMenu').width());\n          } else {\n            setInSession('initTransform', 0);\n          }\n          $('.settingsMenu').addClass('right-drawer');\n          $('.right-drawer').removeClass('settingsMenu');\n        }\n      }\n      initTransformValue = getInSession('initTransform');\n      panIsValid = getInSession('panIsValid');\n      menuPanned = getInSession('menuPanned');\n      leftDrawerWidth = $('.left-drawer').width();\n      rightDrawerWidth = $('.right-drawer').width();\n      screenWidth = $('#container').width();\n      if (panIsValid && menuPanned === 'left' && initTransformValue + event.deltaX >= 0 && initTransformValue + event.deltaX <= leftDrawerWidth) {\n        if ($('.settingsMenu').hasClass('menuOut')) {\n          toggleSettingsMenu();\n          toggleRightHamburderIcon();\n        }\n        $('.left-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)');\n        if (!getInSession('panStarted')) {\n          $('.shield').addClass('animatedShield');\n        }\n        return $('.shield').css('opacity', 0.5 * (initTransformValue + event.deltaX) / leftDrawerWidth);\n      } else if (panIsValid && menuPanned === 'right' && initTransformValue + event.deltaX >= screenWidth - rightDrawerWidth && initTransformValue + event.deltaX <= screenWidth) {\n        if ($('.userlistMenu').hasClass('menuOut')) {\n          toggleUserlistMenu();\n          toggleLeftHamburderIcon();\n        }\n        $('.right-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)');\n        if (!getInSession('panStarted')) {\n          $('.shield').addClass('animatedShield');\n        }\n        return $('.shield').css('opacity', 0.5 * (screenWidth - initTransformValue - event.deltaX) / rightDrawerWidth);\n      }\n    }\n  }\n});\n\nTemplate.makeButton.rendered = function() {\n  return $('button[rel=tooltip]').tooltip();\n};\n","sourceMap":{"version":3,"file":"/client/main.coffee.js","sourceRoot":"","sources":["/client/main.coffee"],"names":[],"mappings":"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","sourcesContent":["# Helper to load javascript libraries from the BBB server\r\nloadLib = (libname) ->\r\n  successCallback = ->\r\n\r\n  retryMessageCallback = (param) ->\r\n    #Meteor.log.info \"Failed to load library\", param\r\n    console.log \"Failed to load library\", param\r\n\r\n  Meteor.Loader.loadJs(\"#{window.location.origin}/client/lib/#{libname}\", successCallback, 10000).fail(retryMessageCallback)\r\n\r\n# These settings can just be stored locally in session, created at start up\r\nMeteor.startup ->\r\n  # Load SIP libraries before the application starts\r\n  loadLib('sip.js')\r\n  loadLib('bbb_webrtc_bridge_sip.js')\r\n  loadLib('bbblogger.js')\r\n\r\n  @SessionAmplify = _.extend({}, Session,\r\n    keys: _.object(_.map(amplify.store.sessionStorage(), (value, key) ->\r\n      [\r\n        key\r\n        JSON.stringify(value)\r\n      ]\r\n    ))\r\n    set: (key, value) ->\r\n      Session.set.apply this, arguments\r\n      amplify.store.sessionStorage key, value\r\n      return\r\n  )\r\n#\r\nTemplate.header.events\r\n  \"click .chatBarIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleChatbar()\r\n\r\n  \"click .hideNavbarIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleNavbar()\r\n\r\n  \"click .leaveAudioButton\": (event) ->\r\n    exitVoiceCall event\r\n\r\n  \"click .muteIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleMic @\r\n\r\n  \"click .hideNavbarIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleNavbar()\r\n\r\n  \"click .videoFeedIcon\": (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleCam @\r\n\r\n  \"click .toggleUserlistButton\": (event) ->\r\n    if isLandscape() or isLandscapeMobile()\r\n      toggleUsersList()\r\n    else\r\n      if $('.settingsMenu').hasClass('menuOut')\r\n        toggleSettingsMenu()\r\n        toggleRightHamburderIcon()\r\n      else\r\n        toggleShield()\r\n      toggleUserlistMenu()\r\n      toggleLeftHamburderIcon()\r\n\r\n  \"click .toggleMenuButton\": (event) ->\r\n    if $('.userlistMenu').hasClass('menuOut')\r\n      toggleUserlistMenu()\r\n      toggleLeftHamburderIcon()\r\n    else\r\n      toggleShield()\r\n    toggleSettingsMenu()\r\n    toggleRightHamburderIcon()\r\n\r\n  \"click .btn\": (event) ->\r\n    $(\".ui-tooltip\").hide()\r\n\r\nTemplate.menu.events\r\n  'click .slideButton': (event) ->\r\n    toggleShield()\r\n    toggleSettingsMenu()\r\n    toggleRightHamburderIcon()\r\n    $('.slideButton').blur()\r\n\r\n  'click .toggleChatButton': (event) ->\r\n    toggleChatbar()\r\n\r\nTemplate.main.rendered = ->\r\n  $(\"#dialog\").dialog(\r\n    modal: true\r\n    draggable: false\r\n    resizable: false\r\n    autoOpen: false\r\n    dialogClass: 'no-close logout-dialog'\r\n    buttons: [\r\n      {\r\n        text: 'Yes'\r\n        click: () ->\r\n          userLogout BBB.getMeetingId(), getInSession(\"userId\"), true\r\n          $(this).dialog(\"close\")\r\n        class: 'btn btn-xs btn-primary active'\r\n      }\r\n      {\r\n        text: 'No'\r\n        click: () ->\r\n          $(this).dialog(\"close\")\r\n          $(\".tooltip\").hide()\r\n        class: 'btn btn-xs btn-default'\r\n      }\r\n    ]\r\n    open: (event, ui) ->\r\n      $('.ui-widget-overlay').bind 'click', () ->\r\n        if isMobile()\r\n          $(\"#dialog\").dialog('close')\r\n    position:\r\n      my: 'right top'\r\n      at: 'right bottom'\r\n      of: '.signOutIcon'\r\n  )\r\n\r\n  # keep track of the last orientation\r\n  lastOrientationWasLandscape = isLandscape()\r\n  $(window).resize( ->\r\n    $('#dialog').dialog('close')\r\n\r\n    # when the orientation switches call the handler\r\n    if isLandscape() and not lastOrientationWasLandscape\r\n        orientationBecameLandscape()\r\n        lastOrientationWasLandscape = true\r\n    else if isPortrait() and lastOrientationWasLandscape\r\n        orientationBecamePortrait()\r\n        lastOrientationWasLandscape = false\r\n  )\r\n\r\n  $('#shield').click () ->\r\n    toggleSlidingMenu()\r\n\r\n  if Meteor.config.app.autoJoinAudio\r\n    onAudioJoinHelper()\r\n\r\nTemplate.main.events\r\n  'click .shield': (event) ->\r\n    $(\".tooltip\").hide()\r\n    toggleShield()\r\n    closeMenus()\r\n\r\n  'click .settingsIcon': (event) ->\r\n    $(\"#settingsModal\").foundation('reveal', 'open');\r\n\r\n  'click .signOutIcon': (event) ->\r\n    $('.signOutIcon').blur()\r\n    $(\"#logoutModal\").foundation('reveal', 'open');\r\n\r\nTemplate.main.gestures\r\n  'panstart #container': (event, template) ->\r\n    if isPortraitMobile() and isPanHorizontal(event)\r\n      panIsValid = getInSession('panIsValid')\r\n      initTransformValue = getInSession('initTransform')\r\n      menuPanned = getInSession('menuPanned')\r\n      screenWidth = $('#container').width()\r\n\r\n      setInSession 'panStarted', true\r\n\r\n      if panIsValid and\r\n      menuPanned is 'left' and\r\n      initTransformValue + event.deltaX >= 0 and\r\n      initTransformValue + event.deltaX <= $('.left-drawer').width()\r\n        $('.left-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n      else if panIsValid and\r\n      menuPanned is 'right' and\r\n      initTransformValue + event.deltaX >= screenWidth - $('.right-drawer').width() and\r\n      initTransformValue + event.deltaX <= screenWidth\r\n        $('.right-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n  'panend #container': (event, template) ->\r\n    if isPortraitMobile()\r\n      panIsValid = getInSession('panIsValid')\r\n      menuPanned = getInSession('menuPanned')\r\n      leftDrawerWidth = $('.left-drawer').width()\r\n      screenWidth = $('#container').width()\r\n\r\n      setInSession 'panStarted', false\r\n\r\n      if panIsValid and\r\n      menuPanned is 'left' and\r\n      $('.left-drawer').css('transform') isnt 'none'\r\n\r\n        if parseInt($('.left-drawer').css('transform').split(',')[4]) < leftDrawerWidth / 2\r\n          $('.shield').removeClass('animatedShield')\r\n          $('.shield').css('opacity', '')\r\n          $('.left-drawer').removeClass('menuOut')\r\n          $('.left-drawer').css('transform', '')\r\n          $('.toggleUserlistButton').removeClass('hamburgerToggledOn')\r\n          $('.shield').removeClass('darken') # in case it was opened by clicking a button\r\n        else\r\n          $('.left-drawer').css('transform', 'translateX(' + leftDrawerWidth + 'px)')\r\n          $('.shield').css('opacity', 0.5)\r\n          $('.left-drawer').addClass('menuOut')\r\n          $('.left-drawer').css('transform', '')\r\n          $('.toggleUserlistButton').addClass('hamburgerToggledOn')\r\n\r\n      if panIsValid and\r\n      menuPanned is 'right' and\r\n      parseInt($('.right-drawer').css('transform').split(',')[4]) isnt leftDrawerWidth\r\n\r\n        if parseInt($('.right-drawer').css('transform').split(',')[4]) > screenWidth - $('.right-drawer').width() / 2\r\n          $('.shield').removeClass('animatedShield')\r\n          $('.shield').css('opacity', '')\r\n          $('.right-drawer').css('transform', 'translateX(' + screenWidth + 'px)')\r\n          $('.right-drawer').removeClass('menuOut')\r\n          $('.right-drawer').css('transform', '')\r\n          $('.toggleMenuButton').removeClass('hamburgerToggledOn')\r\n          $('.shield').removeClass('darken') # in case it was opened by clicking a button\r\n        else\r\n          $('.shield').css('opacity', 0.5)\r\n          $('.right-drawer').css('transform', 'translateX(' + (screenWidth - $('.right-drawer').width()) + 'px)')\r\n          $('.right-drawer').addClass('menuOut')\r\n          $('.right-drawer').css('transform', '')\r\n          $('.toggleMenuButton').addClass('hamburgerToggledOn')\r\n\r\n      $('.left-drawer').addClass('userlistMenu')\r\n      $('.userlistMenu').removeClass('left-drawer')\r\n\r\n      $('.right-drawer').addClass('settingsMenu')\r\n      $('.settingsMenu').removeClass('right-drawer')\r\n\r\n  'panright #container, panleft #container': (event, template) ->\r\n    if isPortraitMobile() and isPanHorizontal(event)\r\n\r\n      # panright/panleft is always triggered once right before panstart\r\n      if !getInSession('panStarted')\r\n\r\n        # opening the left-hand menu\r\n        if event.type is 'panright' and\r\n        event.center.x <= $('#container').width() * 0.1\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'left'\r\n\r\n        # closing the left-hand menu\r\n        else if event.type is 'panleft' and\r\n        event.center.x < $('#container').width() * 0.9\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'left'\r\n\r\n        # opening the right-hand menu\r\n        else if event.type is 'panleft' and\r\n        event.center.x >= $('#container').width() * 0.9\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'right'\r\n\r\n        # closing the right-hand menu\r\n        else if event.type is 'panright' and\r\n        event.center.x > $('#container').width() * 0.1\r\n          setInSession 'panIsValid', true\r\n          setInSession 'menuPanned', 'right'\r\n\r\n        else\r\n          setInSession 'panIsValid', false\r\n\r\n        setInSession 'eventType', event.type\r\n\r\n        if getInSession('menuPanned') is 'left'\r\n          if $('.userlistMenu').css('transform') isnt 'none' # menu is already transformed\r\n            setInSession 'initTransform', parseInt($('.userlistMenu').css('transform').split(',')[4]) # translateX value\r\n          else if $('.userlistMenu').hasClass('menuOut')\r\n            setInSession 'initTransform', $('.userlistMenu').width()\r\n          else\r\n            setInSession 'initTransform', 0\r\n          $('.userlistMenu').addClass('left-drawer')\r\n          $('.left-drawer').removeClass('userlistMenu') # to prevent animations from Sled library\r\n\r\n        else if getInSession('menuPanned') is 'right'\r\n          if $('.settingsMenu').css('transform') isnt 'none' # menu is already transformed\r\n            setInSession 'initTransform', parseInt($('.settingsMenu').css('transform').split(',')[4]) # translateX value\r\n          else if $('.settingsMenu').hasClass('menuOut')\r\n            setInSession 'initTransform', $('.settingsMenu').width()\r\n          else\r\n            setInSession 'initTransform', 0\r\n          $('.settingsMenu').addClass('right-drawer')\r\n          $('.right-drawer').removeClass('settingsMenu') # to prevent animations from Sled library\r\n\r\n      initTransformValue = getInSession('initTransform')\r\n      panIsValid = getInSession('panIsValid')\r\n      menuPanned = getInSession('menuPanned')\r\n      leftDrawerWidth = $('.left-drawer').width()\r\n      rightDrawerWidth = $('.right-drawer').width()\r\n      screenWidth = $('#container').width()\r\n\r\n      # moving the left-hand menu\r\n      if panIsValid and\r\n      menuPanned is 'left' and\r\n      initTransformValue + event.deltaX >= 0 and\r\n      initTransformValue + event.deltaX <= leftDrawerWidth\r\n\r\n        if $('.settingsMenu').hasClass('menuOut')\r\n          toggleSettingsMenu()\r\n          toggleRightHamburderIcon()\r\n\r\n        $('.left-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n        if !getInSession('panStarted')\r\n          $('.shield').addClass('animatedShield')\r\n        $('.shield').css('opacity',\r\n          0.5 * (initTransformValue + event.deltaX) / leftDrawerWidth)\r\n\r\n      # moving the right-hand menu\r\n      else if panIsValid and\r\n      menuPanned is 'right' and\r\n      initTransformValue + event.deltaX >= screenWidth - rightDrawerWidth and\r\n      initTransformValue + event.deltaX <= screenWidth\r\n\r\n        if $('.userlistMenu').hasClass('menuOut')\r\n          toggleUserlistMenu()\r\n          toggleLeftHamburderIcon()\r\n\r\n        $('.right-drawer').css('transform', 'translateX(' + (initTransformValue + event.deltaX) + 'px)')\r\n\r\n        if !getInSession('panStarted')\r\n          $('.shield').addClass('animatedShield')\r\n        $('.shield').css('opacity',\r\n          0.5 * (screenWidth - initTransformValue - event.deltaX) / rightDrawerWidth)\r\n\r\nTemplate.makeButton.rendered = ->\r\n  $('button[rel=tooltip]').tooltip()\r\n"]}}